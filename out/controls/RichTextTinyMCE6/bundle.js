/*! For license information please see bundle.js.LICENSE.txt */
var pcf_tools_652ac3f36e1e4bca82eb3c1dc44e6fad;(()=>{var e={633:()=>{tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}})},152:(e,t,r)=>{r(633)},156:(e,t,r)=>{r(275)},275:()=>{function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function t(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach((function(e){var r,o,a;r=t,o=e,a=n[e],(o=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(o))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.ModelManager"),r=e=>t=>{return i=typeof(r=t),(null===r?"null":"object"===i&&Array.isArray(r)?"array":"object"===i&&(s=n=r,(o=String).prototype.isPrototypeOf(s)||(null===(a=n.constructor)||void 0===a?void 0:a.name)===o.name)?"string":i)===e;var r,n,o,a,i,s},n=e=>t=>typeof t===e,o=e=>t=>e===t,a=r("string"),i=r("object"),s=r("array"),l=o(null),d=n("boolean"),c=o(void 0),u=e=>!(e=>null==e)(e),m=n("function"),g=n("number"),h=()=>{},p=e=>()=>e,v=e=>e,f=(e,t)=>e===t;function b(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var a=r.concat(n);return e.apply(null,a)}}var y=e=>t=>!e(t),w=e=>e(),x=p(!1),C=p(!0);class k{constructor(e,t){this.tag=e,this.value=t}static some(e){return new k(!0,e)}static none(){return k.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?k.some(e(this.value)):k.none()}bind(e){return this.tag?e(this.value):k.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:k.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return u(e)?k.some(e):k.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?"some(".concat(this.value,")"):"none()"}}k.singletonNone=new k(!1);var S,_,O,E,T,A=Array.prototype.slice,M=Array.prototype.indexOf,N=Array.prototype.push,R=(e,t)=>{return r=e,n=t,M.call(r,n)>-1;var r,n},D=(e,t)=>{for(var r=0,n=e.length;r<n;r++)if(t(e[r],r))return!0;return!1},B=(e,t)=>{for(var r=[],n=0;n<e;n++)r.push(t(n));return r},L=(e,t)=>{for(var r=e.length,n=new Array(r),o=0;o<r;o++){var a=e[o];n[o]=t(a,o)}return n},H=(e,t)=>{for(var r=0,n=e.length;r<n;r++)t(e[r],r)},P=(e,t)=>{for(var r=[],n=[],o=0,a=e.length;o<a;o++){var i=e[o];(t(i,o)?r:n).push(i)}return{pass:r,fail:n}},I=(e,t)=>{for(var r=[],n=0,o=e.length;n<o;n++){var a=e[n];t(a,n)&&r.push(a)}return r},F=(e,t,r)=>(((e,t)=>{for(var r=e.length-1;r>=0;r--)t(e[r],r)})(e,((e,n)=>{r=t(r,e,n)})),r),z=(e,t,r)=>(H(e,((e,n)=>{r=t(r,e,n)})),r),V=(e,t)=>((e,t,r)=>{for(var n=0,o=e.length;n<o;n++){var a=e[n];if(t(a,n))return k.some(a);if(r(a,n))break}return k.none()})(e,t,x),Z=(e,t)=>{for(var r=0,n=e.length;r<n;r++)if(t(e[r],r))return k.some(r);return k.none()},j=e=>{for(var t=[],r=0,n=e.length;r<n;++r){if(!s(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);N.apply(t,e[r])}return t},U=(e,t)=>j(L(e,t)),W=(e,t)=>{for(var r=0,n=e.length;r<n;++r)if(!0!==t(e[r],r))return!1;return!0},q=(e,t)=>{for(var r={},n=0,o=e.length;n<o;n++){var a=e[n];r[String(a)]=t(a,n)}return r},$=(e,t)=>t>=0&&t<e.length?k.some(e[t]):k.none(),G=e=>$(e,0),K=e=>$(e,e.length-1),Y=(e,t)=>{for(var r=0;r<e.length;r++){var n=t(e[r],r);if(n.isSome())return n}return k.none()},X=Object.keys,J=Object.hasOwnProperty,Q=(e,t)=>{for(var r=X(e),n=0,o=r.length;n<o;n++){var a=r[n];t(e[a],a)}},ee=(e,t)=>te(e,((e,r)=>({k:r,v:t(e,r)}))),te=(e,t)=>{var r={};return Q(e,((e,n)=>{var o=t(e,n);r[o.k]=o.v})),r},re=(e,t)=>{var r=[];return Q(e,((e,n)=>{r.push(t(e,n))})),r},ne=e=>re(e,v),oe=(e,t)=>J.call(e,t),ae="undefined"!=typeof window?window:Function("return this;")(),ie=(e,t)=>((e,t)=>{for(var r=null!=t?t:ae,n=0;n<e.length&&null!=r;++n)r=r[e[n]];return r})(e.split("."),t),se=Object.getPrototypeOf,le=e=>{var t=ie("ownerDocument.defaultView",e);return i(e)&&((e=>((e,t)=>{var r=((e,t)=>ie(e,t))(e,t);if(null==r)throw new Error(e+" not available on this browser");return r})("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(se(e).constructor.name))},de=e=>e.dom.nodeName.toLowerCase(),ce=e=>e.dom.nodeType,ue=e=>t=>ce(t)===e,me=e=>8===ce(e)||"#comment"===de(e),ge=e=>he(e)&&le(e.dom),he=ue(1),pe=ue(3),ve=ue(9),fe=ue(11),be=e=>t=>he(t)&&de(t)===e,ye=(e,t,r)=>{if(!(a(r)||d(r)||g(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")},we=(e,t,r)=>{ye(e.dom,t,r)},xe=(e,t)=>{var r=e.dom;Q(t,((e,t)=>{ye(r,t,e)}))},Ce=(e,t)=>{var r=e.dom.getAttribute(t);return null===r?void 0:r},ke=(e,t)=>k.from(Ce(e,t)),Se=(e,t)=>{e.dom.removeAttribute(t)},_e=e=>z(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),Oe=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},Ee={fromHtml:(e,t)=>{var r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){var n="HTML does not have a single root node";throw console.error(n,e),new Error(n)}return Oe(r.childNodes[0])},fromTag:(e,t)=>{var r=(t||document).createElement(e);return Oe(r)},fromText:(e,t)=>{var r=(t||document).createTextNode(e);return Oe(r)},fromDom:Oe,fromPoint:(e,t,r)=>k.from(e.dom.elementFromPoint(t,r)).map(Oe)},Te=(e,t)=>{var r=e.dom;if(1!==r.nodeType)return!1;var n=r;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Ae=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,Me=(e,t)=>{var r=void 0===t?document:t.dom;return Ae(r)?k.none():k.from(r.querySelector(e)).map(Ee.fromDom)},Ne=(e,t)=>e.dom===t.dom,Re=(e,t)=>{var r=e.dom,n=t.dom;return r!==n&&r.contains(n)},De=Te,Be=e=>Ee.fromDom(e.dom.ownerDocument),Le=e=>ve(e)?e:Be(e),He=e=>k.from(e.dom.parentNode).map(Ee.fromDom),Pe=e=>k.from(e.dom.parentElement).map(Ee.fromDom),Ie=(e,t)=>{for(var r=m(t)?t:x,n=e.dom,o=[];null!==n.parentNode&&void 0!==n.parentNode;){var a=n.parentNode,i=Ee.fromDom(a);if(o.push(i),!0===r(i))break;n=a}return o},Fe=e=>k.from(e.dom.previousSibling).map(Ee.fromDom),ze=e=>k.from(e.dom.nextSibling).map(Ee.fromDom),Ve=e=>L(e.dom.childNodes,Ee.fromDom),Ze=(e,t)=>{var r=e.dom.childNodes;return k.from(r[t]).map(Ee.fromDom)},je=(e,t)=>{He(e).each((r=>{r.dom.insertBefore(t.dom,e.dom)}))},Ue=(e,t)=>{ze(e).fold((()=>{He(e).each((e=>{qe(e,t)}))}),(e=>{je(e,t)}))},We=(e,t)=>{var r=(e=>Ze(e,0))(e);r.fold((()=>{qe(e,t)}),(r=>{e.dom.insertBefore(t.dom,r.dom)}))},qe=(e,t)=>{e.dom.appendChild(t.dom)},$e=(e,t)=>{je(e,t),qe(t,e)},Ge=(e,t)=>{H(t,((r,n)=>{var o=0===n?e:t[n-1];Ue(o,r)}))},Ke=(e,t)=>{H(t,(t=>{qe(e,t)}))},Ye=e=>{e.dom.textContent="",H(Ve(e),(e=>{Xe(e)}))},Xe=e=>{var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Je=e=>{var t=Ve(e);t.length>0&&Ge(e,t),Xe(e)},Qe=(e,t)=>Ee.fromDom(e.dom.cloneNode(t)),et=e=>Qe(e,!1),tt=e=>Qe(e,!0),rt=(e,t)=>{var r=Ee.fromTag(t),n=_e(e);return xe(r,n),r},nt=["tfoot","thead","tbody","colgroup"],ot=(e,t,r)=>({element:e,rowspan:t,colspan:r}),at=(e,t,r)=>({element:e,cells:t,section:r}),it=(e,t,r)=>({element:e,isNew:t,isLocked:r}),st=(e,t,r,n)=>({element:e,cells:t,section:r,isNew:n}),lt=m(Element.prototype.attachShadow)&&m(Node.prototype.getRootNode),dt=p(lt),ct=lt?e=>Ee.fromDom(e.dom.getRootNode()):Le,ut=e=>Ee.fromDom(e.dom.host),mt=e=>{var t=pe(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;var r,n,o=t.ownerDocument;return(e=>{var t,r=ct(e);return fe(t=r)&&u(t.dom.host)?k.some(r):k.none()})(Ee.fromDom(t)).fold((()=>o.body.contains(t)),(r=mt,n=ut,e=>r(n(e))))},gt=e=>{var t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return Ee.fromDom(t)},ht=(e,t)=>{var r=[];return H(Ve(e),(e=>{t(e)&&(r=r.concat([e])),r=r.concat(ht(e,t))})),r},pt=(e,t,r)=>((e,r,n)=>I(Ie(e,n),(e=>Te(e,t))))(e,0,r),vt=(e,t)=>((e,r)=>I(Ve(e),(e=>Te(e,t))))(e),ft=(e,t)=>((e,t)=>{var r=void 0===t?document:t.dom;return Ae(r)?[]:L(r.querySelectorAll(e),Ee.fromDom)})(t,e),bt=(e,t,r,n,o)=>e(r,n)?k.some(r):m(o)&&o(r)?k.none():t(r,n,o),yt=(e,t,r)=>{for(var n=e.dom,o=m(r)?r:x;n.parentNode;){n=n.parentNode;var a=Ee.fromDom(n);if(t(a))return k.some(a);if(o(a))break}return k.none()},wt=(e,t,r)=>bt(((e,t)=>t(e)),yt,e,t,r),xt=(e,t,r)=>yt(e,(e=>Te(e,t)),r),Ct=(e,t)=>((e,r)=>V(e.dom.childNodes,(e=>{return r=Ee.fromDom(e),Te(r,t);var r})).map(Ee.fromDom))(e),kt=(e,t)=>Me(t,e),St=(e,t,r)=>bt(((e,t)=>Te(e,t)),xt,e,t,r),_t=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;return e.exists((e=>r(e,t)))},Ot=e=>{for(var t=[],r=e=>{t.push(e)},n=0;n<e.length;n++)e[n].each(r);return t},Et=(e,t)=>e?k.some(t):k.none(),Tt=(e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t,At=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,o=e.indexOf(t,r);return-1!==o&&(!!c(n)||o+t.length<=n)},Mt=(e,t)=>Tt(e,t,0),Nt=(e,t)=>Tt(e,t,e.length-t.length),Rt=(e=>t=>t.replace(e,""))(/^\s+|\s+$/g),Dt=e=>e.length>0,Bt=e=>void 0!==e.style&&m(e.style.getPropertyValue),Lt=(e,t,r)=>{if(!a(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);Bt(e)&&e.style.setProperty(t,r)},Ht=(e,t,r)=>{var n=e.dom;Lt(n,t,r)},Pt=(e,t)=>{var r=e.dom;Q(t,((e,t)=>{Lt(r,t,e)}))},It=(e,t)=>{var r=e.dom,n=window.getComputedStyle(r).getPropertyValue(t);return""!==n||mt(e)?n:Ft(r,t)},Ft=(e,t)=>Bt(e)?e.style.getPropertyValue(t):"",zt=(e,t)=>{var r=e.dom,n=Ft(r,t);return k.from(n).filter((e=>e.length>0))},Vt=(e,t)=>{((e,t)=>{Bt(e)&&e.style.removeProperty(t)})(e.dom,t),_t(ke(e,"style").map(Rt),"")&&Se(e,"style")},Zt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ke(e,t).map((e=>parseInt(e,10))).getOr(r)},jt=(e,t)=>Zt(e,t,1),Ut=e=>be("col")(e)?Zt(e,"span",1)>1:jt(e,"colspan")>1,Wt=e=>jt(e,"rowspan")>1,qt=(e,t)=>parseInt(It(e,t),10),$t=p(10),Gt=p(10),Kt=(e,t)=>Yt(e,t,C),Yt=(e,t,r)=>U(Ve(e),(e=>Te(e,t)?r(e)?[e]:[]:Yt(e,t,r))),Xt=(e,t)=>function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x;return r(t)?k.none():R(e,de(t))?k.some(t):xt(t,e.join(","),(e=>Te(e,"table")||r(e)))}(["td","th"],e,t),Jt=e=>Kt(e,"th,td"),Qt=e=>Te(e,"colgroup")?vt(e,"col"):U(rr(e),(e=>vt(e,"col"))),er=(e,t)=>St(e,"table",t),tr=e=>Kt(e,"tr"),rr=e=>er(e).fold(p([]),(e=>vt(e,"colgroup"))),nr=(e,t)=>L(e,(e=>{if("colgroup"===de(e)){var r=L(Qt(e),(e=>{var t=Zt(e,"span",1);return ot(e,1,t)}));return at(e,r,"colgroup")}var n=L(Jt(e),(e=>{var t=Zt(e,"rowspan",1),r=Zt(e,"colspan",1);return ot(e,t,r)}));return at(e,n,t(e))})),or=e=>He(e).map((e=>{var t=de(e);return(e=>R(nt,e))(t)?t:"tbody"})).getOr("tbody"),ar=e=>{var t=tr(e),r=[...rr(e),...t];return nr(r,or)},ir=e=>{var t,r=!1;return function(){if(!r){r=!0;for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];t=e.apply(null,o)}return t}},sr=()=>lr(0,0),lr=(e,t)=>({major:e,minor:t}),dr={nu:lr,detect:(e,t)=>{var r=String(t).toLowerCase();return 0===e.length?sr():((e,t)=>{var r=((e,t)=>{for(var r=0;r<e.length;r++){var n=e[r];if(n.test(t))return n}})(e,t);if(!r)return{major:0,minor:0};var n=e=>Number(t.replace(r,"$"+e));return lr(n(1),n(2))})(e,r)},unknown:sr},cr=(e,t)=>{var r=String(t).toLowerCase();return V(e,(e=>e.search(r)))},ur=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,mr=e=>t=>At(t,e),gr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>At(e,"edge/")&&At(e,"chrome")&&At(e,"safari")&&At(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ur],search:e=>At(e,"chrome")&&!At(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>At(e,"msie")||At(e,"trident")},{name:"Opera",versionRegexes:[ur,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:mr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:mr("firefox")},{name:"Safari",versionRegexes:[ur,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(At(e,"safari")||At(e,"mobile/"))&&At(e,"applewebkit")}],hr=[{name:"Windows",search:mr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>At(e,"iphone")||At(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:mr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:mr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:mr("linux"),versionRegexes:[]},{name:"Solaris",search:mr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:mr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:mr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],pr={browsers:p(gr),oses:p(hr)},vr="Edge",fr="Chromium",br="Opera",yr="Firefox",wr="Safari",xr=e=>{var t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isEdge:n(vr),isChromium:n(fr),isIE:n("IE"),isOpera:n(br),isFirefox:n(yr),isSafari:n(wr)}},Cr=()=>xr({current:void 0,version:dr.unknown()}),kr=xr,Sr=(p(vr),p(fr),p("IE"),p(br),p(yr),p(wr),"Windows"),_r="Android",Or="Linux",Er="macOS",Tr="Solaris",Ar="FreeBSD",Mr="ChromeOS",Nr=e=>{var t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isWindows:n(Sr),isiOS:n("iOS"),isAndroid:n(_r),isMacOS:n(Er),isLinux:n(Or),isSolaris:n(Tr),isFreeBSD:n(Ar),isChromeOS:n(Mr)}},Rr=()=>Nr({current:void 0,version:dr.unknown()}),Dr=Nr,Br=(p(Sr),p("iOS"),p(_r),p(Or),p(Er),p(Tr),p(Ar),p(Mr),e=>window.matchMedia(e).matches),Lr=ir((()=>((e,t,r)=>{var n=pr.browsers(),o=pr.oses(),a=t.bind((e=>((e,t)=>Y(t.brands,(t=>{var r=t.brand.toLowerCase();return V(e,(e=>{var t;return r===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:dr.nu(parseInt(t.version,10),0)})))})))(n,e))).orThunk((()=>((e,t)=>cr(e,t).map((e=>{var r=dr.detect(e.versionRegexes,t);return{current:e.name,version:r}})))(n,e))).fold(Cr,kr),i=((e,t)=>cr(e,t).map((e=>{var r=dr.detect(e.versionRegexes,t);return{current:e.name,version:r}})))(o,e).fold(Rr,Dr),s=((e,t,r,n)=>{var o=e.isiOS()&&!0===/ipad/i.test(r),a=e.isiOS()&&!o,i=e.isiOS()||e.isAndroid(),s=i||n("(pointer:coarse)"),l=o||!a&&i&&n("(min-device-width:768px)"),d=a||i&&!l,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(r),u=!d&&!l&&!c;return{isiPad:p(o),isiPhone:p(a),isTablet:p(l),isPhone:p(d),isTouch:p(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:p(c),isDesktop:p(u)}})(i,a,e,r);return{browser:a,os:i,deviceType:s}})(navigator.userAgent,k.from(navigator.userAgentData),Br))),Hr=()=>Lr(),Pr=(e,t)=>{var r=r=>{var n=t(r);if(n<=0||null===n){var o=It(r,e);return parseFloat(o)||0}return n},n=(e,t)=>z(t,((t,r)=>{var n=It(e,r),o=void 0===n?0:parseInt(n,10);return isNaN(o)?t:t+o}),0);return{set:(t,r)=>{if(!g(r)&&!r.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+r);var n=t.dom;Bt(n)&&(n.style[e]=r+"px")},get:r,getOuter:r,aggregate:n,max:(e,t,r)=>{var o=n(e,r);return t>o?t-o:0}}},Ir=(e,t,r)=>((e,t)=>(e=>{var t=parseFloat(e);return isNaN(t)?k.none():k.some(t)})(e).getOr(t))(It(e,t),r),Fr=Pr("width",(e=>e.dom.offsetWidth)),zr=e=>Fr.get(e),Vr=e=>Fr.getOuter(e),Zr=e=>((e,t)=>{var r=e.dom,n=r.getBoundingClientRect().width||r.offsetWidth;return"border-box"===t?n:((e,t,r,n)=>t-Ir(e,"padding-".concat(r),0)-Ir(e,"padding-".concat(n),0)-Ir(e,"border-".concat(r,"-width"),0)-Ir(e,"border-".concat(n,"-width"),0))(e,n,"left","right")})(e,"content-box"),jr=(e,t,r)=>{var n=e.cells,o=n.slice(0,t),a=n.slice(t),i=o.concat(r).concat(a);return qr(e,i)},Ur=(e,t,r)=>jr(e,t,[r]),Wr=(e,t,r)=>{e.cells[t]=r},qr=(e,t)=>st(e.element,t,e.section,e.isNew),$r=(e,t)=>e.cells[t],Gr=(e,t)=>$r(e,t).element,Kr=e=>e.cells.length,Yr=e=>{var t=P(e,(e=>"colgroup"===e.section));return{rows:t.fail,cols:t.pass}},Xr=(e,t,r)=>{var n=L(e.cells,r);return st(t(e.element),n,e.section,!0)},Jr="data-snooker-locked-cols",Qr=e=>ke(e,Jr).bind((e=>k.from(e.match(/\d+/g)))).map((e=>q(e,C))),en=e=>{var t,r,n=z(Yr(e).rows,((e,t)=>(H(t.cells,((t,r)=>{t.isLocked&&(e[r]=!0)})),e)),{}),o=re(n,((e,t)=>parseInt(t,10)));return t=o,(r=A.call(t,0)).sort(void 0),r},tn=(e,t)=>e+","+t,rn=(e,t)=>{var r=U(e.all,(e=>e.cells));return I(r,t)},nn=e=>{var t={},r=[],n=G(e).map((e=>e.element)).bind(er).bind(Qr).getOr({}),o=0,a=0,i=0,{pass:s,fail:l}=P(e,(e=>"colgroup"===e.section));H(l,(e=>{var s=[];H(e.cells,(e=>{for(var r=0;void 0!==t[tn(i,r)];)r++;for(var o=((e,t)=>oe(e,t)&&void 0!==e[t]&&null!==e[t])(n,r.toString()),l=((e,t,r,n,o,a)=>({element:e,rowspan:t,colspan:r,row:n,column:o,isLocked:a}))(e.element,e.rowspan,e.colspan,i,r,o),d=0;d<e.colspan;d++)for(var c=0;c<e.rowspan;c++){var u=r+d,m=tn(i+c,u);t[m]=l,a=Math.max(a,u+1)}s.push(l)})),o++,r.push(at(e.element,s,e.section)),i++}));var{columns:d,colgroups:c}=K(s).map((e=>{var t=(e=>{var t={},r=0;return H(e.cells,(e=>{var n=e.colspan;B(n,(o=>{var a=r+o;t[a]=((e,t,r)=>({element:e,colspan:t,column:r}))(e.element,n,a)})),r+=n})),t})(e),r=((e,t)=>({element:e,columns:t}))(e.element,ne(t));return{colgroups:[r],columns:t}})).getOrThunk((()=>({colgroups:[],columns:{}}))),u=((e,t)=>({rows:e,columns:t}))(o,a);return{grid:u,access:t,all:r,columns:d,colgroups:c}},on=e=>{var t=ar(e);return nn(t)},an=nn,sn=(e,t,r)=>k.from(e.access[tn(t,r)]),ln=(e,t,r)=>{var n=rn(e,(e=>r(t,e.element)));return n.length>0?k.some(n[0]):k.none()},dn=rn,cn=e=>U(e.all,(e=>e.cells)),un=e=>ne(e.columns),mn=e=>X(e.columns).length>0,gn=(e,t)=>k.from(e.columns[t]),hn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C,r=e.grid,n=B(r.columns,v),o=B(r.rows,v);return L(n,(r=>pn((()=>U(o,(t=>sn(e,t,r).filter((e=>e.column===r)).toArray()))),(e=>1===e.colspan&&t(e.element)),(()=>sn(e,0,r)))))},pn=(e,t,r)=>{var n=e();return V(n,t).orThunk((()=>k.from(n[0]).orThunk(r))).map((e=>e.element))},vn=e=>{var t=e.grid,r=B(t.rows,v),n=B(t.columns,v);return L(r,(t=>pn((()=>U(n,(r=>sn(e,t,r).filter((e=>e.row===t)).fold(p([]),(e=>[e]))))),(e=>1===e.rowspan),(()=>sn(e,t,0)))))},fn=(e,t)=>r=>"rtl"===bn(r)?t:e,bn=e=>"rtl"===It(e,"direction")?"rtl":"ltr",yn=Pr("height",(e=>{var t=e.dom;return mt(e)?t.getBoundingClientRect().height:t.offsetHeight})),wn=e=>yn.get(e),xn=e=>yn.getOuter(e),Cn=(e,t)=>({left:e,top:t,translate:(r,n)=>Cn(e+r,t+n)}),kn=Cn,Sn=(e,t)=>void 0!==e?e:void 0!==t?t:0,_n=e=>{var t=e.dom.ownerDocument,r=t.body,n=t.defaultView,o=t.documentElement;if(r===e.dom)return kn(r.offsetLeft,r.offsetTop);var a=Sn(null==n?void 0:n.pageYOffset,o.scrollTop),i=Sn(null==n?void 0:n.pageXOffset,o.scrollLeft),s=Sn(o.clientTop,r.clientTop),l=Sn(o.clientLeft,r.clientLeft);return On(e).translate(i-l,a-s)},On=e=>{var t=e.dom,r=t.ownerDocument.body;return r===t?kn(r.offsetLeft,r.offsetTop):mt(e)?(e=>{var t=e.getBoundingClientRect();return kn(t.left,t.top)})(t):kn(0,0)},En=(e,t)=>({row:e,y:t}),Tn=(e,t)=>({col:e,x:t}),An=e=>_n(e).left+Vr(e),Mn=e=>_n(e).left,Nn=(e,t)=>Tn(e,Mn(t)),Rn=(e,t)=>Tn(e,An(t)),Dn=e=>_n(e).top,Bn=(e,t)=>En(e,Dn(t)),Ln=(e,t)=>En(e,Dn(t)+xn(t)),Hn=(e,t,r)=>{if(0===r.length)return[];var n=L(r.slice(1),((t,r)=>t.map((t=>e(r,t))))),o=r[r.length-1].map((e=>t(r.length-1,e)));return n.concat([o])},Pn={delta:v,positions:e=>Hn(Bn,Ln,e),edge:Dn},In={delta:v,edge:Mn,positions:e=>Hn(Nn,Rn,e)},Fn={delta:e=>-e,edge:An,positions:e=>Hn(Rn,Nn,e)},zn=fn(In,Fn),Vn={delta:(e,t)=>zn(t).delta(e,t),positions:(e,t)=>zn(t).positions(e,t),edge:e=>zn(e).edge(e)},Zn={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},jn=(S="[0-9]+",_="[eE][+-]?"+S,O=e=>"(?:".concat(e,")?"),E=["Infinity",S+"\\."+O(S)+O(_),"\\."+S+O(_),S+O(_)].join("|"),T="[+-]?(?:".concat(E,")"),new RegExp("^(".concat(T,")(.*)$"))),Un=/(\d+(\.\d+)?)%/,Wn=/(\d+(\.\d+)?)px|em/,qn=be("col"),$n=(e,t,r)=>{var n=Pe(e).getOrThunk((()=>gt(Be(e))));return t(e)/r(n)*100},Gn=(e,t)=>{Ht(e,"width",t+"px")},Kn=(e,t)=>{Ht(e,"width",t+"%")},Yn=(e,t)=>{Ht(e,"height",t+"px")},Xn=e=>{var t=(e=>{return Ir(t=e,"height",t.dom.offsetHeight)+"px";var t})(e);return t?((e,t,r,n)=>{var o=parseFloat(e);return Nt(e,"%")&&"table"!==de(t)?((e,t,r,n)=>{var o=er(e).map((e=>{var n=r(e);return Math.floor(t/100*n)})).getOr(t);return n(e,o),o})(t,o,r,n):o})(t,e,wn,Yn):wn(e)},Jn=(e,t)=>zt(e,t).orThunk((()=>ke(e,t).map((e=>e+"px")))),Qn=e=>Jn(e,"width"),eo=e=>$n(e,zr,Zr),to=e=>{return qn(e)?zr(e):Ir(t=e,"width",t.dom.offsetWidth);var t},ro=e=>((e,t,r)=>r(e)/jt(e,"rowspan"))(e,0,Xn),no=(e,t,r)=>{Ht(e,"width",t+r)},oo=e=>$n(e,zr,Zr)+"%",ao=p(Un),io=be("col"),so=e=>Qn(e).getOrThunk((()=>to(e)+"px")),lo=e=>{return(t=e,Jn(t,"height")).getOrThunk((()=>ro(e)+"px"));var t},co=(e,t,r,n,o,a)=>e.filter(n).fold((()=>a(((e,t)=>{if(t<0||t>=e.length-1)return k.none();var r=e[t].fold((()=>{var r=(e=>{var t=A.call(e,0);return t.reverse(),t})(e.slice(0,t));return Y(r,((e,t)=>e.map((e=>({value:e,delta:t+1})))))}),(e=>k.some({value:e,delta:0}))),n=e[t+1].fold((()=>{var r=e.slice(t+1);return Y(r,((e,t)=>e.map((e=>({value:e,delta:t+1})))))}),(e=>k.some({value:e,delta:1})));return r.bind((e=>n.map((t=>{var r=t.delta+e.delta;return Math.abs(t.value-e.value)/r}))))})(r,t))),(e=>o(e))),uo=(e,t,r,n)=>{var o=hn(e),a=mn(e)?(e=>L(un(e),(e=>k.from(e.element))))(e):o,i=[k.some(Vn.edge(t))].concat(L(Vn.positions(o,t),(e=>e.map((e=>e.x))))),s=y(Ut);return L(a,((e,t)=>co(e,t,i,s,(e=>{if((e=>{var t=Hr().browser,r=t.isChromium()||t.isFirefox();return!io(e)||r})(e))return r(e);var a,l=null!=(a=o[t])?v(a):k.none();return co(l,t,i,s,(e=>n(k.some(zr(e)))),n)}),n)))},mo=e=>e.map((e=>e+"px")).getOr(""),go=(e,t,r)=>uo(e,t,to,(e=>e.getOrThunk(r.minCellWidth))),ho=(e,t,r,n,o)=>{var a=vn(e),i=[k.some(r.edge(t))].concat(L(r.positions(a,t),(e=>e.map((e=>e.y)))));return L(a,((e,t)=>co(e,t,i,y(Wt),n,o)))},po=(e,t)=>()=>mt(e)?t(e):parseFloat(zt(e,"width").getOr("0")),vo=e=>{var t=po(e,(e=>parseFloat(oo(e)))),r=po(e,zr);return{width:t,pixelWidth:r,getWidths:(t,r)=>((e,t,r)=>uo(e,t,eo,(e=>e.fold((()=>r.minCellWidth()),(e=>e/r.pixelWidth()*100)))))(t,e,r),getCellDelta:e=>e/r()*100,singleColumnWidth:(e,t)=>[100-e],minCellWidth:()=>$t()/r()*100,setElementWidth:Kn,adjustTableWidth:r=>{var n=t();Kn(e,n+r/100*n)},isRelative:!0,label:"percent"}},fo=e=>{var t=po(e,zr);return{width:t,pixelWidth:t,getWidths:(t,r)=>go(t,e,r),getCellDelta:v,singleColumnWidth:(e,t)=>[Math.max($t(),e+t)-e],minCellWidth:$t,setElementWidth:Gn,adjustTableWidth:r=>{var n=t()+r;Gn(e,n)},isRelative:!1,label:"pixel"}},bo=e=>Qn(e).fold((()=>(e=>{var t=po(e,zr),r=p(0);return{width:t,pixelWidth:t,getWidths:(t,r)=>go(t,e,r),getCellDelta:r,singleColumnWidth:p([0]),minCellWidth:r,setElementWidth:h,adjustTableWidth:h,isRelative:!0,label:"none"}})(e)),(t=>((e,t)=>null!==ao().exec(t)?vo(e):fo(e))(e,t))),yo=fo,wo=vo,xo=(e,t,r)=>{var n=e[r].element,o=Ee.fromTag("td");qe(o,Ee.fromTag("br")),(t?qe:We)(n,o)},Co=((e,t)=>{var r=t=>e(t)?k.from(t.dom.nodeValue):k.none();return{get:t=>{if(!e(t))throw new Error("Can only get text value of a text node");return r(t).getOr("")},getOption:r,set:(t,r)=>{if(!e(t))throw new Error("Can only set raw text value of a text node");t.dom.nodeValue=r}}})(pe),ko=e=>Co.get(e),So=e=>Co.getOption(e),_o=(e,t)=>Co.set(e,t),Oo=e=>"img"===de(e)?1:So(e).fold((()=>Ve(e).length),(e=>e.length)),Eo=["img","br"],To=e=>So(e).filter((e=>0!==e.trim().length||e.indexOf("")>-1)).isSome()||R(Eo,de(e))||(e=>ge(e)&&"false"===Ce(e,"contenteditable"))(e),Ao=e=>{return t=To,(r=e=>{for(var n=0;n<e.childNodes.length;n++){var o=Ee.fromDom(e.childNodes[n]);if(t(o))return k.some(o);var a=r(e.childNodes[n]);if(a.isSome())return a}return k.none()})(e.dom);var t,r},Mo=e=>No(e,To),No=(e,t)=>{var r=e=>{for(var n=Ve(e),o=n.length-1;o>=0;o--){var a=n[o];if(t(a))return k.some(a);var i=r(a);if(i.isSome())return i}return k.none()};return r(e)},Ro={scope:["row","col"]},Do=e=>()=>{var t=Ee.fromTag("td",e.dom);return qe(t,Ee.fromTag("br",e.dom)),t},Bo=e=>()=>Ee.fromTag("col",e.dom),Lo=e=>()=>Ee.fromTag("colgroup",e.dom),Ho=e=>()=>Ee.fromTag("tr",e.dom),Po=(e,t,r)=>{var n=((e,t)=>{var r=rt(e,t),n=Ve(tt(e));return Ke(r,n),r})(e,t);return Q(r,((e,t)=>{null===e?Se(n,t):we(n,t,e)})),n},Io=e=>e,Fo=(e,t,r)=>{var n=(e,t)=>{var r,n,o;r=t,n=e.element.dom,o=r.dom,Bt(n)&&Bt(o)&&(o.style.cssText=n.style.cssText),Vt(t,"height"),1!==e.colspan&&Vt(t,"width")};return{col:r=>{var o=Ee.fromTag(de(r.element),t.dom);return n(r,o),e(r.element,o),o},colgroup:Lo(t),row:Ho(t),cell:o=>{var a=Ee.fromTag(de(o.element),t.dom),i=r.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),s=i.length>0?((e,t,r)=>Ao(e).map((n=>{var o=r.join(","),a=pt(n,o,(t=>Ne(t,e)));return F(a,((e,t)=>{var r=et(t);return qe(e,r),r}),t)})).getOr(t))(o.element,a,i):a;return qe(s,Ee.fromTag("br")),n(o,a),((e,t)=>{Q(Ro,((r,n)=>ke(e,n).filter((e=>R(r,e))).each((e=>we(t,n,e)))))})(o.element,a),e(o.element,a),a},replace:Po,colGap:Bo(t),gap:Do(t)}},zo=e=>({col:Bo(e),colgroup:Lo(e),row:Ho(e),cell:Do(e),replace:Io,colGap:Bo(e),gap:Do(e)}),Vo=e=>t=>t.options.get(e),Zo="100%",jo=e=>{var t,r=e.dom,n=null!==(t=r.getParent(e.selection.getStart(),r.isBlock))&&void 0!==t?t:e.getBody();return Zr(Ee.fromDom(n))+"px"},Uo=e=>k.from(e.options.get("table_clone_elements")),Wo=Vo("table_header_type"),qo=Vo("table_column_resizing"),$o=e=>"preservetable"===qo(e),Go=e=>"resizetable"===qo(e),Ko=Vo("table_sizing_mode"),Yo=e=>"relative"===Ko(e),Xo=e=>"fixed"===Ko(e),Jo=e=>"responsive"===Ko(e),Qo=Vo("table_resize_bars"),ea=Vo("table_style_by_css"),ta=Vo("table_merge_content_on_paste"),ra=e=>{var r=e.options,n=r.get("table_default_attributes");return r.isSet("table_default_attributes")?n:((e,r)=>Jo(e)||ea(e)?r:Xo(e)?t(t({},r),{},{width:jo(e)}):t(t({},r),{},{width:Zo}))(e,n)},na=Vo("table_use_colgroups"),oa=e=>St(e,"[contenteditable]"),aa=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return mt(e)?e.dom.isContentEditable:oa(e).fold(p(t),(e=>"true"===ia(e)))},ia=e=>e.dom.contentEditable,sa=e=>Ee.fromDom(e.getBody()),la=e=>t=>Ne(t,sa(e)),da=e=>{Se(e,"data-mce-style");var t=e=>Se(e,"data-mce-style");H(Jt(e),t),H(Qt(e),t),H(tr(e),t)},ca=e=>Ee.fromDom(e.selection.getStart()),ua=e=>e.getBoundingClientRect().width,ma=e=>e.getBoundingClientRect().height,ga=e=>wt(e,be("table")).exists(aa),ha=(e,t)=>{var r=t.column,n=t.column+t.colspan-1,o=t.row,a=t.row+t.rowspan-1;return r<=e.finishCol&&n>=e.startCol&&o<=e.finishRow&&a>=e.startRow},pa=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,va=(e,t,r)=>{var n=ln(e,t,Ne),o=ln(e,r,Ne);return n.bind((e=>o.map((t=>{return r=e,n=t,{startRow:Math.min(r.row,n.row),startCol:Math.min(r.column,n.column),finishRow:Math.max(r.row+r.rowspan-1,n.row+n.rowspan-1),finishCol:Math.max(r.column+r.colspan-1,n.column+n.colspan-1)};var r,n}))))},fa=(e,t,r)=>va(e,t,r).map((t=>{var r=dn(e,b(ha,t));return L(r,(e=>e.element))})),ba=(e,t)=>ln(e,t,((e,t)=>Re(t,e))).map((e=>e.element)),ya=(e,t,r)=>{var n=xa(e);return fa(n,t,r)},wa=(e,t,r,n,o)=>{var a=xa(e),i=Ne(e,r)?k.some(t):ba(a,t),s=Ne(e,o)?k.some(n):ba(a,n);return i.bind((e=>s.bind((t=>fa(a,e,t)))))},xa=on,Ca=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],ka=()=>({up:p({selector:xt,closest:St,predicate:yt,all:Ie}),down:p({selector:ft,predicate:ht}),styles:p({get:It,getRaw:zt,set:Ht,remove:Vt}),attrs:p({get:Ce,set:we,remove:Se,copyTo:(e,t)=>{var r=_e(e);xe(t,r)}}),insert:p({before:je,after:Ue,afterAll:Ge,append:qe,appendAll:Ke,prepend:We,wrap:$e}),remove:p({unwrap:Je,remove:Xe}),create:p({nu:Ee.fromTag,clone:e=>Ee.fromDom(e.dom.cloneNode(!1)),text:Ee.fromText}),query:p({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:Fe,nextSibling:ze}),property:p({children:Ve,name:de,parent:He,document:e=>Le(e).dom,isText:pe,isComment:me,isElement:he,isSpecial:e=>{var t=de(e);return R(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>he(e)?ke(e,"lang"):k.none(),getText:ko,setText:_o,isBoundary:e=>!!he(e)&&("body"===de(e)||R(Ca,de(e))),isEmptyTag:e=>!!he(e)&&R(["br","img","hr","input"],de(e)),isNonEditable:e=>he(e)&&"false"===Ce(e,"contenteditable")}),eq:Ne,is:De}),Sa=(e,t,r,n)=>{var o=t(e,r);return F(n,((r,n)=>{var o=t(e,n);return _a(e,r,o)}),o)},_a=(e,t,r)=>t.bind((t=>r.filter(b(e.eq,t)))),Oa=ka(),Ea=(e,t)=>((e,t,r)=>r.length>0?((e,t,r,n)=>n(e,t,r[0],r.slice(1)))(e,t,r,Sa):k.none())(Oa,((t,r)=>e(r)),t),Ta=e=>xt(e,"table"),Aa=(e,t,r)=>{var n=e=>t=>void 0!==r&&r(t)||Ne(t,e);return Ne(e,t)?k.some({boxes:k.some([e]),start:e,finish:t}):Ta(e).bind((o=>Ta(t).bind((a=>{if(Ne(o,a))return k.some({boxes:ya(o,e,t),start:e,finish:t});if(Re(o,a)){var i=pt(t,"td,th",n(o)),s=i.length>0?i[i.length-1]:t;return k.some({boxes:wa(o,e,o,t,a),start:e,finish:s})}if(Re(a,o)){var l=pt(e,"td,th",n(a)),d=l.length>0?l[l.length-1]:e;return k.some({boxes:wa(a,e,o,t,a),start:e,finish:d})}return((e,t,r)=>function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x,o=[t].concat(e.up().all(t)),a=[r].concat(e.up().all(r)),i=e=>Z(e,n).fold((()=>e),(t=>e.slice(0,t+1))),s=i(o),l=i(a),d=V(s,(t=>D(l,((e,t)=>b(e.eq,t))(e,t))));return{firstpath:s,secondpath:l,shared:d}}(Oa,e,t,void 0))(e,t).shared.bind((i=>St(i,"table",r).bind((r=>{var i=pt(t,"td,th",n(r)),s=i.length>0?i[i.length-1]:t,l=pt(e,"td,th",n(r)),d=l.length>0?l[l.length-1]:e;return k.some({boxes:wa(r,e,o,t,a),start:d,finish:s})}))))}))))},Ma=(e,t)=>{var r=ft(e,t);return r.length>0?k.some(r):k.none()},Na=(e,t,r)=>kt(e,t).bind((t=>kt(e,r).bind((e=>Ea(Ta,[t,e]).map((r=>({first:t,last:e,table:r}))))))),Ra=(e,t,r,n,o)=>((e,t)=>V(e,(e=>Te(e,t))))(e,o).bind((e=>((e,t,r)=>er(e).bind((n=>((e,t,r,n)=>ln(e,t,Ne).bind((t=>{var o=r>0?t.row+t.rowspan-1:t.row,a=n>0?t.column+t.colspan-1:t.column;return sn(e,o+r,a+n).map((e=>e.element))})))(xa(n),e,t,r))))(e,t,r).bind((e=>((e,t)=>xt(e,"table").bind((r=>kt(r,t).bind((t=>Aa(t,e).bind((e=>e.boxes.map((t=>({boxes:t,start:e.start,finish:e.finish}))))))))))(e,n))))),Da=(e,t)=>Ma(e,t),Ba=(e,t,r)=>Na(e,t,r).bind((t=>{var r=t=>Ne(e,t),n="thead,tfoot,tbody,table",o=xt(t.first,n,r),a=xt(t.last,n,r);return o.bind((e=>a.bind((r=>Ne(e,r)?((e,t,r)=>((e,t,r)=>va(e,t,r).bind((t=>((e,t)=>{for(var r=!0,n=b(pa,t),o=t.startRow;o<=t.finishRow;o++)for(var a=t.startCol;a<=t.finishCol;a++)r=r&&sn(e,o,a).exists(n);return r?k.some(t):k.none()})(e,t))))(xa(e),t,r))(t.table,t.first,t.last):k.none()))))})),La=v,Ha=e=>{var t=(e,t)=>ke(e,t).exists((e=>parseInt(e,10)>1));return e.length>0&&W(e,(e=>t(e,"rowspan")||t(e,"colspan")))?k.some(e):k.none()},Pa=(e,t,r)=>t.length<=1?k.none():Ba(e,r.firstSelectedSelector,r.lastSelectedSelector).map((e=>({bounds:e,cells:t}))),Ia="data-mce-selected",Fa="td["+Ia+"],th["+Ia+"]",za="["+Ia+"]",Va="data-mce-first-selected",Za="td["+Va+"],th["+Va+"]",ja="data-mce-last-selected",Ua="td["+ja+"],th["+ja+"]",Wa=za,qa={selected:Ia,selectedSelector:Fa,firstSelected:Va,firstSelectedSelector:Za,lastSelected:ja,lastSelectedSelector:Ua},$a=(e,t,r)=>({element:r,mergable:Pa(t,e,qa),unmergable:Ha(e),selection:La(e)}),Ga=e=>(t,r)=>{var n,o=de(t),a="col"===o||"colgroup"===o?er(n=t).bind((e=>Da(e,qa.firstSelectedSelector))).fold(p(n),(e=>e[0])):t;return St(a,e,r)},Ka=Ga("th,td,caption"),Ya=Ga("th,td"),Xa=e=>{return t=e.model.table.getSelectedCells(),L(t,Ee.fromDom);var t},Ja=(e,t)=>{e.on("BeforeGetContent",(t=>{if(!0===t.selection){var r=(e=>I(Xa(e),(e=>Te(e,qa.selectedSelector))))(e);r.length>=1&&(r=>{t.preventDefault(),(e=>er(e[0]).map((e=>{var t=((e,t)=>{var r=e=>Te(e.element,t),n=tt(e),o=ar(n),a=bo(e),i=an(o),s=((e,t)=>{var r=e.grid.columns,n=e.grid.rows,o=r,a=0,i=0,s=[],l=[];return Q(e.access,(e=>{if(s.push(e),t(e)){l.push(e);var r=e.row,d=r+e.rowspan-1,c=e.column,u=c+e.colspan-1;r<n?n=r:d>a&&(a=d),c<o?o=c:u>i&&(i=u)}})),((e,t,r,n,o,a)=>({minRow:e,minCol:t,maxRow:r,maxCol:n,allCells:o,selectedCells:a}))(n,o,a,i,s,l)})(i,r),l="th:not("+t+"),td:not("+t+")",d=Yt(n,"th,td",(e=>Te(e,l)));H(d,Xe),((e,t,r,n)=>{for(var o=I(e,(e=>"colgroup"!==e.section)),a=t.grid.columns,i=t.grid.rows,s=0;s<i;s++)for(var l=!1,d=0;d<a;d++)s<r.minRow||s>r.maxRow||d<r.minCol||d>r.maxCol||(sn(t,s,d).filter(n).isNone()?xo(o,l,s):l=!0)})(o,i,s,r);var c=((e,t,r,n)=>{if(0===n.minCol&&t.grid.columns===n.maxCol+1)return 0;var o=go(t,e,r),a=z(o,((e,t)=>e+t),0),i=z(o.slice(n.minCol,n.maxCol+1),((e,t)=>e+t),0),s=i/a*r.pixelWidth()-r.pixelWidth();return r.getCellDelta(s)})(e,on(e),a,s);return((e,t,r,n)=>{Q(r.columns,(e=>{(e.column<t.minCol||e.column>t.maxCol)&&Xe(e.element)}));var o=I(Kt(e,"tr"),(e=>0===e.dom.childElementCount));H(o,Xe),t.minCol!==t.maxCol&&t.minRow!==t.maxRow||H(Kt(e,"th,td"),(e=>{Se(e,"rowspan"),Se(e,"colspan")})),Se(e,Jr),Se(e,"data-snooker-col-series"),bo(e).adjustTableWidth(n)})(n,s,i,c),n})(e,Wa);return da(t),[t]})))(r).each((r=>{t.content="text"===t.format?(e=>L(e,(e=>e.dom.innerText)).join(""))(r):((e,t)=>L(t,(t=>e.selection.serializer.serialize(t.dom,{}))).join(""))(e,r)}))})(r)}})),e.on("BeforeSetContent",(r=>{if(!0===r.selection&&!0===r.paste){var n=Xa(e);G(n).each((n=>{er(n).each((o=>{var a,i,s=I((a=r.content,(i=document.createElement("div")).innerHTML=a,Ve(Ee.fromDom(i))),(e=>"meta"!==de(e))),l=be("table");if(ta(e)&&1===s.length&&l(s[0])){r.preventDefault();var d=Ee.fromDom(e.getDoc()),c=zo(d),u=((e,t,r)=>({element:e,clipboard:t,generators:r}))(n,s[0],c);t.pasteCells(o,u).each((()=>{e.focus()}))}}))}))}}))},Qa=(e,t)=>({element:e,offset:t}),ei=(e,t,r)=>e.property().isText(t)&&0===e.property().getText(t).trim().length||e.property().isComment(t)?r(t).bind((t=>ei(e,t,r).orThunk((()=>k.some(t))))):k.none(),ti=(e,t)=>e.property().isText(t)?e.property().getText(t).length:e.property().children(t).length,ri=(e,t)=>{var r=ei(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(r))return Qa(r,ti(e,r));var n=e.property().children(r);return n.length>0?ri(e,n[n.length-1]):Qa(r,ti(e,r))},ni=ri,oi=ka(),ai=(e,t)=>{if(!Ut(e)){var r=(e=>Qn(e).bind((e=>{return t=e,r=["fixed","relative","empty"],k.from(jn.exec(t)).bind((e=>{var t=Number(e[1]),n=e[2];return((e,t)=>D(t,(t=>D(Zn[t],(t=>e===t)))))(n,r)?k.some({value:t,unit:n}):k.none()}));var t,r})))(e);r.each((r=>{var n=r.value/2;no(e,n,r.unit),no(t,n,r.unit)}))}},ii=e=>L(e,p(0)),si=(e,t,r,n,o)=>o(e.slice(0,t)).concat(n).concat(o(e.slice(r))),li=e=>(t,r,n,o)=>{if(e(n)){var a=Math.max(o,t[r]-Math.abs(n)),i=Math.abs(a-t[r]);return n>=0?i:-i}return n},di=li((e=>e<0)),ci=li(C),ui=()=>{var e=(e,t,r,n)=>{var o=(100+r)/100,a=Math.max(n,(e[t]+r)/o);return L(e,((e,r)=>(r===t?a:e/o)-e))},t=(t,r,n,o,a,i)=>i?e(t,r,o,a):((e,t,r,n,o)=>{var a=di(e,t,n,o);return si(e,t,r+1,[a,0],ii)})(t,r,n,o,a);return{resizeTable:(e,t)=>e(t),clampTableDelta:di,calcLeftEdgeDeltas:t,calcMiddleDeltas:(e,r,n,o,a,i,s)=>t(e,n,o,a,i,s),calcRightEdgeDeltas:(t,r,n,o,a,i)=>{if(i)return e(t,n,o,a);var s=di(t,n,o,a);return ii(t.slice(0,n)).concat([s])},calcRedestributedWidths:(e,t,r,n)=>{if(n){var o=(t+r)/t,a=L(e,(e=>e/o));return{delta:100*o-100,newSizes:a}}return{delta:r,newSizes:e}}}},mi=()=>{var e=(e,t,r,n,o)=>{var a=ci(e,n>=0?r:t,n,o);return si(e,t,r+1,[a,-a],ii)};return{resizeTable:(e,t,r)=>{r&&e(t)},clampTableDelta:(e,t,r,n,o)=>{if(o){if(r>=0)return r;var a=z(e,((e,t)=>e+t-n),0);return Math.max(-a,r)}return di(e,t,r,n)},calcLeftEdgeDeltas:e,calcMiddleDeltas:(t,r,n,o,a,i)=>e(t,n,o,a,i),calcRightEdgeDeltas:(e,t,r,n,o,a)=>{if(a)return ii(e);var i=n/e.length;return L(e,p(i))},calcRedestributedWidths:(e,t,r,n)=>({delta:0,newSizes:e})}},gi=e=>on(e).grid,hi=be("th"),pi=e=>W(e,(e=>hi(e.element))),vi=(e,t)=>e&&t?"sectionCells":e?"section":"cells",fi=e=>{var t="thead"===e.section,r=_t(bi(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||r?{type:"header",subType:vi(t,r)}:{type:"body"}},bi=e=>{var t=I(e,(e=>hi(e.element)));return 0===t.length?k.some("td"):t.length===e.length?k.some("th"):k.none()},yi=(e,t,r)=>it(r(e.element,t),!0,e.isLocked),wi=(e,t)=>e.section!==t?st(e.element,e.cells,t,e.isNew):e,xi=()=>({transformRow:wi,transformCell:(e,t,r)=>{var n=r(e.element,t),o="td"!==de(n)?((e,t)=>{var r=rt(e,"td");Ue(e,r);var n=Ve(e);return Ke(r,n),Xe(e),r})(n):n;return it(o,e.isNew,e.isLocked)}}),Ci=()=>({transformRow:wi,transformCell:yi}),ki=()=>({transformRow:(e,t)=>wi(e,"thead"===t?"tbody":t),transformCell:yi}),Si=xi,_i=Ci,Oi=ki,Ei=()=>({transformRow:v,transformCell:yi}),Ti=(e,t,r,n)=>{r===n?Se(e,t):we(e,t,r)},Ai=(e,t,r)=>{K(vt(e,t)).fold((()=>We(e,r)),(e=>Ue(e,r)))},Mi=(e,t)=>{var r=[],n=[],o=e=>L(e,(e=>{e.isNew&&r.push(e.element);var t=e.element;return Ye(t),H(e.cells,(e=>{e.isNew&&n.push(e.element),Ti(e.element,"colspan",e.colspan,1),Ti(e.element,"rowspan",e.rowspan,1),qe(t,e.element)})),t})),a=e=>U(e,(e=>L(e.cells,(e=>(Ti(e.element,"span",e.colspan,1),e.element))))),i=(t,r)=>{var n=((e,t)=>{var r=Ct(e,t).getOrThunk((()=>{var r=Ee.fromTag(t,Be(e).dom);return"thead"===t?Ai(e,"caption,colgroup",r):"colgroup"===t?Ai(e,"caption",r):qe(e,r),r}));return Ye(r),r})(e,r),i=("colgroup"===r?a:o)(t);Ke(n,i)},s=(t,r)=>{t.length>0?i(t,r):(t=>{Ct(e,t).each(Xe)})(r)},l=[],d=[],c=[],u=[];return H(t,(e=>{switch(e.section){case"thead":l.push(e);break;case"tbody":d.push(e);break;case"tfoot":c.push(e);break;case"colgroup":u.push(e)}})),s(u,"colgroup"),s(l,"thead"),s(d,"tbody"),s(c,"tfoot"),{newRows:r,newCells:n}},Ni=(e,t)=>{if(0===e.length)return 0;var r=e[0];return Z(e,(e=>!t(r.element,e.element))).getOr(e.length)},Ri=(e,t)=>{var r=L(e,(e=>L(e.cells,x)));return L(e,((n,o)=>{var a=U(n.cells,((n,a)=>{if(!1===r[o][a]){var i=((e,t,r,n)=>{var o=((e,t)=>e[t])(e,t),a="colgroup"===o.section,i=Ni(o.cells.slice(r),n),s=a?1:Ni(((e,t)=>L(e,(e=>$r(e,t))))(e.slice(t),r),n);return{colspan:i,rowspan:s}})(e,o,a,t);return((e,t,n,o)=>{for(var a=e;a<e+n;a++)for(var i=t;i<t+o;i++)r[a][i]=!0})(o,a,i.rowspan,i.colspan),[(s=n.element,l=i.rowspan,d=i.colspan,c=n.isNew,{element:s,rowspan:l,colspan:d,isNew:c})]}return[];var s,l,d,c}));return((e,t,r,n)=>({element:e,cells:t,section:r,isNew:n}))(n.element,a,n.section,n.isNew)}))},Di=(e,t,r)=>{var n=[];H(e.colgroups,(o=>{for(var a=[],i=0;i<e.grid.columns;i++){var s=gn(e,i).map((e=>it(e.element,r,!1))).getOrThunk((()=>it(t.colGap(),!0,!1)));a.push(s)}n.push(st(o.element,a,"colgroup",r))}));for(var o=0;o<e.grid.rows;o++){for(var a=[],i=0;i<e.grid.columns;i++){var s=sn(e,o,i).map((e=>it(e.element,r,e.isLocked))).getOrThunk((()=>it(t.gap(),!0,!1)));a.push(s)}var l=e.all[o],d=st(l.element,a,l.section,r);n.push(d)}return n},Bi=e=>Ri(e,Ne),Li=(e,t)=>Y(e.all,(e=>V(e.cells,(e=>Ne(t,e.element))))),Hi=(e,t,r)=>{var n=L(t.selection,(t=>Xt(t).bind((t=>Li(e,t))).filter(r))),o=Ot(n);return Et(o.length>0,o)},Pi=(e,t,r,n,o)=>(a,i,s,l)=>{var d=on(a),c=k.from(null==l?void 0:l.section).getOrThunk(Ei);return t(d,i).map((t=>{var r=((e,t)=>Di(e,t,!1))(d,s),n=e(r,t,Ne,o(s),c),a=en(n.grid);return{info:t,grid:Bi(n.grid),cursor:n.cursor,lockedColumns:a}})).bind((e=>{var t=Mi(a,e.grid),o=k.from(null==l?void 0:l.sizing).getOrThunk((()=>bo(a))),i=k.from(null==l?void 0:l.resize).getOrThunk(mi);return r(a,e.grid,e.info,{sizing:o,resize:i,section:c}),n(a),Se(a,Jr),e.lockedColumns.length>0&&we(a,Jr,e.lockedColumns.join(",")),k.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})}))},Ii=(e,t)=>Hi(e,t,C).map((e=>({cells:e,generators:t.generators,clipboard:t.clipboard}))),Fi=(e,t)=>Hi(e,t,C),zi=(e,t)=>Hi(e,t,(e=>!e.isLocked)),Vi=(e,t)=>W(t,(t=>((e,t)=>Li(e,t).exists((e=>!e.isLocked)))(e,t))),Zi=(e,t,r,n)=>{for(var o=Yr(e).rows,a=!0,i=0;i<o.length;i++)for(var s=0;s<Kr(o[0]);s++){var l=o[i],d=$r(l,s),c=r(d.element,t);c&&!a?Wr(l,s,it(n(),!0,d.isLocked)):c&&(a=!1)}return e},ji=e=>{var t=t=>t(e),r=p(e),n=()=>o,o={tag:!0,inner:e,fold:(t,r)=>r(e),isValue:C,isError:x,map:t=>Wi.value(t(e)),mapError:n,bind:t,exists:t,forall:t,getOr:r,or:n,getOrThunk:r,orThunk:n,getOrDie:r,each:t=>{t(e)},toOptional:()=>k.some(e)};return o},Ui=e=>{var t,r=()=>n,n={tag:!1,inner:e,fold:(t,r)=>t(e),isValue:x,isError:C,map:r,mapError:t=>Wi.error(t(e)),bind:r,exists:x,forall:C,getOr:v,or:v,getOrThunk:w,orThunk:w,getOrDie:(t=String(e),()=>{throw new Error(t)}),each:h,toOptional:k.none};return n},Wi={value:ji,error:Ui,fromOption:(e,t)=>e.fold((()=>Ui(t)),ji)},qi=(e,t)=>({rowDelta:0,colDelta:Kr(e[0])-Kr(t[0])}),$i=(e,t)=>({rowDelta:e.length-t.length,colDelta:0}),Gi=(e,t,r,n)=>{var o="colgroup"===t.section?r.col:r.cell;return B(e,(e=>it(o(),!0,n(e))))},Ki=(e,t,r,n)=>{var o=e[e.length-1];return e.concat(B(t,(()=>{var e="colgroup"===o.section?r.colgroup:r.row,t=Xr(o,e,v),a=Gi(t.cells.length,t,r,(e=>oe(n,e.toString())));return qr(t,a)})))},Yi=(e,t,r,n)=>L(e,(e=>{var o=Gi(t,e,r,x);return jr(e,n,o)})),Xi=(e,t,r)=>{var n=t.colDelta<0?Yi:v,o=t.rowDelta<0?Ki:v,a=en(e),i=Kr(e[0]),s=D(a,(e=>e===i-1)),l=n(e,Math.abs(t.colDelta),r,s?i-1:i),d=en(l);return o(l,Math.abs(t.rowDelta),r,q(d,C))},Ji=(e,t,r,n)=>{var o=b(n,$r(e[t],r).element),a=e[t];return e.length>1&&Kr(a)>1&&(r>0&&o(Gr(a,r-1))||r<a.cells.length-1&&o(Gr(a,r+1))||t>0&&o(Gr(e[t-1],r))||t<e.length-1&&o(Gr(e[t+1],r)))},Qi=(e,t,r)=>I(r,(r=>r>=e.column&&r<=Kr(t[0])+e.column)),es=(e,t,r,n,o)=>{((e,t,r,n)=>{t>0&&t<e[0].cells.length&&H(e,(e=>{for(var o=e.cells[t-1],a=0,i=n();e.cells.length>t+a&&r(o.element,e.cells[t+a].element);)Wr(e,t+a,it(i,!0,e.cells[t+a].isLocked)),a++}))})(t,e,o,n.cell);var a=$i(r,t),i=Xi(r,a,n),s=$i(t,i),l=Xi(t,s,n);return L(l,((t,r)=>jr(t,e,i[r].cells)))},ts=(e,r,n,o,a)=>{((e,t,r,n)=>{var o=Yr(e).rows;if(t>0&&t<o.length){var a=((e,t)=>z(e,((e,r)=>D(e,(e=>t(e.element,r.element)))?e:e.concat([r])),[]))(o[t-1].cells,r);H(a,(e=>{for(var a=k.none(),i=t;i<o.length;i++)for(var s=function(t){var s=o[i],l=$r(s,t);r(l.element,e.element)&&(a.isNone()&&(a=k.some(n())),a.each((e=>{Wr(s,t,it(e,!0,l.isLocked))})))},l=0;l<Kr(o[0]);l++)s(l)}))}})(r,e,a,o.cell);var i,s,l=en(r),d=qi(r,n),c=t(t({},d),{},{colDelta:d.colDelta-l.length}),u=Xi(r,c,o),{cols:m,rows:g}=Yr(u),h=en(u),p=qi(n,r),v=t(t({},p),{},{colDelta:p.colDelta+h.length}),f=(i=o,s=h,L(n,(e=>z(s,((t,r)=>{var n=Gi(1,e,i,C)[0];return Ur(t,r,n)}),e)))),b=Xi(f,v,o);return[...m,...g.slice(0,e),...b,...g.slice(e,g.length)]},rs=(e,t,r,n,o)=>{var{rows:a,cols:i}=Yr(e),s=a.slice(0,t),l=a.slice(t);return[...i,...s,((e,t,r,n)=>Xr(e,(e=>n(e,r)),t))(a[r],((e,r)=>t>0&&t<a.length&&n(Gr(a[t-1],r),Gr(a[t],r))?$r(a[t],r):it(o(e.element,n),!0,e.isLocked)),n,o),...l]},ns=(e,t,r,n,o)=>L(e,(e=>{var a=t>0&&t<Kr(e)&&n(Gr(e,t-1),Gr(e,t)),i=((e,t,r,n,o,a,i)=>{if("colgroup"!==r&&n)return $r(e,t);var s=$r(e,o);return it(i(s.element,a),!0,!1)})(e,t,e.section,a,r,n,o);return Ur(e,t,i)})),os=(e,t,r,n)=>((e,t,r,n)=>void 0!==Gr(e[t],r)&&t>0&&n(Gr(e[t-1],r),Gr(e[t],r)))(e,t,r,n)||((e,t,r)=>t>0&&r(Gr(e,t-1),Gr(e,t)))(e[t],r,n),as=(e,t,r,n)=>{var o=e=>(e=>"row"===e?Wt(t):Ut(t))(e)?"".concat(e,"group"):e;return e?hi(t)?o(r):null:n&&hi(t)?o("row"===r?"col":"row"):null},is=(e,t,r)=>it(r(e.element,t),!0,e.isLocked),ss=(e,t,r,n,o,a,i)=>L(e,((e,s)=>((e,l)=>{var d=e.cells,c=L(d,((e,l)=>{if((e=>D(t,(t=>r(e.element,t.element))))(e)){var d=i(e,s,l)?o(e,r,n):e;return a(d,s,l).each((e=>{var t,r;t=d.element,r={scope:k.from(e)},Q(r,((e,r)=>{e.fold((()=>{Se(t,r)}),(e=>{ye(t.dom,r,e)}))}))})),d}return e}));return st(e.element,c,e.section,e.isNew)})(e))),ls=(e,t,r)=>U(e,((n,o)=>os(e,o,t,r)?[]:[$r(n,t)])),ds=(e,t,r,n,o)=>{var a=Yr(e).rows,i=U(t,(e=>ls(a,e,n))),s=L(a,(e=>pi(e.cells))),l=((e,t)=>W(t,v)&&pi(e)?C:(e,r,n)=>!("th"===de(e.element)&&t[r]))(i,s),d=((e,t)=>(r,n)=>k.some(as(e,r.element,"row",t[n])))(r,s);return ss(e,i,n,o,is,d,l)},cs=(e,t,r,n)=>{var o=Yr(e).rows,a=L(t,(e=>$r(o[e.row],e.column)));return ss(e,a,r,n,is,k.none,C)},us=e=>{if(!s(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],r={};return H(e,((n,o)=>{var a=X(n);if(1!==a.length)throw new Error("one and only one name per case");var i=a[0],l=n[i];if(void 0!==r[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!s(l))throw new Error("case arguments must be an array");t.push(i),r[i]=function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.length;if(s!==l.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+l.length+" ("+l+"), got "+s);return{fold:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(r.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+r.length);return r[o].apply(null,n)},match:e=>{var r=X(e);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!W(t,(e=>R(r,e))))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return e[i].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:i,params:n})}}}})),r},ms=t({},us([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])),gs=(e,t,r)=>{for(var n=0,o=e;o<t;o++)n+=void 0!==r[o]?r[o]:0;return n},hs=(e,t)=>{var r=cn(e);return L(r,(e=>{var r=gs(e.row,e.row+e.rowspan,t);return{element:e.element,height:r,rowspan:e.rowspan}}))},ps=(e,t,r)=>{var n=((e,t)=>mn(e)?((e,t)=>{var r=un(e);return L(r,((e,r)=>({element:e.element,width:t[r],colspan:e.colspan})))})(e,t):((e,t)=>{var r=cn(e);return L(r,(e=>{var r=gs(e.column,e.column+e.colspan,t);return{element:e.element,width:r,colspan:e.colspan}}))})(e,t))(e,t);H(n,(e=>{r.setElementWidth(e.element,e.width)}))},vs=(e,t,r,n,o)=>{var a=on(e),i=o.getCellDelta(t),s=o.getWidths(a,o),l=r===a.grid.columns-1,d=n.clampTableDelta(s,r,i,o.minCellWidth(),l),c=((e,t,r,n,o)=>{var a=e.slice(0),i=((e,t)=>0===e.length?ms.none():1===e.length?ms.only(0):0===t?ms.left(0,1):t===e.length-1?ms.right(t-1,t):t>0&&t<e.length-1?ms.middle(t-1,t,t+1):ms.none())(e,t),s=p(L(a,p(0)));return i.fold(s,(e=>n.singleColumnWidth(a[e],r)),((e,t)=>o.calcLeftEdgeDeltas(a,e,t,r,n.minCellWidth(),n.isRelative)),((e,t,i)=>o.calcMiddleDeltas(a,e,t,i,r,n.minCellWidth(),n.isRelative)),((e,t)=>o.calcRightEdgeDeltas(a,e,t,r,n.minCellWidth(),n.isRelative)))})(s,r,d,o,n),u=L(c,((e,t)=>e+s[t]));ps(a,u,o),n.resizeTable(o.adjustTableWidth,d,l)},fs=e=>z(e,((e,t)=>D(e,(e=>e.column===t.column))?e:e.concat([t])),[]).sort(((e,t)=>e.column-t.column)),bs=be("col"),ys=be("colgroup"),ws=e=>"tr"===de(e)||ys(e),xs=e=>({element:e,colspan:Zt(e,"colspan",1),rowspan:Zt(e,"rowspan",1)}),Cs=e=>ke(e,"scope").map((e=>e.substr(0,3))),ks=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xs,r=r=>{if(ws(r))return ys((o={element:r}).element)?e.colgroup(o):e.row(o);var o,a=r,i=(t=>bs(t.element)?e.col(t):e.cell(t))(t(a));return n=k.some({item:a,replacement:i}),i},n=k.none();return{getOrInit:(e,t)=>n.fold((()=>r(e)),(n=>t(e,n.item)?n.replacement:r(e)))}},Ss=e=>t=>{var r=[],n=n=>{var o="td"===e?{scope:null}:{},a=t.replace(n,e,o);return r.push({item:n,sub:a}),a};return{replaceOrInit:(e,t)=>{if(ws(e)||bs(e))return e;var o=e;return((e,t)=>V(r,(r=>t(r.item,e))))(o,t).fold((()=>n(o)),(r=>t(e,r.item)?r.sub:n(o)))}}},_s=e=>({unmerge:t=>{var r=Cs(t);return r.each((e=>we(t,"scope",e))),()=>{var n=e.cell({element:t,colspan:1,rowspan:1});return Vt(n,"width"),Vt(t,"width"),r.each((e=>we(n,"scope",e))),n}},merge:e=>(Vt(e[0],"width"),(()=>{var t=Ot(L(e,Cs));if(0===t.length)return k.none();var r=t[0],n=["row","col"];return D(t,(e=>e!==r&&R(n,e)))?k.none():k.from(r)})().fold((()=>Se(e[0],"scope")),(t=>we(e[0],"scope",t+"group"))),p(e[0]))}),Os=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Es=ka(),Ts=e=>((e,t)=>{var r=e.property().name(t);return R(Os,r)})(Es,e),As=e=>((e,t)=>{var r=e.property().name(t);return R(["ol","ul"],r)})(Es,e),Ms=e=>{var t,r=be("br"),n=e=>Mo(e).bind((t=>{var n=ze(t).map((e=>!!Ts(e)||!!((e,t)=>R(["br","img","hr","input"],e.property().name(t)))(Es,e)&&"img"!==de(e))).getOr(!1);return He(t).map((o=>{return!0===n||("li"===de(a=o)||yt(a,As).isSome())||r(t)||Ts(o)&&!Ne(e,o)?[]:[Ee.fromTag("br")];var a}))})).getOr([]),o=(t=U(e,(e=>{var t=Ve(e);return(e=>W(e,(e=>r(e)||pe(e)&&0===ko(e).trim().length)))(t)?[]:t.concat(n(e))})),0===t.length?[Ee.fromTag("br")]:t);Ye(e[0]),Ke(e[0],o)},Ns=e=>aa(e,!0),Rs=e=>{0===Jt(e).length&&Xe(e)},Ds=(e,t)=>({grid:e,cursor:t}),Bs=(e,t,r)=>{var n=((e,t,r)=>{var n,o,a=Yr(e).rows;return k.from(null===(o=null===(n=a[t])||void 0===n?void 0:n.cells[r])||void 0===o?void 0:o.element).filter(Ns).orThunk((()=>(e=>Y(e,(e=>Y(e.cells,(e=>{var t=e.element;return Et(Ns(t),t)})))))(a)))})(e,t,r);return Ds(e,n)},Ls=e=>z(e,((e,t)=>D(e,(e=>e.row===t.row))?e:e.concat([t])),[]).sort(((e,t)=>e.row-t.row)),Hs=(e,t)=>(r,n,o,a,i)=>{var s=Ls(n),l=L(s,(e=>e.row)),d=((e,t,r,n,o,a,i)=>{var{cols:s,rows:l}=Yr(e),d=l[t[0]],c=U(t,(e=>((e,t,r)=>{var n=e[t];return U(n.cells,((n,o)=>os(e,t,o,r)?[]:[n]))})(l,e,o))),u=L(d.cells,((e,t)=>pi(ls(l,t,o)))),m=[...l];H(t,(e=>{m[e]=i.transformRow(l[e],r)}));var g=[...s,...m],h=((e,t)=>W(t,v)&&pi(e.cells)?C:(e,r,n)=>!("th"===de(e.element)&&t[n]))(d,u),p=((e,t)=>(r,n,o)=>k.some(as(e,r.element,"col",t[o])))(n,u);return ss(g,c,o,a,i.transformCell,p,h)})(r,l,e,t,o,a.replaceOrInit,i);return Bs(d,n[0].row,n[0].column)},Ps=Hs("thead",!0),Is=Hs("tbody",!1),Fs=Hs("tfoot",!1),zs=(e,t,r)=>{var n=((e,t)=>nr(e,(()=>t)))(e,r.section),o=an(n);return Di(o,t,!0)},Vs=(e,t,r,n)=>((e,t,r,n)=>{var o=an(t),a=n.getWidths(o,n);ps(o,a,n)})(0,t,0,n.sizing),Zs=(e,t,r,n)=>((e,t,r,n,o)=>{var a=an(t),i=n.getWidths(a,n),s=n.pixelWidth(),{newSizes:l,delta:d}=o.calcRedestributedWidths(i,s,r.pixelDelta,n.isRelative);ps(a,l,n),n.adjustTableWidth(d)})(0,t,r,n.sizing,n.resize),js=(e,t)=>D(t,(e=>0===e.column&&e.isLocked)),Us=(e,t)=>D(t,(t=>t.column+t.colspan>=e.grid.columns&&t.isLocked)),Ws=(e,t)=>{var r=hn(e),n=fs(t);return z(n,((e,t)=>e+r[t.column].map(Vr).getOr(0)),0)},qs=e=>(t,r)=>Fi(t,r).filter((r=>!(e?js:Us)(t,r))).map((e=>({details:e,pixelDelta:Ws(t,e)}))),$s=e=>(t,r)=>Ii(t,r).filter((r=>!(e?js:Us)(t,r.cells))),Gs=Ss("th"),Ks=Ss("td"),Ys=Pi(((e,t,r,n)=>{var o=t[0].row,a=Ls(t),i=F(a,((e,t)=>({grid:rs(e.grid,o,t.row+e.delta,r,n.getOrInit),delta:e.delta+1})),{grid:e,delta:0}).grid;return Bs(i,o,t[0].column)}),Fi,h,h,ks),Xs=Pi(((e,t,r,n)=>{var o=Ls(t),a=o[o.length-1],i=a.row+a.rowspan,s=F(o,((e,t)=>rs(e,i,t.row,r,n.getOrInit)),e);return Bs(s,i,t[0].column)}),Fi,h,h,ks),Js=Pi(((e,t,r,n)=>{var o=t.details,a=fs(o),i=a[0].column,s=F(a,((e,t)=>({grid:ns(e.grid,i,t.column+e.delta,r,n.getOrInit),delta:e.delta+1})),{grid:e,delta:0}).grid;return Bs(s,o[0].row,i)}),qs(!0),Zs,h,ks),Qs=Pi(((e,t,r,n)=>{var o=t.details,a=o[o.length-1],i=a.column+a.colspan,s=fs(o),l=F(s,((e,t)=>ns(e,i,t.column,r,n.getOrInit)),e);return Bs(l,o[0].row,i)}),qs(!1),Zs,h,ks),el=Pi(((e,t,r,n)=>{var o=fs(t.details),a=((e,t)=>U(e,(e=>{var r=e.cells,n=F(t,((e,t)=>t>=0&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e),r);return n.length>0?[st(e.element,n,e.section,e.isNew)]:[]})))(e,L(o,(e=>e.column))),i=a.length>0?a[0].cells.length-1:0;return Bs(a,o[0].row,Math.min(o[0].column,i))}),((e,t)=>zi(e,t).map((t=>({details:t,pixelDelta:-Ws(e,t)})))),Zs,Rs,ks),tl=Pi(((e,t,r,n)=>{var o=Ls(t),a=((e,t,r)=>{var{rows:n,cols:o}=Yr(e);return[...o,...n.slice(0,t),...n.slice(r+1)]})(e,o[0].row,o[o.length-1].row),i=a.length>0?a.length-1:0;return Bs(a,Math.min(t[0].row,i),t[0].column)}),Fi,h,Rs,ks),rl=Pi(((e,t,r,n)=>{var o=fs(t),a=L(o,(e=>e.column)),i=ds(e,a,!0,r,n.replaceOrInit);return Bs(i,t[0].row,t[0].column)}),zi,h,h,Gs),nl=Pi(((e,t,r,n)=>{var o=fs(t),a=L(o,(e=>e.column)),i=ds(e,a,!1,r,n.replaceOrInit);return Bs(i,t[0].row,t[0].column)}),zi,h,h,Ks),ol=Pi(Ps,zi,h,h,Gs),al=Pi(Is,zi,h,h,Ks),il=Pi(Fs,zi,h,h,Ks),sl=Pi(((e,t,r,n)=>{var o=cs(e,t,r,n.replaceOrInit);return Bs(o,t[0].row,t[0].column)}),zi,h,h,Gs),ll=Pi(((e,t,r,n)=>{var o=cs(e,t,r,n.replaceOrInit);return Bs(o,t[0].row,t[0].column)}),zi,h,h,Ks),dl=Pi(((e,t,r,n)=>{var o=t.cells;Ms(o);var a=((e,t,r,n)=>{var o=Yr(e).rows;if(0===o.length)return e;for(var a=t.startRow;a<=t.finishRow;a++)for(var i=t.startCol;i<=t.finishCol;i++){var s=o[a],l=$r(s,i).isLocked;Wr(s,i,it(n(),!1,l))}return e})(e,t.bounds,0,n.merge(o));return Ds(a,k.from(o[0]))}),((e,t)=>((e,t)=>t.mergable)(0,t).filter((t=>Vi(e,t.cells)))),Vs,h,_s),cl=Pi(((e,t,r,n)=>{var o=F(t,((e,t)=>Zi(e,t,r,n.unmerge(t))),e);return Ds(o,k.from(t[0]))}),((e,t)=>((e,t)=>t.unmergable)(0,t).filter((t=>Vi(e,t)))),Vs,h,_s),ul=Pi(((e,r,n,o)=>{var a,i,s=((e,t)=>{var r=on(e);return Di(r,t,!0)})(r.clipboard,r.generators);return((e,r,n,o,a)=>{var i=en(r),s=((e,t,r)=>{var n=Kr(t[0]),o=Yr(t).cols.length+e.row,a=B(n-e.column,(t=>t+e.column));return{row:o,column:V(a,(e=>W(r,(t=>t!==e)))).getOr(n-1)}})(e,r,i),l=Yr(n).rows,d=Qi(s,l,i),c=((e,t,r)=>{if(e.row>=t.length||e.column>Kr(t[0]))return Wi.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column);var n=t.slice(e.row),o=n[0].cells.slice(e.column),a=Kr(r[0]),i=r.length;return Wi.value({rowDelta:n.length-i,colDelta:o.length-a})})(s,r,l);return c.map((e=>{var n=t(t({},e),{},{colDelta:e.colDelta-d.length}),i=Xi(r,n,o),c=en(i),u=Qi(s,l,c);return((e,t,r,n,o,a)=>{for(var i=e.row,s=e.column,l=i+r.length,d=s+Kr(r[0])+a.length,c=q(a,C),u=i;u<l;u++)for(var m=0,g=s;g<d;g++)if(c[g])m++;else{Ji(t,u,g,o)&&Zi(t,Gr(t[u],g),o,n.cell);var h=g-s-m,p=$r(r[u-i],h),v=p.element,f=n.replace(v);Wr(t[u],g,it(f,!0,p.isLocked))}return t})(s,i,l,o,a,u)}))})((a=r.row,i=r.column,{row:a,column:i}),e,s,r.generators,n).fold((()=>Ds(e,k.some(r.element))),(e=>Bs(e,r.row,r.column)))}),((e,r)=>Xt(r.element).bind((n=>Li(e,n).map((e=>t(t({},e),{},{generators:r.generators,clipboard:r.clipboard})))))),Vs,h,ks),ml=Pi(((e,t,r,n)=>{var o=Yr(e).rows,a=t.cells[0].column,i=o[t.cells[0].row],s=zs(t.clipboard,t.generators,i),l=es(a,e,s,t.generators,r);return Bs(l,t.cells[0].row,t.cells[0].column)}),$s(!0),h,h,ks),gl=Pi(((e,t,r,n)=>{var o=Yr(e).rows,a=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,i=o[t.cells[0].row],s=zs(t.clipboard,t.generators,i),l=es(a,e,s,t.generators,r);return Bs(l,t.cells[0].row,t.cells[0].column)}),$s(!1),h,h,ks),hl=Pi(((e,t,r,n)=>{var o=Yr(e).rows,a=t.cells[0].row,i=o[a],s=zs(t.clipboard,t.generators,i),l=ts(a,e,s,t.generators,r);return Bs(l,t.cells[0].row,t.cells[0].column)}),Ii,h,h,ks),pl=Pi(((e,t,r,n)=>{var o=Yr(e).rows,a=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,i=o[t.cells[0].row],s=zs(t.clipboard,t.generators,i),l=ts(a,e,s,t.generators,r);return Bs(l,t.cells[0].row,t.cells[0].column)}),Ii,h,h,ks),vl=(e,t)=>{var r=on(e);return Fi(r,t).bind((e=>{var t=e[e.length-1],n=e[0].column,o=t.column+t.colspan,a=j(L(r.all,(e=>I(e.cells,(e=>e.column>=n&&e.column<o)))));return bi(a)})).getOr("")},fl=(e,t)=>{var r=on(e);return Fi(r,t).bind(bi).getOr("")},bl=(e,t)=>{var r=on(e);return Fi(r,t).bind((e=>{var t=e[e.length-1],n=e[0].row,o=t.row+t.rowspan;return(e=>{var t=L(e,(e=>fi(e).type)),r=R(t,"header"),n=R(t,"footer");if(r||n){var o=R(t,"body");return!r||o||n?r||o||!n?k.none():k.some("footer"):k.some("header")}return k.some("body")})(r.all.slice(n,o))})).getOr("")},yl=(e,t)=>e.dispatch("NewRow",{node:t}),wl=(e,t)=>e.dispatch("NewCell",{node:t}),xl=(e,r,n)=>{e.dispatch("TableModified",t(t({},n),{},{table:r}))},Cl={structure:!1,style:!0},kl={structure:!0,style:!1},Sl={structure:!0,style:!0},_l=(e,t)=>Yo(e)?wo(t):Xo(e)?yo(t):bo(t),Ol=(e,t,r)=>{var n=e=>"table"===de(sa(e)),o=Uo(e),a=Go(e)?h:ai,i=t=>{switch(Wo(e)){case"section":return Si();case"sectionCells":return _i();case"cells":return Oi();default:return((e,t)=>{var r;switch((r=on(e),Y(r.all,(e=>{var t=fi(e);return"header"===t.type?k.from(t.subType):k.none()}))).getOr(t)){case"section":return xi();case"sectionCells":return Ci();case"cells":return ki()}})(t,"section")}},s=(n,a,s,l)=>function(d,c){var u=arguments.length>2&&void 0!==arguments[2]&&arguments[2];da(d);var m=Ee.fromDom(e.getDoc()),g=Fo(s,m,o),h={sizing:_l(e,d),resize:Go(e)?ui():mi(),section:i(d)};return a(d)?n(d,c,g,h).bind((n=>{t.refresh(d.dom),H(n.newRows,(t=>{yl(e,t.dom)})),H(n.newCells,(t=>{wl(e,t.dom)}));var o=((t,n)=>n.cursor.fold((()=>{var n=Jt(t);return G(n).filter(mt).map((n=>{r.clearSelectedCells(t.dom);var o=e.dom.createRng();return o.selectNode(n.dom),e.selection.setRng(o),we(n,"data-mce-selected","1"),o}))}),(n=>{var o=ni(oi,n),a=e.dom.createRng();return a.setStart(o.element.dom,o.offset),a.setEnd(o.element.dom,o.offset),e.selection.setRng(a),r.clearSelectedCells(t.dom),k.some(a)})))(d,n);return mt(d)&&(da(d),u||xl(e,d.dom,l)),o.map((e=>({rng:e,effect:l})))})):k.none()},l=s(tl,(t=>!n(e)||gi(t).rows>1),h,kl),d=s(el,(t=>!n(e)||gi(t).columns>1),h,kl);return{deleteRow:l,deleteColumn:d,insertRowsBefore:s(Ys,C,h,kl),insertRowsAfter:s(Xs,C,h,kl),insertColumnsBefore:s(Js,C,a,kl),insertColumnsAfter:s(Qs,C,a,kl),mergeCells:s(dl,C,h,kl),unmergeCells:s(cl,C,h,kl),pasteColsBefore:s(ml,C,h,kl),pasteColsAfter:s(gl,C,h,kl),pasteRowsBefore:s(hl,C,h,kl),pasteRowsAfter:s(pl,C,h,kl),pasteCells:s(ul,C,h,Sl),makeCellsHeader:s(sl,C,h,kl),unmakeCellsHeader:s(ll,C,h,kl),makeColumnsHeader:s(rl,C,h,kl),unmakeColumnsHeader:s(nl,C,h,kl),makeRowsHeader:s(ol,C,h,kl),makeRowsBody:s(al,C,h,kl),makeRowsFooter:s(il,C,h,kl),getTableRowType:bl,getTableCellType:fl,getTableColType:vl}},El=(e,t,r)=>{var n=Zt(e,t,1);1===r||n<=1?Se(e,t):we(e,t,Math.min(r,n))},Tl=(e,t)=>r=>{var n=r.column+r.colspan-1,o=r.column;return n>=e&&o<t},Al=us([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Ml=(e,t,r)=>{var n=r.substring(0,r.length-e.length),o=parseFloat(n);return n===o.toString()?t(o):Al.invalid(r)},Nl=t(t({},Al),{},{from:e=>Nt(e,"%")?Ml("%",Al.percent,e):Nt(e,"px")?Ml("px",Al.pixels,e):Al.invalid(e)}),Rl=(e,t,r)=>{var n=Nl.from(r),o=W(e,(e=>"0px"===e))?((e,t)=>{var r=e.fold((()=>p("")),(e=>p(e/t+"px")),(()=>p(100/t+"%")));return B(t,r)})(n,e.length):((e,t,r)=>e.fold((()=>t),(e=>((e,t,r)=>{var n=r/t;return L(e,(e=>Nl.from(e).fold((()=>e),(e=>e*n+"px"),(e=>e/100*r+"px"))))})(t,r,e)),(e=>((e,t)=>L(e,(e=>Nl.from(e).fold((()=>e),(e=>e/t*100+"%"),(e=>e+"%")))))(t,r))))(n,e,t);return Ll(o)},Dl=(e,t)=>0===e.length?t:F(e,((e,t)=>Nl.from(t).fold(p(0),v,v)+e),0),Bl=(e,t)=>Nl.from(e).fold(p(e),(e=>e+t+"px"),(e=>e+t+"%")),Ll=e=>{if(0===e.length)return e;var t=F(e,((e,t)=>{var r=Nl.from(t).fold((()=>({value:t,remainder:0})),(e=>((e,t)=>{var r=Math.floor(e);return{value:r+"px",remainder:e-r}})(e)),(e=>({value:e+"%",remainder:0})));return{output:[r.value].concat(e.output),remainder:e.remainder+r.remainder}}),{output:[],remainder:0}),r=t.output;return r.slice(0,r.length-1).concat([Bl(r[r.length-1],Math.round(t.remainder))])},Hl=Nl.from,Pl=e=>Hl(e).fold(p("px"),p("px"),p("%")),Il=(e,t,r)=>{var n=on(e),o=n.all,a=cn(n),i=un(n);t.each((t=>{var r=Pl(t),o=zr(e),s=((e,t)=>uo(e,t,so,mo))(n,e),l=Rl(s,o,t);mn(n)?((e,t,r)=>{H(t,((t,n)=>{var o=Dl([e[n]],$t());Ht(t.element,"width",o+r)}))})(l,i,r):((e,t,r)=>{H(t,(t=>{var n=e.slice(t.column,t.colspan+t.column),o=Dl(n,$t());Ht(t.element,"width",o+r)}))})(l,a,r),Ht(e,"width",t)})),r.each((t=>{var r=Pl(t),i=wn(e),s=((e,t,r)=>ho(e,t,r,lo,mo))(n,e,Pn);((e,t,r,n)=>{H(r,(t=>{var r=e.slice(t.row,t.rowspan+t.row),o=Dl(r,Gt());Ht(t.element,"height",o+n)})),H(t,((t,r)=>{Ht(t.element,"height",e[r])}))})(Rl(s,i,t),o,a,r),Ht(e,"height",t)}))},Fl=e=>Qn(e).exists((e=>Un.test(e))),zl=e=>Qn(e).exists((e=>Wn.test(e))),Vl=e=>Qn(e).isNone(),Zl=e=>{Se(e,"width")},jl=e=>{var t=oo(e);Il(e,k.some(t),k.none()),Zl(e)},Ul=e=>{var t=(e=>zr(e)+"px")(e);Il(e,k.some(t),k.none()),Zl(e)},Wl=e=>{Vt(e,"width");var t=Qt(e),r=t.length>0?t:Jt(e);H(r,(e=>{Vt(e,"width"),Zl(e)})),Zl(e)},ql={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},$l=(e,t,r,n)=>B(e,(e=>((e,t,r,n)=>{for(var o=Ee.fromTag("tr"),a=0;a<e;a++){var i=Ee.fromTag(n<t||a<r?"th":"td");a<r&&we(i,"scope","row"),n<t&&we(i,"scope","col"),qe(i,Ee.fromTag("br")),qe(o,i)}return o})(t,r,n,e))),Gl=(e,t)=>{e.selection.select(t.dom,!0),e.selection.collapse(!0)},Kl=(e,r,n,o,i)=>{var s=(e=>{var r=e.options,n=r.get("table_default_styles");return r.isSet("table_default_styles")?n:((e,r)=>Jo(e)||!ea(e)?r:Xo(e)?t(t({},r),{},{width:jo(e)}):t(t({},r),{},{width:Zo}))(e,n)})(e),l={styles:s,attributes:ra(e),colGroups:na(e)};return e.undoManager.ignore((()=>{var t=function(e,t,r,n,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ql,i=Ee.fromTag("table"),s="cells"!==o;Pt(i,a.styles),xe(i,a.attributes),a.colGroups&&qe(i,(e=>{var t=Ee.fromTag("colgroup");return B(e,(()=>qe(t,Ee.fromTag("col")))),t})(t));var l=Math.min(e,r);if(s&&r>0){var d=Ee.fromTag("thead");qe(i,d);var c=$l(r,t,"sectionCells"===o?l:0,n);Ke(d,c)}var u=Ee.fromTag("tbody");qe(i,u);var m=$l(s?e-l:e,t,s?0:r,n);return Ke(u,m),i}(n,r,i,o,Wo(e),l);we(t,"data-mce-id","__mce");var a=(e=>{var t=Ee.fromTag("div"),r=Ee.fromDom(e.dom.cloneNode(!0));return qe(t,r),(e=>e.dom.innerHTML)(t)})(t);e.insertContent(a),e.addVisual()})),kt(sa(e),'table[data-mce-id="__mce"]').map((t=>(Xo(e)?Ul(t):Jo(e)?Wl(t):(Yo(e)||(e=>a(e)&&-1!==e.indexOf("%"))(s.width))&&jl(t),da(t),Se(t,"data-mce-id"),((e,t)=>{H(ft(t,"tr"),(t=>{yl(e,t.dom),H(ft(t,"th,td"),(t=>{wl(e,t.dom)}))}))})(e,t),((e,t)=>{kt(t,"td,th").each(b(Gl,e))})(e,t),t.dom))).getOrNull()},Yl=tinymce.util.Tools.resolve("tinymce.FakeClipboard"),Xl="x-tinymce/dom-table-",Jl=Xl+"rows",Ql=Xl+"columns",ed=e=>{var t=Yl.FakeClipboardItem(e);Yl.write([t])},td=e=>{var t,r=null!==(t=Yl.read())&&void 0!==t?t:[];return Y(r,(t=>k.from(t.getType(e))))},rd=e=>{td(e).isSome()&&Yl.clear()},nd=e=>{e.fold(ad,(e=>ed({[Jl]:e})))},od=()=>td(Jl),ad=()=>rd(Jl),id=e=>{e.fold(ld,(e=>ed({[Ql]:e})))},sd=()=>td(Ql),ld=()=>rd(Ql),dd=e=>Ka(ca(e),la(e)).filter(ga),cd=(e,r)=>{var n=la(e),o=e=>er(e,n),s=t=>(e=>Ya(ca(e),la(e)).filter(ga))(e).bind((e=>o(e).map((r=>t(r,e))))),l=t=>{e.focus()},d=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return s(((n,o)=>{var a=$a(Xa(e),n,o);t(n,a,r).each(l)}))},c=()=>s(((r,n)=>((e,r,n)=>{var o=on(e);return Fi(o,r).bind((e=>{var r=Di(o,n,!1),a=Yr(r).rows.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),i=U(a,(e=>{var r=I(e.cells,(e=>!e.isLocked));return r.length>0?[t(t({},e),{},{cells:r})]:[]})),s=Bi(i);return Et(s.length>0,s)})).map((e=>L(e,(e=>{var t=et(e.element);return H(e.cells,(e=>{var r=tt(e.element);Ti(r,"colspan",e.colspan,1),Ti(r,"rowspan",e.rowspan,1),qe(t,r)})),t}))))})(r,$a(Xa(e),r,n),Fo(h,Ee.fromDom(e.getDoc()),k.none())))),u=()=>s(((t,r)=>((e,t)=>{var r=on(e);return zi(r,t).map((e=>{var t=e[e.length-1],n=e[0].column,o=t.column+t.colspan,a=((e,t,r)=>{if(mn(e)){var n=I(un(e),Tl(t,r)),o=L(n,(e=>{var n=tt(e.element);return El(n,"span",r-t),n})),a=Ee.fromTag("colgroup");return Ke(a,o),[a]}return[]})(r,n,o),i=((e,t,r)=>L(e.all,(e=>{var n=I(e.cells,Tl(t,r)),o=L(n,(e=>{var n=tt(e.element);return El(n,"colspan",r-t),n})),a=Ee.fromTag("tr");return Ke(a,o),a})))(r,n,o);return[...a,...i]}))})(t,$a(Xa(e),t,r)))),m=(t,r)=>r().each((r=>{var n=L(r,(e=>tt(e)));s(((r,o)=>{var a=zo(Ee.fromDom(e.getDoc())),i=((e,t,r,n)=>({selection:La(e),clipboard:r,generators:n}))(Xa(e),0,n,a);t(r,i).each(l)}))})),p=e=>(t,r)=>((e,t)=>oe(e,t)?k.from(e[t]):k.none())(r,"type").each((t=>{d(e(t),r.no_events)}));Q({mceTableSplitCells:()=>d(r.unmergeCells),mceTableMergeCells:()=>d(r.mergeCells),mceTableInsertRowBefore:()=>d(r.insertRowsBefore),mceTableInsertRowAfter:()=>d(r.insertRowsAfter),mceTableInsertColBefore:()=>d(r.insertColumnsBefore),mceTableInsertColAfter:()=>d(r.insertColumnsAfter),mceTableDeleteCol:()=>d(r.deleteColumn),mceTableDeleteRow:()=>d(r.deleteRow),mceTableCutCol:()=>u().each((e=>{id(e),d(r.deleteColumn)})),mceTableCutRow:()=>c().each((e=>{nd(e),d(r.deleteRow)})),mceTableCopyCol:()=>u().each((e=>id(e))),mceTableCopyRow:()=>c().each((e=>nd(e))),mceTablePasteColBefore:()=>m(r.pasteColsBefore,sd),mceTablePasteColAfter:()=>m(r.pasteColsAfter,sd),mceTablePasteRowBefore:()=>m(r.pasteRowsBefore,od),mceTablePasteRowAfter:()=>m(r.pasteRowsAfter,od),mceTableDelete:()=>dd(e).each((t=>{er(t,n).filter(y(n)).each((t=>{var r=Ee.fromText("");if(Ue(t,r),Xe(t),e.dom.isEmpty(e.getBody()))e.setContent(""),e.selection.setCursorLocation();else{var n=e.dom.createRng();n.setStart(r.dom,0),n.setEnd(r.dom,0),e.selection.setRng(n),e.nodeChanged()}}))})),mceTableCellToggleClass:(t,r)=>{s((t=>{var n=Xa(e),o=W(n,(t=>e.formatter.match("tablecellclass",{value:r},t.dom))),a=o?e.formatter.remove:e.formatter.apply;H(n,(e=>a("tablecellclass",{value:r},e.dom))),xl(e,t.dom,Cl)}))},mceTableToggleClass:(t,r)=>{s((t=>{e.formatter.toggle("tableclass",{value:r},t.dom),xl(e,t.dom,Cl)}))},mceTableToggleCaption:()=>{dd(e).each((t=>{er(t,n).each((r=>{Ct(r,"caption").fold((()=>{var t=Ee.fromTag("caption");qe(t,Ee.fromText("Caption")),((e,t,r)=>{Ze(e,0).fold((()=>{qe(e,t)}),(e=>{je(e,t)}))})(r,t),e.selection.setCursorLocation(t.dom,0)}),(n=>{be("caption")(t)&&Me("td",r).each((t=>e.selection.setCursorLocation(t.dom,0))),Xe(n)})),xl(e,r.dom,kl)}))}))},mceTableSizingMode:(t,r)=>(t=>dd(e).each((r=>{Jo(e)||Xo(e)||Yo(e)||er(r,n).each((r=>{"relative"!==t||Fl(r)?"fixed"!==t||zl(r)?"responsive"!==t||Vl(r)||Wl(r):Ul(r):jl(r),da(r),xl(e,r.dom,kl)}))})))(r),mceTableCellType:p((e=>"th"===e?r.makeCellsHeader:r.unmakeCellsHeader)),mceTableColType:p((e=>"th"===e?r.makeColumnsHeader:r.unmakeColumnsHeader)),mceTableRowType:p((e=>{switch(e){case"header":return r.makeRowsHeader;case"footer":return r.makeRowsFooter;default:return r.makeRowsBody}}))},((t,r)=>e.addCommand(r,t))),e.addCommand("mceInsertTable",((t,r)=>{!function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e=>g(e)&&e>0;if(o(t)&&o(r)){var a=n.headerRows||0,i=n.headerColumns||0;return Kl(e,r,t,i,a)}console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table.")}(e,r.rows,r.columns,r.options)})),e.addCommand("mceTableApplyCellStyle",((t,r)=>{var n,s,l=e=>"tablecell"+e.toLowerCase().replace("-","");if(i(r)){var d=I(Xa(e),ga);if(0!==d.length){var c=(n=(t,r)=>e.formatter.has(l(r))&&a(t),((e,t,r,n)=>{Q(e,((e,o)=>{(t(e,o)?r:n)(e,o)}))})(r,n,(e=>(t,r)=>{e[r]=t})(s={}),h),s);(e=>{for(var t in e)if(J.call(e,t))return!1;return!0})(c)||(Q(c,((t,r)=>{var n=l(r);H(d,(r=>{""===t?e.formatter.remove(n,{value:null},r.dom,!0):e.formatter.apply(n,{value:t},r.dom)}))})),o(d[0]).each((t=>xl(e,t.dom,Cl))))}}}))},ud=us([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),md={before:ud.before,on:ud.on,after:ud.after,cata:(e,t,r,n)=>e.fold(t,r,n),getStart:e=>e.fold(v,v,v)},gd=(e,t)=>({selection:e,kill:t}),hd=(e,t)=>{var r=e.document.createRange();return r.selectNode(t.dom),r},pd=(e,t)=>{var r=e.document.createRange();return vd(r,t),r},vd=(e,t)=>e.selectNodeContents(t.dom),fd=(e,t,r)=>{var n,o=e.document.createRange();return n=o,t.fold((e=>{n.setStartBefore(e.dom)}),((e,t)=>{n.setStart(e.dom,t)}),(e=>{n.setStartAfter(e.dom)})),((e,t)=>{t.fold((t=>{e.setEndBefore(t.dom)}),((t,r)=>{e.setEnd(t.dom,r)}),(t=>{e.setEndAfter(t.dom)}))})(o,r),o},bd=(e,t,r,n,o)=>{var a=e.document.createRange();return a.setStart(t.dom,r),a.setEnd(n.dom,o),a},yd=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),wd=us([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),xd=(e,t,r)=>t(Ee.fromDom(r.startContainer),r.startOffset,Ee.fromDom(r.endContainer),r.endOffset),Cd=(e,t)=>{var r=((e,t)=>t.match({domRange:e=>({ltr:p(e),rtl:k.none}),relative:(t,r)=>({ltr:ir((()=>fd(e,t,r))),rtl:ir((()=>k.some(fd(e,r,t))))}),exact:(t,r,n,o)=>({ltr:ir((()=>bd(e,t,r,n,o))),rtl:ir((()=>k.some(bd(e,n,o,t,r))))})}))(e,t);return((e,t)=>{var r=t.ltr();return r.collapsed?t.rtl().filter((e=>!1===e.collapsed)).map((e=>wd.rtl(Ee.fromDom(e.endContainer),e.endOffset,Ee.fromDom(e.startContainer),e.startOffset))).getOrThunk((()=>xd(0,wd.ltr,r))):xd(0,wd.ltr,r)})(0,r)},kd=(e,t)=>Cd(e,t).match({ltr:(t,r,n,o)=>{var a=e.document.createRange();return a.setStart(t.dom,r),a.setEnd(n.dom,o),a},rtl:(t,r,n,o)=>{var a=e.document.createRange();return a.setStart(n.dom,o),a.setEnd(t.dom,r),a}});wd.ltr,wd.rtl;var Sd=(e,t,r,n)=>({start:e,soffset:t,finish:r,foffset:n}),_d=(e,t,r,n)=>({start:md.on(e,t),finish:md.on(r,n)}),Od=(e,t)=>{var r=kd(e,t);return Sd(Ee.fromDom(r.startContainer),r.startOffset,Ee.fromDom(r.endContainer),r.endOffset)},Ed=_d,Td=(e,t,r,n,o)=>Ne(r,n)?k.none():Aa(r,n,t).bind((t=>{var n=t.boxes.getOr([]);return n.length>1?(o(e,n,t.start,t.finish),k.some(gd(k.some(Ed(r,0,r,Oo(r))),!0))):k.none()})),Ad=(e,t)=>({item:e,mode:t}),Md=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Nd;return e.property().parent(t).map((e=>Ad(e,n)))},Nd=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Rd;return r.sibling(e,t).map((e=>Ad(e,n)))},Rd=function e(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,a=t.property().children(r);return n.first(a).map((e=>Ad(e,o)))},Dd=[{current:Md,next:Nd,fallback:k.none()},{current:Nd,next:Rd,fallback:k.some(Md)},{current:Rd,next:Rd,fallback:k.some(Nd)}],Bd=function e(t,r,n,o){return V(arguments.length>4&&void 0!==arguments[4]?arguments[4]:Dd,(e=>e.current===n)).bind((n=>n.current(t,r,o,n.next).orThunk((()=>n.fallback.bind((n=>e(t,r,n,o)))))))},Ld=(e,t,r,n,o,a)=>Bd(e,t,n,o).bind((t=>a(t.item)?k.none():r(t.item)?k.some(t.item):Ld(e,t.item,r,t.mode,o,a))),Hd=e=>t=>0===e.property().children(t).length,Pd=(e,t,r,n)=>Ld(e,t,r,Nd,{sibling:(e,t)=>e.query().prevSibling(t),first:e=>e.length>0?k.some(e[e.length-1]):k.none()},n),Id=(e,t,r,n)=>Ld(e,t,r,Nd,{sibling:(e,t)=>e.query().nextSibling(t),first:e=>e.length>0?k.some(e[0]):k.none()},n),Fd=ka(),zd=(e,t)=>((e,t,r)=>Pd(e,t,Hd(e),r))(Fd,e,t),Vd=(e,t)=>((e,t,r)=>Id(e,t,Hd(e),r))(Fd,e,t),Zd=us([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),jd=e=>St(e,"tr"),Ud=t(t({},Zd),{},{verify:(e,t,r,n,o,a,i)=>St(n,"td,th",i).bind((r=>St(t,"td,th",i).map((t=>Ne(r,t)?Ne(n,r)&&Oo(r)===o?a(t):Zd.none("in same cell"):Ea(jd,[r,t]).fold((()=>((e,t,r)=>{var n=e.getRect(t),o=e.getRect(r);return o.right>n.left&&o.left<n.right})(e,t,r)?Zd.success():a(t)),(e=>a(t))))))).getOr(Zd.none("default")),cata:(e,t,r,n,o)=>e.fold(t,r,n,o)}),Wd=be("br"),qd=(e,t,r)=>t(e,r).bind((e=>pe(e)&&0===ko(e).trim().length?qd(e,t,r):k.some(e))),$d=(e,t,r,n)=>((e,t)=>Ze(e,t).filter(Wd).orThunk((()=>Ze(e,t-1).filter(Wd))))(t,r).bind((t=>n.traverse(t).fold((()=>qd(t,n.gather,e).map(n.relative)),(e=>(e=>He(e).bind((t=>{var r=Ve(t);return((e,t)=>Z(e,b(Ne,t)))(r,e).map((n=>((e,t,r,n)=>({parent:e,children:t,element:r,index:n}))(t,r,e,n)))})))(e).map((e=>md.on(e.parent,e.index))))))),Gd=(e,t)=>({left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}),Kd=(e,t)=>({left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}),Yd=(e,t,r)=>({left:e.left+t,top:e.top+r,right:e.right+t,bottom:e.bottom+r}),Xd=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom}),Jd=(e,t)=>k.some(e.getRect(t)),Qd=(e,t,r)=>he(t)?Jd(e,t).map(Xd):pe(t)?((e,t,r)=>r>=0&&r<Oo(t)?e.getRangedRect(t,r,t,r+1):r>0?e.getRangedRect(t,r-1,t,r):k.none())(e,t,r).map(Xd):k.none(),ec=(e,t)=>he(t)?Jd(e,t).map(Xd):pe(t)?e.getRangedRect(t,0,t,Oo(t)).map(Xd):k.none(),tc=us([{none:[]},{retry:["caret"]}]),rc=(e,t,r)=>wt(t,Ts).fold(x,(t=>ec(e,t).exists((e=>((e,t)=>e.left<t.left||Math.abs(t.right-e.left)<1||e.left>t.right)(r,e))))),nc={point:e=>e.bottom,adjuster:(e,t,r,n,o)=>{var a=Gd(o,5);return Math.abs(r.bottom-n.bottom)<1||r.top>o.bottom?tc.retry(a):r.top===o.bottom?tc.retry(Gd(o,1)):rc(e,t,o)?tc.retry(Yd(a,5,0)):tc.none()},move:Gd,gather:Vd},oc=(e,t,r,n,o)=>0===o?k.some(n):((e,t,r)=>e.elementFromPoint(t,r).filter((e=>"table"===de(e))).isSome())(e,n.left,t.point(n))?((e,t,r,n,o)=>oc(e,t,r,t.move(n,5),o))(e,t,r,n,o-1):e.situsFromPoint(n.left,t.point(n)).bind((a=>a.start.fold(k.none,(a=>ec(e,a).bind((i=>t.adjuster(e,a,i,r,n).fold(k.none,(n=>oc(e,t,r,n,o-1))))).orThunk((()=>k.some(n)))),k.none))),ac=(e,t,r)=>{var n=e.move(r,5),o=oc(t,e,r,n,100).getOr(n);return((e,t,r)=>e.point(t)>r.getInnerHeight()?k.some(e.point(t)-r.getInnerHeight()):e.point(t)<0?k.some(-e.point(t)):k.none())(e,o,t).fold((()=>t.situsFromPoint(o.left,e.point(o))),(r=>(t.scrollBy(0,r),t.situsFromPoint(o.left,e.point(o)-r))))},ic={tryUp:b(ac,{point:e=>e.top,adjuster:(e,t,r,n,o)=>{var a=Kd(o,5);return Math.abs(r.top-n.top)<1||r.bottom<o.top?tc.retry(a):r.bottom===o.top?tc.retry(Kd(o,1)):rc(e,t,o)?tc.retry(Yd(a,5,0)):tc.none()},move:Kd,gather:zd}),tryDown:b(ac,nc),getJumpSize:p(5)},sc=(e,t,r)=>e.getSelection().bind((n=>((e,t,r,n)=>{var o=Wd(t)?((e,t,r)=>r.traverse(t).orThunk((()=>qd(t,r.gather,e))).map(r.relative))(e,t,n):$d(e,t,r,n);return o.map((e=>({start:e,finish:e})))})(t,n.finish,n.foffset,r).fold((()=>k.some(Qa(n.finish,n.foffset))),(o=>{var a,i=e.fromSitus(o);return a=Ud.verify(e,n.finish,n.foffset,i.finish,i.foffset,r.failure,t),Ud.cata(a,(e=>k.none()),(()=>k.none()),(e=>k.some(Qa(e,0))),(e=>k.some(Qa(e,Oo(e)))))})))),lc=(e,t,r,n,o,a)=>0===a?k.none():uc(e,t,r,n,o).bind((i=>{var s=e.fromSitus(i),l=Ud.verify(e,r,n,s.finish,s.foffset,o.failure,t);return Ud.cata(l,(()=>k.none()),(()=>k.some(i)),(i=>Ne(r,i)&&0===n?dc(e,r,n,Kd,o):lc(e,t,i,0,o,a-1)),(i=>Ne(r,i)&&n===Oo(i)?dc(e,r,n,Gd,o):lc(e,t,i,Oo(i),o,a-1)))})),dc=(e,t,r,n,o)=>Qd(e,t,r).bind((t=>cc(e,o,n(t,ic.getJumpSize())))),cc=(e,t,r)=>{var n=Hr().browser;return n.isChromium()||n.isSafari()||n.isFirefox()?t.retry(e,r):k.none()},uc=(e,t,r,n,o)=>Qd(e,r,n).bind((t=>cc(e,o,t))),mc=(e,t,r,n,o)=>St(n,"td,th",t).bind((n=>St(n,"table",t).bind((a=>((e,t)=>yt(e,(e=>He(e).exists((e=>Ne(e,t)))),void 0).isSome())(o,a)?((e,t,r)=>sc(e,t,r).bind((n=>lc(e,t,n.element,n.offset,r,20).map(e.fromSitus))))(e,t,r).bind((e=>St(e.finish,"td,th",t).map((t=>({start:n,finish:t,range:e}))))):k.none())))),gc=(e,t,r,n,o,a)=>a(n,t).orThunk((()=>mc(e,t,r,n,o).map((e=>{var t=e.range;return gd(k.some(Ed(t.start,t.soffset,t.finish,t.foffset)),!0)})))),hc=(e,t)=>St(e,"tr",t).bind((e=>St(e,"table",t).bind((r=>{var n=ft(r,"tr");return Ne(e,n[0])?((e,t,r)=>Pd(Fd,e,(e=>Mo(e).isSome()),r))(r,0,t).map((e=>{var t=Oo(e);return gd(k.some(Ed(e,t,e,t)),!0)})):k.none()})))),pc=(e,t)=>St(e,"tr",t).bind((e=>St(e,"table",t).bind((r=>{var n=ft(r,"tr");return Ne(e,n[n.length-1])?((e,t,r)=>Id(Fd,e,(e=>Ao(e).isSome()),r))(r,0,t).map((e=>gd(k.some(Ed(e,0,e,0)),!0))):k.none()})))),vc=(e,t,r,n,o,a,i)=>mc(e,r,n,o,a).bind((e=>Td(t,r,e.start,e.finish,i))),fc=e=>{var t=e;return{get:()=>t,set:e=>{t=e}}},bc=()=>{var e=(e=>{var t=fc(k.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(k.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(k.some(e))}}})(h);return t(t({},e),{},{on:t=>e.get().each(t)})},yc=(e,t)=>St(e,"td,th",t),wc=e=>Pe(e).exists(aa),xc={traverse:ze,gather:Vd,relative:md.before,retry:ic.tryDown,failure:Ud.failedDown},Cc={traverse:Fe,gather:zd,relative:md.before,retry:ic.tryUp,failure:Ud.failedUp},kc=e=>t=>t===e,Sc=kc(38),_c=kc(40),Oc=e=>e>=37&&e<=40,Ec={isBackward:kc(37),isForward:kc(39)},Tc={isBackward:kc(39),isForward:kc(37)},Ac=us([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Mc={domRange:Ac.domRange,relative:Ac.relative,exact:Ac.exact,exactFromRange:e=>Ac.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{var t=(e=>e.match({domRange:e=>Ee.fromDom(e.startContainer),relative:(e,t)=>md.getStart(e),exact:(e,t,r,n)=>e}))(e);return Ee.fromDom(Le(t).dom.defaultView)},range:Sd},Nc=document.caretPositionFromPoint?(e,t,r)=>{var n,o;return k.from(null===(o=(n=e.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(n,t,r)).bind((t=>{if(null===t.offsetNode)return k.none();var r=e.dom.createRange();return r.setStart(t.offsetNode,t.offset),r.collapse(),k.some(r)}))}:document.caretRangeFromPoint?(e,t,r)=>{var n,o;return k.from(null===(o=(n=e.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(n,t,r))}:k.none,Rc=(e,t)=>{var r=de(e);return"input"===r?md.after(e):R(["br","img"],r)?0===t?md.before(e):md.after(e):md.on(e,t)},Dc=e=>k.from(e.getSelection()),Bc=(e,t)=>{Dc(e).each((e=>{e.removeAllRanges(),e.addRange(t)}))},Lc=(e,t,r,n,o)=>{var a=bd(e,t,r,n,o);Bc(e,a)},Hc=(e,t)=>Cd(e,t).match({ltr:(t,r,n,o)=>{Lc(e,t,r,n,o)},rtl:(t,r,n,o)=>{Dc(e).each((a=>{if(a.setBaseAndExtent)a.setBaseAndExtent(t.dom,r,n.dom,o);else if(a.extend)try{((e,t,r,n,o,a)=>{t.collapse(r.dom,n),t.extend(o.dom,a)})(0,a,t,r,n,o)}catch(a){Lc(e,n,o,t,r)}else Lc(e,n,o,t,r)}))}}),Pc=(e,t,r,n,o)=>{var a=((e,t,r,n)=>{var o=Rc(e,t),a=Rc(r,n);return Mc.relative(o,a)})(t,r,n,o);Hc(e,a)},Ic=(e,t,r)=>{var n=((e,t)=>{var r=e.fold(md.before,Rc,md.after),n=t.fold(md.before,Rc,md.after);return Mc.relative(r,n)})(t,r);Hc(e,n)},Fc=e=>{if(e.rangeCount>0){var t=e.getRangeAt(0),r=e.getRangeAt(e.rangeCount-1);return k.some(Sd(Ee.fromDom(t.startContainer),t.startOffset,Ee.fromDom(r.endContainer),r.endOffset))}return k.none()},zc=e=>{if(null===e.anchorNode||null===e.focusNode)return Fc(e);var t=Ee.fromDom(e.anchorNode),r=Ee.fromDom(e.focusNode);return((e,t,r,n)=>{var o=((e,t,r,n)=>{var o=Be(e).dom.createRange();return o.setStart(e.dom,t),o.setEnd(r.dom,n),o})(e,t,r,n),a=Ne(e,r)&&t===n;return o.collapsed&&!a})(t,e.anchorOffset,r,e.focusOffset)?k.some(Sd(t,e.anchorOffset,r,e.focusOffset)):Fc(e)},Vc=function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?hd:pd)(e,t);Bc(e,r)},Zc=e=>(e=>Dc(e).filter((e=>e.rangeCount>0)).bind(zc))(e).map((e=>Mc.exact(e.start,e.soffset,e.finish,e.foffset))),jc=e=>({elementFromPoint:(t,r)=>Ee.fromPoint(Ee.fromDom(e.document),t,r),getRect:e=>e.dom.getBoundingClientRect(),getRangedRect:(t,r,n,o)=>{var a=Mc.exact(t,r,n,o);return((e,t)=>{return r=kd(e,t),n=r.getClientRects(),(o=n.length>0?n[0]:r.getBoundingClientRect()).width>0||o.height>0?k.some(o).map(yd):k.none();var r,n,o})(e,a)},getSelection:()=>Zc(e).map((t=>Od(e,t))),fromSitus:t=>{var r=Mc.relative(t.start,t.finish);return Od(e,r)},situsFromPoint:(t,r)=>((e,t,r)=>((e,t,r)=>{var n=Ee.fromDom(e.document);return Nc(n,t,r).map((e=>Sd(Ee.fromDom(e.startContainer),e.startOffset,Ee.fromDom(e.endContainer),e.endOffset)))})(e,t,r))(e,t,r).map((e=>_d(e.start,e.soffset,e.finish,e.foffset))),clearSelection:()=>{(e=>{Dc(e).each((e=>e.removeAllRanges()))})(e)},collapseSelection:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Zc(e).each((r=>r.fold((e=>e.collapse(t)),((r,n)=>{var o=t?r:n;Ic(e,o,o)}),((r,n,o,a)=>{var i=t?r:o,s=t?n:a;Pc(e,i,s,i,s)}))))},setSelection:t=>{Pc(e,t.start,t.soffset,t.finish,t.foffset)},setRelativeSelection:(t,r)=>{Ic(e,t,r)},selectNode:t=>{Vc(e,t,!1)},selectContents:t=>{Vc(e,t)},getInnerHeight:()=>e.innerHeight,getScrollY:()=>{var t,r,n,o;return(t=Ee.fromDom(e.document),r=void 0!==t?t.dom:document,n=r.body.scrollLeft||r.documentElement.scrollLeft,o=r.body.scrollTop||r.documentElement.scrollTop,kn(n,o)).top},scrollBy:(t,r)=>{((e,t,r)=>{var n=(void 0!==r?r.dom:document).defaultView;n&&n.scrollBy(e,t)})(t,r,Ee.fromDom(e.document))}}),Uc=(e,t)=>({rows:e,cols:t}),Wc=e=>wt(e,ge).exists(aa),qc=(e,t)=>Wc(e)||Wc(t),$c=e=>void 0!==e.dom.classList,Gc=(e,t)=>((e,t,r)=>{var n=((e,t)=>{var r=Ce(e,t);return void 0===r||""===r?[]:r.split(" ")})(e,t).concat([r]);return we(e,t,n.join(" ")),!0})(e,"class",t),Kc=(e,t)=>{$c(e)?e.dom.classList.add(t):Gc(e,t)},Yc=(e,t)=>$c(e)&&e.dom.classList.contains(t),Xc=()=>({tag:"none"}),Jc=e=>({tag:"multiple",elements:e}),Qc=e=>({tag:"single",element:e}),eu=e=>{var t,r,n=Ee.fromDom((e=>{if(dt()&&u(e.target)){var t=Ee.fromDom(e.target);if(he(t)&&u(t.dom.shadowRoot)&&e.composed&&e.composedPath){var r=e.composedPath();if(r)return G(r)}}return k.from(e.target)})(e).getOr(e.target)),o=()=>e.stopPropagation(),a=()=>e.preventDefault(),i=(t=a,r=o,function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return t(r.apply(null,n))});return((e,t,r,n,o,a,i)=>({target:e,x:t,y:r,stop:n,prevent:o,kill:a,raw:i}))(n,e.clientX,e.clientY,o,a,i,e)},tu=(e,t,r,n)=>{e.dom.removeEventListener(t,r,n)},ru=C,nu=(e,t,r)=>((e,t,r,n)=>((e,t,r,n,o)=>{var a=((e,t)=>r=>{e(r)&&t(eu(r))})(r,n);return e.dom.addEventListener(t,a,o),{unbind:b(tu,e,t,a,o)}})(e,t,r,n,!1))(e,t,ru,r),ou=eu,au=e=>!Yc(Ee.fromDom(e.target),"ephox-snooker-resizer-bar"),iu=(e,t)=>{var r,n=(r=qa.selectedSelector,{get:()=>Da(Ee.fromDom(e.getBody()),r).fold((()=>Ya(ca(e),la(e)).fold(Xc,Qc)),Jc)}),o=((e,t,r)=>{var n=t=>{Se(t,e.selected),Se(t,e.firstSelected),Se(t,e.lastSelected)},o=t=>{we(t,e.selected,"1")},a=e=>{i(e),r()},i=t=>{var r=ft(t,"".concat(e.selectedSelector,",").concat(e.firstSelectedSelector,",").concat(e.lastSelectedSelector));H(r,n)};return{clearBeforeUpdate:i,clear:a,selectRange:(r,n,i,s)=>{a(r),H(n,o),we(i,e.firstSelected,"1"),we(s,e.lastSelected,"1"),t(n,i,s)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}})(qa,((t,r,n)=>{er(r).each((o=>{var a=Uo(e),i=Fo(h,Ee.fromDom(e.getDoc()),a),s=((e,t,r)=>{var n=on(e);return Fi(n,t).map((e=>{var t=Di(n,r,!1),{rows:o}=Yr(t),a=((e,t)=>{var r=e.slice(0,t[t.length-1].row+1),n=Bi(r);return U(n,(e=>{var r=e.cells.slice(0,t[t.length-1].column+1);return L(r,(e=>e.element))}))})(o,e),i=((e,t)=>{var r=e.slice(t[0].row+t[0].rowspan-1,e.length),n=Bi(r);return U(n,(e=>{var r=e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length);return L(r,(e=>e.element))}))})(o,e);return{upOrLeftCells:a,downOrRightCells:i}}))})(o,{selection:Xa(e)},i);((e,t,r,n,o)=>{e.dispatch("TableSelectionChange",{cells:t,start:r,finish:n,otherCells:o})})(e,t,r,n,s)}))}),(()=>(e=>{e.dispatch("TableSelectionClear")})(e)));return e.on("init",(r=>{var n=e.getWin(),a=sa(e),i=la(e),s=((e,t,r,n)=>{var o=((e,t,r,n)=>{var o=bc(),a=o.clear,i=a=>{o.on((o=>{n.clearBeforeUpdate(t),yc(a.target,r).each((i=>{Aa(o,i,r).each((r=>{var o=r.boxes.getOr([]);if(1===o.length){var s=o[0],l="false"===ia(s),d=_t(oa(a.target),s,Ne);l&&d&&(n.selectRange(t,o,s,s),e.selectContents(s))}else o.length>1&&(n.selectRange(t,o,r.start,r.finish),e.selectContents(i))}))}))}))};return{clearstate:a,mousedown:e=>{n.clear(t),yc(e.target,r).filter(wc).each(o.set)},mouseover:e=>{i(e)},mouseup:e=>{i(e),a()}}})(jc(e),t,r,n);return{clearstate:o.clearstate,mousedown:o.mousedown,mouseover:o.mouseover,mouseup:o.mouseup}})(n,a,i,o),l=((e,t,r,n)=>{var o=jc(e),a=()=>(n.clear(t),k.none());return{keydown:(e,i,s,l,d,c)=>{var u=e.raw,m=u.which,g=!0===u.shiftKey,h=Ma(t,n.selectedSelector).fold((()=>(Oc(m)&&!g&&n.clearBeforeUpdate(t),Oc(m)&&g&&!qc(i,l)?k.none:_c(m)&&g?b(vc,o,t,r,xc,l,i,n.selectRange):Sc(m)&&g?b(vc,o,t,r,Cc,l,i,n.selectRange):_c(m)?b(gc,o,r,xc,l,i,pc):Sc(m)?b(gc,o,r,Cc,l,i,hc):k.none)),(e=>{var r=r=>()=>{var a=Y(r,(r=>((e,t,r,n,o)=>Ra(n,e,t,o.firstSelectedSelector,o.lastSelectedSelector).map((e=>(o.clearBeforeUpdate(r),o.selectRange(r,e.boxes,e.start,e.finish),e.boxes))))(r.rows,r.cols,t,e,n)));return a.fold((()=>Na(t,n.firstSelectedSelector,n.lastSelectedSelector).map((e=>{var r=_c(m)||c.isForward(m)?md.after:md.before;return o.setRelativeSelection(md.on(e.first,0),r(e.table)),n.clear(t),gd(k.none(),!0)}))),(e=>k.some(gd(k.none(),!0))))};return Oc(m)&&g&&!qc(i,l)?k.none:_c(m)&&g?r([Uc(1,0)]):Sc(m)&&g?r([Uc(-1,0)]):c.isBackward(m)&&g?r([Uc(0,-1),Uc(-1,0)]):c.isForward(m)&&g?r([Uc(0,1),Uc(1,0)]):Oc(m)&&!g?a:k.none}));return h()},keyup:(e,o,a,i,s)=>Ma(t,n.selectedSelector).fold((()=>{var l=e.raw,d=l.which;return!0===l.shiftKey&&Oc(d)&&qc(o,i)?((e,t,r,n,o,a,i)=>Ne(r,o)&&n===a?k.none():St(r,"td,th",t).bind((r=>St(o,"td,th",t).bind((n=>Td(e,t,r,n,i))))))(t,r,o,a,i,s,n.selectRange):k.none()}),k.none)}})(n,a,i,o),d=((e,t,r,n)=>{var o=jc(e);return(e,a)=>{n.clearBeforeUpdate(t),Aa(e,a,r).each((e=>{var r=e.boxes.getOr([]);n.selectRange(t,r,e.start,e.finish),o.selectContents(a),o.collapseSelection()}))}})(n,a,i,o);e.on("TableSelectorChange",(e=>d(e.start,e.finish)));var c,u,m=(t,r)=>{(e=>!0===e.raw.shiftKey)(t)&&(r.kill&&t.kill(),r.selection.each((t=>{var r=Mc.relative(t.start,t.finish),o=kd(n,r);e.selection.setRng(o)})))},g=e=>0===e.button,p=(c=fc(Ee.fromDom(a)),u=fc(0),{touchEnd:e=>{var t=Ee.fromDom(e.target);if(be("td")(t)||be("th")(t)){var r=c.get(),n=u.get();Ne(r,t)&&e.timeStamp-n<300&&(e.preventDefault(),d(t,t))}c.set(t),u.set(e.timeStamp)}});e.on("dragstart",(e=>{s.clearstate()})),e.on("mousedown",(e=>{g(e)&&au(e)&&s.mousedown(ou(e))})),e.on("mouseover",(e=>{var t;void 0!==(t=e).buttons&&0==(1&t.buttons)||!au(e)||s.mouseover(ou(e))})),e.on("mouseup",(e=>{g(e)&&au(e)&&s.mouseup(ou(e))})),e.on("touchend",p.touchEnd),e.on("keyup",(t=>{var r=ou(t);if(r.raw.shiftKey&&Oc(r.raw.which)){var n=e.selection.getRng(),o=Ee.fromDom(n.startContainer),a=Ee.fromDom(n.endContainer);l.keyup(r,o,n.startOffset,a,n.endOffset).each((e=>{m(r,e)}))}})),e.on("keydown",(r=>{var n=ou(r);t.hide();var o=e.selection.getRng(),a=Ee.fromDom(o.startContainer),i=Ee.fromDom(o.endContainer),s=fn(Ec,Tc)(Ee.fromDom(e.selection.getStart()));l.keydown(n,a,o.startOffset,i,o.endOffset,s).each((e=>{m(n,e)})),t.show()})),e.on("NodeChange",(()=>{var t=e.selection,r=Ee.fromDom(t.getStart()),n=Ee.fromDom(t.getEnd());Ea(er,[r,n]).fold((()=>o.clear(a)),h)}))})),e.on("PreInit",(()=>{e.serializer.addTempAttr(qa.firstSelected),e.serializer.addTempAttr(qa.lastSelected)})),{getSelectedCells:()=>((e,t,r,n)=>{switch(e.tag){case"none":return t();case"single":return(e=>[e.dom])(e.element);case"multiple":return(e=>L(e,(e=>e.dom)))(e.elements)}})(n.get(),p([])),clearSelectedCells:e=>o.clear(Ee.fromDom(e))}},su=e=>{var t=[];return{bind:e=>{if(void 0===e)throw new Error("Event bind error: undefined handler");t.push(e)},unbind:e=>{t=I(t,(t=>t!==e))},trigger:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];var a={};H(e,((e,t)=>{a[e]=n[t]})),H(t,(e=>{e(a)}))}}},lu=e=>({registry:ee(e,(e=>({bind:e.bind,unbind:e.unbind}))),trigger:ee(e,(e=>e.trigger))}),du=e=>e.slice(0).sort(),cu=(e,t)=>{var r=I(t,(t=>!R(e,t)));r.length>0&&(e=>{throw new Error("Unsupported keys for object: "+du(e).join(", "))})(r)},uu=e=>((e,t)=>((e,t,r)=>{if(0===t.length)throw new Error("You must specify at least one required field.");var n;return((e,t)=>{if(!s(t))throw new Error("The "+e+" fields must be an array. Was: "+t+".");H(t,(t=>{if(!a(t))throw new Error("The value "+t+" in the "+e+" fields was not a string.")}))})("required",t),n=du(t),V(n,((e,t)=>t<n.length-1&&e===n[t+1])).each((e=>{throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+n.join(", ")+"].")})),n=>{var o=X(n);W(t,(e=>R(o,e)))||((e,t)=>{throw new Error("All required keys ("+du(e).join(", ")+") were not specified. Specified keys were: "+du(t).join(", ")+".")})(t,o),e(t,o);var a=I(t,(e=>!r.validate(n[e],e)));return a.length>0&&((e,t)=>{throw new Error("All values need to be of type: "+t+". Keys ("+du(e).join(", ")+") were not.")})(a,r.label),n}})(e,t,{validate:m,label:"function"}))(cu,e),mu=uu(["compare","extract","mutate","sink"]),gu=uu(["element","start","stop","destroy"]),hu=uu(["forceDrop","drop","move","delayDrop"]),pu=()=>{var e,t=(e=lu({move:su(["info"])}),{onEvent:h,reset:h,events:e.registry}),r=(()=>{var e=k.none(),t=lu({move:su(["info"])});return{onEvent:(r,n)=>{n.extract(r).each((r=>{var o=((t,r)=>{var n=e.map((e=>t.compare(e,r)));return e=k.some(r),n})(n,r);o.each((e=>{t.trigger.move(e)}))}))},reset:()=>{e=k.none()},events:t.registry}})(),n=t;return{on:()=>{n.reset(),n=r},off:()=>{n.reset(),n=t},isOn:()=>n===r,onEvent:(e,t)=>{n.onEvent(e,t)},events:r.events}},vu=e=>{var t=e.replace(/\./g,"-");return{resolve:e=>t+"-"+e}},fu=vu("ephox-dragster").resolve,bu=mu({compare:(e,t)=>kn(t.left-e.left,t.top-e.top),extract:e=>k.some(kn(e.x,e.y)),sink:(e,r)=>{var n=(e=>{var r=t({layerClass:fu("blocker")},e),n=Ee.fromTag("div");return we(n,"role","presentation"),Pt(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Kc(n,fu("blocker")),Kc(n,r.layerClass),{element:p(n),destroy:()=>{Xe(n)}}})(r),o=nu(n.element(),"mousedown",e.forceDrop),a=nu(n.element(),"mouseup",e.drop),i=nu(n.element(),"mousemove",e.move),s=nu(n.element(),"mouseout",e.delayDrop);return gu({element:n.element,start:e=>{qe(e,n.element())},stop:()=>{Xe(n.element())},destroy:()=>{n.destroy(),a.unbind(),i.unbind(),s.unbind(),o.unbind()}})},mutate:(e,t)=>{e.mutate(t.left,t.top)}}),yu=vu("ephox-snooker").resolve,wu=yu("resizer-bar"),xu=yu("resizer-rows"),Cu=yu("resizer-cols"),ku=e=>{var t=ft(e.parent(),"."+wu);H(t,Xe)},Su=(e,t,r)=>{var n=e.origin();H(t,(t=>{t.each((t=>{var o=r(n,t);Kc(o,wu),qe(e.parent(),o)}))}))},_u=(e,t,r,n,o)=>{var a=_n(r),i=t.isResizable,s=n.length>0?Pn.positions(n,r):[],l=s.length>0?((e,t)=>U(e.all,((e,r)=>t(e.element)?[r]:[])))(e,i):[];((e,t,r,n)=>{Su(e,t,((e,t)=>{var o=((e,t,r,n,o)=>{var a=Ee.fromTag("div");return Pt(a,{position:"absolute",left:t+"px",top:r-3.5+"px",height:"7px",width:n+"px"}),xe(a,{"data-row":e,role:"presentation"}),a})(t.row,r.left-e.left,t.y-e.top,n);return Kc(o,xu),o}))})(t,I(s,((e,t)=>D(l,(e=>t===e)))),a,Vr(r));var d=o.length>0?Vn.positions(o,r):[],c=d.length>0?((e,t)=>{var r=[];return B(e.grid.columns,(n=>{gn(e,n).map((e=>e.element)).forall(t)&&r.push(n)})),I(r,(r=>{var n=dn(e,(e=>e.column===r));return W(n,(e=>t(e.element)))}))})(e,i):[];((e,t,r,n)=>{Su(e,t,((e,t)=>{var o,a,i,s,l,d=(o=t.col,a=t.x-e.left,i=r.top-e.top,s=n,l=Ee.fromTag("div"),Pt(l,{position:"absolute",left:a-3.5+"px",top:i+"px",height:s+"px",width:"7px"}),xe(l,{"data-column":o,role:"presentation"}),l);return Kc(d,Cu),d}))})(t,I(d,((e,t)=>D(c,(e=>t===e)))),a,xn(r))},Ou=(e,t)=>{if(ku(e),e.isResizable(t)){var r=on(t),n=vn(r),o=hn(r);_u(r,e,t,n,o)}},Eu=(e,t)=>{var r=ft(e.parent(),"."+wu);H(r,t)},Tu=e=>{Eu(e,(e=>{Ht(e,"display","none")}))},Au=e=>{Eu(e,(e=>{Ht(e,"display","block")}))},Mu=yu("resizer-bar-dragging"),Nu=e=>{var t=(()=>{var e=lu({drag:su(["xDelta","yDelta","target"])}),t=k.none(),r=(()=>{var e=lu({drag:su(["xDelta","yDelta"])});return{mutate:(t,r)=>{e.trigger.drag(t,r)},events:e.registry}})();return r.events.drag.bind((r=>{t.each((t=>{e.trigger.drag(r.xDelta,r.yDelta,t)}))})),{assign:e=>{t=k.some(e)},get:()=>t,mutate:r.mutate,events:e.registry}})(),r=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((e,t,r)=>{var n,o,a,i=!1,s=lu({start:su([]),stop:su([])}),d=pu(),c=()=>{g.stop(),d.isOn()&&(d.off(),s.trigger.stop())},u=(n=c,o=null,{cancel:a=()=>{l(o)||(clearTimeout(o),o=null)},throttle:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];a(),o=setTimeout((()=>{o=null,n.apply(null,t)}),200)}});d.events.move.bind((r=>{t.mutate(e,r.info)}));var m=e=>function(){if(i){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e.apply(null,r)}},g=t.sink(hu({forceDrop:c,drop:m(c),move:m((e=>{u.cancel(),d.onEvent(e,t)})),delayDrop:m(u.throttle)}),r);return{element:g.element,go:e=>{g.start(e),d.on(),s.trigger.start()},on:()=>{i=!0},off:()=>{i=!1},isActive:()=>i,destroy:()=>{g.destroy()},events:s.registry}})(e,null!==(t=r.mode)&&void 0!==t?t:bu,r)}(t,{}),n=k.none(),o=(e,t)=>k.from(Ce(e,t));t.events.drag.bind((e=>{o(e.target,"data-row").each((t=>{var r=qt(e.target,"top");Ht(e.target,"top",r+e.yDelta+"px")})),o(e.target,"data-column").each((t=>{var r=qt(e.target,"left");Ht(e.target,"left",r+e.xDelta+"px")}))}));var a=(e,t)=>qt(e,t)-Zt(e,"data-initial-"+t,0);r.events.stop.bind((()=>{t.get().each((t=>{n.each((r=>{o(t,"data-row").each((e=>{var n=a(t,"top");Se(t,"data-initial-top"),u.trigger.adjustHeight(r,n,parseInt(e,10))})),o(t,"data-column").each((e=>{var n=a(t,"left");Se(t,"data-initial-left"),u.trigger.adjustWidth(r,n,parseInt(e,10))})),Ou(e,r)}))}))}));var i=(n,o)=>{u.trigger.startAdjust(),t.assign(n),we(n,"data-initial-"+o,qt(n,o)),Kc(n,Mu),Ht(n,"opacity","0.2"),r.go(e.parent())},s=nu(e.parent(),"mousedown",(e=>{var t;t=e.target,Yc(t,xu)&&i(e.target,"top"),(e=>Yc(e,Cu))(e.target)&&i(e.target,"left")})),d=t=>Ne(t,e.view()),c=nu(e.view(),"mouseover",(t=>{var o;(o=t.target,St(o,"table",d).filter(aa)).fold((()=>{mt(t.target)&&ku(e)}),(t=>{r.isActive()&&(n=k.some(t),Ou(e,t))}))})),u=lu({adjustHeight:su(["table","delta","row"]),adjustWidth:su(["table","delta","column"]),startAdjust:su([])});return{destroy:()=>{s.unbind(),c.unbind(),r.destroy(),ku(e)},refresh:t=>{Ou(e,t)},on:r.on,off:r.off,hideBars:b(Tu,e),showBars:b(Au,e),events:u.registry}},Ru=(e,t,r)=>{var n=Pn,o=Vn,a=Nu(e),i=lu({beforeResize:su(["table","type"]),afterResize:su(["table","type"]),startDrag:su([])});return a.events.adjustHeight.bind((e=>{var t=e.table;i.trigger.beforeResize(t,"row"),((e,t,r,n)=>{var o=on(e),a=((e,t,r)=>ho(e,t,r,ro,(e=>e.getOrThunk(Gt))))(o,e,n),i=L(a,((e,n)=>r===n?Math.max(t+e,Gt()):e)),s=hs(o,i),l=((e,t)=>L(e.all,((e,r)=>({element:e.element,height:t[r]}))))(o,i);H(l,(e=>{Yn(e.element,e.height)})),H(s,(e=>{Yn(e.element,e.height)}));var d=F(i,((e,t)=>e+t),0);Yn(e,d)})(t,n.delta(e.delta,t),e.row,n),i.trigger.afterResize(t,"row")})),a.events.startAdjust.bind((e=>{i.trigger.startDrag()})),a.events.adjustWidth.bind((e=>{var n=e.table;i.trigger.beforeResize(n,"col");var a=o.delta(e.delta,n),s=r(n);vs(n,a,e.column,t,s),i.trigger.afterResize(n,"col")})),{on:a.on,off:a.off,refreshBars:a.refresh,hideBars:a.hideBars,showBars:a.showBars,destroy:a.destroy,events:i.registry}},Du=e=>u(e)&&"TABLE"===e.nodeName,Bu="bar-",Lu=e=>"false"!==Ce(e,"data-mce-resize"),Hu=e=>{var t,r,n=bc(),o=bc(),a=bc(),i=t=>_l(e,t),s=()=>$o(e)?mi():ui();return e.on("init",(()=>{var t=((e,t)=>{return e.inline?((e,t,r)=>({parent:p(t),view:p(e),origin:p(kn(0,0)),isResizable:r}))(Ee.fromDom(e.getBody()),(r=Ee.fromTag("div"),Pt(r,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),qe(gt(Ee.fromDom(document)),r),r),t):((e,t)=>{var r=ve(e)?(e=>Ee.fromDom(Le(e).dom.documentElement))(e):e;return{parent:p(r),view:p(e),origin:p(kn(0,0)),isResizable:t}})(Ee.fromDom(e.getDoc()),t);var r})(e,Lu);if(a.set(t),(e=>{var t=e.options.get("object_resizing");return R(t.split(","),"table")})(e)&&Qo(e)){var r=s(),l=Ru(t,r,i);l.on(),l.events.startDrag.bind((t=>{n.set(e.selection.getRng())})),l.events.beforeResize.bind((t=>{var r=t.table.dom;((e,t,r,n,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:r,height:n,origin:o})})(e,r,ua(r),ma(r),Bu+t.type)})),l.events.afterResize.bind((t=>{var r=t.table,o=r.dom;da(r),n.on((t=>{e.selection.setRng(t),e.focus()})),((e,t,r,n,o)=>{e.dispatch("ObjectResized",{target:t,width:r,height:n,origin:o})})(e,o,ua(o),ma(o),Bu+t.type),e.undoManager.add()})),o.set(l)}})),e.on("ObjectResizeStart",(n=>{var o=n.target;if(Du(o)){var a=Ee.fromDom(o);H(e.dom.select(".mce-clonedresizable"),(t=>{e.dom.addClass(t,"mce-"+qo(e)+"-columns")})),!zl(a)&&Xo(e)?Ul(a):!Fl(a)&&Yo(e)&&jl(a),Vl(a)&&Mt(n.origin,Bu)&&jl(a),t=n.width,r=Jo(e)?"":((e,t)=>{var r=e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width");return k.from(r).filter(Dt)})(e,o).getOr("")}})),e.on("ObjectResized",(n=>{var o=n.target;if(Du(o)){var a=Ee.fromDom(o),l=n.origin;Mt(l,"corner-")&&((n,o,a)=>{var l=Nt(o,"e");if(""===r&&jl(n),a!==t&&""!==r){Ht(n,"width",r);var d=s(),c=i(n),u=$o(e)||l?(e=>gi(e).columns)(n)-1:0;vs(n,a-t,u,d,c)}else if((e=>/^(\d+(\.\d+)?)%$/.test(e))(r)){var m=parseFloat(r.replace("%",""));Ht(n,"width",a*m/t+"%")}(e=>/^(\d+(\.\d+)?)px$/.test(e))(r)&&(e=>{var t=on(e);mn(t)||H(Jt(e),(e=>{var t=It(e,"width");Ht(e,"width",t),Se(e,"width")}))})(n)})(a,l,n.width),da(a),xl(e,a.dom,Cl)}})),e.on("SwitchMode",(()=>{o.on((t=>{e.mode.isReadOnly()?t.hideBars():t.showBars()}))})),e.on("dragstart dragend",(e=>{o.on((t=>{"dragstart"===e.type?(t.hideBars(),t.off()):(t.on(),t.showBars())}))})),e.on("remove",(()=>{o.on((e=>{e.destroy()})),a.on((t=>{((e,t)=>{e.inline&&Xe(t.parent())})(e,t)}))})),{refresh:e=>{o.on((t=>t.refreshBars(Ee.fromDom(e))))},hide:()=>{o.on((e=>e.hideBars()))},show:()=>{o.on((e=>e.showBars()))}}},Pu=e=>{(e=>{var t=e.options.register;t("table_clone_elements",{processor:"string[]"}),t("table_use_colgroups",{processor:"boolean",default:!0}),t("table_header_type",{processor:e=>{var t=R(["section","cells","sectionCells","auto"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),t("table_sizing_mode",{processor:"string",default:"auto"}),t("table_default_attributes",{processor:"object",default:{border:"1"}}),t("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),t("table_column_resizing",{processor:e=>{var t=R(["preservetable","resizetable"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),t("table_resize_bars",{processor:"boolean",default:!0}),t("table_style_by_css",{processor:"boolean",default:!0}),t("table_merge_content_on_paste",{processor:"boolean",default:!0})})(e);var t=Hu(e),r=iu(e,t),n=Ol(e,t,r);return cd(e,n),((e,t)=>{var r=la(e),n=t=>Ya(ca(e)).bind((n=>er(n,r).map((r=>{var o=$a(Xa(e),r,n);return t(r,o)})))).getOr("");Q({mceTableRowType:()=>n(t.getTableRowType),mceTableCellType:()=>n(t.getTableCellType),mceTableColType:()=>n(t.getTableColType)},((t,r)=>e.addQueryValueHandler(r,t)))})(e,n),Ja(e,n),{getSelectedCells:r.getSelectedCells,clearSelectedCells:r.clearSelectedCells}};e.add("dom",(e=>({table:Pu(e)})))}()},414:(e,t,r)=>{r(778)},778:()=>{!function(){"use strict";tinymce.util.Tools.resolve("tinymce.PluginManager").add("code",(e=>((e=>{e.addCommand("mceCodeEditor",(()=>{(e=>{var t=(e=>e.getContent({source_view:!0}))(e);e.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:t},onSubmit:t=>{((e,t)=>{e.focus(),e.undoManager.transact((()=>{e.setContent(t)})),e.selection.setCursorLocation(),e.nodeChanged()})(e,t.getData().code),t.close()}})})(e)}))})(e),(e=>{var t=()=>e.execCommand("mceCodeEditor");e.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:t}),e.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:t})})(e),{})))}()},10:(e,t,r)=>{r(510)},510:()=>{!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=e=>!(e=>null==e)(e),r=()=>{};class n{constructor(e,t){this.tag=e,this.value=t}static some(e){return new n(!0,e)}static none(){return n.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?n.some(e(this.value)):n.none()}bind(e){return this.tag?e(this.value):n.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:n.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return t(e)?n.some(e):n.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?"some(".concat(this.value,")"):"none()"}}n.singletonNone=new n(!1);var o,a=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),i="undefined"!=typeof window?window:Function("return this;")(),s=function(e,t,r){var n=window.Prism;window.Prism={manual:!0};var o=function(e){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,r=0,n={},o={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof a?new a(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++r}),e.__id},clone:function e(t,r){var n,a;switch(r=r||{},o.util.type(t)){case"Object":if(a=o.util.objId(t),r[a])return r[a];for(var i in n={},r[a]=n,t)t.hasOwnProperty(i)&&(n[i]=e(t[i],r));return n;case"Array":return a=o.util.objId(t),r[a]?r[a]:(n=[],r[a]=n,t.forEach((function(t,o){n[o]=e(t,r)})),n);default:return t}},getLanguage:function(e){for(;e;){var r=t.exec(e.className);if(r)return r[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,r){e.className=e.className.replace(RegExp(t,"gi"),""),e.classList.add("language-"+r)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(n){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(n.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var r in t)if(t[r].src==e)return t[r]}return null}},isActive:function(e,t,r){for(var n="no-"+t;e;){var o=e.classList;if(o.contains(t))return!0;if(o.contains(n))return!1;e=e.parentElement}return!!r}},languages:{plain:n,plaintext:n,text:n,txt:n,extend:function(e,t){var r=o.util.clone(o.languages[e]);for(var n in t)r[n]=t[n];return r},insertBefore:function(e,t,r,n){var a=(n=n||o.languages)[e],i={};for(var s in a)if(a.hasOwnProperty(s)){if(s==t)for(var l in r)r.hasOwnProperty(l)&&(i[l]=r[l]);r.hasOwnProperty(s)||(i[s]=a[s])}var d=n[e];return n[e]=i,o.languages.DFS(o.languages,(function(t,r){r===d&&t!=e&&(this[t]=i)})),i},DFS:function e(t,r,n,a){a=a||{};var i=o.util.objId;for(var s in t)if(t.hasOwnProperty(s)){r.call(t,s,t[s],n||s);var l=t[s],d=o.util.type(l);"Object"!==d||a[i(l)]?"Array"!==d||a[i(l)]||(a[i(l)]=!0,e(l,r,s,a)):(a[i(l)]=!0,e(l,r,null,a))}}},plugins:{},highlightAll:function(e,t){o.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,r){var n={callback:r,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",n),n.elements=Array.prototype.slice.apply(n.container.querySelectorAll(n.selector)),o.hooks.run("before-all-elements-highlight",n);for(var a,i=0;a=n.elements[i++];)o.highlightElement(a,!0===t,n.callback)},highlightElement:function(t,r,n){var a=o.util.getLanguage(t),i=o.languages[a];o.util.setLanguage(t,a);var s=t.parentElement;s&&"pre"===s.nodeName.toLowerCase()&&o.util.setLanguage(s,a);var l={element:t,language:a,grammar:i,code:t.textContent};function d(e){l.highlightedCode=e,o.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,o.hooks.run("after-highlight",l),o.hooks.run("complete",l),n&&n.call(l.element)}if(o.hooks.run("before-sanity-check",l),(s=l.element.parentElement)&&"pre"===s.nodeName.toLowerCase()&&!s.hasAttribute("tabindex")&&s.setAttribute("tabindex","0"),!l.code)return o.hooks.run("complete",l),void(n&&n.call(l.element));if(o.hooks.run("before-highlight",l),l.grammar)if(r&&e.Worker){var c=new Worker(o.filename);c.onmessage=function(e){d(e.data)},c.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else d(o.highlight(l.code,l.grammar,l.language));else d(o.util.encode(l.code))},highlight:function(e,t,r){var n={code:e,grammar:t,language:r};if(o.hooks.run("before-tokenize",n),!n.grammar)throw new Error('The language "'+n.language+'" has no grammar.');return n.tokens=o.tokenize(n.code,n.grammar),o.hooks.run("after-tokenize",n),a.stringify(o.util.encode(n.tokens),n.language)},tokenize:function(e,t){var r=t.rest;if(r){for(var n in r)t[n]=r[n];delete t.rest}var o=new l;return d(o,o.head,e),s(e,o,t,o.head,0),function(e){for(var t=[],r=e.head.next;r!==e.tail;)t.push(r.value),r=r.next;return t}(o)},hooks:{all:{},add:function(e,t){var r=o.hooks.all;r[e]=r[e]||[],r[e].push(t)},run:function(e,t){var r=o.hooks.all[e];if(r&&r.length)for(var n,a=0;n=r[a++];)n(t)}},Token:a};function a(e,t,r,n){this.type=e,this.content=t,this.alias=r,this.length=0|(n||"").length}function i(e,t,r,n){e.lastIndex=t;var o=e.exec(r);if(o&&n&&o[1]){var a=o[1].length;o.index+=a,o[0]=o[0].slice(a)}return o}function s(e,t,r,n,l,u){for(var m in r)if(r.hasOwnProperty(m)&&r[m]){var g=r[m];g=Array.isArray(g)?g:[g];for(var h=0;h<g.length;++h){if(u&&u.cause==m+","+h)return;var p=g[h],v=p.inside,f=!!p.lookbehind,b=!!p.greedy,y=p.alias;if(b&&!p.pattern.global){var w=p.pattern.toString().match(/[imsuy]*$/)[0];p.pattern=RegExp(p.pattern.source,w+"g")}for(var x=p.pattern||p,C=n.next,k=l;C!==t.tail&&!(u&&k>=u.reach);k+=C.value.length,C=C.next){var S=C.value;if(t.length>e.length)return;if(!(S instanceof a)){var _,O=1;if(b){if(!(_=i(x,k,e,f))||_.index>=e.length)break;var E=_.index,T=_.index+_[0].length,A=k;for(A+=C.value.length;E>=A;)A+=(C=C.next).value.length;if(k=A-=C.value.length,C.value instanceof a)continue;for(var M=C;M!==t.tail&&(A<T||"string"==typeof M.value);M=M.next)O++,A+=M.value.length;O--,S=e.slice(k,A),_.index-=k}else if(!(_=i(x,0,S,f)))continue;E=_.index;var N=_[0],R=S.slice(0,E),D=S.slice(E+N.length),B=k+S.length;u&&B>u.reach&&(u.reach=B);var L=C.prev;if(R&&(L=d(t,L,R),k+=R.length),c(t,L,O),C=d(t,L,new a(m,v?o.tokenize(N,v):N,y,N)),D&&d(t,C,D),O>1){var H={cause:m+","+h,reach:B};s(e,t,r,C.prev,k,H),u&&H.reach>u.reach&&(u.reach=H.reach)}}}}}}function l(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function d(e,t,r){var n=t.next,o={value:r,prev:t,next:n};return t.next=o,n.prev=o,e.length++,o}function c(e,t,r){for(var n=t.next,o=0;o<r&&n!==e.tail;o++)n=n.next;t.next=n,n.prev=t,e.length-=o}if(e.Prism=o,a.stringify=function e(t,r){if("string"==typeof t)return t;if(Array.isArray(t)){var n="";return t.forEach((function(t){n+=e(t,r)})),n}var a={type:t.type,content:e(t.content,r),tag:"span",classes:["token",t.type],attributes:{},language:r},i=t.alias;i&&(Array.isArray(i)?Array.prototype.push.apply(a.classes,i):a.classes.push(i)),o.hooks.run("wrap",a);var s="";for(var l in a.attributes)s+=" "+l+'="'+(a.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+a.tag+' class="'+a.classes.join(" ")+'"'+s+">"+a.content+"</"+a.tag+">"},!e.document)return e.addEventListener?(o.disableWorkerMessageHandler||e.addEventListener("message",(function(t){var r=JSON.parse(t.data),n=r.language,a=r.code,i=r.immediateClose;e.postMessage(o.highlight(a,o.languages[n],n)),i&&e.close()}),!1),o):o;var u=o.util.currentScript();function m(){o.manual||o.highlightAll()}if(u&&(o.filename=u.src,u.hasAttribute("data-manual")&&(o.manual=!0)),!o.manual){var g=document.readyState;"loading"===g||"interactive"===g&&u&&u.defer?document.addEventListener("DOMContentLoaded",m):window.requestAnimationFrame?window.requestAnimationFrame(m):window.setTimeout(m,16)}return o}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});return o.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},function(e){function t(e,t){return"___"+e.toUpperCase()+t+"___"}Object.defineProperties(e.languages["markup-templating"]={},{buildPlaceholders:{value:function(r,n,o,a){if(r.language===n){var i=r.tokenStack=[];r.code=r.code.replace(o,(function(e){if("function"==typeof a&&!a(e))return e;for(var o,s=i.length;-1!==r.code.indexOf(o=t(n,s));)++s;return i[s]=e,o})),r.grammar=e.languages.markup}}},tokenizePlaceholders:{value:function(r,n){if(r.language===n&&r.tokenStack){r.grammar=e.languages[n];var o=0,a=Object.keys(r.tokenStack);!function i(s){for(var l=0;l<s.length&&!(o>=a.length);l++){var d=s[l];if("string"==typeof d||d.content&&"string"==typeof d.content){var c=a[o],u=r.tokenStack[c],m="string"==typeof d?d:d.content,g=t(n,c),h=m.indexOf(g);if(h>-1){++o;var p=m.substring(0,h),v=new e.Token(n,e.tokenize(u,r.grammar),"language-"+n,u),f=m.substring(h+g.length),b=[];p&&b.push.apply(b,i([p])),b.push(v),f&&b.push.apply(b,i([f])),"string"==typeof d?s.splice.apply(s,[l,1].concat(b)):d.content=b}}else d.content&&i(d.content)}return s}(r.tokens)}}}})}(o),o.languages.c=o.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),o.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),o.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},o.languages.c.string],char:o.languages.c.char,comment:o.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:o.languages.c}}}}),o.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete o.languages.c.boolean,function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,r=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,(function(){return t.source}));e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,(function(){return t.source}))),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,(function(){return r}))+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])}(o),function(e){function t(e,t){return e.replace(/<<(\d+)>>/g,(function(e,r){return"(?:"+t[+r]+")"}))}function r(e,r,n){return RegExp(t(e,r),n||"")}function n(e,t){for(var r=0;r<t;r++)e=e.replace(/<<self>>/g,(function(){return"(?:"+e+")"}));return e.replace(/<<self>>/g,"[^\\s\\S]")}var o="bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",a="class enum interface record struct",i="add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",s="abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield";function l(e){return"\\b(?:"+e.trim().replace(/ /g,"|")+")\\b"}var d=l(a),c=RegExp(l(o+" "+a+" "+i+" "+s)),u=l(a+" "+i+" "+s),m=l(o+" "+a+" "+s),g=n(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),h=n(/\((?:[^()]|<<self>>)*\)/.source,2),p=/@?\b[A-Za-z_]\w*\b/.source,v=t(/<<0>>(?:\s*<<1>>)?/.source,[p,g]),f=t(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[u,v]),b=/\[\s*(?:,\s*)*\]/.source,y=t(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[f,b]),w=t(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[g,h,b]),x=t(/\(<<0>>+(?:,<<0>>+)+\)/.source,[w]),C=t(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[x,f,b]),k={keyword:c,punctuation:/[<>()?,.:[\]]/},S=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,_=/"(?:\\.|[^\\"\r\n])*"/.source,O=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;e.languages.csharp=e.languages.extend("clike",{string:[{pattern:r(/(^|[^$\\])<<0>>/.source,[O]),lookbehind:!0,greedy:!0},{pattern:r(/(^|[^@$\\])<<0>>/.source,[_]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:r(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[f]),lookbehind:!0,inside:k},{pattern:r(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[p,C]),lookbehind:!0,inside:k},{pattern:r(/(\busing\s+)<<0>>(?=\s*=)/.source,[p]),lookbehind:!0},{pattern:r(/(\b<<0>>\s+)<<1>>/.source,[d,v]),lookbehind:!0,inside:k},{pattern:r(/(\bcatch\s*\(\s*)<<0>>/.source,[f]),lookbehind:!0,inside:k},{pattern:r(/(\bwhere\s+)<<0>>/.source,[p]),lookbehind:!0},{pattern:r(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[y]),lookbehind:!0,inside:k},{pattern:r(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[C,m,p]),inside:k}],keyword:c,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),e.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),e.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:r(/([(,]\s*)<<0>>(?=\s*:)/.source,[p]),lookbehind:!0,alias:"punctuation"}}),e.languages.insertBefore("csharp","class-name",{namespace:{pattern:r(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[p]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:r(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[h]),lookbehind:!0,alias:"class-name",inside:k},"return-type":{pattern:r(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[C,f]),inside:k,alias:"class-name"},"constructor-invocation":{pattern:r(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[C]),lookbehind:!0,inside:k,alias:"class-name"},"generic-method":{pattern:r(/<<0>>\s*<<1>>(?=\s*\()/.source,[p,g]),inside:{function:r(/^<<0>>/.source,[p]),generic:{pattern:RegExp(g),alias:"class-name",inside:k}}},"type-list":{pattern:r(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[d,v,p,C,c.source,h,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:r(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[v,h]),lookbehind:!0,greedy:!0,inside:e.languages.csharp},keyword:c,"class-name":{pattern:RegExp(C),greedy:!0,inside:k},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var E=_+"|"+S,T=t(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[E]),A=n(t(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[T]),2),M=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,N=t(/<<0>>(?:\s*\(<<1>>*\))?/.source,[f,A]);e.languages.insertBefore("csharp","class-name",{attribute:{pattern:r(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[M,N]),lookbehind:!0,greedy:!0,inside:{target:{pattern:r(/^<<0>>(?=\s*:)/.source,[M]),alias:"keyword"},"attribute-arguments":{pattern:r(/\(<<0>>*\)/.source,[A]),inside:e.languages.csharp},"class-name":{pattern:RegExp(f),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var R=/:[^}\r\n]+/.source,D=n(t(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[T]),2),B=t(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[D,R]),L=n(t(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[E]),2),H=t(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[L,R]);function P(t,n){return{interpolation:{pattern:r(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[t]),lookbehind:!0,inside:{"format-string":{pattern:r(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[n,R]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:e.languages.csharp}}},string:/[\s\S]+/}}e.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:r(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[B]),lookbehind:!0,greedy:!0,inside:P(B,D)},{pattern:r(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[H]),lookbehind:!0,greedy:!0,inside:P(H,L)}],char:{pattern:RegExp(S),greedy:!0}}),e.languages.dotnet=e.languages.cs=e.languages.csharp}(o),function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var r=e.languages.markup;r&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css"))}(o),function(e){var t=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,r=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,n={pattern:RegExp(/(^|[^\w.])/.source+r+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};e.languages.java=e.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[n,{pattern:RegExp(/(^|[^\w.])/.source+r+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:n.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+r+/[A-Z]\w*\b/.source),lookbehind:!0,inside:n.inside}],keyword:t,function:[e.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),e.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),e.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":n,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+r+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:n.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+r+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:n.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,(function(){return t.source}))),lookbehind:!0,inside:{punctuation:/\./}}})}(o),o.languages.javascript=o.languages.extend("clike",{"class-name":[o.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),o.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,o.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:o.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:o.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:o.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:o.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:o.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),o.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:o.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),o.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),o.languages.markup&&(o.languages.markup.tag.addInlined("script","javascript"),o.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),o.languages.js=o.languages.javascript,o.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},o.languages.markup.tag.inside["attr-value"].inside.entity=o.languages.markup.entity,o.languages.markup.doctype.inside["internal-subset"].inside=o.languages.markup,o.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))})),Object.defineProperty(o.languages.markup.tag,"addInlined",{value:function(e,t){var r={};r["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:o.languages[t]},r.cdata=/^<!\[CDATA\[|\]\]>$/i;var n={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:r}};n["language-"+t]={pattern:/[\s\S]+/,inside:o.languages[t]};var a={};a[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return e})),"i"),lookbehind:!0,greedy:!0,inside:n},o.languages.insertBefore("markup","cdata",a)}}),Object.defineProperty(o.languages.markup.tag,"addAttribute",{value:function(e,t){o.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:o.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),o.languages.html=o.languages.markup,o.languages.mathml=o.languages.markup,o.languages.svg=o.languages.markup,o.languages.xml=o.languages.extend("markup",{}),o.languages.ssml=o.languages.xml,o.languages.atom=o.languages.xml,o.languages.rss=o.languages.xml,function(e){var t=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,r=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},{pattern:/(::\s*)\b[a-z_]\w*\b(?!\s*\()/i,greedy:!0,lookbehind:!0},{pattern:/(\b(?:case|const)\s+)\b[a-z_]\w*(?=\s*[;=])/i,greedy:!0,lookbehind:!0},/\b(?:null)\b/i,/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/],n=/\b0b[01]+(?:_[01]+)*\b|\b0o[0-7]+(?:_[0-7]+)*\b|\b0x[\da-f]+(?:_[\da-f]+)*\b|(?:\b\d+(?:_\d+)*\.?(?:\d+(?:_\d+)*)?|\B\.\d+)(?:e[+-]?\d+)?/i,o=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,a=/[{}\[\](),:;]/;e.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:t,variable:/\$+(?:\w+\b|(?=\{))/,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},"class-name-definition":{pattern:/(\b(?:class|enum|interface|trait)\s+)\b[a-z_]\w*(?!\\)\b/i,lookbehind:!0,alias:"class-name"},"function-definition":{pattern:/(\bfunction\s+)[a-z_]\w*(?=\s*\()/i,lookbehind:!0,alias:"function"},keyword:[{pattern:/(\(\s*)\b(?:array|bool|boolean|float|int|integer|object|string)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|object|self|static|string)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|never|object|self|static|string|void)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:array(?!\s*\()|bool|float|int|iterable|mixed|object|string|void)\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:false|null)\b|\b(?:false|null)(?=\s*\|)/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(\byield\s+)from\b/i,lookbehind:!0},/\bclass\b/i,{pattern:/((?:^|[^\s>:]|(?:^|[^-])>|(?:^|[^:]):)\s*)\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|never|new|or|parent|print|private|protected|public|readonly|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\b/i,lookbehind:!0}],"argument-name":{pattern:/([(,]\s*)\b[a-z_]\w*(?=\s*:(?!:))/i,lookbehind:!0},"class-name":[{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:r,function:{pattern:/(^|[^\\\w])\\?[a-z_](?:[\w\\]*\w)?(?=\s*\()/i,lookbehind:!0,inside:{punctuation:/\\/}},property:{pattern:/(->\s*)\w+/,lookbehind:!0},number:n,operator:o,punctuation:a};var i={pattern:/\{\$(?:\{(?:\{[^{}]+\}|[^{}]+)\}|[^{}])+\}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)?)/,lookbehind:!0,inside:e.languages.php},s=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:i}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:i}}];e.languages.insertBefore("php","variable",{string:s,attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=\]$)/,lookbehind:!0,inside:{comment:t,string:s,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:r,number:n,operator:o,punctuation:a}},delimiter:{pattern:/^#\[|\]$/,alias:"punctuation"}}}}),e.hooks.add("before-tokenize",(function(t){/<\?/.test(t.code)&&e.languages["markup-templating"].buildPlaceholders(t,"php",/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/g)})),e.hooks.add("after-tokenize",(function(t){e.languages["markup-templating"].tokenizePlaceholders(t,"php")}))}(o),o.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},o.languages.python["string-interpolation"].inside.interpolation.inside.rest=o.languages.python,o.languages.py=o.languages.python,function(e){e.languages.ruby=e.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),e.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var t={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:e.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete e.languages.ruby.function;var r="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",n=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;e.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+r+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:t,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:t,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+n),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+n+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),e.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+r),greedy:!0,inside:{interpolation:t,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:t,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:t,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+r),greedy:!0,inside:{interpolation:t,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:t,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete e.languages.ruby.string,e.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),e.languages.rb=e.languages.ruby}(o),window.Prism=n,o}(),l=e=>t=>t.options.get(e),d=l("codesample_languages"),c=l("codesample_global_prismjs"),u=e=>i.Prism&&c(e)?i.Prism:s,m=e=>t(e)&&"PRE"===e.nodeName&&-1!==e.className.indexOf("language-"),g=e=>{var t=e.selection?e.selection.getNode():null;return m(t)?n.some(t):n.none()},h=e=>{var t,r=(e=>d(e)||[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}])(e),o=(t=r,((e,t)=>0<e.length?n.some(e[0]):n.none())(t)).fold(("",()=>""),(e=>e.value)),i=((e,t)=>g(e).fold((()=>t),(e=>{var r=e.className.match(/language-(\w+)/);return r?r[1]:t})))(e,o),s=(e=>g(e).bind((e=>n.from(e.textContent))).getOr(""))(e);e.windowManager.open({title:"Insert/Edit Code Sample",size:"large",body:{type:"panel",items:[{type:"listbox",name:"language",label:"Language",items:r},{type:"textarea",name:"code",label:"Code view"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{language:i,code:s},onSubmit:t=>{var r=t.getData();((e,t,r)=>{var n=e.dom;e.undoManager.transact((()=>{var o=g(e);return r=a.DOM.encode(r),o.fold((()=>{e.insertContent('<pre id="__new" class="language-'+t+'">'+r+"</pre>");var o=n.select("#__new")[0];n.setAttrib(o,"id",null),e.selection.select(o)}),(o=>{n.setAttrib(o,"class","language-"+t),o.innerHTML=r,u(e).highlightElement(o),e.selection.select(o)}))}))})(e,r.language,r.code),t.close()}})},p=(o=/^\s+|\s+$/g,e=>e.replace(o,"")),v=tinymce.util.Tools.resolve("tinymce.util.Tools"),f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return r=>{var n=()=>{r.setEnabled(e.selection.isEditable()),t(r)};return e.on("NodeChange",n),n(),()=>{e.off("NodeChange",n)}}};e.add("codesample",(e=>{(e=>{var t=e.options.register;t("codesample_languages",{processor:"object[]"}),t("codesample_global_prismjs",{processor:"boolean",default:!1})})(e),(e=>{e.on("PreProcess",(t=>{var r=e.dom,n=r.select("pre[contenteditable=false]",t.node);v.each(v.grep(n,m),(e=>{var t,n=e.textContent;for(r.setAttrib(e,"class",p(r.getAttrib(e,"class"))),r.setAttrib(e,"contentEditable",null),r.setAttrib(e,"data-mce-highlighted",null);t=e.firstChild;)e.removeChild(t);r.add(e,"code").textContent=n}))})),e.on("SetContent",(()=>{var t=e.dom,r=v.grep(t.select("pre"),(e=>m(e)&&"true"!==t.getAttrib(e,"data-mce-highlighted")));r.length&&e.undoManager.transact((()=>{v.each(r,(r=>{var n;v.each(t.select("br",r),(r=>{t.replace(e.getDoc().createTextNode("\n"),r)})),r.innerHTML=t.encode(null!==(n=r.textContent)&&void 0!==n?n:""),u(e).highlightElement(r),t.setAttrib(r,"data-mce-highlighted",!0),r.className=p(r.className)}))}))})),e.on("PreInit",(()=>{e.parser.addNodeFilter("pre",(e=>{for(var t,r=0,n=e.length;r<n;r++){var o=e[r];-1!==(null!==(t=o.attr("class"))&&void 0!==t?t:"").indexOf("language-")&&(o.attr("contenteditable","false"),o.attr("data-mce-highlighted","false"))}}))}))})(e),(e=>{var t=()=>e.execCommand("codesample");e.ui.registry.addToggleButton("codesample",{icon:"code-sample",tooltip:"Insert/edit code sample",onAction:t,onSetup:f(e,(t=>{t.setActive((e=>{var t=e.selection.getStart();return e.dom.is(t,'pre[class*="language-"]')})(e))}))}),e.ui.registry.addMenuItem("codesample",{text:"Code sample...",icon:"code-sample",onAction:t,onSetup:f(e)})})(e),(e=>{e.addCommand("codesample",(()=>{var t=e.selection.getNode();e.selection.isCollapsed()||m(t)?h(e):e.formatter.toggle("code")}))})(e),e.on("dblclick",(t=>{m(t.target)&&h(e)}))}))}()},939:(e,t,r)=>{r(384)},384:()=>{function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function t(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach((function(e){var r,o,a;r=t,o=e,a=n[e],(o=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(o))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=Object.getPrototypeOf,n=(e,t,r)=>{var n;return!!r(e,t.prototype)||(null===(n=e.constructor)||void 0===n?void 0:n.name)===t.name},o=e=>t=>{return o=typeof(r=t),(null===r?"null":"object"===o&&Array.isArray(r)?"array":"object"===o&&n(r,String,((e,t)=>t.isPrototypeOf(e)))?"string":o)===e;var r,o},a=e=>t=>typeof t===e,i=o("string"),s=o("object"),l=e=>((e,t)=>s(e)&&n(e,t,((e,t)=>r(e)===t)))(e,Object),d=o("array"),c=(null,e=>null===e),u=a("boolean"),m=e=>!(e=>null==e)(e),g=a("function"),h=a("number"),p=()=>{};class v{constructor(e,t){this.tag=e,this.value=t}static some(e){return new v(!0,e)}static none(){return v.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?v.some(e(this.value)):v.none()}bind(e){return this.tag?e(this.value):v.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:v.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return m(e)?v.some(e):v.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?"some(".concat(this.value,")"):"none()"}}v.singletonNone=new v(!1);var f=Object.keys,b=Object.hasOwnProperty,y=(e,t)=>b.call(e,t),w=Array.prototype.push,x=e=>{for(var t=[],r=0,n=e.length;r<n;++r){if(!d(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);w.apply(t,e[r])}return t};"undefined"!=typeof window?window:Function("return this;")();var C,k=(e,t,r)=>{((e,t,r)=>{if(!(i(r)||u(r)||h(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")})(e.dom,t,r)},S=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},_=S,O=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),E=tinymce.util.Tools.resolve("tinymce.util.URI"),T=e=>e.length>0,A=e=>t=>t.options.get(e),M=A("image_dimensions"),N=A("image_advtab"),R=A("image_uploadtab"),D=A("image_prepend_url"),B=A("image_class_list"),L=A("image_description"),H=A("image_title"),P=A("image_caption"),I=A("image_list"),F=A("a11y_advanced_options"),z=A("automatic_uploads"),V=(e,t)=>Math.max(parseInt(e,10),parseInt(t,10)),Z=e=>(e&&(e=e.replace(/px$/,"")),e),j=e=>(e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e),U=e=>"IMG"===e.nodeName&&(e.hasAttribute("data-mce-object")||e.hasAttribute("data-mce-placeholder")),W=(e,t)=>{var r=e.options.get;return E.isDomSafe(t,"img",{allow_html_data_urls:r("allow_html_data_urls"),allow_script_urls:r("allow_script_urls"),allow_svg_data_urls:r("allow_svg_data_urls")})},q=O.DOM,$=e=>e.style.marginLeft&&e.style.marginRight&&e.style.marginLeft===e.style.marginRight?Z(e.style.marginLeft):"",G=e=>e.style.marginTop&&e.style.marginBottom&&e.style.marginTop===e.style.marginBottom?Z(e.style.marginTop):"",K=e=>e.style.borderWidth?Z(e.style.borderWidth):"",Y=(e,t)=>{var r;return e.hasAttribute(t)&&null!==(r=e.getAttribute(t))&&void 0!==r?r:""},X=e=>null!==e.parentNode&&"FIGURE"===e.parentNode.nodeName,J=(e,t,r)=>{""===r||null===r?e.removeAttribute(t):e.setAttribute(t,r)},Q=(e,t)=>{var r=e.getAttribute("style"),n=t(null!==r?r:"");n.length>0?(e.setAttribute("style",n),e.setAttribute("data-mce-style",n)):e.removeAttribute("style")},ee=(e,t)=>(e,r,n)=>{var o=e.style;o[r]?(o[r]=j(n),Q(e,t)):J(e,r,n)},te=(e,t)=>e.style[t]?Z(e.style[t]):Y(e,t),re=(e,t)=>{var r=j(t);e.style.marginLeft=r,e.style.marginRight=r},ne=(e,t)=>{var r=j(t);e.style.marginTop=r,e.style.marginBottom=r},oe=(e,t)=>{var r=j(t);e.style.borderWidth=r},ae=(e,t)=>{e.style.borderStyle=t},ie=e=>{var t;return null!==(t=e.style.borderStyle)&&void 0!==t?t:""},se=e=>m(e)&&"FIGURE"===e.nodeName,le=e=>0===q.getAttrib(e,"alt").length&&"presentation"===q.getAttrib(e,"role"),de=e=>le(e)?"":Y(e,"alt"),ce=(e,t)=>{var r,n=document.createElement("img");return J(n,"style",t.style),($(n)||""!==t.hspace)&&re(n,t.hspace),(G(n)||""!==t.vspace)&&ne(n,t.vspace),(K(n)||""!==t.border)&&oe(n,t.border),(ie(n)||""!==t.borderStyle)&&ae(n,t.borderStyle),e(null!==(r=n.getAttribute("style"))&&void 0!==r?r:"")},ue=(e,t)=>({src:Y(t,"src"),alt:de(t),title:Y(t,"title"),width:te(t,"width"),height:te(t,"height"),class:Y(t,"class"),style:e(Y(t,"style")),caption:X(t),hspace:$(t),vspace:G(t),border:K(t),borderStyle:ie(t),isDecorative:le(t)}),me=(e,t,r,n,o)=>{r[n]!==t[n]&&o(e,n,String(r[n]))},ge=(e,t,r)=>{if(r){q.setAttrib(e,"role","presentation");var n=_(e);k(n,"alt","")}else{if(c(t)){"alt",_(e).dom.removeAttribute("alt")}else{var o=_(e);k(o,"alt",t)}"presentation"===q.getAttrib(e,"role")&&q.setAttrib(e,"role","")}},he=(e,t)=>(r,n,o)=>{e(r,o),Q(r,t)},pe=(e,t,r)=>{var n=ue(e,r);me(r,n,t,"caption",((e,t,r)=>(e=>{X(e)?(e=>{var t=e.parentNode;m(t)&&(q.insertAfter(e,t),q.remove(t))})(e):(e=>{var t=q.create("figure",{class:"image"});q.insertAfter(t,e),t.appendChild(e),t.appendChild(q.create("figcaption",{contentEditable:"true"},"Caption")),t.contentEditable="false"})(e)})(e))),me(r,n,t,"src",J),me(r,n,t,"title",J),me(r,n,t,"width",ee(0,e)),me(r,n,t,"height",ee(0,e)),me(r,n,t,"class",J),me(r,n,t,"style",he(((e,t)=>J(e,"style",t)),e)),me(r,n,t,"hspace",he(re,e)),me(r,n,t,"vspace",he(ne,e)),me(r,n,t,"border",he(oe,e)),me(r,n,t,"borderStyle",he(ae,e)),((e,t,r)=>{r.alt===t.alt&&r.isDecorative===t.isDecorative||ge(e,r.alt,r.isDecorative)})(r,n,t)},ve=(e,t)=>{var r=(e=>{if(e.margin){var t=String(e.margin).split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e})(e.dom.styles.parse(t)),n=e.dom.styles.parse(e.dom.styles.serialize(r));return e.dom.styles.serialize(n)},fe=e=>{var t=e.selection.getNode(),r=e.dom.getParent(t,"figure.image");return r?e.dom.select("img",r)[0]:t&&("IMG"!==t.nodeName||U(t))?null:t},be=(e,t)=>{var r,n=e.dom,o=((t,r)=>{var n,o={};return((e,t,r,n)=>{((e,t)=>{for(var r=f(e),n=0,o=r.length;n<o;n++){var a=r[n];t(e[a],a)}})(e,((e,o)=>{(t(e,o)?r:n)(e,o)}))})(t,((t,r)=>!e.schema.isValidChild(r,"figure")),(n=o,(e,t)=>{n[t]=e}),p),o})(e.schema.getTextBlockElements()),a=n.getParent(t.parentNode,(e=>{return t=o,r=e.nodeName,y(t,r)&&void 0!==t[r]&&null!==t[r];var t,r}),e.getBody());return a&&null!==(r=n.split(a,t))&&void 0!==r?r:t},ye=(e,r)=>{var n=((r,n)=>{var o=document.createElement("img");if(pe((t=>ve(e,t)),t(t({},n),{},{caption:!1}),o),ge(o,n.alt,n.isDecorative),n.caption){var a=q.create("figure",{class:"image"});return a.appendChild(o),a.appendChild(q.create("figcaption",{contentEditable:"true"},"Caption")),a.contentEditable="false",a}return o})(0,r);e.dom.setAttrib(n,"data-mce-id","__mcenew"),e.focus(),e.selection.setContent(n.outerHTML);var o=e.dom.select('*[data-mce-id="__mcenew"]')[0];if(e.dom.setAttrib(o,"data-mce-id",null),se(o)){var a=be(e,o);e.selection.select(a)}else e.selection.select(o)},we=(e,r)=>{var n=fe(e);if(n){var o=t(t({},ue((t=>ve(e,t)),n)),r),a=((e,r)=>{var n=r.src;return t(t({},r),{},{src:W(e,n)?n:""})})(e,o);o.src?((e,t)=>{var r=fe(e);if(r)if(pe((t=>ve(e,t)),t,r),((e,t)=>{e.dom.setAttrib(t,"src",t.getAttribute("src"))})(e,r),se(r.parentNode)){var n=r.parentNode;be(e,n),e.selection.select(r.parentNode)}else e.selection.select(r),((e,t,r)=>{var n=()=>{r.onload=r.onerror=null,e.selection&&(e.selection.select(r),e.nodeChanged())};r.onload=()=>{t.width||t.height||!M(e)||e.dom.setAttribs(r,{width:String(r.clientWidth),height:String(r.clientHeight)}),n()},r.onerror=n})(e,t,r)})(e,a):((e,t)=>{if(t){var r=e.dom.is(t.parentNode,"figure.image")?t.parentNode:t;e.dom.remove(r),e.focus(),e.nodeChanged(),e.dom.isEmpty(e.getBody())&&(e.setContent(""),e.selection.setCursorLocation())}})(e,n)}else r.src&&ye(e,t(t({},{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),r))},xe=(C=(e,t)=>l(e)&&l(t)?xe(e,t):t,function(){if(0===arguments.length)throw new Error("Can't merge zero objects");for(var e={},t=0;t<arguments.length;t++){var r=t<0||arguments.length<=t?void 0:arguments[t];for(var n in r)y(r,n)&&(e[n]=C(e[n],r[n]))}return e}),Ce=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),ke=tinymce.util.Tools.resolve("tinymce.util.Tools"),Se=e=>i(e.value)?e.value:"",_e=(e,t)=>{var r=[];return ke.each(e,(e=>{var n=(e=>i(e.text)?e.text:i(e.title)?e.title:"")(e);if(void 0!==e.menu){var o=_e(e.menu,t);r.push({text:n,items:o})}else{var a=t(e);r.push({text:n,value:a})}})),r},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se;return t=>t?v.from(t).map((t=>_e(t,e))):v.none()},Ee=(e,t)=>((e,r)=>{for(var n=0;n<e.length;n++){var o=(e=>y(e,"items"))(a=e[n])?Ee(a.items,t):a.value===t?v.some(a):v.none();if(o.isSome())return o}var a;return v.none()})(e),Te=Oe,Ae=(e,t)=>e.bind((e=>Ee(e,t))),Me=e=>{var t,r=Te((t=>e.convertURL(t.value||t.url||"","src"))),n=new Promise((t=>{((e,t)=>{var r=I(e);i(r)?fetch(r).then((e=>{e.ok&&e.json().then(t)})):g(r)?r(t):t(r)})(e,(e=>{t(r(e).map((e=>x([[{text:"None",value:""}],e]))))}))})),o=(t=B(e),Oe(Se)(t)),a=N(e),s=R(e),l=(e=>T(e.options.get("images_upload_url")))(e),d=(e=>m(e.options.get("images_upload_handler")))(e),c=(e=>{var t=fe(e);return t?ue((t=>ve(e,t)),t):{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}})(e),u=L(e),h=H(e),p=M(e),f=P(e),b=F(e),y=z(e),w=v.some(D(e)).filter((e=>i(e)&&e.length>0));return n.then((e=>({image:c,imageList:e,classList:o,hasAdvTab:a,hasUploadTab:s,hasUploadUrl:l,hasUploadHandler:d,hasDescription:u,hasImageTitle:h,hasDimensions:p,hasImageCaption:f,prependURL:w,hasAccessibilityOptions:b,automaticUploads:y})))},Ne=e=>{var r,n=e.imageList.map((e=>({name:"images",type:"listbox",label:"Image list",items:e}))),o={name:"alt",type:"input",label:"Alternative description",enabled:!(e.hasAccessibilityOptions&&e.image.isDecorative)},a=e.classList.map((e=>({name:"classes",type:"listbox",label:"Class",items:e})));return x([[{name:"src",type:"urlinput",filetype:"image",label:"Source"}],n.toArray(),e.hasAccessibilityOptions&&e.hasDescription?[{type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]}]:[],e.hasDescription?[o]:[],e.hasImageTitle?[{name:"title",type:"input",label:"Image title"}]:[],e.hasDimensions?[{name:"dimensions",type:"sizeinput"}]:[],[t(t({},(r=e.classList.isSome()&&e.hasImageCaption,r?{type:"grid",columns:2}:{type:"panel"})),{},{items:x([a.toArray(),e.hasImageCaption?[{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[]])})]])},Re=e=>({title:"General",name:"general",items:Ne(e)}),De=Ne,Be=e=>({src:{value:e.src,meta:{}},images:e.src,alt:e.alt,title:e.title,dimensions:{width:e.width,height:e.height},classes:e.class,caption:e.caption,style:e.style,vspace:e.vspace,border:e.border,hspace:e.hspace,borderstyle:e.borderStyle,fileinput:[],isDecorative:e.isDecorative}),Le=(e,t)=>({src:e.src.value,alt:null!==e.alt&&0!==e.alt.length||!t?e.alt:null,title:e.title,width:e.dimensions.width,height:e.dimensions.height,class:e.classes,style:e.style,caption:e.caption,hspace:e.hspace,vspace:e.vspace,border:e.border,borderStyle:e.borderstyle,isDecorative:e.isDecorative}),He=(e,t,r,n)=>{((e,t)=>{var r=t.getData();((e,t)=>/^(?:[a-zA-Z]+:)?\/\//.test(t)?v.none():e.prependURL.bind((e=>t.substring(0,e.length)!==e?v.some(e+t):v.none())))(e,r.src.value).each((e=>{t.setData({src:{value:e,meta:r.src.meta}})}))})(t,n),((e,t)=>{var r=t.getData(),n=r.src.meta;if(void 0!==n){var o=xe({},r);((e,t,r)=>{e.hasDescription&&i(r.alt)&&(t.alt=r.alt),e.hasAccessibilityOptions&&(t.isDecorative=r.isDecorative||t.isDecorative||!1),e.hasImageTitle&&i(r.title)&&(t.title=r.title),e.hasDimensions&&(i(r.width)&&(t.dimensions.width=r.width),i(r.height)&&(t.dimensions.height=r.height)),i(r.class)&&Ae(e.classList,r.class).each((e=>{t.classes=e.value})),e.hasImageCaption&&u(r.caption)&&(t.caption=r.caption),e.hasAdvTab&&(i(r.style)&&(t.style=r.style),i(r.vspace)&&(t.vspace=r.vspace),i(r.border)&&(t.border=r.border),i(r.hspace)&&(t.hspace=r.hspace),i(r.borderstyle)&&(t.borderstyle=r.borderstyle))})(e,o,n),t.setData(o)}})(t,n),((e,t,r,n)=>{var o=n.getData(),a=o.src.value,i=o.src.meta||{};i.width||i.height||!t.hasDimensions||(T(a)?e.imageSize(a).then((e=>{r.open&&n.setData({dimensions:e})})).catch((e=>console.error(e))):n.setData({dimensions:{width:"",height:""}}))})(e,t,r,n),((e,t,r)=>{var n=r.getData(),o=Ae(e.imageList,n.src.value);t.prevImage=o,r.setData({images:o.map((e=>e.value)).getOr("")})})(t,r,n)},Pe=(e,t,r,n)=>{var o,a=n.getData();n.block("Uploading image"),(o=a.fileinput,((e,t)=>0<e.length?v.some(e[0]):v.none())(o)).fold((()=>{n.unblock()}),(o=>{var a,i=URL.createObjectURL(o),s=()=>{n.unblock(),URL.revokeObjectURL(i)},l=o=>{n.setData({src:{value:o,meta:{}}}),n.showTab("general"),He(e,t,r,n)};(a=o,new Promise(((e,t)=>{var r=new FileReader;r.onload=()=>{e(r.result)},r.onerror=()=>{var e;t(null===(e=r.error)||void 0===e?void 0:e.message)},r.readAsDataURL(a)}))).then((r=>{var a=e.createBlobCache(o,i,r);t.automaticUploads?e.uploadImage(a).then((e=>{l(e.url),s()})).catch((t=>{s(),e.alertErr(t)})):(e.addToBlobCache(a),l(a.blobUri()),n.unblock())}))}))},Ie=(e,t,r)=>(n,o)=>{"src"===o.name?He(e,t,r,n):"images"===o.name?((e,t,r,n)=>{var o=n.getData(),a=Ae(t.imageList,o.images);a.each((e=>{var t=""===o.alt||r.prevImage.map((e=>e.text===o.alt)).getOr(!1);t?""===e.value?n.setData({src:e,alt:r.prevAlt}):n.setData({src:e,alt:e.text}):n.setData({src:e})})),r.prevImage=a,He(e,t,r,n)})(e,t,r,n):"alt"===o.name?r.prevAlt=n.getData().alt:"fileinput"===o.name?Pe(e,t,r,n):"isDecorative"===o.name&&n.setEnabled("alt",!n.getData().isDecorative)},Fe=e=>()=>{e.open=!1},ze=e=>e.hasAdvTab||e.hasUploadUrl||e.hasUploadHandler?{type:"tabpanel",tabs:x([[Re(e)],e.hasAdvTab?[{title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}]:[],e.hasUploadTab&&(e.hasUploadUrl||e.hasUploadHandler)?[{title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]}]:[]])}:{type:"panel",items:De(e)},Ve=(e,r,n)=>o=>{var a=xe(Be(r.image),o.getData()),i=t(t({},a),{},{style:ce(n.normalizeCss,Le(a,!1))});e.execCommand("mceUpdateImage",!1,Le(i,r.hasAccessibilityOptions)),e.editorUpload.uploadImagesAuto(),o.close()},Ze=e=>t=>W(e,t)?(e=>new Promise((t=>{var r=document.createElement("img"),n=e=>{r.onload=r.onerror=null,r.parentNode&&r.parentNode.removeChild(r),t(e)};r.onload=()=>{var e={width:V(r.width,r.clientWidth),height:V(r.height,r.clientHeight)};n(Promise.resolve(e))},r.onerror=()=>{n(Promise.reject("Failed to get image dimensions for: ".concat(e)))};var o=r.style;o.visibility="hidden",o.position="fixed",o.bottom=o.left="0px",o.width=o.height="auto",document.body.appendChild(r),r.src=e})))(e.documentBaseURI.toAbsolute(t)).then((e=>({width:String(e.width),height:String(e.height)}))):Promise.resolve({width:"",height:""}),je=e=>(t,r,n)=>{var o;return e.editorUpload.blobCache.create({blob:t,blobUri:r,name:null===(o=t.name)||void 0===o?void 0:o.replace(/\.[^\.]+$/,""),filename:t.name,base64:n.split(",")[1]})},Ue=e=>t=>{e.editorUpload.blobCache.add(t)},We=e=>t=>{e.windowManager.alert(t)},qe=e=>t=>ve(e,t),$e=e=>t=>e.dom.parseStyle(t),Ge=e=>(t,r)=>e.dom.serializeStyle(t,r),Ke=e=>t=>Ce(e).upload([t],!1).then((e=>{var t;return 0===e.length?Promise.reject("Failed to upload image"):!1===e[0].status?Promise.reject(null===(t=e[0].error)||void 0===t?void 0:t.message):e[0]})),Ye=e=>{var t={imageSize:Ze(e),addToBlobCache:Ue(e),createBlobCache:je(e),alertErr:We(e),normalizeCss:qe(e),parseStyle:$e(e),serializeStyle:Ge(e),uploadImage:Ke(e)};return{open:()=>{Me(e).then((r=>{var n=(e=>({prevImage:Ae(e.imageList,e.image.src),prevAlt:e.image.alt,open:!0}))(r);return{title:"Insert/Edit Image",size:"normal",body:ze(r),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Be(r.image),onSubmit:Ve(e,r,t),onChange:Ie(t,r,n),onClose:Fe(n)}})).then(e.windowManager.open)}}},Xe=e=>{var t=e.attr("class");return m(t)&&/\bimage\b/.test(t)},Je=e=>t=>{for(var r=t.length,n=t=>{t.attr("contenteditable",e?"true":null)};r--;){var o=t[r];Xe(o)&&(o.attr("contenteditable",e?"false":null),ke.each(o.getAll("figcaption"),n))}},Qe=e=>t=>{var r=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",r),r(),()=>{e.off("NodeChange",r)}};e.add("image",(e=>{(e=>{var t=e.options.register;t("image_dimensions",{processor:"boolean",default:!0}),t("image_advtab",{processor:"boolean",default:!1}),t("image_uploadtab",{processor:"boolean",default:!0}),t("image_prepend_url",{processor:"string",default:""}),t("image_class_list",{processor:"object[]"}),t("image_description",{processor:"boolean",default:!0}),t("image_title",{processor:"boolean",default:!1}),t("image_caption",{processor:"boolean",default:!1}),t("image_list",{processor:e=>{var t=!1===e||i(e)||((e,t)=>{if(d(e)){for(var r=0,n=e.length;r<n;++r)if(!t(e[r]))return!1;return!0}return!1})(e,s)||g(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})})(e),(e=>{e.on("PreInit",(()=>{e.parser.addNodeFilter("figure",Je(!0)),e.serializer.addNodeFilter("figure",Je(!1))}))})(e),(e=>{e.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:Ye(e).open,onSetup:t=>{t.setActive(m(fe(e)));var r=e.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",t.setActive).unbind,n=Qe(e)(t);return()=>{r(),n()}}}),e.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:Ye(e).open,onSetup:Qe(e)}),e.ui.registry.addContextMenu("image",{update:t=>e.selection.isEditable()&&(se(t)||"IMG"===t.nodeName&&!U(t))?["image"]:[]})})(e),(e=>{e.addCommand("mceImage",Ye(e).open),e.addCommand("mceUpdateImage",((t,r)=>{e.undoManager.transact((()=>we(e,r)))}))})(e)}))}()},239:(e,t,r)=>{r(842)},842:()=>{function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function t(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach((function(e){var r,o,a;r=t,o=e,a=n[e],(o=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(o))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=e=>t=>{return i=typeof(r=t),(null===r?"null":"object"===i&&Array.isArray(r)?"array":"object"===i&&(s=n=r,(o=String).prototype.isPrototypeOf(s)||(null===(a=n.constructor)||void 0===a?void 0:a.name)===o.name)?"string":i)===e;var r,n,o,a,i,s},n=e=>t=>typeof t===e,o=r("string"),a=r("object"),i=r("array"),s=(null,e=>null===e),l=n("boolean"),d=e=>!(e=>null==e)(e),c=n("function"),u=(e,t)=>{if(i(e)){for(var r=0,n=e.length;r<n;++r)if(!t(e[r]))return!1;return!0}return!1},m=()=>{},g=(e,t)=>e===t;class h{constructor(e,t){this.tag=e,this.value=t}static some(e){return new h(!0,e)}static none(){return h.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?h.some(e(this.value)):h.none()}bind(e){return this.tag?e(this.value):h.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:h.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return d(e)?h.some(e):h.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?"some(".concat(this.value,")"):"none()"}}h.singletonNone=new h(!1);var p=Array.prototype.indexOf,v=Array.prototype.push,f=e=>{for(var t=[],r=0,n=e.length;r<n;++r){if(!i(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);v.apply(t,e[r])}return t},b=(e,t)=>{for(var r=0;r<e.length;r++){var n=t(e[r],r);if(n.isSome())return n}return h.none()},y=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return e.exists((e=>r(e,t)))},w=e=>{for(var t=[],r=e=>{t.push(e)},n=0;n<e.length;n++)e[n].each(r);return t},x=(e,t)=>e?h.some(t):h.none(),C=e=>t=>t.options.get(e),k=C("link_assume_external_targets"),S=C("link_context_toolbar"),_=C("link_list"),O=C("link_default_target"),E=C("link_default_protocol"),T=C("link_target_list"),A=C("link_rel_list"),M=C("link_class_list"),N=C("link_title"),R=C("allow_unsafe_link_target"),D=C("link_quicklink"),B=tinymce.util.Tools.resolve("tinymce.util.Tools"),L=e=>o(e.value)?e.value:"",H=(e,t)=>{var r=[];return B.each(e,(e=>{var n=(e=>o(e.text)?e.text:o(e.title)?e.title:"")(e);if(void 0!==e.menu){var a=H(e.menu,t);r.push({text:n,items:a})}else{var i=t(e);r.push({text:n,value:i})}})),r},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;return t=>h.from(t).map((t=>H(t,e)))},I=e=>P(L)(e),F=P,z=(e,t)=>r=>({name:e,type:"listbox",label:t,items:r}),V=L,Z=Object.keys,j=Object.hasOwnProperty,U=(e,t)=>j.call(e,t),W=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),q=tinymce.util.Tools.resolve("tinymce.util.URI"),$=e=>d(e)&&"a"===e.nodeName.toLowerCase(),G=e=>$(e)&&!!X(e),K=(e,t)=>{if(e.collapsed)return[];var r=e.cloneContents(),n=r.firstChild,o=new W(n,r),a=[],i=n;do{t(i)&&a.push(i)}while(i=o.next());return a},Y=e=>/^\w+:/i.test(e),X=e=>{var t,r;return null!==(r=null!==(t=e.getAttribute("data-mce-href"))&&void 0!==t?t:e.getAttribute("href"))&&void 0!==r?r:""},J=(e,t)=>{var r=["noopener"],n=e?e.split(/\s+/):[],o=e=>e.filter((e=>-1===B.inArray(r,e))),a=t?(e=>(e=o(e)).length>0?e.concat(r):r)(n):o(n);return a.length>0?(e=>B.trim(e.sort().join(" ")))(a):""},Q=(e,t)=>(t=t||re(e.selection.getRng())[0]||e.selection.getNode(),ie(t)?h.from(e.dom.select("a[href]",t)[0]):h.from(e.dom.getParent(t,"a[href]"))),ee=(e,t)=>Q(e,t).isSome(),te=(e,t)=>t.fold((()=>e.getContent({format:"text"})),(e=>e.innerText||e.textContent||"")).replace(/\uFEFF/g,""),re=e=>K(e,G),ne=e=>B.grep(e,G),oe=e=>ne(e).length>0,ae=e=>{var t=e.schema.getTextInlineElements();if(Q(e).exists((e=>e.hasAttribute("data-mce-block"))))return!1;var r=e.selection.getRng();return!!r.collapsed||0===K(r,(e=>1===e.nodeType&&!$(e)&&!U(t,e.nodeName.toLowerCase()))).length},ie=e=>d(e)&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className),se=(e,r,n)=>{var o=e.selection.getNode(),a=Q(e,o),i=((e,r)=>{var n=t({},r);if(0===A(e).length&&!R(e)){var o=J(n.rel,"_blank"===n.target);n.rel=o||null}return h.from(n.target).isNone()&&!1===T(e)&&(n.target=O(e)),n.href=((e,t)=>"http"!==t&&"https"!==t||Y(e)?e:t+"://"+e)(n.href,k(e)),n})(e,(e=>{var t,r,n;return t=["title","rel","class","target"],r=(t,r)=>(e[r].each((e=>{t[r]=e.length>0?e:null})),t),n={href:e.href},((e,t)=>{for(var r=0,n=e.length;r<n;r++)t(e[r],r)})(t,((e,t)=>{n=r(n,e)})),n})(n));e.undoManager.transact((()=>{n.href===r.href&&r.attach(),a.fold((()=>{((e,t,r,n)=>{var o=e.dom;ie(t)?me(o,t,n):r.fold((()=>{e.execCommand("mceInsertLink",!1,n)}),(t=>{e.insertContent(o.createHTML("a",n,o.encode(t)))}))})(e,o,n.text,i)}),(t=>{e.focus(),((e,t,r,n)=>{r.each((e=>{U(t,"innerText")?t.innerText=e:t.textContent=e})),e.dom.setAttribs(t,n),e.selection.select(t)})(e,t,n.text,i)}))}))},le=e=>{var{class:t,href:r,rel:n,target:o,text:a,title:i}=e;return((e,t)=>{var r,n={};return((e,t,r,n)=>{((e,t)=>{for(var r=Z(e),n=0,o=r.length;n<o;n++){var a=r[n];t(e[a],a)}})(e,((e,o)=>{(t(e,o)?r:n)(e,o)}))})(e,((e,t)=>!1===s(e)),(r=n,(e,t)=>{r[t]=e}),m),n})({class:t.getOrNull(),href:r,rel:n.getOrNull(),target:o.getOrNull(),text:a.getOrNull(),title:i.getOrNull()})},de=(e,r,n)=>{var o=((e,r)=>{var n=e.options.get,o={allow_html_data_urls:n("allow_html_data_urls"),allow_script_urls:n("allow_script_urls"),allow_svg_data_urls:n("allow_svg_data_urls")},a=r.href;return t(t({},r),{},{href:q.isDomSafe(a,"a",o)?a:""})})(e,n);e.hasPlugin("rtc",!0)?e.execCommand("createlink",!1,le(o)):se(e,r,o)},ce=e=>{e.hasPlugin("rtc",!0)?e.execCommand("unlink"):(e=>{e.undoManager.transact((()=>{var t=e.selection.getNode();ie(t)?ue(e,t):(e=>{var t=e.dom,r=e.selection,n=r.getBookmark(),o=r.getRng().cloneRange(),a=t.getParent(o.startContainer,"a[href]",e.getBody()),i=t.getParent(o.endContainer,"a[href]",e.getBody());a&&o.setStartBefore(a),i&&o.setEndAfter(i),r.setRng(o),e.execCommand("unlink"),r.moveToBookmark(n)})(e),e.focus()}))})(e)},ue=(e,t)=>{var r,n=e.dom.select("img",t)[0];if(n){var o=e.dom.getParents(n,"a[href]",t)[0];o&&(null===(r=o.parentNode)||void 0===r||r.insertBefore(n,o),e.dom.remove(o))}},me=(e,t,r)=>{var n,o=e.select("img",t)[0];if(o){var a=e.create("a",r);null===(n=o.parentNode)||void 0===n||n.insertBefore(a,o),a.appendChild(o)}},ge=(e,t)=>b(t,(t=>(e=>{return U(t=e,r="items")&&void 0!==t[r]&&null!==t[r];var t,r})(t)?ge(e,t.items):x(t.value===e,t))),he=(e,r)=>{var n={text:e.text,title:e.title},o=(e,t)=>{var o,a,i=(o=r,a=t,"link"===a?o.link:"anchor"===a?o.anchor:h.none()).getOr([]);return((e,t,r,n)=>{var o=n[t],a=e.length>0;return void 0!==o?ge(o,r).map((t=>({url:{value:t.value,meta:{text:a?e:t.text,attach:m}},text:a?e:t.text}))):h.none()})(n.text,t,i,e)};return{onChange:(e,r)=>{var a,i,s,l,d,c=r.name;return"url"===c?(a=e(),i=a.url,l=x(n.text.length<=0,h.from(null===(s=i.meta)||void 0===s?void 0:s.text).getOr(i.value)),d=(e=>{var t;return x(n.title.length<=0,h.from(null===(t=e.meta)||void 0===t?void 0:t.title).getOr(""))})(a.url),l.isSome()||d.isSome()?h.some(t(t({},l.map((e=>({text:e}))).getOr({})),d.map((e=>({title:e}))).getOr({}))):h.none()):((e,t)=>p.call(e,t))(["anchor","link"],c)>-1?o(e(),c):"text"===c||"title"===c?(n[c]=e()[c],h.none()):h.none()}}},pe=tinymce.util.Tools.resolve("tinymce.util.Delay"),ve=e=>{var r=e.href;return r.indexOf("@")>0&&-1===r.indexOf("/")&&-1===r.indexOf("mailto:")?h.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:e=>t(t({},e),{},{href:"mailto:"+r})}):h.none()},fe=(e,r)=>n=>{var o=n.href;return 1===e&&!Y(o)||0===e&&/^\s*www(\.|\d\.)/i.test(o)?h.some({message:"The URL you entered seems to be an external link. Do you want to add the required ".concat(r,":// prefix?"),preprocess:e=>t(t({},e),{},{href:r+"://"+o})}):h.none()},be=e=>{var t=e.dom.select("a:not([href])"),r=f(((e,t)=>{for(var r=e.length,n=new Array(r),o=0;o<r;o++){var a=e[o];n[o]=t(a,o)}return n})(t,(e=>{var t=e.name||e.id;return t?[{text:t,value:"#"+t}]:[]})));return r.length>0?h.some([{text:"None",value:""}].concat(r)):h.none()},ye=e=>{var t=M(e);return t.length>0?I(t):h.none()},we=e=>{try{return h.some(JSON.parse(e))}catch(e){return h.none()}},xe=(e,t)=>{var r=A(e);if(r.length>0){var n=y(t,"_blank");return(!1===R(e)?F((e=>J(V(e),n))):I)(r)}return h.none()},Ce=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],ke=e=>{var t=T(e);return i(t)?I(t).orThunk((()=>h.some(Ce))):!1===t?h.none():h.some(Ce)},Se=(e,t,r)=>{var n=e.getAttrib(t,r);return null!==n&&n.length>0?h.some(n):h.none()},_e=(e,t)=>(e=>{var t=t=>e.convertURL(t.value||t.url||"","href"),r=_(e);return new Promise((e=>{o(r)?fetch(r).then((e=>e.ok?e.text().then(we):Promise.reject())).then(e,(()=>e(h.none()))):c(r)?r((t=>e(h.some(t)))):e(h.from(r))})).then((e=>e.bind(F(t)).map((e=>e.length>0?[{text:"None",value:""}].concat(e):e))))})(e).then((r=>{var n=((e,t)=>{var r=e.dom,n=ae(e)?h.some(te(e.selection,t)):h.none(),o=t.bind((e=>h.from(r.getAttrib(e,"href")))),a=t.bind((e=>h.from(r.getAttrib(e,"target")))),i=t.bind((e=>Se(r,e,"rel"))),s=t.bind((e=>Se(r,e,"class")));return{url:o,text:n,title:t.bind((e=>Se(r,e,"title"))),target:a,rel:i,linkClass:s}})(e,t);return{anchor:n,catalogs:{targets:ke(e),rels:xe(e,n.target),classes:ye(e),anchor:be(e),link:r},optNode:t,flags:{titleEnabled:N(e)}}})),Oe=e=>{var t=(e=>{var t=Q(e);return _e(e,t)})(e);t.then((t=>{var r=((e,t)=>r=>{var n=r.getData();if(!n.url.value)return ce(e),void r.close();var o=e=>h.from(n[e]).filter((r=>!y(t.anchor[e],r))),a={href:n.url.value,text:o("text"),target:o("target"),rel:o("rel"),class:o("linkClass"),title:o("title")},i={href:n.url.value,attach:void 0!==n.url.meta&&n.url.meta.attach?n.url.meta.attach:m};((e,t)=>b([ve,fe(k(e),E(e))],(e=>e(t))).fold((()=>Promise.resolve(t)),(r=>new Promise((n=>{((e,t,r)=>{var n=e.selection.getRng();pe.setEditorTimeout(e,(()=>{e.windowManager.confirm(t,(t=>{e.selection.setRng(n),r(t)}))}))})(e,r.message,(e=>{n(e?r.preprocess(t):t)}))})))))(e,a).then((t=>{de(e,i,t)})),r.close()})(e,t);return((e,t,r)=>{var n=e.anchor.text.map((()=>({name:"text",type:"input",label:"Text to display"}))).toArray(),o=e.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],a=((e,t)=>{var r=e.anchor,n=r.url.getOr("");return{url:{value:n,meta:{original:{value:n}}},text:r.text.getOr(""),title:r.title.getOr(""),anchor:n,link:n,rel:r.rel.getOr(""),target:r.target.or(t).getOr(""),linkClass:r.linkClass.getOr("")}})(e,h.from(O(r))),i=e.catalogs,s=he(a,i);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:f([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],n,o,w([i.anchor.map(z("anchor","Anchors")),i.rels.map(z("rel","Rel")),i.targets.map(z("target","Open link in...")),i.link.map(z("link","Link list")),i.classes.map(z("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:a,onChange:(e,t)=>{var{name:r}=t;s.onChange(e.getData,{name:r}).each((t=>{e.setData(t)}))},onSubmit:t}})(t,r,e)})).then((t=>{e.windowManager.open(t)}))},Ee=tinymce.util.Tools.resolve("tinymce.util.VK"),Te=(e,t)=>e.dom.getParent(t,"a[href]"),Ae=e=>Te(e,e.selection.getStart()),Me=(e,t)=>{if(t){var r=X(t);if(/^#/.test(r)){var n=e.dom.select(r);n.length&&e.selection.scrollIntoView(n[0],!0)}else(e=>{var t=document.createElement("a");t.target="_blank",t.href=e,t.rel="noreferrer noopener";var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),((e,t)=>{document.body.appendChild(e),e.dispatchEvent(t),document.body.removeChild(e)})(t,r)})(t.href)}},Ne=e=>()=>{e.execCommand("mceLink",!1,{dialog:!0})},Re=e=>()=>{Me(e,Ae(e))},De=(e,t)=>(e.on("NodeChange",t),()=>e.off("NodeChange",t)),Be=e=>t=>{var r=()=>{t.setActive(!e.mode.isReadOnly()&&ee(e,e.selection.getNode())),t.setEnabled(e.selection.isEditable())};return r(),De(e,r)},Le=e=>t=>{var r=()=>{t.setEnabled(e.selection.isEditable())};return r(),De(e,r)},He=e=>t=>{var r=()=>t.setEnabled((e=>1===(e.selection.isCollapsed()?ne(e.dom.getParents(e.selection.getStart())):re(e.selection.getRng())).length)(e));return r(),De(e,r)},Pe=e=>t=>{var r=e.dom.getParents(e.selection.getStart()),n=r=>{t.setEnabled((t=>{return oe(t)||(r=e.selection.getRng(),re(r).length>0);var r})(r)&&e.selection.isEditable())};return n(r),De(e,(e=>n(e.parents)))};e.add("link",(e=>{(e=>{var t=e.options.register;t("link_assume_external_targets",{processor:e=>{var t=o(e)||l(e);return t?!0===e?{value:1,valid:t}:"http"===e||"https"===e?{value:e,valid:t}:{value:0,valid:t}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),t("link_context_toolbar",{processor:"boolean",default:!1}),t("link_list",{processor:e=>o(e)||c(e)||u(e,a)}),t("link_default_target",{processor:"string"}),t("link_default_protocol",{processor:"string",default:"https"}),t("link_target_list",{processor:e=>l(e)||u(e,a),default:!0}),t("link_rel_list",{processor:"object[]",default:[]}),t("link_class_list",{processor:"object[]",default:[]}),t("link_title",{processor:"boolean",default:!0}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("link_quicklink",{processor:"boolean",default:!1})})(e),(e=>{e.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Ne(e),onSetup:Be(e)}),e.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Re(e),onSetup:He(e)}),e.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>ce(e),onSetup:Pe(e)})})(e),(e=>{e.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Re(e),onSetup:He(e)}),e.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onSetup:Le(e),onAction:Ne(e)}),e.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>ce(e),onSetup:Pe(e)})})(e),(e=>{e.ui.registry.addContextMenu("link",{update:t=>e.dom.isEditable(t)?oe(e.dom.getParents(t,"a"))?"link unlink openlink":"link":""})})(e),(e=>{var t=t=>{var r=e.selection.getNode();return t.setEnabled(ee(e,r)),m};e.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Be(e)},label:"Link",predicate:t=>S(e)&&ee(e,t),initValue:()=>Q(e).fold((()=>""),X),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:t=>{var r=e.selection.getNode();return t.setActive(ee(e,r)),Be(e)(t)},onAction:t=>{var r=t.getValue(),n=(t=>{var r=Q(e),n=ae(e);if(r.isNone()&&n){var o=te(e.selection,r);return x(0===o.length,t)}return h.none()})(r);de(e,{href:r,attach:m},{href:r,text:n,title:h.none(),rel:h.none(),target:h.none(),class:h.none()}),(e=>{e.selection.collapse(!1)})(e),t.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:t,onAction:t=>{ce(e),t.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:t,onAction:t=>{Re(e)(),t.hide()}}]})})(e),(e=>{e.on("click",(t=>{var r=Te(e,t.target);r&&Ee.metaKeyPressed(t)&&(t.preventDefault(),Me(e,r))})),e.on("keydown",(t=>{if(!t.isDefaultPrevented()&&13===t.keyCode&&(e=>!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey)(t)){var r=Ae(e);r&&(t.preventDefault(),Me(e,r))}}))})(e),(e=>{e.addCommand("mceLink",((t,r)=>{!0!==(null==r?void 0:r.dialog)&&D(e)?e.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"}):Oe(e)}))})(e),(e=>{e.addShortcut("Meta+K","",(()=>{e.execCommand("mceLink")}))})(e)}))}()},230:(e,t,r)=>{r(785)},785:()=>{function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function t(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(){"use strict";var r=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=e=>t=>{return i=typeof(r=t),(null===r?"null":"object"===i&&Array.isArray(r)?"array":"object"===i&&(s=n=r,(o=String).prototype.isPrototypeOf(s)||(null===(a=n.constructor)||void 0===a?void 0:a.name)===o.name)?"string":i)===e;var r,n,o,a,i,s},o=e=>t=>typeof t===e,a=n("string"),i=n("object"),s=n("array"),l=o("boolean"),d=e=>!(e=>null==e)(e),c=o("function"),u=o("number"),m=()=>{},g=(e,t)=>e===t,h=e=>t=>!e(t),p=(!1,()=>false);class v{constructor(e,t){this.tag=e,this.value=t}static some(e){return new v(!0,e)}static none(){return v.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?v.some(e(this.value)):v.none()}bind(e){return this.tag?e(this.value):v.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:v.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return d(e)?v.some(e):v.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?"some(".concat(this.value,")"):"none()"}}v.singletonNone=new v(!1);var f=Array.prototype.slice,b=Array.prototype.indexOf,y=Array.prototype.push,w=(e,t)=>{return r=e,n=t,b.call(r,n)>-1;var r,n},x=(e,t)=>{for(var r=0,n=e.length;r<n;r++)if(t(e[r],r))return!0;return!1},C=(e,t)=>{for(var r=e.length,n=new Array(r),o=0;o<r;o++){var a=e[o];n[o]=t(a,o)}return n},k=(e,t)=>{for(var r=0,n=e.length;r<n;r++)t(e[r],r)},S=(e,t)=>{for(var r=[],n=0,o=e.length;n<o;n++){var a=e[n];t(a,n)&&r.push(a)}return r},_=(e,t,r)=>(k(e,((e,n)=>{r=t(r,e,n)})),r),O=(e,t,r)=>{for(var n=0,o=e.length;n<o;n++){var a=e[n];if(t(a,n))return v.some(a);if(r(a,n))break}return v.none()},E=(e,t)=>O(e,t,p),T=(e,t)=>(e=>{for(var t=[],r=0,n=e.length;r<n;++r){if(!s(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);y.apply(t,e[r])}return t})(C(e,t)),A=e=>{var t=f.call(e,0);return t.reverse(),t},M=(e,t)=>t>=0&&t<e.length?v.some(e[t]):v.none(),N=e=>M(e,0),R=e=>M(e,e.length-1),D=(e,t)=>{for(var r=[],n=c(t)?e=>x(r,(r=>t(r,e))):e=>w(r,e),o=0,a=e.length;o<a;o++){var i=e[o];n(i)||r.push(i)}return r},B=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return e.exists((e=>r(e,t)))},L=(e,t,r)=>e.isSome()&&t.isSome()?v.some(r(e.getOrDie(),t.getOrDie())):v.none(),H=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},P=(e,t)=>{var r=(t||document).createElement(e);return H(r)},I=H,F=(e,t)=>e.dom===t.dom;"undefined"!=typeof window?window:Function("return this;")();var z,V=e=>e.dom.nodeName.toLowerCase(),Z=(1,e=>1===(e=>e.dom.nodeType)(e)),j=e=>t=>Z(t)&&V(t)===e,U=e=>v.from(e.dom.parentNode).map(I),W=e=>C(e.dom.childNodes,I),q=(e,t)=>{var r=e.dom.childNodes;return v.from(r[t]).map(I)},$=e=>q(e,0),G=e=>q(e,e.dom.childNodes.length-1),K=(e,t,r)=>{for(var n=e.dom,o=c(r)?r:p;n.parentNode;){n=n.parentNode;var a=I(n);if(t(a))return v.some(a);if(o(a))break}return v.none()},Y=(e,t,r)=>((e,t,r,n,o)=>n(r)?v.some(r):c(o)&&o(r)?v.none():t(r,n,o))(0,K,e,t,r),X=(e,t)=>{U(e).each((r=>{r.dom.insertBefore(t.dom,e.dom)}))},J=(e,t)=>{e.dom.appendChild(t.dom)},Q=(e,t)=>{k(t,(t=>{J(e,t)}))},ee=e=>{e.dom.textContent="",k(W(e),(e=>{te(e)}))},te=e=>{var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},re=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),ne=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),oe=tinymce.util.Tools.resolve("tinymce.util.VK"),ae=e=>C(e,I),ie=Object.keys,se=(e,t)=>{for(var r=ie(e),n=0,o=r.length;n<o;n++){var a=r[n];t(e[a],a)}},le=(e,t)=>{var r=e.dom;se(t,((e,t)=>{((e,t,r)=>{if(!(a(r)||l(r)||u(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")})(r,t,e)}))},de=e=>_(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),ce=e=>((e,t)=>I(e.dom.cloneNode(!0)))(e),ue=(e,t)=>{var r,n,o=((e,t)=>{var r=P(t),n=de(e);return le(r,n),r})(e,t);n=o,(e=>v.from(e.dom.nextSibling).map(I))(r=e).fold((()=>{U(r).each((e=>{J(e,n)}))}),(e=>{X(e,n)}));var a=W(e);return Q(o,a),te(e),o},me=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ge=tinymce.util.Tools.resolve("tinymce.util.Tools"),he=e=>t=>d(t)&&t.nodeName.toLowerCase()===e,pe=e=>t=>d(t)&&e.test(t.nodeName),ve=e=>d(e)&&3===e.nodeType,fe=e=>d(e)&&1===e.nodeType,be=pe(/^(OL|UL|DL)$/),ye=pe(/^(OL|UL)$/),we=he("ol"),xe=pe(/^(LI|DT|DD)$/),Ce=pe(/^(DT|DD)$/),ke=pe(/^(TH|TD)$/),Se=he("br"),_e=(e,t)=>d(t)&&t.nodeName in e.schema.getTextBlockElements(),Oe=(e,t)=>d(e)&&e.nodeName in t,Ee=(e,t)=>d(t)&&t.nodeName in e.schema.getVoidElements(),Te=(e,t,r)=>{var n=e.isEmpty(t);return!(r&&e.select("span[data-mce-type=bookmark]",t).length>0)&&n},Ae=(e,t)=>e.isChildOf(t,e.getRoot()),Me=e=>t=>t.options.get(e),Ne=Me("lists_indent_on_tab"),Re=Me("forced_root_block"),De=Me("forced_root_block_attrs"),Be=(e,t)=>{var r,n,o=e.dom,a=e.schema.getBlockElements(),i=o.createFragment(),s=Re(e),l=De(e),d=!1;for(n=o.create(s,l),Oe(t.firstChild,a)||i.appendChild(n);r=t.firstChild;){var c=r.nodeName;d||"SPAN"===c&&"bookmark"===r.getAttribute("data-mce-type")||(d=!0),Oe(r,a)?(i.appendChild(r),n=null):(n||(n=o.create(s,l),i.appendChild(n)),n.appendChild(r))}return!d&&n&&n.appendChild(o.create("br",{"data-mce-bogus":"1"})),i},Le=me.DOM,He=j("dd"),Pe=j("dt"),Ie=e=>{Pe(e)&&ue(e,"dd")},Fe=(e,t)=>{if(ve(e))return{container:e,offset:t};var r=re.getNode(e,t);return ve(r)?{container:r,offset:t>=e.childNodes.length?r.data.length:0}:r.previousSibling&&ve(r.previousSibling)?{container:r.previousSibling,offset:r.previousSibling.data.length}:r.nextSibling&&ve(r.nextSibling)?{container:r.nextSibling,offset:0}:{container:e,offset:t}},ze=e=>{var t=e.cloneRange(),r=Fe(e.startContainer,e.startOffset);t.setStart(r.container,r.offset);var n=Fe(e.endContainer,e.endOffset);return t.setEnd(n.container,n.offset),t},Ve=["OL","UL","DL"],Ze=Ve.join(","),je=(e,t)=>{var r=t||e.selection.getStart(!0);return e.dom.getParent(r,Ze,qe(e,r))},Ue=e=>{var t=e.selection.getSelectedBlocks();return S(((e,t)=>{var r=ge.map(t,(t=>e.dom.getParent(t,"li,dd,dt",qe(e,t))||t));return D(r)})(e,t),xe)},We=(e,t)=>{var r=e.dom.getParents(t,"TD,TH");return r.length>0?r[0]:e.getBody()},qe=(e,t)=>{var r=e.dom.getParents(t,e.dom.isBlock),n=E(r,(t=>{return r=e.schema,!be(n=t)&&!xe(n)&&x(Ve,(e=>r.isValidChild(n.nodeName,e)));var r,n}));return n.getOr(e.getBody())},$e=(e,t)=>{var r=e.dom.getParents(t,"ol,ul",qe(e,t));return R(r)},Ge=(e,t)=>{var r=C(t,(t=>$e(e,t).getOr(t)));return D(r)},Ke=e=>/\btox\-/.test(e.className),Ye=(e,t)=>O(e,be,ke).exists((e=>e.nodeName===t&&!Ke(e))),Xe=(e,t)=>null!==t&&!e.dom.isEditable(t),Je=(e,t)=>{var r=e.dom.getParent(t,"ol,ul,dl");return Xe(e,r)},Qe=(e,t)=>{var r=e.selection.getNode();return t({parents:e.dom.getParents(r),element:r}),e.on("NodeChange",t),()=>e.off("NodeChange",t)},et=(e,t,r)=>e.dispatch("ListMutation",{action:t,element:r}),tt=(z=/^\s+|\s+$/g,e=>e.replace(z,"")),rt=(e,t,r)=>{((e,t,r)=>{if(!a(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);(e=>void 0!==e.style&&c(e.style.getPropertyValue))(e)&&e.style.setProperty(t,r)})(e.dom,t,r)},nt=(e,t)=>{J(e.item,t.list)},ot=(e,t)=>{var r={list:P(t,e),item:P("li",e)};return J(r.list,r.item),r},at=e=>((e,t)=>{var r=e.dom;if(1!==r.nodeType)return!1;var n=r;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")})(e,"OL,UL"),it=e=>$(e).exists(at),st=e=>e.depth>0,lt=e=>e.isSelected,dt=e=>{var t=W(e),r=G(e).exists(at)?t.slice(0,-1):t;return C(r,ce)},ct=r=>(k(r,((n,o)=>{((e,t)=>{var r=e[t].depth,n=e=>e.depth===r&&!e.dirty,o=e=>e.depth<r;return O(A(e.slice(0,t)),n,o).orThunk((()=>O(e.slice(t+1),n,o)))})(r,o).fold((()=>{n.dirty&&(e=>{e.listAttributes=((e,t)=>{var r,n={};return((e,t,r,n)=>{se(e,((e,o)=>{(t(e,o)?r:n)(e,o)}))})(e,t,(r=n,(e,t)=>{r[t]=e}),m),n})(e.listAttributes,((e,t)=>"start"!==t))})(n)}),(r=>{return a=r,(o=n).listType=a.listType,void(o.listAttributes=function(r){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach((function(e){t(r,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}))}return r}({},a.listAttributes));var o,a}))})),r),ut=(e,t,r,n)=>$(n).filter(at).fold((()=>{t.each((e=>{F(e.start,n)&&r.set(!0)}));var o=((e,t,r)=>U(e).filter(Z).map((n=>({depth:t,dirty:!1,isSelected:r,content:dt(e),itemAttributes:de(e),listAttributes:de(n),listType:V(n)}))))(n,e,r.get());t.each((e=>{F(e.end,n)&&r.set(!1)}));var a=G(n).filter(at).map((n=>mt(e,t,r,n))).getOr([]);return o.toArray().concat(a)}),(n=>mt(e,t,r,n))),mt=(e,t,r,n)=>T(W(n),(n=>(at(n)?mt:ut)(e+1,t,r,n))),gt=(e,t)=>{var r=ct(t);return((e,t)=>{var r=_(t,((t,r)=>r.depth>t.length?((e,t,r)=>{var n,o=((e,t,r)=>{for(var n=[],o=0;o<r;o++)n.push(ot(e,t.listType));return n})(e,r,r.depth-t.length);return(e=>{for(var t=1;t<e.length;t++)nt(e[t-1],e[t])})(o),((e,t)=>{for(var r=0;r<e.length-1;r++)rt(e[r].item,"list-style-type","none");R(e).each((e=>{le(e.list,t.listAttributes),le(e.item,t.itemAttributes),Q(e.item,t.content)}))})(o,r),n=o,L(R(t),N(n),nt),t.concat(o)})(e,t,r):((e,t,r)=>{var n=t.slice(0,r.depth);return R(n).each((t=>{var n=((e,t,r)=>{var n=P("li",e);return le(n,t),Q(n,r),n})(e,r.itemAttributes,r.content);((e,t)=>{J(e.list,t),e.item=t})(t,n),((e,t)=>{V(e.list)!==t.listType&&(e.list=ue(e.list,t.listType)),le(e.list,t.listAttributes)})(t,r)})),n})(e,t,r)),[]);return N(r).map((e=>e.list))})(e.contentDocument,r).toArray()},ht=(e,t,r)=>{var n=((e,t)=>{var r=(e=>{var t=!1;return{get:()=>t,set:e=>{t=e}}})();return C(e,(e=>({sourceList:e,entries:mt(0,t,r,e)})))})(t,(e=>{var t=C(Ue(e),I);return L(E(t,h(it)),E(A(t),h(it)),((e,t)=>({start:e,end:t})))})(e));k(n,(t=>{((e,t)=>{k(S(e,lt),(e=>((e,t)=>{switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0})(t,e)))})(t.entries,r);var n,o=((e,t)=>T(((e,t)=>{if(0===e.length)return[];for(var r=t(e[0]),n=[],o=[],a=0,i=e.length;a<i;a++){var s=e[a],l=t(s);l!==r&&(n.push(o),o=[]),r=l,o.push(s)}return 0!==o.length&&n.push(o),n})(t,st),(t=>N(t).exists(st)?gt(e,t):((e,t)=>{var r=ct(t);return C(r,(t=>{var r,n,o=(r=t.content,n=document.createDocumentFragment(),k(r,(e=>{n.appendChild(e.dom)})),I(n));return I(Be(e,o.dom))}))})(e,t))))(e,t.entries);k(o,(t=>{et(e,"Indent"===r?"IndentList":"OutdentList",t.dom)})),n=t.sourceList,k(o,(e=>{X(n,e)})),te(t.sourceList)}))},pt=(e,t)=>{var r=ae((e=>{var t=(e=>{var t=$e(e,e.selection.getStart()),r=S(e.selection.getSelectedBlocks(),ye);return t.toArray().concat(r)})(e);return Ge(e,t)})(e)),n=ae((e=>S(Ue(e),Ce))(e)),o=!1;if(r.length||n.length){var a=e.selection.getBookmark();ht(e,r,t),((e,t,r)=>{k(r,"Indent"===t?Ie:t=>((e,t)=>{var r;He(t)?ue(t,"dt"):Pe(t)&&(r=t,v.from(r.dom.parentElement).map(I)).each((r=>((e,t,r)=>{var n=Le.select('span[data-mce-type="bookmark"]',t),o=Be(e,r),a=Le.createRng();a.setStartAfter(r),a.setEndAfter(t);for(var i=a.extractContents(),s=i.firstChild;s;s=s.firstChild)if("LI"===s.nodeName&&e.dom.isEmpty(s)){Le.remove(s);break}e.dom.isEmpty(i)||Le.insertAfter(i,t),Le.insertAfter(o,t);var l=r.parentElement;l&&Te(e.dom,l)&&(e=>{var t=e.parentNode;t&&ge.each(n,(e=>{t.insertBefore(e,r.parentNode)})),Le.remove(e)})(l),Le.remove(r),Te(e.dom,t)&&Le.remove(t)})(e,r.dom,t.dom)))})(e,t))})(e,t,n),e.selection.moveToBookmark(a),e.selection.setRng(ze(e.selection.getRng())),e.nodeChanged(),o=!0}return o},vt=(e,t)=>!(e=>{var t=je(e);return Xe(e,t)})(e)&&pt(e,t),ft=e=>vt(e,"Indent"),bt=e=>vt(e,"Outdent"),yt=e=>vt(e,"Flatten"),wt=e=>"\ufeff"===e,xt=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),Ct=me.DOM,kt=e=>{var t={},r=r=>{var n=e[r?"startContainer":"endContainer"],o=e[r?"startOffset":"endOffset"];if(fe(n)){var a=Ct.create("span",{"data-mce-type":"bookmark"});n.hasChildNodes()?(o=Math.min(o,n.childNodes.length-1),r?n.insertBefore(a,n.childNodes[o]):Ct.insertAfter(a,n.childNodes[o])):n.appendChild(a),n=a,o=0}t[r?"startContainer":"endContainer"]=n,t[r?"startOffset":"endOffset"]=o};return r(!0),e.collapsed||r(),t},St=e=>{var t=t=>{var r=e[t?"startContainer":"endContainer"],n=e[t?"startOffset":"endOffset"];if(r){if(fe(r)&&r.parentNode){var o=r;n=(e=>{for(var t,r=null===(t=e.parentNode)||void 0===t?void 0:t.firstChild,n=0;r;){if(r===e)return n;fe(r)&&"bookmark"===r.getAttribute("data-mce-type")||n++,r=r.nextSibling}return-1})(r),r=r.parentNode,Ct.remove(o),!r.hasChildNodes()&&Ct.isBlock(r)&&r.appendChild(Ct.create("br"))}e[t?"startContainer":"endContainer"]=r,e[t?"startOffset":"endOffset"]=n}};t(!0),t();var r=Ct.createRng();return r.setStart(e.startContainer,e.startOffset),e.endContainer&&r.setEnd(e.endContainer,e.endOffset),ze(r)},_t=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Ot=(e,t)=>{ge.each(t,((t,r)=>{e.setAttribute(r,t)}))},Et=(e,t,r)=>{((e,t,r)=>{var n=r["list-style-type"]?r["list-style-type"]:null;e.setStyle(t,"list-style-type",n)})(e,t,r),((e,t,r)=>{Ot(t,r["list-attributes"]),ge.each(e.select("li",t),(e=>{Ot(e,r["list-item-attributes"])}))})(e,t,r)},Tt=(e,t)=>d(t)&&!Oe(t,e.schema.getBlockElements()),At=(e,t,r,n)=>{var o=t[r?"startContainer":"endContainer"],a=t[r?"startOffset":"endOffset"];fe(o)&&(o=o.childNodes[Math.min(a,o.childNodes.length-1)]||o),!r&&Se(o.nextSibling)&&(o=o.nextSibling);var i=(t,r)=>{for(var o,a,i=new ne(t,(t=>{for(;!e.dom.isBlock(t)&&t.parentNode&&n!==t;)t=t.parentNode;return t})(t)),s=r?"next":"prev";a=i[s]();)if(!Ee(e,a)&&!wt(a.textContent)&&0!==(null===(o=a.textContent)||void 0===o?void 0:o.length))return v.some(a);return v.none()};if(r&&ve(o))if(wt(o.textContent))o=i(o,!1).getOr(o);else for(null!==o.parentNode&&Tt(e,o.parentNode)&&(o=o.parentNode);null!==o.previousSibling&&(Tt(e,o.previousSibling)||ve(o.previousSibling));)o=o.previousSibling;if(!r&&ve(o))if(wt(o.textContent))o=i(o,!0).getOr(o);else for(null!==o.parentNode&&Tt(e,o.parentNode)&&(o=o.parentNode);null!==o.nextSibling&&(Tt(e,o.nextSibling)||ve(o.nextSibling));)o=o.nextSibling;for(;o.parentNode!==n;){var s=o.parentNode;if(_e(e,o))return o;if(/^(TD|TH)$/.test(s.nodeName))return o;o=s}return o},Mt=(e,t,r)=>{var n=e.selection.getRng(),o="LI",a=qe(e,((e,t)=>{var r,n,o,a,i=e.selection.getStart(!0),s=At(e,t,!0,e.getBody());return r=I(s),n=I(t.commonAncestorContainer),o=r,a=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var a=r.concat(n);return e.apply(null,a)}}(F,n),K(o,a,void 0).isSome()?t.commonAncestorContainer:i})(e,n)),i=e.dom;if("false"!==i.getContentEditable(e.selection.getNode())){"DL"===(t=t.toUpperCase())&&(o="DT");var s=kt(n),l=S(((e,t,r)=>{for(var n,o=[],a=e.dom,i=At(e,t,!0,r),s=At(e,t,!1,r),l=[],d=i;d&&(l.push(d),d!==s);d=d.nextSibling);return ge.each(l,(t=>{var i;if(_e(e,t))return o.push(t),void(n=null);if(a.isBlock(t)||Se(t))return Se(t)&&a.remove(t),void(n=null);var s=t.nextSibling;xt.isBookmarkNode(t)&&(be(s)||_e(e,s)||!s&&t.parentNode===r)?n=null:(n||(n=a.create("p"),null===(i=t.parentNode)||void 0===i||i.insertBefore(n,t),o.push(n)),n.appendChild(t))})),o})(e,n,a),e.dom.isEditable);ge.each(l,(n=>{var a,s=n.previousSibling,l=n.parentNode;xe(l)||(s&&be(s)&&s.nodeName===t&&((e,t,r)=>{var n=e.getStyle(t,"list-style-type"),o=r?r["list-style-type"]:"";return n===(null===o?"":o)})(i,s,r)?(a=s,n=i.rename(n,o),s.appendChild(n)):(a=i.create(t),l.insertBefore(a,n),a.appendChild(n),n=i.rename(n,o)),((e,t,r)=>{ge.each(["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],(r=>e.setStyle(t,r,"")))})(i,n),Et(i,a,r),Rt(e.dom,a))})),e.selection.setRng(St(s))}},Nt=(e,t,r)=>{return((e,t)=>be(e)&&e.nodeName===(null==t?void 0:t.nodeName))(t,r)&&((e,t,r)=>e.getStyle(t,"list-style-type",!0)===e.getStyle(r,"list-style-type",!0))(e,t,r)&&(n=r,t.className===n.className);var n},Rt=(e,t)=>{var r,n=t.nextSibling;if(Nt(e,t,n)){for(var o=n;r=o.firstChild;)t.appendChild(r);e.remove(o)}if(n=t.previousSibling,Nt(e,t,n)){for(var a=n;r=a.lastChild;)t.insertBefore(r,t.firstChild);e.remove(a)}},Dt=(e,t,r,n)=>{if(t.nodeName!==r){var o=e.dom.rename(t,r);Et(e.dom,o,n),et(e,_t(r),o)}else Et(e.dom,t,n),et(e,_t(r),t)},Bt=(e,t,r,n)=>{if(t.classList.forEach(((e,r,n)=>{e.startsWith("tox-")&&(n.remove(e),0===n.length&&t.removeAttribute("class"))})),t.nodeName!==r){var o=e.dom.rename(t,r);Et(e.dom,o,n),et(e,_t(r),o)}else Et(e.dom,t,n),et(e,_t(r),t)},Lt=e=>"list-style-type"in e,Ht=(e,t,r)=>{var n=je(e);if(!Je(e,n)){var o=(e=>{var t=je(e),r=e.selection.getSelectedBlocks();return((e,t)=>d(e)&&1===t.length&&t[0]===e)(t,r)?(e=>S(e.querySelectorAll(Ze),be))(t):S(r,(e=>be(e)&&t!==e))})(e),a=i(r)?r:{};o.length>0?((e,t,r,n,o)=>{var a=be(t);if(!a||t.nodeName!==n||Lt(o)||Ke(t)){Mt(e,n,o);var i=kt(e.selection.getRng()),s=a?[t,...r]:r,l=a&&Ke(t)?Bt:Dt;ge.each(s,(t=>{l(e,t,n,o)})),e.selection.setRng(St(i))}else yt(e)})(e,n,o,t,a):((e,t,r,n)=>{if(t!==e.getBody())if(t)if(t.nodeName!==r||Lt(n)||Ke(t)){var o=kt(e.selection.getRng());Ke(t)&&t.classList.forEach(((e,r,n)=>{e.startsWith("tox-")&&(n.remove(e),0===n.length&&t.removeAttribute("class"))})),Et(e.dom,t,n);var a=e.dom.rename(t,r);Rt(e.dom,a),e.selection.setRng(St(o)),Mt(e,r,n),et(e,_t(r),a)}else yt(e);else Mt(e,r,n),et(e,_t(r),t)})(e,n,t,a)}},Pt=me.DOM,It=(e,t)=>{var r=ge.grep(e.select("ol,ul",t));ge.each(r,(t=>{((e,t)=>{var r=t.parentElement;if(r&&"LI"===r.nodeName&&r.firstChild===t){var n=r.previousSibling;n&&"LI"===n.nodeName?(n.appendChild(t),Te(e,r)&&Pt.remove(r)):Pt.setStyle(r,"listStyleType","none")}if(be(r)){var o=r.previousSibling;o&&"LI"===o.nodeName&&o.appendChild(t)}})(e,t)}))},Ft=(e,t,r,n)=>{var o=t.startContainer,a=t.startOffset;if(ve(o)&&(r?a<o.data.length:a>0))return o;var i=e.schema.getNonEmptyElements();fe(o)&&(o=re.getNode(o,a));var s=new ne(o,n);r&&((e,t)=>!!Se(t)&&e.isBlock(t.nextSibling)&&!Se(t.previousSibling))(e.dom,o)&&s.next();for(var l=r?s.next.bind(s):s.prev2.bind(s);o=l();){if("LI"===o.nodeName&&!o.hasChildNodes())return o;if(i[o.nodeName])return o;if(ve(o)&&o.data.length>0)return o}return null},zt=(e,t)=>{var r=t.childNodes;return 1===r.length&&!be(r[0])&&e.isBlock(r[0])},Vt=(e,t,r)=>{var n,o=t.parentNode;if(Ae(e,t)&&Ae(e,r)){be(r.lastChild)&&(n=r.lastChild),o===r.lastChild&&Se(o.previousSibling)&&e.remove(o.previousSibling);var a=r.lastChild;a&&Se(a)&&t.hasChildNodes()&&e.remove(a),Te(e,r,!0)&&ee(I(r)),((e,t,r)=>{var n,o=zt(e,r)?r.firstChild:r;if(((e,t)=>{zt(e,t)&&e.remove(t.firstChild,!0)})(e,t),!Te(e,t,!0))for(;n=t.firstChild;)o.appendChild(n)})(e,t,r),n&&r.appendChild(n);var i,s,l,d,c=(i=I(r),s=I(t),(l=i.dom)!==(d=s.dom)&&l.contains(d)?e.getParents(t,be,r):[]);e.remove(t),k(c,(t=>{Te(e,t)&&t!==e.getRoot()&&e.remove(t)}))}},Zt=(e,t)=>{var r=e.dom,n=e.selection,o=n.getStart(),a=We(e,o),i=r.getParent(n.getStart(),"LI",a);if(i){var s=i.parentElement;if(s===e.getBody()&&Te(r,s))return!0;var l=ze(n.getRng()),d=r.getParent(Ft(e,l,t,a),"LI",a);if(d&&d!==i)return e.undoManager.transact((()=>{var r,n;t?((e,t,r,n)=>{var o=e.dom;if(o.isEmpty(n))((e,t,r)=>{ee(I(r)),Vt(e.dom,t,r),e.selection.setCursorLocation(r,0)})(e,r,n);else{var a=kt(t);Vt(o,r,n),e.selection.setRng(St(a))}})(e,l,d,i):(null===(n=(r=i).parentNode)||void 0===n?void 0:n.firstChild)===r?bt(e):((e,t,r,n)=>{var o=kt(t);Vt(e.dom,r,n);var a=St(o);e.selection.setRng(a)})(e,l,i,d)})),!0;if(!d&&!t&&0===l.startOffset&&0===l.endOffset)return e.undoManager.transact((()=>{yt(e)})),!0}return!1},jt=e=>{var t=e.selection.getStart(),r=We(e,t);return e.dom.getParent(t,"LI,DT,DD",r)||Ue(e).length>0},Ut=(e,t)=>{var r=e.selection;return!Je(e,r.getNode())&&(r.isCollapsed()?((e,t)=>Zt(e,t)||((e,t)=>{var r=e.dom,n=e.selection.getStart(),o=We(e,n),a=r.getParent(n,r.isBlock,o);if(a&&r.isEmpty(a)){var i=ze(e.selection.getRng()),s=r.getParent(Ft(e,i,t,o),"LI",o);if(s){var l=e=>w(["td","th","caption"],V(e)),d=e=>e.dom===o;return!!function(e,t){return L(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:g).getOr(e.isNone()&&t.isNone())}(Y(I(s),l,d),Y(I(i.startContainer),l,d),F)&&(e.undoManager.transact((()=>{var n=s.parentNode;((e,t,r)=>{var n=e.getParent(t.parentNode,e.isBlock,r);e.remove(t),n&&e.isEmpty(n)&&e.remove(n)})(r,a,o),Rt(r,n),e.selection.select(s,!0),e.selection.collapse(t)})),!0)}}return!1})(e,t))(e,t):(e=>!!jt(e)&&(e.undoManager.transact((()=>{e.execCommand("Delete"),It(e.dom,e.getBody())})),!0))(e))},Wt=e=>{var t=A(tt(e).split("")),r=C(t,((e,t)=>{var r=e.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,t)*r}));return _(r,((e,t)=>e+t),0)},qt=e=>{if(--e<0)return"";var t=e%26,r=Math.floor(e/26);return qt(r)+String.fromCharCode("A".charCodeAt(0)+t)},$t=(e,t)=>()=>{var r=je(e);return d(r)&&r.nodeName===t},Gt=e=>{e.addCommand("mceListProps",(()=>{(e=>{var t,r,n=je(e);we(n)&&!Je(e,n)&&e.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:(t={start:e.dom.getAttrib(n,"start","1"),listStyleType:v.from(e.dom.getStyle(n,"list-style-type"))},r=parseInt(t.start,10),B(t.listStyleType,"upper-alpha")?qt(r):B(t.listStyleType,"lower-alpha")?qt(r).toLowerCase():t.start)},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:t=>{(e=>{switch((e=>/^[0-9]+$/.test(e)?2:/^[A-Z]+$/.test(e)?0:/^[a-z]+$/.test(e)?1:e.length>0?4:3)(e)){case 2:return v.some({listStyleType:v.none(),start:e});case 0:return v.some({listStyleType:v.some("upper-alpha"),start:Wt(e).toString()});case 1:return v.some({listStyleType:v.some("lower-alpha"),start:Wt(e).toString()});case 3:return v.some({listStyleType:v.none(),start:""});case 4:return v.none()}})(t.getData().start).each((t=>{e.execCommand("mceListUpdate",!1,{attrs:{start:"1"===t.start?"":t.start},styles:{"list-style-type":t.listStyleType.getOr("")}})})),t.close()}})})(e)}))},Kt=tinymce.util.Tools.resolve("tinymce.html.Node"),Yt=e=>3===e.type,Xt=e=>0===e.length,Jt=e=>{var t=(t,r)=>{var n=Kt.create("li");k(t,(e=>n.append(e))),r?e.insert(n,r,!0):e.append(n)},r=_(e.children(),((e,r)=>Yt(r)?[...e,r]:Xt(e)||Yt(r)?e:(t(e,r),[])),[]);Xt(r)||t(r)},Qt=(e,t)=>r=>(r.setEnabled(e.selection.isEditable()),Qe(e,(n=>{r.setActive(Ye(n.parents,t)),r.setEnabled(!Je(e,n.element)&&e.selection.isEditable())}))),er=(e,t)=>r=>Qe(e,(n=>r.setEnabled(Ye(n.parents,t)&&!Je(e,n.element))));r.add("lists",(e=>((e=>{(0,e.options.register)("lists_indent_on_tab",{processor:"boolean",default:!0})})(e),(e=>{e.on("PreInit",(()=>{var{parser:t}=e;t.addNodeFilter("ul,ol",(e=>k(e,Jt)))}))})(e),e.hasPlugin("rtc",!0)?Gt(e):((e=>{Ne(e)&&(e=>{e.on("keydown",(t=>{t.keyCode!==oe.TAB||oe.metaKeyPressed(t)||e.undoManager.transact((()=>{(t.shiftKey?bt(e):ft(e))&&t.preventDefault()}))}))})(e),(e=>{e.on("ExecCommand",(t=>{var r=t.command.toLowerCase();"delete"!==r&&"forwarddelete"!==r||!jt(e)||It(e.dom,e.getBody())})),e.on("keydown",(t=>{t.keyCode===oe.BACKSPACE?Ut(e,!1)&&t.preventDefault():t.keyCode===oe.DELETE&&Ut(e,!0)&&t.preventDefault()}))})(e)})(e),(e=>{e.on("BeforeExecCommand",(t=>{var r=t.command.toLowerCase();"indent"===r?ft(e):"outdent"===r&&bt(e)})),e.addCommand("InsertUnorderedList",((t,r)=>{Ht(e,"UL",r)})),e.addCommand("InsertOrderedList",((t,r)=>{Ht(e,"OL",r)})),e.addCommand("InsertDefinitionList",((t,r)=>{Ht(e,"DL",r)})),e.addCommand("RemoveList",(()=>{yt(e)})),Gt(e),e.addCommand("mceListUpdate",((t,r)=>{i(r)&&((e,t)=>{var r=je(e);null===r||Je(e,r)||e.undoManager.transact((()=>{i(t.styles)&&e.dom.setStyles(r,t.styles),i(t.attrs)&&se(t.attrs,((t,n)=>e.dom.setAttrib(r,n,t)))}))})(e,r)})),e.addQueryStateHandler("InsertUnorderedList",$t(e,"UL")),e.addQueryStateHandler("InsertOrderedList",$t(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",$t(e,"DL"))})(e)),(e=>{var t=t=>()=>e.execCommand(t);e.hasPlugin("advlist")||(e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:t("InsertOrderedList"),onSetup:Qt(e,"OL")}),e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:t("InsertUnorderedList"),onSetup:Qt(e,"UL")}))})(e),(e=>{var t={text:"List properties...",icon:"ordered-list",onAction:()=>e.execCommand("mceListProps"),onSetup:er(e,"OL")};e.ui.registry.addMenuItem("listprops",t),e.ui.registry.addContextMenu("lists",{update:t=>{var r=je(e,t);return we(r)?["listprops"]:[]}})})(e),(e=>({backspaceDelete:t=>{Ut(e,t)}}))(e))))}()},234:(e,t,r)=>{r(977)},977:()=>{!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=e=>t=>typeof t===e,r=("string",e=>{return a=typeof(t=e),"string"===(null===t?"null":"object"===a&&Array.isArray(t)?"array":"object"===a&&(i=r=t,(n=String).prototype.isPrototypeOf(i)||(null===(o=r.constructor)||void 0===o?void 0:o.name)===n.name)?"string":a);var t,r,n,o,a,i}),n=t("boolean"),o=t("function"),a=e=>t=>t.options.get(e),i=a("quickbars_selection_toolbar"),s=a("quickbars_insert_toolbar"),l=a("quickbars_image_toolbar"),d=0,c=tinymce.util.Tools.resolve("tinymce.util.Delay"),u=e=>{e.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:()=>{(e=>new Promise((t=>{var r=!1,n=document.createElement("input");n.type="file",n.accept="image/*",n.style.position="fixed",n.style.left="0",n.style.top="0",n.style.opacity="0.001",document.body.appendChild(n);var o=e=>{var o;r||(null===(o=n.parentNode)||void 0===o||o.removeChild(n),r=!0,t(e))},a=e=>{o(Array.prototype.slice.call(e.target.files))};n.addEventListener("input",a),n.addEventListener("change",a);var i=t=>{var n=()=>{o([])};r||("focusin"===t.type?c.setEditorTimeout(e,n,1e3):n()),e.off("focusin remove",i)};e.on("focusin remove",i),n.click()})))(e).then((t=>{if(t.length>0){var r=t[0];(e=>new Promise((t=>{var r=new FileReader;r.onloadend=()=>{t(r.result.split(",")[1])},r.readAsDataURL(e)})))(r).then((t=>{((e,t,r)=>{var n,o=e.editorUpload.blobCache,a=o.create((n=(new Date).getTime(),"mceu_"+Math.floor(1e9*Math.random())+ ++d+String(n)),r,t);o.add(a),e.insertContent(e.dom.createHTML("img",{src:a.blobUri()}))})(e,t,r)}))}}))}}),e.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:()=>{((e,t,r)=>{e.execCommand("mceInsertTable",!1,{rows:2,columns:2})})(e)}})},m=(!1,()=>false);class g{constructor(e,t){this.tag=e,this.value=t}static some(e){return new g(!0,e)}static none(){return g.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?g.some(e(this.value)):g.none()}bind(e){return this.tag?e(this.value):g.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:g.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return null==e?g.none():g.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?"some(".concat(this.value,")"):"none()"}}g.singletonNone=new g(!1),"undefined"!=typeof window?window:Function("return this;")();var h=(e,t,r,n,a)=>e(r,n)?g.some(r):o(a)&&a(r)?g.none():t(r,n,a),p=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},v=p,f=(e,t)=>{var r=e.dom;if(1!==r.nodeType)return!1;var n=r;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},b=(e,t,r)=>{for(var n=e.dom,a=o(r)?r:m;n.parentNode;){n=n.parentNode;var i=v(n);if(t(i))return g.some(i);if(a(i))break}return g.none()},y=(e,t,r)=>b(e,(e=>f(e,t)),r),w=e=>{var t=s(e);t.length>0&&e.ui.registry.addContextToolbar("quickblock",{predicate:t=>{var r,n=v(t),o=e.schema.getTextBlockElements(),a=t=>t.dom===e.getBody();return"data-mce-bogus",!((r=n.dom)&&r.hasAttribute&&r.hasAttribute("data-mce-bogus"))&&((e,t,r)=>h(((e,t)=>f(e,t)),y,e,'table,[data-mce-bogus="all"]',r))(n,0,a).fold((()=>((e,t,r)=>((e,t,r)=>h(((e,t)=>t(e)),b,e,t,r))(e,t,r).isSome())(n,(t=>t.dom.nodeName.toLowerCase()in o&&e.dom.isEmpty(t.dom)),a)),m)},items:t,position:"line",scope:"editor"})};e.add("quickbars",(e=>{(e=>{var t=e.options.register,o=e=>t=>{var o=n(t)||r(t);return o?n(t)?{value:t?e:"",valid:o}:{value:t.trim(),valid:o}:{valid:!1,message:"Must be a boolean or string."}},a="bold italic | quicklink h2 h3 blockquote";t("quickbars_selection_toolbar",{processor:o(a),default:a});var i="quickimage quicktable";t("quickbars_insert_toolbar",{processor:o(i),default:i});var s="alignleft aligncenter alignright";t("quickbars_image_toolbar",{processor:o(s),default:s})})(e),u(e),w(e),(e=>{var t=t=>e.dom.isEditable(t),r=e=>{var r,n="FIGURE"===e.nodeName&&/image/i.test(e.className),o="IMG"===e.nodeName||n,a=(e=>void 0!==e.dom.classList)(r=v(e))&&r.dom.classList.contains("mce-pagebreak");return o&&t(e.parentElement)&&!a},n=l(e);n.length>0&&e.ui.registry.addContextToolbar("imageselection",{predicate:r,items:n,position:"node"});var o=i(e);o.length>0&&e.ui.registry.addContextToolbar("textselection",{predicate:n=>!r(n)&&!e.selection.isCollapsed()&&t(n),items:o,position:"selection",scope:"editor"})})(e)}))}()},200:(e,t,r)=>{r(154)},154:()=>{var e=["class","style"],t=["events"],r=["attributes"],n=["primary"],o=["primary"];function a(e,t,r,n,o,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,l,"next",e)}function l(e){a(i,n,o,s,l,"throw",e)}s(void 0)}))}}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){var n,o,a;n=e,o=t,a=r[t],(o=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(o))in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(){"use strict";var a=Object.getPrototypeOf,l=(e,t,r)=>{var n;return!!r(e,t.prototype)||(null===(n=e.constructor)||void 0===n?void 0:n.name)===t.name},c=e=>t=>{return n=typeof(r=t),(null===r?"null":"object"===n&&Array.isArray(r)?"array":"object"===n&&l(r,String,((e,t)=>t.isPrototypeOf(e)))?"string":n)===e;var r,n},u=e=>t=>typeof t===e,m=e=>t=>e===t,g=c("string"),h=c("object"),p=e=>((e,t)=>h(e)&&l(e,t,((e,t)=>a(e)===t)))(e,Object),v=c("array"),f=m(null),b=u("boolean"),y=m(void 0),w=e=>null==e,x=e=>!w(e),C=u("function"),k=u("number"),S=(e,t)=>{if(v(e)){for(var r=0,n=e.length;r<n;++r)if(!t(e[r]))return!1;return!0}return!1},_=()=>{},O=e=>()=>e(),E=(e,t)=>function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e(t.apply(null,n))},T=e=>()=>e,A=e=>e,M=(e,t)=>e===t;function N(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var a=r.concat(n);return e.apply(null,a)}}var R=e=>t=>!e(t),D=e=>()=>{throw new Error(e)},B=e=>e(),L=T(!1),H=T(!0);class P{constructor(e,t){this.tag=e,this.value=t}static some(e){return new P(!0,e)}static none(){return P.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?P.some(e(this.value)):P.none()}bind(e){return this.tag?e(this.value):P.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:P.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return x(e)?P.some(e):P.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?"some(".concat(this.value,")"):"none()"}}P.singletonNone=new P(!1);var I,F,z=Array.prototype.slice,V=Array.prototype.indexOf,Z=Array.prototype.push,j=(e,t)=>V.call(e,t),U=(e,t)=>{var r=j(e,t);return-1===r?P.none():P.some(r)},W=(e,t)=>j(e,t)>-1,q=(e,t)=>{for(var r=0,n=e.length;r<n;r++)if(t(e[r],r))return!0;return!1},$=(e,t)=>{for(var r=[],n=0;n<e;n++)r.push(t(n));return r},G=(e,t)=>{for(var r=[],n=0;n<e.length;n+=t){var o=z.call(e,n,n+t);r.push(o)}return r},K=(e,t)=>{for(var r=e.length,n=new Array(r),o=0;o<r;o++){var a=e[o];n[o]=t(a,o)}return n},Y=(e,t)=>{for(var r=0,n=e.length;r<n;r++)t(e[r],r)},X=(e,t)=>{for(var r=[],n=[],o=0,a=e.length;o<a;o++){var i=e[o];(t(i,o)?r:n).push(i)}return{pass:r,fail:n}},J=(e,t)=>{for(var r=[],n=0,o=e.length;n<o;n++){var a=e[n];t(a,n)&&r.push(a)}return r},Q=(e,t,r)=>(((e,t)=>{for(var r=e.length-1;r>=0;r--)t(e[r],r)})(e,((e,n)=>{r=t(r,e,n)})),r),ee=(e,t,r)=>(Y(e,((e,n)=>{r=t(r,e,n)})),r),te=(e,t)=>((e,t,r)=>{for(var n=0,o=e.length;n<o;n++){var a=e[n];if(t(a,n))return P.some(a);if(r(a,n))break}return P.none()})(e,t,L),re=(e,t)=>{for(var r=0,n=e.length;r<n;r++)if(t(e[r],r))return P.some(r);return P.none()},ne=e=>{for(var t=[],r=0,n=e.length;r<n;++r){if(!v(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);Z.apply(t,e[r])}return t},oe=(e,t)=>ne(K(e,t)),ae=(e,t)=>{for(var r=0,n=e.length;r<n;++r)if(!0!==t(e[r],r))return!1;return!0},ie=e=>{var t=z.call(e,0);return t.reverse(),t},se=(e,t)=>J(e,(e=>!W(t,e))),le=(e,t)=>{for(var r={},n=0,o=e.length;n<o;n++){var a=e[n];r[String(a)]=t(a,n)}return r},de=e=>[e],ce=(e,t)=>{var r=z.call(e,0);return r.sort(t),r},ue=(e,t)=>t>=0&&t<e.length?P.some(e[t]):P.none(),me=e=>ue(e,0),ge=e=>ue(e,e.length-1),he=C(Array.from)?Array.from:e=>z.call(e),pe=(e,t)=>{for(var r=0;r<e.length;r++){var n=t(e[r],r);if(n.isSome())return n}return P.none()},ve=Object.keys,fe=Object.hasOwnProperty,be=(e,t)=>{for(var r=ve(e),n=0,o=r.length;n<o;n++){var a=r[n];t(e[a],a)}},ye=(e,t)=>we(e,((e,r)=>({k:r,v:t(e,r)}))),we=(e,t)=>{var r={};return be(e,((e,n)=>{var o=t(e,n);r[o.k]=o.v})),r},xe=e=>(t,r)=>{e[r]=t},Ce=(e,t,r,n)=>{be(e,((e,o)=>{(t(e,o)?r:n)(e,o)}))},ke=(e,t)=>{var r={};return Ce(e,t,xe(r),_),r},Se=(e,t)=>{var r=[];return be(e,((e,n)=>{r.push(t(e,n))})),r},_e=(e,t)=>{for(var r=ve(e),n=0,o=r.length;n<o;n++){var a=r[n],i=e[a];if(t(i,a,e))return P.some(i)}return P.none()},Oe=e=>Se(e,A),Ee=(e,t)=>Te(e,t)?P.from(e[t]):P.none(),Te=(e,t)=>fe.call(e,t),Ae=(e,t)=>Te(e,t)&&void 0!==e[t]&&null!==e[t],Me=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M;return e.exists((e=>r(e,t)))},Ne=e=>{for(var t=[],r=e=>{t.push(e)},n=0;n<e.length;n++)e[n].each(r);return t},Re=(e,t,r)=>e.isSome()&&t.isSome()?P.some(r(e.getOrDie(),t.getOrDie())):P.none(),De=(e,t)=>null!=e?P.some(t(e)):P.none(),Be=(e,t)=>e?P.some(t):P.none(),Le=(e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t,He=(e,t)=>Ie(e,t)?((e,t)=>e.substring(t))(e,t.length):e,Pe=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,o=e.indexOf(t,r);return-1!==o&&(!!y(n)||o+t.length<=n)},Ie=(e,t)=>Le(e,t,0),Fe=(e,t)=>Le(e,t,e.length-t.length),ze=(F=/^\s+|\s+$/g,e=>e.replace(F,"")),Ve=e=>e.length>0,Ze=e=>void 0!==e.style&&C(e.style.getPropertyValue),je=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},Ue=(e,t)=>{var r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){var n="HTML does not have a single root node";throw console.error(n,e),new Error(n)}return je(r.childNodes[0])},We=(e,t)=>{var r=(t||document).createElement(e);return je(r)},qe=(e,t)=>{var r=(t||document).createTextNode(e);return je(r)},$e=je,Ge="undefined"!=typeof window?window:Function("return this;")(),Ke=(e,t)=>((e,t)=>{for(var r=null!=t?t:Ge,n=0;n<e.length&&null!=r;++n)r=r[e[n]];return r})(e.split("."),t),Ye=Object.getPrototypeOf,Xe=e=>{var t=Ke("ownerDocument.defaultView",e);return h(e)&&((e=>((e,t)=>{var r=((e,t)=>Ke(e,t))(e,t);if(null==r)throw new Error(e+" not available on this browser");return r})("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Ye(e).constructor.name))},Je=e=>e.dom.nodeName.toLowerCase(),Qe=e=>t=>(e=>e.dom.nodeType)(t)===e,et=e=>tt(e)&&Xe(e.dom),tt=Qe(1),rt=Qe(3),nt=Qe(9),ot=Qe(11),at=e=>t=>tt(t)&&Je(t)===e,it=(e,t)=>{var r=e.dom;if(1!==r.nodeType)return!1;var n=r;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},st=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,lt=(e,t)=>e.dom===t.dom,dt=(e,t)=>{var r=e.dom,n=t.dom;return r!==n&&r.contains(n)},ct=e=>$e(e.dom.ownerDocument),ut=e=>nt(e)?e:ct(e),mt=e=>$e(ut(e).dom.documentElement),gt=e=>$e(ut(e).dom.defaultView),ht=e=>P.from(e.dom.parentNode).map($e),pt=e=>P.from(e.dom.parentElement).map($e),vt=e=>P.from(e.dom.offsetParent).map($e),ft=e=>K(e.dom.childNodes,$e),bt=(e,t)=>{var r=e.dom.childNodes;return P.from(r[t]).map($e)},yt=e=>bt(e,0),wt=(e,t)=>({element:e,offset:t}),xt=(e,t)=>{var r=ft(e);return r.length>0&&t<r.length?wt(r[t],0):wt(e,t)},Ct=e=>ot(e)&&x(e.dom.host),kt=C(Element.prototype.attachShadow)&&C(Node.prototype.getRootNode),St=T(kt),_t=kt?e=>$e(e.dom.getRootNode()):ut,Ot=e=>Ct(e)?e:$e(ut(e).dom.body),Et=e=>{var t=_t(e);return Ct(t)?P.some(t):P.none()},Tt=e=>$e(e.dom.host),At=e=>{var t=rt(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;var r,n,o=t.ownerDocument;return Et($e(t)).fold((()=>o.body.contains(t)),(r=At,n=Tt,e=>r(n(e))))},Mt=()=>Nt($e(document)),Nt=e=>{var t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return $e(t)},Rt=(e,t,r)=>{if(!(g(r)||b(r)||k(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")},Dt=(e,t,r)=>{Rt(e.dom,t,r)},Bt=(e,t)=>{var r=e.dom;be(t,((e,t)=>{Rt(r,t,e)}))},Lt=(e,t)=>{var r=e.dom.getAttribute(t);return null===r?void 0:r},Ht=(e,t)=>P.from(Lt(e,t)),Pt=(e,t)=>{var r=e.dom;return!(!r||!r.hasAttribute)&&r.hasAttribute(t)},It=(e,t)=>{e.dom.removeAttribute(t)},Ft=(e,t,r)=>{if(!g(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);Ze(e)&&e.style.setProperty(t,r)},zt=(e,t)=>{Ze(e)&&e.style.removeProperty(t)},Vt=(e,t,r)=>{var n=e.dom;Ft(n,t,r)},Zt=(e,t)=>{var r=e.dom;be(t,((e,t)=>{Ft(r,t,e)}))},jt=(e,t)=>{var r=e.dom;be(t,((e,t)=>{e.fold((()=>{zt(r,t)}),(e=>{Ft(r,t,e)}))}))},Ut=(e,t)=>{var r=e.dom,n=window.getComputedStyle(r).getPropertyValue(t);return""!==n||At(e)?n:Wt(r,t)},Wt=(e,t)=>Ze(e)?e.style.getPropertyValue(t):"",qt=(e,t)=>{var r=e.dom,n=Wt(r,t);return P.from(n).filter((e=>e.length>0))},$t=e=>{var t={},r=e.dom;if(Ze(r))for(var n=0;n<r.style.length;n++){var o=r.style.item(n);t[o]=r.style[o]}return t},Gt=(e,t,r)=>{var n=We(e);return Vt(n,t,r),qt(n,t).isSome()},Kt=(e,t)=>{var r=e.dom;zt(r,t),Me(Ht(e,"style").map(ze),"")&&It(e,"style")},Yt=e=>e.dom.offsetWidth,Xt=(e,t)=>{var r=r=>{var n=t(r);if(n<=0||null===n){var o=Ut(r,e);return parseFloat(o)||0}return n},n=(e,t)=>ee(t,((t,r)=>{var n=Ut(e,r),o=void 0===n?0:parseInt(n,10);return isNaN(o)?t:t+o}),0);return{set:(t,r)=>{if(!k(r)&&!r.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+r);var n=t.dom;Ze(n)&&(n.style[e]=r+"px")},get:r,getOuter:r,aggregate:n,max:(e,t,r)=>{var o=n(e,r);return t>o?t-o:0}}},Jt=Xt("height",(e=>{var t=e.dom;return At(e)?t.getBoundingClientRect().height:t.offsetHeight})),Qt=e=>Jt.get(e),er=e=>Jt.getOuter(e),tr=(e,t)=>({left:e,top:t,translate:(r,n)=>tr(e+r,t+n)}),rr=tr,nr=(e,t)=>void 0!==e?e:void 0!==t?t:0,or=e=>{var t=e.dom.ownerDocument,r=t.body,n=t.defaultView,o=t.documentElement;if(r===e.dom)return rr(r.offsetLeft,r.offsetTop);var a=nr(null==n?void 0:n.pageYOffset,o.scrollTop),i=nr(null==n?void 0:n.pageXOffset,o.scrollLeft),s=nr(o.clientTop,r.clientTop),l=nr(o.clientLeft,r.clientLeft);return ar(e).translate(i-l,a-s)},ar=e=>{var t=e.dom,r=t.ownerDocument.body;return r===t?rr(r.offsetLeft,r.offsetTop):At(e)?(e=>{var t=e.getBoundingClientRect();return rr(t.left,t.top)})(t):rr(0,0)},ir=Xt("width",(e=>e.dom.offsetWidth)),sr=e=>ir.get(e),lr=e=>ir.getOuter(e),dr=e=>{var t,r=!1;return function(){if(!r){r=!0;for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];t=e.apply(null,o)}return t}},cr=()=>ur(0,0),ur=(e,t)=>({major:e,minor:t}),mr={nu:ur,detect:(e,t)=>{var r=String(t).toLowerCase();return 0===e.length?cr():((e,t)=>{var r=((e,t)=>{for(var r=0;r<e.length;r++){var n=e[r];if(n.test(t))return n}})(e,t);if(!r)return{major:0,minor:0};var n=e=>Number(t.replace(r,"$"+e));return ur(n(1),n(2))})(e,r)},unknown:cr},gr=(e,t)=>{var r=String(t).toLowerCase();return te(e,(e=>e.search(r)))},hr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,pr=e=>t=>Pe(t,e),vr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Pe(e,"edge/")&&Pe(e,"chrome")&&Pe(e,"safari")&&Pe(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,hr],search:e=>Pe(e,"chrome")&&!Pe(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Pe(e,"msie")||Pe(e,"trident")},{name:"Opera",versionRegexes:[hr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:pr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:pr("firefox")},{name:"Safari",versionRegexes:[hr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Pe(e,"safari")||Pe(e,"mobile/"))&&Pe(e,"applewebkit")}],fr=[{name:"Windows",search:pr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Pe(e,"iphone")||Pe(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:pr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:pr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:pr("linux"),versionRegexes:[]},{name:"Solaris",search:pr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:pr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:pr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],br={browsers:T(vr),oses:T(fr)},yr="Edge",wr="Chromium",xr="Opera",Cr="Firefox",kr="Safari",Sr=e=>{var t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isEdge:n(yr),isChromium:n(wr),isIE:n("IE"),isOpera:n(xr),isFirefox:n(Cr),isSafari:n(kr)}},_r=()=>Sr({current:void 0,version:mr.unknown()}),Or=Sr,Er=(T(yr),T(wr),T("IE"),T(xr),T(Cr),T(kr),"Windows"),Tr="Android",Ar="Linux",Mr="macOS",Nr="Solaris",Rr="FreeBSD",Dr="ChromeOS",Br=e=>{var t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isWindows:n(Er),isiOS:n("iOS"),isAndroid:n(Tr),isMacOS:n(Mr),isLinux:n(Ar),isSolaris:n(Nr),isFreeBSD:n(Rr),isChromeOS:n(Dr)}},Lr=()=>Br({current:void 0,version:mr.unknown()}),Hr=Br,Pr=(T(Er),T("iOS"),T(Tr),T(Ar),T(Mr),T(Nr),T(Rr),T(Dr),e=>window.matchMedia(e).matches),Ir=dr((()=>((e,t,r)=>{var n=br.browsers(),o=br.oses(),a=t.bind((e=>((e,t)=>pe(t.brands,(t=>{var r=t.brand.toLowerCase();return te(e,(e=>{var t;return r===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:mr.nu(parseInt(t.version,10),0)})))})))(n,e))).orThunk((()=>((e,t)=>gr(e,t).map((e=>{var r=mr.detect(e.versionRegexes,t);return{current:e.name,version:r}})))(n,e))).fold(_r,Or),i=((e,t)=>gr(e,t).map((e=>{var r=mr.detect(e.versionRegexes,t);return{current:e.name,version:r}})))(o,e).fold(Lr,Hr),s=((e,t,r,n)=>{var o=e.isiOS()&&!0===/ipad/i.test(r),a=e.isiOS()&&!o,i=e.isiOS()||e.isAndroid(),s=i||n("(pointer:coarse)"),l=o||!a&&i&&n("(min-device-width:768px)"),d=a||i&&!l,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(r),u=!d&&!l&&!c;return{isiPad:T(o),isiPhone:T(a),isTablet:T(l),isPhone:T(d),isTouch:T(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:T(c),isDesktop:T(u)}})(i,a,e,r);return{browser:a,os:i,deviceType:s}})(navigator.userAgent,P.from(navigator.userAgentData),Pr))),Fr=()=>Ir(),zr=e=>{var t=$e((e=>{if(St()&&x(e.target)){var t=$e(e.target);if(tt(t)&&(e=>x(e.dom.shadowRoot))(t)&&e.composed&&e.composedPath){var r=e.composedPath();if(r)return me(r)}}return P.from(e.target)})(e).getOr(e.target)),r=()=>e.stopPropagation(),n=()=>e.preventDefault(),o=E(n,r);return((e,t,r,n,o,a,i)=>({target:e,x:t,y:r,stop:n,prevent:o,kill:a,raw:i}))(t,e.clientX,e.clientY,r,n,o,e)},Vr=(e,t,r,n,o)=>{var a=((e,t)=>r=>{e(r)&&t(zr(r))})(r,n);return e.dom.addEventListener(t,a,o),{unbind:N(Zr,e,t,a,o)}},Zr=(e,t,r,n)=>{e.dom.removeEventListener(t,r,n)},jr=(e,t)=>{ht(e).each((r=>{r.dom.insertBefore(t.dom,e.dom)}))},Ur=(e,t)=>{var r=(e=>P.from(e.dom.nextSibling).map($e))(e);r.fold((()=>{ht(e).each((e=>{qr(e,t)}))}),(e=>{jr(e,t)}))},Wr=(e,t)=>{yt(e).fold((()=>{qr(e,t)}),(r=>{e.dom.insertBefore(t.dom,r.dom)}))},qr=(e,t)=>{e.dom.appendChild(t.dom)},$r=(e,t)=>{Y(t,(t=>{qr(e,t)}))},Gr=e=>{e.dom.textContent="",Y(ft(e),(e=>{Kr(e)}))},Kr=e=>{var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Yr=e=>{var t=void 0!==e?e.dom:document,r=t.body.scrollLeft||t.documentElement.scrollLeft,n=t.body.scrollTop||t.documentElement.scrollTop;return rr(r,n)},Xr=(e,t,r)=>{var n=(void 0!==r?r.dom:document).defaultView;n&&n.scrollTo(e,t)},Jr=(e,t,r,n)=>({x:e,y:t,width:r,height:n,right:e+r,bottom:t+n}),Qr=e=>{var t=void 0===e?window:e,r=t.document,n=Yr($e(r));return(e=>{var t=void 0===e?window:e;return Fr().browser.isFirefox()?P.none():P.from(t.visualViewport)})(t).fold((()=>{var e=t.document.documentElement,r=e.clientWidth,o=e.clientHeight;return Jr(n.left,n.top,r,o)}),(e=>Jr(Math.max(e.pageLeft,n.left),Math.max(e.pageTop,n.top),e.width,e.height)))},en=()=>$e(document),tn=(e,t)=>e.view(t).fold(T([]),(t=>{var r=e.owner(t),n=tn(e,r);return[t].concat(n)})),rn=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?P.none():P.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map($e)},owner:e=>ct(e)}),nn=e=>{var t=en(),r=Yr(t),n=((e,t)=>{var r=t.owner(e),n=tn(t,r);return P.some(n)})(e,rn);return n.fold(N(or,e),(t=>{var n=ar(e),o=Q(t,((e,t)=>{var r=ar(t);return{left:e.left+r.left,top:e.top+r.top}}),{left:0,top:0});return rr(o.left+n.left+r.left,o.top+n.top+r.top)}))},on=(e,t,r,n)=>({x:e,y:t,width:r,height:n,right:e+r,bottom:t+n}),an=e=>{var t=or(e),r=lr(e),n=er(e);return on(t.left,t.top,r,n)},sn=e=>{var t=nn(e),r=lr(e),n=er(e);return on(t.left,t.top,r,n)},ln=(e,t)=>{var r=Math.max(e.x,t.x),n=Math.max(e.y,t.y),o=Math.min(e.right,t.right),a=Math.min(e.bottom,t.bottom);return on(r,n,o-r,a-n)},dn=()=>Qr(window),cn=tinymce.util.Tools.resolve("tinymce.ThemeManager"),un=e=>{var t=t=>t(e),r=T(e),n=()=>o,o={tag:!0,inner:e,fold:(t,r)=>r(e),isValue:H,isError:L,map:t=>gn.value(t(e)),mapError:n,bind:t,exists:t,forall:t,getOr:r,or:n,getOrThunk:r,orThunk:n,getOrDie:r,each:t=>{t(e)},toOptional:()=>P.some(e)};return o},mn=e=>{var t=()=>r,r={tag:!1,inner:e,fold:(t,r)=>t(e),isValue:L,isError:H,map:t,mapError:t=>gn.error(t(e)),bind:t,exists:L,forall:H,getOr:A,or:A,getOrThunk:B,orThunk:B,getOrDie:D(String(e)),each:_,toOptional:P.none};return r},gn={value:un,error:mn,fromOption:(e,t)=>e.fold((()=>mn(t)),un)};!function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"}(I||(I={}));var hn=(e,t,r)=>e.stype===I.Error?t(e.serror):r(e.svalue),pn=e=>({stype:I.Value,svalue:e}),vn=e=>({stype:I.Error,serror:e}),fn=pn,bn=vn,yn=hn,wn=(e,t,r,n)=>({tag:"field",key:e,newKey:t,presence:r,prop:n}),xn=(e,t,r)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return r(e.newKey,e.instantiator)}},Cn=e=>function(){if(0===arguments.length)throw new Error("Can't merge zero objects");for(var t={},r=0;r<arguments.length;r++){var n=r<0||arguments.length<=r?void 0:arguments[r];for(var o in n)Te(n,o)&&(t[o]=e(t[o],n[o]))}return t},kn=Cn(((e,t)=>p(e)&&p(t)?kn(e,t):t)),Sn=Cn(((e,t)=>t)),_n=e=>({tag:"defaultedThunk",process:e}),On=e=>_n(T(e)),En=e=>({tag:"mergeWithThunk",process:e}),Tn=e=>{var t,r=(e=>{var t=[],r=[];return Y(e,(e=>{hn(e,(e=>r.push(e)),(e=>t.push(e)))})),{values:t,errors:r}})(e);return r.errors.length>0?(t=r.errors,E(bn,ne)(t)):fn(r.values)},An=e=>h(e)&&ve(e).length>100?" removed due to size":JSON.stringify(e,null,2),Mn=(e,t)=>bn([{path:e,getErrorInfo:t}]),Nn=e=>({extract:(t,r)=>((e,t)=>e.stype===I.Error?t(e.serror):e)(e(r),(e=>((e,t)=>Mn(e,T(t)))(t,e))),toString:T("val")}),Rn=Nn(fn),Dn=(e,t,r,n)=>n(Ee(e,t).getOrThunk((()=>r(e)))),Bn=(e,t,r,n,o)=>{var a=e=>o.extract(t.concat([n]),e),i=e=>e.fold((()=>fn(P.none())),(e=>((e,t)=>e.stype===I.Value?{stype:I.Value,svalue:t(e.svalue)}:e)(o.extract(t.concat([n]),e),P.some)));switch(e.tag){case"required":return((e,t,r,n)=>Ee(t,r).fold((()=>((e,t,r)=>Mn(e,(()=>'Could not find valid *required* value for "'+t+'" in '+An(r))))(e,r,t)),n))(t,r,n,a);case"defaultedThunk":return Dn(r,n,e.process,a);case"option":return((e,t,r)=>r(Ee(e,t)))(r,n,i);case"defaultedOptionThunk":return((e,t,r,n)=>n(Ee(e,t).map((t=>!0===t?r(e):t))))(r,n,e.process,i);case"mergeWithThunk":return Dn(r,n,T({}),(t=>{var n=kn(e.process(r),t);return a(n)}))}},Ln=e=>({extract:(t,r)=>e().extract(t,r),toString:()=>e().toString()}),Hn=e=>ve(ke(e,x)),Pn=e=>{var t=In(e),r=Q(e,((e,t)=>xn(t,(t=>kn(e,{[t]:!0})),T(e))),{});return{extract:(e,n)=>{var o=b(n)?[]:Hn(n),a=J(o,(e=>!Ae(r,e)));return 0===a.length?t.extract(e,n):((e,t)=>Mn(e,(()=>"There are unsupported fields: ["+t.join(", ")+"] specified")))(e,a)},toString:t.toString}},In=e=>({extract:(t,r)=>((e,t,r)=>{var n={},o=[];for(var a of r)xn(a,((r,a,i,s)=>{var l=Bn(i,e,t,r,s);yn(l,(e=>{o.push(...e)}),(e=>{n[a]=e}))}),((e,r)=>{n[e]=r(t)}));return o.length>0?bn(o):fn(n)})(t,r,e),toString:()=>{var t=K(e,(e=>xn(e,((e,t,r,n)=>e+" -> "+n.toString()),((e,t)=>"state("+e+")"))));return"obj{\n"+t.join("\n")+"}"}}),Fn=e=>({extract:(t,r)=>{var n=K(r,((r,n)=>e.extract(t.concat(["["+n+"]"]),r)));return Tn(n)},toString:()=>"array("+e.toString()+")"}),zn=(e,t)=>{var r=void 0!==t?t:A;return{extract:(t,n)=>{var o=[];for(var a of e){var i=a.extract(t,n);if(i.stype===I.Value)return{stype:I.Value,svalue:r(i.svalue)};o.push(i)}return Tn(o)},toString:()=>"oneOf("+K(e,(e=>e.toString())).join(", ")+")"}},Vn=(e,t)=>({extract:(r,n)=>{var o=ve(n),a=((t,r)=>Fn(Nn(e)).extract(t,r))(r,o);return((e,t)=>e.stype===I.Value?t(e.svalue):e)(a,(e=>{var o=K(e,(e=>wn(e,e,{tag:"required",process:{}},t)));return In(o).extract(r,n)}))},toString:()=>"setOf("+t.toString()+")"}),Zn=E(Fn,In),jn=T(Rn),Un=(e,t)=>Nn((r=>{var n=typeof r;return e(r)?fn(r):bn("Expected type: ".concat(t," but got: ").concat(n))})),Wn=Un(k,"number"),qn=Un(g,"string"),$n=Un(b,"boolean"),Gn=Un(C,"function"),Kn=e=>{if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every((t=>Kn(e[t])));default:return!1}},Yn=Nn((e=>Kn(e)?fn(e):bn("Expected value to be acceptable for sending via postMessage"))),Xn=(e,t)=>({extract:(r,n)=>Ee(n,e).fold((()=>((e,t)=>Mn(e,(()=>'Choice schema did not contain choice key: "'+t+'"')))(r,e)),(e=>((e,t,r,n)=>Ee(r,n).fold((()=>((e,t,r)=>Mn(e,(()=>'The chosen schema: "'+r+'" did not exist in branches: '+An(t))))(e,r,n)),(r=>r.extract(e.concat(["branch: "+n]),t))))(r,n,t,e))),toString:()=>"chooseOn("+e+"). Possible values: "+ve(t)}),Jn=e=>Nn((t=>e(t).fold(bn,fn))),Qn=(e,t)=>Vn((t=>e(t).fold(vn,pn)),t),eo=(e,t,r)=>{return n=((e,t,r)=>((e,t)=>e.stype===I.Error?{stype:I.Error,serror:t(e.serror)}:e)(t.extract([e],r),(e=>({input:r,errors:e}))))(e,t,r),hn(n,gn.error,gn.value);var n},to=e=>e.fold((e=>{throw new Error(no(e))}),A),ro=(e,t,r)=>to(eo(e,t,r)),no=e=>{return"Errors: \n"+(t=e.errors,r=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:T("... (only showing first ten failures)")}]):t,K(r,(e=>"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo()))).join("\n")+"\n\nInput object: "+An(e.input);var t,r},oo=(e,t)=>Xn(e,ye(t,In)),ao=(e,t)=>{return r=dr(t),{extract:(e,t)=>r().extract(e,t),toString:()=>r().toString()};var r},io=wn,so=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),lo=e=>Jn((t=>W(e,t)?gn.value(t):gn.error('Unsupported value: "'.concat(t,'", choose one of "').concat(e.join(", "),'".')))),co=e=>io(e,e,{tag:"required",process:{}},jn()),uo=(e,t)=>io(e,e,{tag:"required",process:{}},t),mo=e=>uo(e,Wn),go=e=>uo(e,qn),ho=(e,t)=>io(e,e,{tag:"required",process:{}},lo(t)),po=e=>uo(e,Gn),vo=(e,t)=>io(e,e,{tag:"required",process:{}},In(t)),fo=(e,t)=>io(e,e,{tag:"required",process:{}},Zn(t)),bo=(e,t)=>io(e,e,{tag:"required",process:{}},Fn(t)),yo=e=>io(e,e,{tag:"option",process:{}},jn()),wo=(e,t)=>io(e,e,{tag:"option",process:{}},t),xo=e=>wo(e,Wn),Co=e=>wo(e,qn),ko=(e,t)=>wo(e,lo(t)),So=e=>wo(e,Gn),_o=(e,t)=>wo(e,Fn(t)),Oo=(e,t)=>wo(e,In(t)),Eo=(e,t)=>io(e,e,On(t),jn()),To=(e,t,r)=>io(e,e,On(t),r),Ao=(e,t)=>To(e,t,Wn),Mo=(e,t)=>To(e,t,qn),No=(e,t,r)=>To(e,t,lo(r)),Ro=(e,t)=>To(e,t,$n),Do=(e,t)=>To(e,t,Gn),Bo=(e,t,r)=>To(e,t,Fn(r)),Lo=(e,t,r)=>To(e,t,In(r)),Ho=e=>{var t=e;return{get:()=>t,set:e=>{t=e}}},Po=e=>{if(!v(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],r={};return Y(e,((n,o)=>{var a=ve(n);if(1!==a.length)throw new Error("one and only one name per case");var i=a[0],s=n[i];if(void 0!==r[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!v(s))throw new Error("case arguments must be an array");t.push(i),r[i]=function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var l=n.length;if(l!==s.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+s.length+" ("+s+"), got "+l);return{fold:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(r.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+r.length);return r[o].apply(null,n)},match:e=>{var r=ve(e);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!ae(t,(e=>W(r,e))))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return e[i].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:i,params:n})}}}})),r};Po([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var Io,Fo,zo=(e,t)=>((e,t)=>({[e]:t}))(e,t),Vo=e=>(e=>{var t={};return Y(e,(e=>{t[e.key]=e.value})),t})(e),Zo=e=>C(e)?e:L,jo=(e,t,r)=>{for(var n=e.dom,o=Zo(r);n.parentNode;){n=n.parentNode;var a=$e(n),i=t(a);if(i.isSome())return i;if(o(a))break}return P.none()},Uo=(e,t,r)=>{var n=t(e),o=Zo(r);return n.orThunk((()=>o(e)?P.none():jo(e,t,o)))},Wo=(e,t)=>lt(e.element,t.event.target),qo={can:H,abort:L,run:_},$o=e=>{if(!Ae(e,"can")&&!Ae(e,"abort")&&!Ae(e,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(e,null,2)+" does not have can, abort, or run!");return d(d({},qo),e)},Go=T,Ko=Go("touchstart"),Yo=Go("touchmove"),Xo=Go("touchend"),Jo=Go("touchcancel"),Qo=Go("mousedown"),ea=Go("mousemove"),ta=Go("mouseout"),ra=Go("mouseup"),na=Go("mouseover"),oa=Go("focusin"),aa=Go("focusout"),ia=Go("keydown"),sa=Go("keyup"),la=Go("input"),da=Go("change"),ca=Go("click"),ua=Go("transitioncancel"),ma=Go("transitionend"),ga=Go("transitionstart"),ha=Go("selectstart"),pa=e=>T("alloy."+e),va={tap:pa("tap")},fa=pa("focus"),ba=pa("blur.post"),ya=pa("paste.post"),wa=pa("receive"),xa=pa("execute"),Ca=pa("focus.item"),ka=va.tap,Sa=pa("longpress"),_a=pa("sandbox.close"),Oa=pa("typeahead.cancel"),Ea=pa("system.init"),Ta=pa("system.touchmove"),Aa=pa("system.touchend"),Ma=pa("system.scroll"),Na=pa("system.resize"),Ra=pa("system.attached"),Da=pa("system.detached"),Ba=pa("system.dismissRequested"),La=pa("system.repositionRequested"),Ha=pa("focusmanager.shifted"),Pa=pa("slotcontainer.visibility"),Ia=pa("system.external.element.scroll"),Fa=pa("change.tab"),za=pa("dismiss.tab"),Va=pa("highlight"),Za=pa("dehighlight"),ja=(e,t)=>{$a(e,e.element,t,{})},Ua=(e,t,r)=>{$a(e,e.element,t,r)},Wa=e=>{ja(e,xa())},qa=(e,t,r)=>{$a(e,t,r,{})},$a=(e,t,r,n)=>{var o=d({target:t},n);e.getSystem().triggerEvent(r,t,o)},Ga=(e,t,r,n)=>{e.getSystem().triggerEvent(r,t,n.event)},Ka=e=>Vo(e),Ya=(e,t)=>({key:e,value:$o({abort:t})}),Xa=e=>({key:e,value:$o({run:(e,t)=>{t.event.prevent()}})}),Ja=(e,t)=>({key:e,value:$o({run:t})}),Qa=(e,t,r)=>({key:e,value:$o({run:(e,n)=>{t.apply(void 0,[e,n].concat(r))}})}),ei=e=>t=>({key:e,value:$o({run:(e,r)=>{Wo(e,r)&&t(e,r)}})}),ti=(e,t,r)=>((e,t)=>Ja(e,((r,n)=>{r.getSystem().getByUid(t).each((t=>{Ga(t,t.element,e,n)}))})))(e,t.partUids[r]),ri=(e,t)=>Ja(e,((e,r)=>{var n=r.event,o=e.getSystem().getByDom(n.target).getOrThunk((()=>Uo(n.target,(t=>e.getSystem().getByDom(t).toOptional()),L).getOr(e)));t(e,o,r)})),ni=e=>Ja(e,((e,t)=>{t.cut()})),oi=e=>Ja(e,((e,t)=>{t.stop()})),ai=(e,t)=>ei(e)(t),ii=ei(Ra()),si=ei(Da()),li=ei(Ea()),di=(e=>t=>Ja(e,t))(xa()),ci=e=>e.dom.innerHTML,ui=(e,t)=>{var r=ct(e).dom,n=$e(r.createDocumentFragment()),o=((e,t)=>{var r=(t||document).createElement("div");return r.innerHTML=e,ft($e(r))})(t,r);$r(n,o),Gr(e),qr(e,n)},mi=e=>Ct(e)?"#shadow-root":(e=>{var t=We("div"),r=$e(e.dom.cloneNode(!0));return qr(t,r),ci(t)})((e=>((e,t)=>$e(e.dom.cloneNode(!1)))(e))(e)),gi=e=>mi(e),hi=Ka([((e,t)=>({key:e,value:$o({can:(e,t)=>{var r=t.event,n=r.originator,o=r.target;return!((e,t,r)=>lt(t,e.element)&&!lt(t,r))(e,n,o)||(console.warn(fa()+" did not get interpreted by the desired target. \nOriginator: "+gi(n)+"\nTarget: "+gi(o)+"\nCheck the "+fa()+" event handlers"),!1)}})}))(fa())]),pi=Object.freeze({__proto__:null,events:hi}),vi=0,fi=e=>{var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++vi+String(t)},bi=T("alloy-id-"),yi=T("data-alloy-id"),wi=bi(),xi=yi(),Ci=(e,t)=>{Object.defineProperty(e.dom,xi,{value:t,writable:!0})},ki=e=>{var t=tt(e)?e.dom[xi]:null;return P.from(t)},Si=e=>fi(e),_i=A,Oi=e=>{var t=t=>"The component must be in a context to execute: ".concat(t)+(e?"\n"+gi(e().element)+" is not in context.":""),r=e=>()=>{throw new Error(t(e))},n=e=>()=>{console.warn(t(e))};return{debugInfo:T("fake"),triggerEvent:n("triggerEvent"),triggerFocus:n("triggerFocus"),triggerEscape:n("triggerEscape"),broadcast:n("broadcast"),broadcastOn:n("broadcastOn"),broadcastEvent:n("broadcastEvent"),build:r("build"),buildOrPatch:r("buildOrPatch"),addToWorld:r("addToWorld"),removeFromWorld:r("removeFromWorld"),addToGui:r("addToGui"),removeFromGui:r("removeFromGui"),getByUid:r("getByUid"),getByDom:r("getByDom"),isConnected:L}},Ei=Oi(),Ti=e=>K(e,(e=>Fe(e,"/*")?e.substring(0,e.length-2):e)),Ai=(e,t)=>{var r=e.toString(),n=r.indexOf(")")+1,o=r.indexOf("("),a=r.substring(o+1,n-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:t,parameters:Ti(a)}),e},Mi=fi("alloy-premade"),Ni=e=>(Object.defineProperty(e.element.dom,Mi,{value:e.uid,writable:!0}),zo(Mi,e)),Ri=e=>Ee(e,Mi),Di=e=>((e,t)=>{var r=t.toString(),n=r.indexOf(")")+1,o=r.indexOf("("),a=r.substring(o+1,n-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Ti(a.slice(1))}),e})((function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return e(t.getApis(),t,...n)}),e),Bi={init:()=>Li({readState:T("No State required")})},Li=e=>e,Hi=(e,t)=>{var r={};return be(e,((e,n)=>{be(e,((e,o)=>{var a=Ee(r,o).getOr([]);r[o]=a.concat([t(n,e)])}))})),r},Pi=e=>({classes:y(e.classes)?[]:e.classes,attributes:y(e.attributes)?{}:e.attributes,styles:y(e.styles)?{}:e.styles}),Ii=e=>e.cHandler,Fi=(e,t)=>({name:e,handler:t}),zi=(e,t,r)=>{var n=t[r];return n?((e,t,r,n)=>{try{var o=ce(r,((r,o)=>{var a=r[t],i=o[t],s=n.indexOf(a),l=n.indexOf(i);if(-1===s)throw new Error("The ordering for "+e+" does not have an entry for "+a+".\nOrder specified: "+JSON.stringify(n,null,2));if(-1===l)throw new Error("The ordering for "+e+" does not have an entry for "+i+".\nOrder specified: "+JSON.stringify(n,null,2));return s<l?-1:l<s?1:0}));return gn.value(o)}catch(e){return gn.error([e])}})("Event: "+r,"name",e,n).map((e=>(e=>{var t=((e,t)=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ee(e,((e,t)=>e&&(e=>e.can)(t).apply(void 0,r)),!0)})(e),r=((e,t)=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ee(e,((e,t)=>e||(e=>e.abort)(t).apply(void 0,r)),!1)})(e);return{can:t,abort:r,run:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];Y(e,(e=>{e.run.apply(void 0,r)}))}}})(K(e,(e=>e.handler))))):((e,t)=>gn.error(["The event ("+e+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(K(t,(e=>e.name)),null,2)]))(r,e)},Vi=(e,t)=>{var r,n,o,a=Se(e,((e,r)=>(1===e.length?gn.value(e[0].handler):zi(e,t,r)).map((n=>{var o=(e=>{var t=(e=>C(e)?{can:H,abort:L,run:e}:e)(e);return function(e,r){for(var n=arguments.length,o=new Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];var i=[e,r].concat(o);t.abort.apply(void 0,i)?r.stop():t.can.apply(void 0,i)&&t.run.apply(void 0,i)}})(n),a=e.length>1?J(t[r],(t=>q(e,(e=>e.name===t)))).join(" > "):e[0].name;return zo(r,((e,t)=>({handler:e,purpose:t}))(o,a))}))));return r={},o=(e=>{var t=[],r=[];return Y(e,(e=>{e.fold((e=>{t.push(e)}),(e=>{r.push(e)}))})),{errors:t,values:r}})(a),o.errors.length>0?(n=o.errors,gn.error(ne(n))):((e,t)=>0===e.length?gn.value(t):gn.value(kn(t,Sn.apply(void 0,e))))(o.values,r)},Zi="alloy.base.behaviour",ji=In([io("dom","dom",{tag:"required",process:{}},In([co("tag"),Eo("styles",{}),Eo("classes",[]),Eo("attributes",{}),yo("value"),yo("innerHtml")])),co("components"),co("uid"),Eo("events",{}),Eo("apis",{}),io("eventOrder","eventOrder",(Fo={[xa()]:["disabling",Zi,"toggling","typeaheadevents"],[fa()]:[Zi,"focusing","keying"],[Ea()]:[Zi,"disabling","toggling","representing"],[la()]:[Zi,"representing","streaming","invalidating"],[Da()]:[Zi,"representing","item-events","tooltipping"],[Qo()]:["focusing",Zi,"item-type-events"],[Ko()]:["focusing",Zi,"item-type-events"],[na()]:["item-type-events","tooltipping"],[wa()]:["receiving","reflecting","tooltipping"]},En(T(Fo))),jn()),yo("domModification")]),Ui=e=>e.events,Wi=(e,t)=>{var r=Lt(e,t);return void 0===r||""===r?[]:r.split(" ")},qi=e=>void 0!==e.dom.classList,$i=e=>Wi(e,"class"),Gi=(e,t)=>{qi(e)?e.dom.classList.add(t):((e,t)=>{((e,t,r)=>{var n=Wi(e,t).concat([r]);Dt(e,t,n.join(" "))})(e,"class",t)})(e,t)},Ki=(e,t)=>{qi(e)?e.dom.classList.remove(t):((e,t)=>{((e,t,r)=>{var n=J(Wi(e,t),(e=>e!==r));n.length>0?Dt(e,t,n.join(" ")):It(e,t)})(e,"class",t)})(e,t),(e=>{0===(qi(e)?e.dom.classList:$i(e)).length&&It(e,"class")})(e)},Yi=(e,t)=>qi(e)&&e.dom.classList.contains(t),Xi=(e,t)=>{Y(t,(t=>{Gi(e,t)}))},Ji=(e,t)=>{Y(t,(t=>{Ki(e,t)}))},Qi=(e,t)=>ae(t,(t=>Yi(e,t))),es=e=>e.dom.value,ts=(e,t)=>{if(void 0===t)throw new Error("Value.set was undefined");e.dom.value=t},rs=(e,t,r)=>{r.fold((()=>qr(e,t)),(e=>{lt(e,t)||(jr(e,t),Kr(e))}))},ns=(e,t,r)=>{var n=K(t,r),o=ft(e);return Y(o.slice(n.length),Kr),n},os=(e,t,r,n)=>{var o=bt(e,t),a=n(r,o),i=((e,t,r)=>bt(e,t).map((e=>{if(r.exists((t=>!lt(t,e)))){var t=r.map(Je).getOr("span"),n=We(t);return jr(e,n),n}return e})))(e,t,o);return rs(e,a.element,i),a},as=(e,t)=>{var r=ve(e),n=ve(t),o=se(n,r),a=((e,r)=>{var n={},o={};return Ce(e,((e,r)=>!Te(t,r)||e!==t[r]),xe(n),xe(o)),{t:n,f:o}})(e).t;return{toRemove:o,toSet:a}},is=(t,r)=>{var n,o,a=(e=>ee(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}))(r),{class:i,style:l}=a,d=s(a,e),{toSet:c,toRemove:u}=as(t.attributes,d),m=$t(r),{toSet:g,toRemove:h}=as(t.styles,m),p=(e=>qi(e)?(e=>{for(var t=e.dom.classList,r=new Array(t.length),n=0;n<t.length;n++){var o=t.item(n);null!==o&&(r[n]=o)}return r})(e):$i(e))(r),v=se(p,t.classes),f=se(t.classes,p);return Y(u,(e=>It(r,e))),Bt(r,c),Xi(r,f),Ji(r,v),Y(h,(e=>Kt(r,e))),Zt(r,g),t.innerHtml.fold((()=>{var e=t.domChildren;((e,t)=>{ns(e,t,((t,r)=>{var n=bt(e,r);return rs(e,t,n),t}))})(r,e)}),(e=>{ui(r,e)})),n=r,(o=t.value.getOrUndefined())!==es(n)&&ts(n,null!=o?o:""),r},ss=e=>{var t=(e=>{var t=Ee(e,"behaviours").getOr({});return oe(ve(t),(e=>{var r=t[e];return x(r)?[r.me]:[]}))})(e);return((e,t)=>((e,t)=>{var r=K(t,(e=>Oo(e.name(),[co("config"),Eo("state",Bi)]))),n=eo("component.behaviours",In(r),e.behaviours).fold((t=>{throw new Error(no(t)+"\nComplete spec:\n"+JSON.stringify(e,null,2))}),A);return{list:t,data:ye(n,(e=>{var t=e.map((e=>({config:e.config,state:e.state.init(e.config)})));return T(t)}))}})(e,t))(e,t)},ls=(e,t,r)=>{var n={"alloy.base.behaviour":Ui(e)};return((e,t,r,n)=>{var o=((e,t,r)=>{var n=d(d({},r),((e,t)=>{var r={};return Y(e,(e=>{r[e.name()]=e.handlers(t)})),r})(t,e));return Hi(n,Fi)})(e,r,n);return Vi(o,t)})(r,e.eventOrder,t,n).getOrDie()},ds=(e,t)=>{var r,n,o=()=>p,a=Ho(Ei),i=to((e=>eo("custom.definition",ji,e))(e)),s=ss(e),l=(e=>e.list)(s),c=(e=>e.data)(s),u=((e,t,r)=>{var n,o,a,i=d(d({},(n=e).dom),{},{uid:n.uid,domChildren:K(n.components,(e=>e.element))}),s=(e=>e.domModification.fold((()=>Pi({})),Pi))(e),l={"alloy.base.modification":s},c=t.length>0?((e,t,r,n)=>{var o=d({},t);Y(r,(t=>{o[t.name()]=t.exhibit(e,n)}));var a=Hi(o,((e,t)=>({name:e,modification:t}))),i=e=>Q(e,((e,t)=>d(d({},t.modification),e)),{}),s=Q(a.classes,((e,t)=>t.modification.concat(e)),[]),l=i(a.attributes),c=i(a.styles);return Pi({classes:s,attributes:l,styles:c})})(r,l,t,i):s;return a=c,d(d({},o=i),{},{attributes:d(d({},o.attributes),a.attributes),styles:d(d({},o.styles),a.styles),classes:o.classes.concat(a.classes)})})(i,l,c),m=(r=u,n=t.filter((e=>Je(e)===r.tag&&!(e=>e.innerHtml.isSome()&&e.domChildren.length>0)(r)&&!(e=>Te(e.dom,Mi))(e))).bind((e=>((e,t)=>{try{var r=is(e,t);return P.some(r)}catch(e){return P.none()}})(r,e))).getOrThunk((()=>(e=>{var t=We(e.tag);Bt(t,e.attributes),Xi(t,e.classes),Zt(t,e.styles),e.innerHtml.each((e=>ui(t,e)));var r=e.domChildren;return $r(t,r),e.value.each((e=>{ts(t,e)})),t})(r))),Ci(n,r.uid),n),g=ls(i,l,c),h=Ho(i.components),p={uid:e.uid,getSystem:a.get,config:t=>{var r=c;return(C(r[t.name()])?r[t.name()]:()=>{throw new Error("Could not find "+t.name()+" in "+JSON.stringify(e,null,2))})()},hasConfigured:e=>C(c[e.name()]),spec:e,readState:e=>c[e]().map((e=>e.state.readState())).getOr("not enabled"),getApis:()=>i.apis,connect:e=>{a.set(e)},disconnect:()=>{a.set(Oi(o))},element:m,syncComponents:()=>{var e=ft(m),t=oe(e,(e=>a.get().getByDom(e).fold((()=>[]),de)));h.set(t)},components:h.get,events:g};return p},cs=e=>{var t=qe(e);return us({element:t})},us=e=>{var t=ro("external.component",Pn([co("element"),yo("uid")]),e),r=Ho(Oi()),n=t.uid.getOrThunk((()=>Si("external")));Ci(t.element,n);var o={uid:n,getSystem:r.get,config:P.none,hasConfigured:L,connect:e=>{r.set(e)},disconnect:()=>{r.set(Oi((()=>o)))},getApis:()=>({}),element:t.element,spec:e,readState:T("No state"),syncComponents:_,components:T([]),events:{}};return Ni(o)},ms=Si,gs=(e,r)=>Ri(e).getOrThunk((()=>((e,r)=>{var n=_i(e),{events:o}=n,a=s(n,t),i=((e,t)=>{var r=Ee(e,"components").getOr([]);return t.fold((()=>K(r,hs)),(e=>K(r,((t,r)=>gs(t,bt(e,r))))))})(a,r),l=d(d({},a),{},{events:d(d({},pi),o),components:i});return gn.value(ds(l,r))})((e=>Te(e,"uid"))(e)?e:d({uid:ms("")},e),r).getOrDie())),hs=e=>gs(e,P.none()),ps=Ni,vs=(e,t,r,n,o)=>e(r,n)?P.some(r):C(o)&&o(r)?P.none():t(r,n,o),fs=(e,t,r)=>{for(var n=e.dom,o=C(r)?r:L;n.parentNode;){n=n.parentNode;var a=$e(n);if(t(a))return P.some(a);if(o(a))break}return P.none()},bs=(e,t,r)=>vs(((e,t)=>t(e)),fs,e,t,r),ys=(e,t,r)=>bs(e,t,r).isSome(),ws=(e,t,r)=>fs(e,(e=>it(e,t)),r),xs=(e,t)=>((e,r)=>te(e.dom.childNodes,(e=>{return r=$e(e),it(r,t);var r})).map($e))(e),Cs=(e,t)=>((e,t)=>{var r=void 0===t?document:t.dom;return st(r)?P.none():P.from(r.querySelector(e)).map($e)})(t,e),ks=(e,t,r)=>vs(((e,t)=>it(e,t)),ws,e,t,r),Ss="aria-controls",_s=()=>{var e=fi(Ss);return{id:e,link:t=>{Dt(t,Ss,e)},unlink:e=>{It(e,Ss)}}},Os=(e,t)=>ys(t,(t=>lt(t,e.element)),L)||((e,t)=>(e=>bs(e,(e=>{if(!tt(e))return!1;var t=Lt(e,"id");return void 0!==t&&t.indexOf(Ss)>-1})).bind((e=>{var t=Lt(e,"id"),r=_t(e);return Cs(r,"[".concat(Ss,'="').concat(t,'"]'))})))(t).exists((t=>Os(e,t))))(e,t);!function(e){e[e.STOP=0]="STOP",e[e.NORMAL=1]="NORMAL",e[e.LOGGING=2]="LOGGING"}(Io||(Io={}));var Es=Ho({}),Ts=["alloy/data/Fields","alloy/debugging/Debugging"],As=(e,t,r)=>((e,t,r)=>{switch(Ee(Es.get(),e).orThunk((()=>{var t=ve(Es.get());return pe(t,(t=>e.indexOf(t)>-1?P.some(Es.get()[t]):P.none()))})).getOr(Io.NORMAL)){case Io.NORMAL:return r(Ms());case Io.LOGGING:var n=((e,t)=>{var r=[],n=(new Date).getTime();return{logEventCut:(e,t,n)=>{r.push({outcome:"cut",target:t,purpose:n})},logEventStopped:(e,t,n)=>{r.push({outcome:"stopped",target:t,purpose:n})},logNoParent:(e,t,n)=>{r.push({outcome:"no-parent",target:t,purpose:n})},logEventNoHandlers:(e,t)=>{r.push({outcome:"no-handlers-left",target:t})},logEventResponse:(e,t,n)=>{r.push({outcome:"response",purpose:n,target:t})},write:()=>{var o=(new Date).getTime();W(["mousemove","mouseover","mouseout",Ea()],e)||console.log(e,{event:e,time:o-n,target:t.dom,sequence:K(r,(e=>W(["cut","stopped","response"],e.outcome)?"{"+e.purpose+"} "+e.outcome+" at ("+gi(e.target)+")":e.outcome))})}}})(e,t),o=r(n);return n.write(),o;case Io.STOP:return!0}})(e,t,r),Ms=T({logEventCut:_,logEventStopped:_,logNoParent:_,logEventNoHandlers:_,logEventResponse:_,write:_}),Ns=T([co("menu"),co("selectedMenu")]),Rs=T([co("item"),co("selectedItem")]);T(In(Rs().concat(Ns())));var Ds=T(In(Rs())),Bs=vo("initSize",[co("numColumns"),co("numRows")]),Ls=()=>vo("markers",[co("backgroundMenu")].concat(Ns()).concat(Rs())),Hs=e=>vo("markers",K(e,co)),Ps=(e,t,r)=>((()=>{var e=new Error;if(void 0!==e.stack){var t=e.stack.split("\n");te(t,(e=>e.indexOf("alloy")>0&&!q(Ts,(t=>e.indexOf(t)>-1)))).getOr("unknown")}})(),io(t,t,r,Jn((e=>gn.value((function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(void 0,r)})))))),Is=e=>Ps(0,e,On(_)),Fs=e=>Ps(0,e,On(P.none)),zs=e=>Ps(0,e,{tag:"required",process:{}}),Vs=e=>Ps(0,e,{tag:"required",process:{}}),Zs=(e,t)=>so(e,T(t)),js=e=>so(e,A),Us=T(Bs),Ws=function(e,t,r,n,o,a,i){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return{x:e,y:t,bubble:r,direction:n,placement:o,restriction:a,label:"".concat(i,"-").concat(o),alwaysFit:s}},qs=Po([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),$s=qs.southeast,Gs=qs.southwest,Ks=qs.northeast,Ys=qs.northwest,Xs=qs.south,Js=qs.north,Qs=qs.east,el=qs.west,tl=(e,t,r,n)=>{var o=e+t;return o>n?r:o<r?n:o},rl=(e,t,r)=>Math.min(Math.max(e,t),r),nl=(e,t)=>le(["left","right","top","bottom"],(r=>Ee(t,r).map((t=>((e,t)=>{switch(t){case 1:return e.x;case 0:return e.x+e.width;case 2:return e.y;case 3:return e.y+e.height}})(e,t))))),ol="layout",al=e=>e.x,il=(e,t)=>e.x+e.width/2-t.width/2,sl=(e,t)=>e.x+e.width-t.width,ll=(e,t)=>e.y-t.height,dl=e=>e.y+e.height,cl=(e,t)=>e.y+e.height/2-t.height/2,ul=(e,t,r)=>Ws(al(e),dl(e),r.southeast(),$s(),"southeast",nl(e,{left:1,top:3}),ol),ml=(e,t,r)=>Ws(sl(e,t),dl(e),r.southwest(),Gs(),"southwest",nl(e,{right:0,top:3}),ol),gl=(e,t,r)=>Ws(al(e),ll(e,t),r.northeast(),Ks(),"northeast",nl(e,{left:1,bottom:2}),ol),hl=(e,t,r)=>Ws(sl(e,t),ll(e,t),r.northwest(),Ys(),"northwest",nl(e,{right:0,bottom:2}),ol),pl=(e,t,r)=>Ws(il(e,t),ll(e,t),r.north(),Js(),"north",nl(e,{bottom:2}),ol),vl=(e,t,r)=>Ws(il(e,t),dl(e),r.south(),Xs(),"south",nl(e,{top:3}),ol),fl=(e,t,r)=>Ws((e=>e.x+e.width)(e),cl(e,t),r.east(),Qs(),"east",nl(e,{left:0}),ol),bl=(e,t,r)=>Ws(((e,t)=>e.x-t.width)(e,t),cl(e,t),r.west(),el(),"west",nl(e,{right:1}),ol),yl=()=>[ul,ml,gl,hl,vl,pl,fl,bl],wl=()=>[ml,ul,hl,gl,vl,pl,fl,bl],xl=()=>[gl,hl,ul,ml,pl,vl],Cl=()=>[hl,gl,ml,ul,pl,vl],kl=()=>[ul,ml,gl,hl,vl,pl],Sl=()=>[ml,ul,hl,gl,vl,pl],_l=Object.freeze({__proto__:null,events:e=>Ka([Ja(wa(),((t,r)=>{var n=e.channels,o=ve(n),a=r,i=((e,t)=>t.universal?e:J(e,(e=>W(t.channels,e))))(o,a);Y(i,(e=>{var r=n[e],o=r.schema,i=ro("channel["+e+"] data\nReceiver: "+gi(t.element),o,a.data);r.onReceive(t,i)}))}))])}),Ol=[uo("channels",Qn(gn.value,Pn([zs("onReceive"),Eo("schema",jn())])))],El=(e,t,r)=>li(((n,o)=>{r(n,e,t)})),Tl=e=>({key:e,value:void 0}),Al=(e,t,r,n,o,a,i)=>{var s=e=>Ae(e,r)?e[r]():P.none(),l=ye(o,((e,t)=>((e,t,r)=>((e,t,r)=>{var n=r.toString(),o=n.indexOf(")")+1,a=n.indexOf("("),i=n.substring(a+1,o-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:t,parameters:Ti(i.slice(0,1).concat(i.slice(3)))}),e})((function(n){for(var o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];var s=[n].concat(a);return n.config({name:T(e)}).fold((()=>{throw new Error("We could not find any behaviour configuration for: "+e+". Using API: "+r)}),(e=>{var r=Array.prototype.slice.call(s,1);return t.apply(void 0,[n,e.config,e.state].concat(r))}))}),r,t))(r,e,t))),c=d(d(d({},ye(a,((e,t)=>Ai(e,t)))),l),{},{revoke:N(Tl,r),config:t=>{var n=ro(r+"-config",e,t);return{key:r,value:{config:n,me:c,configAsRaw:dr((()=>ro(r+"-config",e,t))),initialConfig:t,state:i}}},schema:T(t),exhibit:(e,t)=>Re(s(e),Ee(n,"exhibit"),((e,r)=>r(t,e.config,e.state))).getOrThunk((()=>Pi({}))),name:T(r),handlers:e=>s(e).map((e=>Ee(n,"events").getOr((()=>({})))(e.config,e.state))).getOr({})});return c},Ml=e=>Vo(e),Nl=Pn([co("fields"),co("name"),Eo("active",{}),Eo("apis",{}),Eo("state",Bi),Eo("extra",{})]),Rl=e=>{var t=ro("Creating behaviour: "+e.name,Nl,e);return((e,t,r,n,o,a)=>{var i,s=Pn(e),l=Oo(t,[("config",i=e,wo("config",Pn(i)))]);return Al(s,l,t,r,n,o,a)})(t.fields,t.name,t.active,t.apis,t.extra,t.state)},Dl=Pn([co("branchKey"),co("branches"),co("name"),Eo("active",{}),Eo("apis",{}),Eo("state",Bi),Eo("extra",{})]),Bl=e=>{var t=ro("Creating behaviour: "+e.name,Dl,e);return((e,t,r,n,o,a)=>{var i=e,s=Oo(t,[wo("config",e)]);return Al(i,s,t,r,n,o,a)})(oo(t.branchKey,t.branches),t.name,t.active,t.apis,t.extra,t.state)},Ll=T(void 0),Hl=Rl({fields:Ol,name:"receiving",active:_l}),Pl=Object.freeze({__proto__:null,exhibit:(e,t)=>Pi({classes:[],styles:t.useFixed()?{}:{position:"relative"}})}),Il=e=>e.dom.focus(),Fl=e=>e.dom.blur(),zl=e=>{var t=_t(e).dom;return e.dom===t.activeElement},Vl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:en();return P.from(e.dom.activeElement).map($e)},Zl=e=>Vl(_t(e)).filter((t=>e.dom.contains(t.dom))),jl=(e,t)=>{var r=_t(t),n=Vl(r).bind((e=>{var r,n,o=t=>lt(e,t);return o(t)?P.some(t):(r=o,(n=e=>{for(var t=0;t<e.childNodes.length;t++){var o=$e(e.childNodes[t]);if(r(o))return P.some(o);var a=n(e.childNodes[t]);if(a.isSome())return a}return P.none()})(t.dom))})),o=e(t);return n.each((e=>{Vl(r).filter((t=>lt(t,e))).fold((()=>{Il(e)}),_)})),o},Ul=(e,t,r,n,o)=>{var a=e=>e+"px";return{position:e,left:t.map(a),top:r.map(a),right:n.map(a),bottom:o.map(a)}},Wl=(e,t)=>{jt(e,(e=>d(d({},e),{},{position:P.some(e.position)}))(t))},ql=Po([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),$l=(e,t,r,n,o,a)=>{var i=t.rect,s=i.x-r,l=i.y-n,d=o-(s+i.width),c=a-(l+i.height),u=P.some(s),m=P.some(l),g=P.some(d),h=P.some(c),p=P.none();return t.direction.fold((()=>Ul(e,u,m,p,p)),(()=>Ul(e,p,m,g,p)),(()=>Ul(e,u,p,p,h)),(()=>Ul(e,p,p,g,h)),(()=>Ul(e,u,m,p,p)),(()=>Ul(e,u,p,p,h)),(()=>Ul(e,u,m,p,p)),(()=>Ul(e,p,m,g,p)))},Gl=(e,t)=>e.fold((()=>{var e=t.rect;return Ul("absolute",P.some(e.x),P.some(e.y),P.none(),P.none())}),((e,r,n,o)=>$l("absolute",t,e,r,n,o)),((e,r,n,o)=>$l("fixed",t,e,r,n,o))),Kl=(e,t)=>{var r=N(nn,t),n=e.fold(r,r,(()=>{var e=Yr();return nn(t).translate(-e.left,-e.top)})),o=lr(t),a=er(t);return on(n.left,n.top,o,a)},Yl=(e,t)=>t.fold((()=>e.fold(dn,dn,on)),(t=>e.fold(T(t),T(t),(()=>{var r=Xl(e,t.x,t.y);return on(r.left,r.top,t.width,t.height)})))),Xl=(e,t,r)=>{var n=rr(t,r);return e.fold(T(n),T(n),(()=>{var e=Yr();return n.translate(-e.left,-e.top)}))};ql.none;var Jl,Ql=ql.relative,ed=ql.fixed,td="data-alloy-placement",rd=e=>Ht(e,td),nd=Po([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),od=(e,t,r,n)=>{var o=e.bubble,a=o.offset,i=((e,t,r)=>{var n=(n,o)=>t[n].map((t=>{var a="top"===n||"bottom"===n,i=a?r.top:r.left,s=("left"===n||"top"===n?Math.max:Math.min)(t,o)+i;return a?rl(s,e.y,e.bottom):rl(s,e.x,e.right)})).getOr(o),o=n("left",e.x),a=n("top",e.y),i=n("right",e.right),s=n("bottom",e.bottom);return on(o,a,i-o,s-a)})(n,e.restriction,a),s=e.x+a.left,l=e.y+a.top,d=on(s,l,t,r),{originInBounds:c,sizeInBounds:u,visibleW:m,visibleH:g}=((e,t)=>{var{x:r,y:n,right:o,bottom:a}=t,{x:i,y:s,right:l,bottom:d,width:c,height:u}=e;return{originInBounds:i>=r&&i<=o&&s>=n&&s<=a,sizeInBounds:l<=o&&l>=r&&d<=a&&d>=n,visibleW:Math.min(c,i>=r?o-i:l-r),visibleH:Math.min(u,s>=n?a-s:d-n)}})(d,i),h=c&&u,p=h?d:((e,t)=>{var{x:r,y:n,right:o,bottom:a}=t,{x:i,y:s,width:l,height:d}=e,c=Math.max(r,o-l),u=Math.max(n,a-d),m=rl(i,r,c),g=rl(s,n,u),h=Math.min(m+l,o)-m,p=Math.min(g+d,a)-g;return on(m,g,h,p)})(d,i),v=p.width>0&&p.height>0,{maxWidth:f,maxHeight:b}=((e,t,r)=>{var n=T(t.bottom-r.y),o=T(r.bottom-t.y),a=((e,t,r,n)=>e.fold(t,t,n,n,t,n,r,r))(e,o,o,n),i=T(t.right-r.x),s=T(r.right-t.x),l=((e,t,r,n)=>e.fold(t,n,t,n,r,r,t,n))(e,s,s,i);return{maxWidth:l,maxHeight:a}})(e.direction,p,n),y={rect:p,maxHeight:b,maxWidth:f,direction:e.direction,placement:e.placement,classes:{on:o.classesOn,off:o.classesOff},layout:e.label,testY:l};return h||e.alwaysFit?nd.fit(y):nd.nofit(y,m,g,v)},ad=e=>{var t=Ho(P.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(P.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(P.some(e))}}},id=()=>ad((e=>e.unbind())),sd=()=>{var e=ad(_);return d(d({},e),{},{on:t=>e.get().each(t)})},ld=H,dd=(e,t,r)=>((e,t,r,n)=>Vr(e,t,r,n,!1))(e,t,ld,r),cd=(e,t,r)=>((e,t,r,n)=>Vr(e,t,r,n,!0))(e,t,ld,r),ud=zr,md=["top","bottom","right","left"],gd="data-alloy-transition-timer",hd=(e,t,r,n,o,a)=>{var i=((e,t,r)=>r.exists((r=>{var n=e.mode;return"all"===n||r[n]!==t[n]})))(n,o,a);if(i||((e,t)=>Qi(e,t.classes))(e,n)){Vt(e,"position",r.position);var s=Kl(t,e),l=Gl(t,d(d({},o),{},{rect:s})),c=le(md,(e=>l[e]));((e,t)=>{var r=e=>parseFloat(e).toFixed(3);return _e(t,((t,n)=>!function(e,t){return Re(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:M).getOr(e.isNone()&&t.isNone())}(e[n].map(r),t.map(r)))).isSome()})(r,c)&&(jt(e,c),i&&((e,t)=>{Xi(e,t.classes),Ht(e,gd).each((t=>{clearTimeout(parseInt(t,10)),It(e,gd)})),((e,t)=>{var r,n=id(),o=id(),a=t=>{var r,n=null!==(r=t.raw.pseudoElement)&&void 0!==r?r:"";return lt(t.target,e)&&!Ve(n)&&W(md,t.raw.propertyName)},i=i=>{if(w(i)||a(i)){n.clear(),o.clear();var s=null==i?void 0:i.raw.type;(w(s)||s===ma())&&(clearTimeout(r),It(e,gd),Ji(e,t.classes))}},s=dd(e,ga(),(t=>{a(t)&&(s.unbind(),n.set(dd(e,ma(),i)),o.set(dd(e,ua(),i)))})),l=(e=>{var t=t=>{var r=Ut(e,t).split(/\s*,\s*/);return J(r,Ve)},r=e=>{if(g(e)&&/^[\d.]+/.test(e)){var t=parseFloat(e);return Fe(e,"ms")?t:1e3*t}return 0},n=t("transition-delay"),o=t("transition-duration");return ee(o,((e,t,o)=>{var a=r(n[o])+r(t);return Math.max(e,a)}),0)})(e);requestAnimationFrame((()=>{r=setTimeout(i,l+17),Dt(e,gd,r)}))})(e,t)})(e,n),Yt(e))}else Ji(e,n.classes)},pd=(e,t)=>{((e,t)=>{var r=Jt.max(e,t,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);Vt(e,"max-height",r+"px")})(e,Math.floor(t))},vd=T(((e,t)=>{pd(e,t),Zt(e,{"overflow-x":"hidden","overflow-y":"auto"})})),fd=T(((e,t)=>{pd(e,t)})),bd=(e,t,r)=>void 0===e[t]?r:e[t],yd=(e,t,r,n)=>{var o=((e,t,r,n)=>{Kt(t,"max-height"),Kt(t,"max-width");var o,a={width:lr(o=t),height:er(o)};return((e,t,r,n,o,a)=>{var i=n.width,s=n.height,l=(t,l,d,c,u)=>{var m=t(r,n,o,e,a),g=od(m,i,s,a);return g.fold(T(g),((e,t,r,n)=>(u===n?r>c||t>d:!u&&n)?g:nd.nofit(l,d,c,u)))};return ee(t,((e,t)=>{var r=N(l,t);return e.fold(T(e),r)}),nd.nofit({rect:r,maxHeight:n.height,maxWidth:n.width,direction:$s(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:r.y},-1,-1,!1)).fold(A,A)})(t,n.preference,e,a,r,n.bounds)})(e,t,r,n);return((e,t,r)=>{var n=Gl(r.origin,t);r.transition.each((o=>{hd(e,r.origin,n,o,t,r.lastPlacement)})),Wl(e,n)})(t,o,n),((e,t)=>{((e,t)=>{Dt(e,td,t)})(e,t.placement)})(t,o),((e,t)=>{var r=t.classes;Ji(e,r.off),Xi(e,r.on)})(t,o),((e,t,r)=>{(0,r.maxHeightFunction)(e,t.maxHeight)})(t,o,n),((e,t,r)=>{(0,r.maxWidthFunction)(e,t.maxWidth)})(t,o,n),{layout:o.layout,placement:o.placement}},wd=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],xd=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=e*n,a=t*n,i=e=>Ee(r,e).getOr([]),s=(e,t,r)=>{var n=se(wd,r);return{offset:rr(e,t),classesOn:oe(r,i),classesOff:oe(n,i)}};return{southeast:()=>s(-e,t,["top","alignLeft"]),southwest:()=>s(e,t,["top","alignRight"]),south:()=>s(-e/2,t,["top","alignCentre"]),northeast:()=>s(-e,-t,["bottom","alignLeft"]),northwest:()=>s(e,-t,["bottom","alignRight"]),north:()=>s(-e/2,-t,["bottom","alignCentre"]),east:()=>s(e,-t/2,["valignCentre","left"]),west:()=>s(-e,-t/2,["valignCentre","right"]),insetNortheast:()=>s(o,a,["top","alignLeft","inset"]),insetNorthwest:()=>s(-o,a,["top","alignRight","inset"]),insetNorth:()=>s(-o/2,a,["top","alignCentre","inset"]),insetSoutheast:()=>s(o,-a,["bottom","alignLeft","inset"]),insetSouthwest:()=>s(-o,-a,["bottom","alignRight","inset"]),insetSouth:()=>s(-o/2,-a,["bottom","alignCentre","inset"]),insetEast:()=>s(-o,-a/2,["valignCentre","right","inset"]),insetWest:()=>s(o,-a/2,["valignCentre","left","inset"])}},Cd=()=>xd(0,0,{}),kd=A,Sd=(e,t)=>r=>"rtl"===_d(r)?t:e,_d=e=>"rtl"===Ut(e,"direction")?"rtl":"ltr";!function(e){e.TopToBottom="toptobottom",e.BottomToTop="bottomtotop"}(Jl||(Jl={}));var Od="data-alloy-vertical-dir",Ed=e=>ys(e,(e=>tt(e)&&Lt(e,"data-alloy-vertical-dir")===Jl.BottomToTop)),Td=()=>Oo("layouts",[co("onLtr"),co("onRtl"),yo("onBottomLtr"),yo("onBottomRtl")]),Ad=(e,t,r,n,o,a,i)=>{var s=i.map(Ed).getOr(!1),l=t.layouts.map((t=>t.onLtr(e))),d=t.layouts.map((t=>t.onRtl(e))),c=s?t.layouts.bind((t=>t.onBottomLtr.map((t=>t(e))))).or(l).getOr(o):l.getOr(r),u=s?t.layouts.bind((t=>t.onBottomRtl.map((t=>t(e))))).or(d).getOr(a):d.getOr(n);return Sd(c,u)(e)},Md=[co("hotspot"),yo("bubble"),Eo("overrides",{}),Td(),Zs("placement",((e,t,r)=>{var n=t.hotspot,o=Kl(r,n.element),a=Ad(e.element,t,kl(),Sl(),xl(),Cl(),P.some(t.hotspot.element));return P.some(kd({anchorBox:o,bubble:t.bubble.getOr(Cd()),overrides:t.overrides,layouts:a}))}))],Nd=[co("x"),co("y"),Eo("height",0),Eo("width",0),Eo("bubble",Cd()),Eo("overrides",{}),Td(),Zs("placement",((e,t,r)=>{var n=Xl(r,t.x,t.y),o=on(n.left,n.top,t.width,t.height),a=Ad(e.element,t,yl(),wl(),yl(),wl(),P.none());return P.some(kd({anchorBox:o,bubble:t.bubble,overrides:t.overrides,layouts:a}))}))],Rd=Po([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Dd=e=>e.fold(A,((e,t,r)=>e.translate(-t,-r))),Bd=e=>e.fold(A,A),Ld=e=>ee(e,((e,t)=>e.translate(t.left,t.top)),rr(0,0)),Hd=e=>{var t=K(e,Bd);return Ld(t)},Pd=Rd.screen,Id=Rd.absolute,Fd=(e,t,r)=>{var n=ct(e.element),o=Yr(n),a=((e,t,r)=>{var n=gt(r.root).dom;return P.from(n.frameElement).map($e).filter((t=>{var r=ct(t),n=ct(e.element);return lt(r,n)})).map(or)})(e,0,r).getOr(o);return Id(a,o.left,o.top)},zd=(e,t,r,n)=>{var o=Pd(rr(e,t));return P.some(((e,t,r)=>({point:e,width:t,height:r}))(o,r,n))},Vd=(e,t,r,n,o)=>e.map((e=>{var a,i,s,l,d,c,u,m=[t,e.point],g=(a=()=>Hd(m),i=()=>Hd(m),s=()=>(e=>{var t=K(e,Dd);return Ld(t)})(m),n.fold(a,i,s)),h=(l=g.left,d=g.top,c=e.width,u=e.height,{x:l,y:d,width:c,height:u}),p=r.showAbove?xl():kl(),v=r.showAbove?Cl():Sl(),f=Ad(o,r,p,v,p,v,P.none());return kd({anchorBox:h,bubble:r.bubble.getOr(Cd()),overrides:r.overrides,layouts:f})})),Zd=[co("node"),co("root"),yo("bubble"),Td(),Eo("overrides",{}),Eo("showAbove",!1),Zs("placement",((e,t,r)=>{var n=Fd(e,0,t);return t.node.filter(At).bind((o=>{var a=o.dom.getBoundingClientRect(),i=zd(a.left,a.top,a.width,a.height),s=t.node.getOr(e.element);return Vd(i,n,t,r,s)}))}))],jd=(e,t,r,n)=>({start:e,soffset:t,finish:r,foffset:n}),Ud=Po([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Wd=(Ud.before,Ud.on,Ud.after,e=>e.fold(A,A,A)),qd=Po([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),$d={domRange:qd.domRange,relative:qd.relative,exact:qd.exact,exactFromRange:e=>qd.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{var t=(e=>e.match({domRange:e=>$e(e.startContainer),relative:(e,t)=>Wd(e),exact:(e,t,r,n)=>e}))(e);return gt(t)},range:jd},Gd=(e,t,r)=>{var n,o=e.document.createRange();return n=o,t.fold((e=>{n.setStartBefore(e.dom)}),((e,t)=>{n.setStart(e.dom,t)}),(e=>{n.setStartAfter(e.dom)})),((e,t)=>{t.fold((t=>{e.setEndBefore(t.dom)}),((t,r)=>{e.setEnd(t.dom,r)}),(t=>{e.setEndAfter(t.dom)}))})(o,r),o},Kd=(e,t,r,n,o)=>{var a=e.document.createRange();return a.setStart(t.dom,r),a.setEnd(n.dom,o),a},Yd=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),Xd=Po([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Jd=(e,t,r)=>t($e(r.startContainer),r.startOffset,$e(r.endContainer),r.endOffset),Qd=(e,t)=>((e,t)=>{var r=((e,t)=>t.match({domRange:e=>({ltr:T(e),rtl:P.none}),relative:(t,r)=>({ltr:dr((()=>Gd(e,t,r))),rtl:dr((()=>P.some(Gd(e,r,t))))}),exact:(t,r,n,o)=>({ltr:dr((()=>Kd(e,t,r,n,o))),rtl:dr((()=>P.some(Kd(e,n,o,t,r))))})}))(e,t);return((e,t)=>{var r=t.ltr();return r.collapsed?t.rtl().filter((e=>!1===e.collapsed)).map((e=>Xd.rtl($e(e.endContainer),e.endOffset,$e(e.startContainer),e.startOffset))).getOrThunk((()=>Jd(0,Xd.ltr,r))):Jd(0,Xd.ltr,r)})(0,r)})(e,t).match({ltr:(t,r,n,o)=>{var a=e.document.createRange();return a.setStart(t.dom,r),a.setEnd(n.dom,o),a},rtl:(t,r,n,o)=>{var a=e.document.createRange();return a.setStart(n.dom,o),a.setEnd(t.dom,r),a}});Xd.ltr,Xd.rtl;var ec,tc=(e,t,r)=>J(((e,t)=>{for(var r=C(t)?t:L,n=e.dom,o=[];null!==n.parentNode&&void 0!==n.parentNode;){var a=n.parentNode,i=$e(a);if(o.push(i),!0===r(i))break;n=a}return o})(e,r),t),rc=(e,t)=>((e,t)=>{var r=void 0===t?document:t.dom;return st(r)?[]:K(r.querySelectorAll(e),$e)})(t,e),nc=e=>{if(e.rangeCount>0){var t=e.getRangeAt(0),r=e.getRangeAt(e.rangeCount-1);return P.some(jd($e(t.startContainer),t.startOffset,$e(r.endContainer),r.endOffset))}return P.none()},oc=e=>{if(null===e.anchorNode||null===e.focusNode)return nc(e);var t=$e(e.anchorNode),r=$e(e.focusNode);return((e,t,r,n)=>{var o=((e,t,r,n)=>{var o=ct(e).dom.createRange();return o.setStart(e.dom,t),o.setEnd(r.dom,n),o})(e,t,r,n),a=lt(e,r)&&t===n;return o.collapsed&&!a})(t,e.anchorOffset,r,e.focusOffset)?P.some(jd(t,e.anchorOffset,r,e.focusOffset)):nc(e)},ac=(e,t)=>{return r=Qd(e,t),n=r.getClientRects(),(o=n.length>0?n[0]:r.getBoundingClientRect()).width>0||o.height>0?P.some(o).map(Yd):P.none();var r,n,o},ic=((e,t)=>{var r=t=>e(t)?P.from(t.dom.nodeValue):P.none();return{get:t=>{if(!e(t))throw new Error("Can only get text value of a text node");return r(t).getOr("")},getOption:r,set:(t,r)=>{if(!e(t))throw new Error("Can only set raw text value of a text node");t.dom.nodeValue=r}}})(rt),sc=(e,t)=>({element:e,offset:t}),lc=(e,t)=>rt(e)?sc(e,t):((e,t)=>{var r=ft(e);if(0===r.length)return sc(e,t);if(t<r.length)return sc(r[t],0);var n=r[r.length-1],o=rt(n)?(e=>ic.get(e))(n).length:ft(n).length;return sc(n,o)})(e,t),dc=e=>void 0!==e.foffset,cc=(e,t)=>t.getSelection.getOrThunk((()=>()=>(e=>(e=>P.from(e.getSelection()))(e).filter((e=>e.rangeCount>0)).bind(oc))(e)))().map((e=>{if(dc(e)){var t=lc(e.start,e.soffset),r=lc(e.finish,e.foffset);return $d.range(t.element,t.offset,r.element,r.offset)}return e})),uc=[yo("getSelection"),co("root"),yo("bubble"),Td(),Eo("overrides",{}),Eo("showAbove",!1),Zs("placement",((e,t,r)=>{var n=gt(t.root).dom,o=Fd(e,0,t),a=cc(n,t).bind((e=>{if(dc(e)){var t=((e,t)=>{return r=Qd(e,t),(n=r.getBoundingClientRect()).width>0||n.height>0?P.some(n).map(Yd):P.none();var r,n})(n,$d.exactFromRange(e)).orThunk((()=>{var t=qe("\ufeff");jr(e.start,t);var r=ac(n,$d.exact(t,0,t,1));return Kr(t),r}));return t.bind((e=>zd(e.left,e.top,e.width,e.height)))}var r=ye(e,(e=>e.dom.getBoundingClientRect())),o={left:Math.min(r.firstCell.left,r.lastCell.left),right:Math.max(r.firstCell.right,r.lastCell.right),top:Math.min(r.firstCell.top,r.lastCell.top),bottom:Math.max(r.firstCell.bottom,r.lastCell.bottom)};return zd(o.left,o.top,o.right-o.left,o.bottom-o.top)})),i=cc(n,t).bind((e=>dc(e)?tt(e.start)?P.some(e.start):pt(e.start):P.some(e.firstCell))).getOr(e.element);return Vd(a,o,t,r,i)}))],mc="link-layout",gc=e=>e.x+e.width,hc=(e,t)=>e.x-t.width,pc=(e,t)=>e.y-t.height+e.height,vc=e=>e.y,fc=(e,t,r)=>Ws(gc(e),vc(e),r.southeast(),$s(),"southeast",nl(e,{left:0,top:2}),mc),bc=(e,t,r)=>Ws(hc(e,t),vc(e),r.southwest(),Gs(),"southwest",nl(e,{right:1,top:2}),mc),yc=(e,t,r)=>Ws(gc(e),pc(e,t),r.northeast(),Ks(),"northeast",nl(e,{left:0,bottom:3}),mc),wc=(e,t,r)=>Ws(hc(e,t),pc(e,t),r.northwest(),Ys(),"northwest",nl(e,{right:1,bottom:3}),mc),xc=()=>[fc,bc,yc,wc],Cc=()=>[bc,fc,wc,yc],kc=[co("item"),Td(),Eo("overrides",{}),Zs("placement",((e,t,r)=>{var n=Kl(r,t.item.element),o=Ad(e.element,t,xc(),Cc(),xc(),Cc(),P.none());return P.some(kd({anchorBox:n,bubble:Cd(),overrides:t.overrides,layouts:o}))}))],Sc=oo("type",{selection:uc,node:Zd,hotspot:Md,submenu:kc,makeshift:Nd}),_c=[bo("classes",qn),No("mode","all",["all","layout","placement"])],Oc=[Eo("useFixed",L),yo("getBounds")],Ec=[uo("anchor",Sc),Oo("transition",_c)],Tc=(e,t,r,n,o,a)=>{var i=ro("placement.info",In(Ec),o),s=i.anchor,l=n.element,d=r.get(n.uid);jl((()=>{Vt(l,"position","fixed");var o=qt(l,"visibility");Vt(l,"visibility","hidden");var c=t.useFixed()?(()=>{var e=document.documentElement;return ed(0,0,e.clientWidth,e.clientHeight)})():(e=>{var t=or(e.element),r=e.element.dom.getBoundingClientRect();return Ql(t.left,t.top,r.width,r.height)})(e);s.placement(e,s,c).each((e=>{var o=a.orThunk((()=>t.getBounds.map(B))),s=((e,t,r,n,o,a)=>((e,t,r,n,o,a,i,s)=>{var l=bd(i,"maxHeightFunction",vd()),d=bd(i,"maxWidthFunction",_),c=e.anchorBox,u=e.origin,m={bounds:Yl(u,a),origin:u,preference:n,maxHeightFunction:l,maxWidthFunction:d,lastPlacement:o,transition:s};return yd(c,t,r,m)})(((e,t)=>((e,t)=>({anchorBox:e,origin:t}))(e,t))(t.anchorBox,e),n.element,t.bubble,t.layouts,o,r,t.overrides,a))(c,e,o,n,d,i.transition);r.set(n.uid,s)})),o.fold((()=>{Kt(l,"visibility")}),(e=>{Vt(l,"visibility",e)})),qt(l,"left").isNone()&&qt(l,"top").isNone()&&qt(l,"right").isNone()&&qt(l,"bottom").isNone()&&Me(qt(l,"position"),"fixed")&&Kt(l,"position")}),l)},Ac=Object.freeze({__proto__:null,position:(e,t,r,n,o)=>{var a=P.none();Tc(e,t,r,n,o,a)},positionWithinBounds:Tc,getMode:(e,t,r)=>t.useFixed()?"fixed":"absolute",reset:(e,t,r,n)=>{var o=n.element;Y(["position","left","right","top","bottom"],(e=>Kt(o,e))),(e=>{It(e,td)})(o),r.clear(n.uid)}}),Mc=Rl({fields:Oc,name:"positioning",active:Pl,apis:Ac,state:Object.freeze({__proto__:null,init:()=>{var e={};return Li({readState:()=>e,clear:t=>{x(t)?delete e[t]:e={}},set:(t,r)=>{e[t]=r},get:t=>Ee(e,t)})}})}),Nc=e=>e.getSystem().isConnected(),Rc=e=>{ja(e,Da());var t=e.components();Y(t,Rc)},Dc=e=>{var t=e.components();Y(t,Dc),ja(e,Ra())},Bc=(e,t)=>{e.getSystem().addToWorld(t),At(e.element)&&Dc(t)},Lc=e=>{Rc(e),e.getSystem().removeFromWorld(e)},Hc=(e,t)=>{qr(e.element,t.element)},Pc=(e,t)=>{Ic(e,t,qr)},Ic=(e,t,r)=>{e.getSystem().addToWorld(t),r(e.element,t.element),At(e.element)&&Dc(t),e.syncComponents()},Fc=e=>{Rc(e),Kr(e.element),e.getSystem().removeFromWorld(e)},zc=e=>{var t=ht(e.element).bind((t=>e.getSystem().getByDom(t).toOptional()));Fc(e),t.each((e=>{e.syncComponents()}))},Vc=e=>{var t=e.components();Y(t,Fc),Gr(e.element),e.syncComponents()},Zc=(e,t)=>{Uc(e,t,qr)},jc=(e,t)=>{Uc(e,t,Ur)},Uc=(e,t,r)=>{r(e,t.element);var n=ft(t.element);Y(n,(e=>{t.getByDom(e).each(Dc)}))},Wc=e=>{var t=ft(e.element);Y(t,(t=>{e.getByDom(t).each(Rc)})),Kr(e.element)},qc=(e,t,r,n)=>{r.get().each((t=>{Vc(e)}));var o=t.getAttachPoint(e);Pc(o,e);var a=e.getSystem().build(n);return Pc(e,a),r.set(a),a},$c=(e,t,r,n)=>{var o=qc(e,t,r,n);return t.onOpen(e,o),o},Gc=(e,t,r)=>{r.get().each((n=>{Vc(e),zc(e),t.onClose(e,n),r.clear()}))},Kc=(e,t,r)=>r.isOpen(),Yc=(e,t,r)=>{var n=t.getAttachPoint(e);Vt(e.element,"position",Mc.getMode(n)),((e,t,r,n)=>{qt(e.element,t).fold((()=>{It(e.element,r)}),(t=>{Dt(e.element,r,t)})),Vt(e.element,t,"hidden")})(e,"visibility",t.cloakVisibilityAttr)},Xc=(e,t,r)=>{(e=>q(["top","left","right","bottom"],(t=>qt(e,t).isSome())))(e.element)||Kt(e.element,"position"),((e,t,r)=>{Ht(e.element,r).fold((()=>Kt(e.element,t)),(r=>Vt(e.element,t,r)))})(e,"visibility",t.cloakVisibilityAttr)},Jc=Object.freeze({__proto__:null,cloak:Yc,decloak:Xc,open:$c,openWhileCloaked:(e,t,r,n,o)=>{Yc(e,t),$c(e,t,r,n),o(),Xc(e,t)},close:Gc,isOpen:Kc,isPartOf:(e,t,r,n)=>Kc(0,0,r)&&r.get().exists((r=>t.isPartOf(e,r,n))),getState:(e,t,r)=>r.get(),setContent:(e,t,r,n)=>r.get().map((()=>qc(e,t,r,n)))}),Qc=Object.freeze({__proto__:null,events:(e,t)=>Ka([Ja(_a(),((r,n)=>{Gc(r,e,t)}))])}),eu=[Is("onOpen"),Is("onClose"),co("isPartOf"),co("getAttachPoint"),Eo("cloakVisibilityAttr","data-precloak-visibility")],tu=Object.freeze({__proto__:null,init:()=>{var e=sd(),t=T("not-implemented");return Li({readState:t,isOpen:e.isSet,clear:e.clear,set:e.set,get:e.get})}}),ru=Rl({fields:eu,name:"sandboxing",active:Qc,apis:Jc,state:tu}),nu=T("dismiss.popups"),ou=T("reposition.popups"),au=T("mouse.released"),iu=Pn([Eo("isExtraPart",L),Oo("fireEventInstead",[Eo("event",Ba())])]),su=e=>{var t=ro("Dismissal",iu,e);return{[nu()]:{schema:Pn([co("target")]),onReceive:(e,r)=>{ru.isOpen(e)&&(ru.isPartOf(e,r.target)||t.isExtraPart(e,r.target)||t.fireEventInstead.fold((()=>ru.close(e)),(t=>ja(e,t.event))))}}}},lu=Pn([Oo("fireEventInstead",[Eo("event",La())]),po("doReposition")]),du=e=>{var t=ro("Reposition",lu,e);return{[ou()]:{onReceive:e=>{ru.isOpen(e)&&t.fireEventInstead.fold((()=>t.doReposition(e)),(t=>ja(e,t.event)))}}}},cu=(e,t,r)=>{t.store.manager.onLoad(e,t,r)},uu=(e,t,r)=>{t.store.manager.onUnload(e,t,r)},mu=Object.freeze({__proto__:null,onLoad:cu,onUnload:uu,setValue:(e,t,r,n)=>{t.store.manager.setValue(e,t,r,n)},getValue:(e,t,r)=>t.store.manager.getValue(e,t,r),getState:(e,t,r)=>r}),gu=Object.freeze({__proto__:null,events:(e,t)=>{var r=e.resetOnDom?[ii(((r,n)=>{cu(r,e,t)})),si(((r,n)=>{uu(r,e,t)}))]:[El(e,t,cu)];return Ka(r)}}),hu=()=>{var e=Ho(null);return Li({set:e.set,get:e.get,isNotSet:()=>null===e.get(),clear:()=>{e.set(null)},readState:()=>({mode:"memory",value:e.get()})})},pu=()=>{var e=Ho({}),t=Ho({});return Li({readState:()=>({mode:"dataset",dataByValue:e.get(),dataByText:t.get()}),lookup:r=>Ee(e.get(),r).orThunk((()=>Ee(t.get(),r))),update:r=>{var n=e.get(),o=t.get(),a={},i={};Y(r,(e=>{a[e.value]=e,Ee(e,"meta").each((t=>{Ee(t,"text").each((t=>{i[t]=e}))}))})),e.set(d(d({},n),a)),t.set(d(d({},o),i))},clear:()=>{e.set({}),t.set({})}})},vu=Object.freeze({__proto__:null,memory:hu,dataset:pu,manual:()=>Li({readState:_}),init:e=>e.store.manager.state(e)}),fu=(e,t,r,n)=>{var o=t.store;r.update([n]),o.setValue(e,n),t.onSetValue(e,n)},bu=[yo("initialValue"),co("getFallbackEntry"),co("getDataKey"),co("setValue"),Zs("manager",{setValue:fu,getValue:(e,t,r)=>{var n=t.store,o=n.getDataKey(e);return r.lookup(o).getOrThunk((()=>n.getFallbackEntry(o)))},onLoad:(e,t,r)=>{t.store.initialValue.each((n=>{fu(e,t,r,n)}))},onUnload:(e,t,r)=>{r.clear()},state:pu})],yu=[co("getValue"),Eo("setValue",_),yo("initialValue"),Zs("manager",{setValue:(e,t,r,n)=>{t.store.setValue(e,n),t.onSetValue(e,n)},getValue:(e,t,r)=>t.store.getValue(e),onLoad:(e,t,r)=>{t.store.initialValue.each((r=>{t.store.setValue(e,r)}))},onUnload:_,state:Bi.init})],wu=[yo("initialValue"),Zs("manager",{setValue:(e,t,r,n)=>{r.set(n),t.onSetValue(e,n)},getValue:(e,t,r)=>r.get(),onLoad:(e,t,r)=>{t.store.initialValue.each((e=>{r.isNotSet()&&r.set(e)}))},onUnload:(e,t,r)=>{r.clear()},state:hu})],xu=[To("store",{mode:"memory"},oo("mode",{memory:wu,manual:yu,dataset:bu})),Is("onSetValue"),Eo("resetOnDom",!1)],Cu=Rl({fields:xu,name:"representing",active:gu,apis:mu,extra:{setValueFrom:(e,t)=>{var r=Cu.getValue(t);Cu.setValue(e,r)}},state:vu}),ku=(e,t)=>Lo(e,{},K(t,(t=>{return r=t.name(),n="Cannot configure "+t.name()+" for "+e,io(r,r,{tag:"option",process:{}},Nn((e=>bn("The field: "+r+" is forbidden. "+n))));var r,n})).concat([so("dump",A)])),Su=e=>e.dump,_u=(e,t)=>d(d({},Ml(t)),e.dump),Ou=ku,Eu=_u,Tu="placeholder",Au=Po([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Mu=e=>Te(e,"uiType"),Nu=(e,t,r,n)=>((e,t,r,n)=>Mu(r)&&r.uiType===Tu?((e,t,r,n)=>e.exists((e=>e!==r.owner))?Au.single(!0,T(r)):Ee(n,r.name).fold((()=>{throw new Error("Unknown placeholder component: "+r.name+"\nKnown: ["+ve(n)+"]\nNamespace: "+e.getOr("none")+"\nSpec: "+JSON.stringify(r,null,2))}),(e=>e.replace())))(e,0,r,n):Au.single(!1,T(r)))(e,0,r,n).fold(((o,a)=>{var i=Mu(r)?a(t,r.config,r.validated):a(t),s=Ee(i,"components").getOr([]),l=oe(s,(r=>Nu(e,t,r,n)));return[d(d({},i),{},{components:l})]}),((e,n)=>{if(Mu(r)){var o=n(t,r.config,r.validated);return r.validated.preprocess.getOr(A)(o)}return n(t)})),Ru=Au.single,Du=Au.multiple,Bu=T(Tu),Lu=Po([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Hu=Eo("factory",{sketch:A}),Pu=Eo("schema",[]),Iu=co("name"),Fu=io("pname","pname",_n((e=>"<alloy."+fi(e.name)+">")),jn()),zu=so("schema",(()=>[yo("preprocess")])),Vu=Eo("defaults",T({})),Zu=Eo("overrides",T({})),ju=In([Hu,Pu,Iu,Fu,Vu,Zu]),Uu=In([Hu,Pu,Iu,Vu,Zu]),Wu=In([Hu,Pu,Iu,Fu,Vu,Zu]),qu=In([Hu,zu,Iu,co("unit"),Fu,Vu,Zu]),$u=e=>e.fold(P.some,P.none,P.some,P.some),Gu=e=>{var t=e=>e.name;return e.fold(t,t,t,t)},Ku=(e,t)=>r=>{var n=ro("Converting part type",t,r);return e(n)},Yu=Ku(Lu.required,ju),Xu=Ku(Lu.external,Uu),Ju=Ku(Lu.optional,Wu),Qu=Ku(Lu.group,qu),em=T("entirety"),tm=Object.freeze({__proto__:null,required:Yu,external:Xu,optional:Ju,group:Qu,asNamedPart:$u,name:Gu,asCommon:e=>e.fold(A,A,A,A),original:em}),rm=(e,t,r,n)=>kn(t.defaults(e,r,n),r,{uid:e.partUids[t.name]},t.overrides(e,r,n)),nm=(e,t)=>{var r={};return Y(t,(t=>{$u(t).each((t=>{var n=om(e,t.pname);r[t.name]=r=>{var o=ro("Part: "+t.name+" in "+e,In(t.schema),r);return d(d({},n),{},{config:r,validated:o})}}))})),r},om=(e,t)=>({uiType:Bu(),owner:e,name:t}),am=(e,t,r)=>({uiType:Bu(),owner:e,name:t,config:r,validated:{}}),im=e=>oe(e,(e=>e.fold(P.none,P.some,P.none,P.none).map((e=>vo(e.name,e.schema.concat([js(em())])))).toArray())),sm=e=>K(e,Gu),lm=(e,t,r)=>((e,t,r)=>{var n={},o={};return Y(r,(e=>{e.fold((e=>{n[e.pname]=Ru(!0,((t,r,n)=>e.factory.sketch(rm(t,e,r,n))))}),(e=>{var r=t.parts[e.name];o[e.name]=T(e.factory.sketch(rm(t,e,r[em()]),r))}),(e=>{n[e.pname]=Ru(!1,((t,r,n)=>e.factory.sketch(rm(t,e,r,n))))}),(e=>{n[e.pname]=Du(!0,((t,r,n)=>{var o=t[e.name];return K(o,(r=>e.factory.sketch(kn(e.defaults(t,r,n),r,e.overrides(t,r)))))}))}))})),{internals:T(n),externals:T(o)}})(0,t,r),dm=(e,t,r)=>((e,t,r,n)=>{var o=ye(n,((e,t)=>((e,t)=>{var r=!1;return{name:T(e),required:()=>t.fold(((e,t)=>e),((e,t)=>e)),used:()=>r,replace:()=>{if(r)throw new Error("Trying to use the same placeholder more than once: "+e);return r=!0,t}}})(t,e))),a=((e,t,r,n)=>oe(r,(r=>Nu(e,t,r,n))))(e,t,r,o);return be(o,(r=>{if(!1===r.used()&&r.required())throw new Error("Placeholder: "+r.name()+" was not found in components list\nNamespace: "+e.getOr("none")+"\nComponents: "+JSON.stringify(t.components,null,2))})),a})(P.some(e),t,t.components,r),cm=(e,t,r)=>{var n=t.partUids[r];return e.getSystem().getByUid(n).toOptional()},um=(e,t,r)=>cm(e,t,r).getOrDie("Could not find part: "+r),mm=(e,t,r)=>{var n={},o=t.partUids,a=e.getSystem();return Y(r,(e=>{n[e]=T(a.getByUid(o[e]))})),n},gm=(e,t)=>{var r=e.getSystem();return ye(t.partUids,((e,t)=>T(r.getByUid(e))))},hm=e=>ve(e.partUids),pm=(e,t,r)=>{var n={},o=t.partUids,a=e.getSystem();return Y(r,(e=>{n[e]=T(a.getByUid(o[e]).getOrDie())})),n},vm=(e,t)=>{var r=sm(t);return Vo(K(r,(t=>({key:t,value:e+"-"+t}))))},fm=e=>io("partUids","partUids",En((t=>vm(t.uid,e))),jn()),bm=Object.freeze({__proto__:null,generate:nm,generateOne:am,schemas:im,names:sm,substitutes:lm,components:dm,defaultUids:vm,defaultUidsSchema:fm,getAllParts:gm,getAllPartNames:hm,getPart:cm,getPartOrDie:um,getParts:mm,getPartsOrDie:pm}),ym=(e,t,r,n,o)=>{var a=((e,t)=>(e.length>0?[vo("parts",e)]:[]).concat([co("uid"),Eo("dom",{}),Eo("components",[]),js("originalSpec"),Eo("debug.sketcher",{})]).concat(t))(n,o);return ro(e+" [SpecSchema]",Pn(a.concat(t)),r)},wm=(e,t,r,n,o)=>{var a=xm(o),i=im(r),s=fm(r),l=ym(e,t,a,i,[s]),d=lm(0,l,r);return n(l,dm(e,l,d.internals()),a,d.externals())},xm=e=>(e=>Te(e,"uid"))(e)?e:d(d({},e),{},{uid:Si("uid")}),Cm=Pn([co("name"),co("factory"),co("configFields"),Eo("apis",{}),Eo("extraApis",{})]),km=Pn([co("name"),co("factory"),co("configFields"),co("partFields"),Eo("apis",{}),Eo("extraApis",{})]),Sm=e=>{var t=ro("Sketcher for "+e.name,Cm,e),r=ye(t.apis,Di),n=ye(t.extraApis,((e,t)=>Ai(e,t)));return d(d({name:t.name,configFields:t.configFields,sketch:e=>((e,t,r,n)=>{var o=xm(n);return r(ym(e,t,o,[],[]),o)})(t.name,t.configFields,t.factory,e)},r),n)},_m=e=>{var t=ro("Sketcher for "+e.name,km,e),r=nm(t.name,t.partFields),n=ye(t.apis,Di),o=ye(t.extraApis,((e,t)=>Ai(e,t)));return d(d({name:t.name,partFields:t.partFields,configFields:t.configFields,sketch:e=>wm(t.name,t.configFields,t.partFields,t.factory,e),parts:r},n),o)},Om=e=>at("input")(e)&&"radio"!==Lt(e,"type")||at("textarea")(e),Em=Object.freeze({__proto__:null,getCurrent:(e,t,r)=>t.find(e)}),Tm=[co("find")],Am=Rl({fields:Tm,name:"composing",apis:Em}),Mm=["input","button","textarea","select"],Nm=(e,t,r)=>{(t.disabled()?Pm:Im)(e,t)},Rm=(e,t)=>!0===t.useNative&&W(Mm,Je(e.element)),Dm=e=>{Dt(e.element,"disabled","disabled")},Bm=e=>{It(e.element,"disabled")},Lm=e=>{Dt(e.element,"aria-disabled","true")},Hm=e=>{Dt(e.element,"aria-disabled","false")},Pm=(e,t,r)=>{t.disableClass.each((t=>{Gi(e.element,t)})),(Rm(e,t)?Dm:Lm)(e),t.onDisabled(e)},Im=(e,t,r)=>{t.disableClass.each((t=>{Ki(e.element,t)})),(Rm(e,t)?Bm:Hm)(e),t.onEnabled(e)},Fm=(e,t)=>Rm(e,t)?(e=>Pt(e.element,"disabled"))(e):(e=>"true"===Lt(e.element,"aria-disabled"))(e),zm=Object.freeze({__proto__:null,enable:Im,disable:Pm,isDisabled:Fm,onLoad:Nm,set:(e,t,r,n)=>{(n?Pm:Im)(e,t)}}),Vm=Object.freeze({__proto__:null,exhibit:(e,t)=>Pi({classes:t.disabled()?t.disableClass.toArray():[]}),events:(e,t)=>Ka([Ya(xa(),((t,r)=>Fm(t,e))),El(e,t,Nm)])}),Zm=[Do("disabled",L),Eo("useNative",!0),yo("disableClass"),Is("onDisabled"),Is("onEnabled")],jm=Rl({fields:Zm,name:"disabling",active:Vm,apis:zm}),Um=(e,t,r,n)=>{var o=rc(e.element,"."+t.highlightClass);Y(o,(r=>{q(n,(e=>lt(e.element,r)))||(Ki(r,t.highlightClass),e.getSystem().getByDom(r).each((r=>{t.onDehighlight(e,r),ja(r,Za())})))}))},Wm=(e,t,r,n)=>{Um(e,t,0,[n]),qm(e,t,r,n)||(Gi(n.element,t.highlightClass),t.onHighlight(e,n),ja(n,Va()))},qm=(e,t,r,n)=>Yi(n.element,t.highlightClass),$m=(e,t,r)=>Cs(e.element,"."+t.itemClass).bind((t=>e.getSystem().getByDom(t).toOptional())),Gm=(e,t,r)=>{var n=rc(e.element,"."+t.itemClass);return(n.length>0?P.some(n[n.length-1]):P.none()).bind((t=>e.getSystem().getByDom(t).toOptional()))},Km=(e,t,r,n)=>{var o=rc(e.element,"."+t.itemClass);return re(o,(e=>Yi(e,t.highlightClass))).bind((t=>{var r=tl(t,n,0,o.length-1);return e.getSystem().getByDom(o[r]).toOptional()}))},Ym=(e,t,r)=>{var n=rc(e.element,"."+t.itemClass);return Ne(K(n,(t=>e.getSystem().getByDom(t).toOptional())))},Xm=Object.freeze({__proto__:null,dehighlightAll:(e,t,r)=>Um(e,t,0,[]),dehighlight:(e,t,r,n)=>{qm(e,t,r,n)&&(Ki(n.element,t.highlightClass),t.onDehighlight(e,n),ja(n,Za()))},highlight:Wm,highlightFirst:(e,t,r)=>{$m(e,t).each((n=>{Wm(e,t,r,n)}))},highlightLast:(e,t,r)=>{Gm(e,t).each((n=>{Wm(e,t,r,n)}))},highlightAt:(e,t,r,n)=>{((e,t,r,n)=>{var o=rc(e.element,"."+t.itemClass);return P.from(o[n]).fold((()=>gn.error(new Error("No element found with index "+n))),e.getSystem().getByDom)})(e,t,0,n).fold((e=>{throw e}),(n=>{Wm(e,t,r,n)}))},highlightBy:(e,t,r,n)=>{var o=Ym(e,t);te(o,n).each((n=>{Wm(e,t,r,n)}))},isHighlighted:qm,getHighlighted:(e,t,r)=>Cs(e.element,"."+t.highlightClass).bind((t=>e.getSystem().getByDom(t).toOptional())),getFirst:$m,getLast:Gm,getPrevious:(e,t,r)=>Km(e,t,0,-1),getNext:(e,t,r)=>Km(e,t,0,1),getCandidates:Ym}),Jm=[co("highlightClass"),co("itemClass"),Is("onHighlight"),Is("onDehighlight")],Qm=Rl({fields:Jm,name:"highlighting",apis:Xm}),eg=[8],tg=[9],rg=[13],ng=[27],og=[32],ag=[37],ig=[38],sg=[39],lg=[40],dg=(e,t,r)=>{var n=ie(e.slice(0,t)),o=ie(e.slice(t+1));return te(n.concat(o),r)},cg=(e,t,r)=>{var n=ie(e.slice(0,t));return te(n,r)},ug=(e,t,r)=>{var n=e.slice(0,t),o=e.slice(t+1);return te(o.concat(n),r)},mg=(e,t,r)=>{var n=e.slice(t+1);return te(n,r)},gg=e=>t=>{var r=t.raw;return W(e,r.which)},hg=e=>t=>ae(e,(e=>e(t))),pg=e=>!0===e.raw.shiftKey,vg=e=>!0===e.raw.ctrlKey,fg=R(pg),bg=(e,t)=>({matches:e,classification:t}),yg=(e,t,r)=>{t.exists((e=>r.exists((t=>lt(t,e)))))||Ua(e,Ha(),{prevFocus:t,newFocus:r})},wg=()=>{var e=e=>Zl(e.element);return{get:e,set:(t,r)=>{var n=e(t);t.getSystem().triggerFocus(r,t.element);var o=e(t);yg(t,n,o)}}};!function(e){e.OnFocusMode="onFocus",e.OnEnterOrSpaceMode="onEnterOrSpace",e.OnApiMode="onApi"}(ec||(ec={}));var xg,Cg=(e,t,r,n,o)=>{var a=(e,t,r,n,o)=>{var a,i,s;return(a=r(e,t,n,o),i=t.event,s=te(a,(e=>e.matches(i))),s.map((e=>e.classification))).bind((r=>r(e,t,n,o)))},i={schema:()=>e.concat([Eo("focusManager",wg()),To("focusInside","onFocus",Jn((e=>W(["onFocus","onEnterOrSpace","onApi"],e)?gn.value(e):gn.error("Invalid value for focusInside")))),Zs("handler",i),Zs("state",t),Zs("sendFocusIn",o)]),processKey:a,toEvents:(e,t)=>{var i=e.focusInside!==ec.OnFocusMode?P.none():o(e).map((r=>Ja(fa(),((n,o)=>{r(n,e,t),o.stop()})))),s=[Ja(ia(),((n,i)=>{a(n,i,r,e,t).fold((()=>{((r,n)=>{var a=gg(og.concat(rg))(n.event);e.focusInside===ec.OnEnterOrSpaceMode&&a&&Wo(r,n)&&o(e).each((o=>{o(r,e,t),n.stop()}))})(n,i)}),(e=>{i.stop()}))})),Ja(sa(),((r,o)=>{a(r,o,n,e,t).each((e=>{o.stop()}))}))];return Ka(i.toArray().concat(s))}};return i},kg=e=>{var t=[yo("onEscape"),yo("onEnter"),Eo("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Eo("firstTabstop",0),Eo("useTabstopAt",H),yo("visibilitySelector")].concat([e]),r=(e,t)=>{var r=e.visibilitySelector.bind((e=>ks(t,e))).getOr(t);return Qt(r)>0},n=(e,t)=>t.focusManager.get(e).bind((e=>ks(e,t.selector))),o=(e,t,n)=>{((e,t)=>{var n=rc(e.element,t.selector),o=J(n,(e=>r(t,e)));return P.from(o[t.firstTabstop])})(e,t).each((r=>{t.focusManager.set(e,r)}))},a=(e,t,o,a)=>{var i=rc(e.element,o.selector);return n(e,o).bind((t=>re(i,N(lt,t)).bind((t=>((e,t,n,o,a)=>a(t,n,(e=>((e,t)=>r(e,t)&&e.useTabstopAt(t))(o,e))).fold((()=>o.cyclic?P.some(!0):P.none()),(t=>(o.focusManager.set(e,t),P.some(!0)))))(e,i,t,o,a)))))},i=(e,t,r)=>{var n=r.cyclic?dg:cg;return a(e,0,r,n)},s=(e,t,r)=>{var n=r.cyclic?ug:mg;return a(e,0,r,n)},l=T([bg(hg([pg,gg(tg)]),i),bg(gg(tg),s),bg(hg([fg,gg(rg)]),((e,t,r)=>r.onEnter.bind((r=>r(e,t)))))]),d=T([bg(gg(ng),((e,t,r)=>r.onEscape.bind((r=>r(e,t))))),bg(gg(tg),((e,t,r)=>n(e,r).filter((e=>!r.useTabstopAt(e))).bind((n=>((e=>(e=>ht(e))(e).bind(yt).exists((t=>lt(t,e))))(n)?i:s)(e,t,r)))))]);return Cg(t,Bi.init,l,d,(()=>P.some(o)))},Sg=kg(so("cyclic",L)),_g=kg(so("cyclic",H)),Og=(e,t,r)=>Om(r)&&gg(og)(t.event)?P.none():((e,t,r)=>(qa(e,r,xa()),P.some(!0)))(e,0,r),Eg=(e,t)=>P.some(!0),Tg=[Eo("execute",Og),Eo("useSpace",!1),Eo("useEnter",!0),Eo("useControlEnter",!1),Eo("useDown",!1)],Ag=(e,t,r)=>r.execute(e,t,e.element),Mg=Cg(Tg,Bi.init,((e,t,r,n)=>{var o=r.useSpace&&!Om(e.element)?og:[],a=r.useEnter?rg:[],i=r.useDown?lg:[],s=o.concat(a).concat(i);return[bg(gg(s),Ag)].concat(r.useControlEnter?[bg(hg([vg,gg(rg)]),Ag)]:[])}),((e,t,r,n)=>r.useSpace&&!Om(e.element)?[bg(gg(og),Eg)]:[]),(()=>P.none())),Ng=()=>{var e=sd();return Li({readState:()=>e.get().map((e=>({numRows:String(e.numRows),numColumns:String(e.numColumns)}))).getOr({numRows:"?",numColumns:"?"}),setGridSize:(t,r)=>{e.set({numRows:t,numColumns:r})},getNumRows:()=>e.get().map((e=>e.numRows)),getNumColumns:()=>e.get().map((e=>e.numColumns))})},Rg=Object.freeze({__proto__:null,flatgrid:Ng,init:e=>e.state(e)}),Dg=e=>(t,r,n,o)=>{var a=e(t.element);return Pg(a,t,r,n,o)},Bg=(e,t)=>{var r=Sd(e,t);return Dg(r)},Lg=(e,t)=>{var r=Sd(t,e);return Dg(r)},Hg=e=>(t,r,n,o)=>Pg(e,t,r,n,o),Pg=(e,t,r,n,o)=>n.focusManager.get(t).bind((r=>e(t.element,r,n,o))).map((e=>(n.focusManager.set(t,e),!0))),Ig=Hg,Fg=Hg,zg=Hg,Vg=e=>!(e=>e.offsetWidth<=0&&e.offsetHeight<=0)(e.dom),Zg=(e,t,r)=>{var n=rc(e,r);return((e,r)=>re(e,(e=>lt(e,t))).map((t=>({index:t,candidates:e}))))(J(n,Vg))},jg=(e,t)=>re(e,(e=>lt(t,e))),Ug=(e,t,r,n)=>n(Math.floor(t/r),t%r).bind((t=>{var n=t.row*r+t.column;return n>=0&&n<e.length?P.some(e[n]):P.none()})),Wg=(e,t,r,n,o)=>Ug(e,t,n,((t,a)=>{var i=t===r-1?e.length-t*n:n,s=tl(a,o,0,i-1);return P.some({row:t,column:s})})),qg=(e,t,r,n,o)=>Ug(e,t,n,((t,a)=>{var i=tl(t,o,0,r-1),s=i===r-1?e.length-i*n:n,l=rl(a,0,s-1);return P.some({row:i,column:l})})),$g=[co("selector"),Eo("execute",Og),Fs("onEscape"),Eo("captureTab",!1),Us()],Gg=(e,t,r)=>{Cs(e.element,t.selector).each((r=>{t.focusManager.set(e,r)}))},Kg=e=>(t,r,n,o)=>Zg(t,r,n.selector).bind((t=>e(t.candidates,t.index,o.getNumRows().getOr(n.initSize.numRows),o.getNumColumns().getOr(n.initSize.numColumns)))),Yg=(e,t,r)=>r.captureTab?P.some(!0):P.none(),Xg=Kg(((e,t,r,n)=>Wg(e,t,r,n,-1))),Jg=Kg(((e,t,r,n)=>Wg(e,t,r,n,1))),Qg=Kg(((e,t,r,n)=>qg(e,t,r,n,-1))),eh=Kg(((e,t,r,n)=>qg(e,t,r,n,1))),th=T([bg(gg(ag),Bg(Xg,Jg)),bg(gg(sg),Lg(Xg,Jg)),bg(gg(ig),Ig(Qg)),bg(gg(lg),Fg(eh)),bg(hg([pg,gg(tg)]),Yg),bg(hg([fg,gg(tg)]),Yg),bg(gg(og.concat(rg)),((e,t,r,n)=>((e,t)=>t.focusManager.get(e).bind((e=>ks(e,t.selector))))(e,r).bind((n=>r.execute(e,t,n)))))]),rh=T([bg(gg(ng),((e,t,r)=>r.onEscape(e,t))),bg(gg(og),Eg)]),nh=Cg($g,Ng,th,rh,(()=>P.some(Gg))),oh=(e,t,r,n,o)=>{var a=(e,t,r)=>o(e,t,n,0,r.length-1,r[t],(t=>{return n=r[t],"button"===Je(n)&&"disabled"===Lt(n,"disabled")?a(e,t,r):P.from(r[t]);var n}));return Zg(e,r,t).bind((e=>{var t=e.index,r=e.candidates;return a(t,t,r)}))},ah=(e,t,r,n)=>oh(e,t,r,n,((e,t,r,n,o,a,i)=>{var s=rl(t+r,n,o);return s===e?P.from(a):i(s)})),ih=(e,t,r,n)=>oh(e,t,r,n,((e,t,r,n,o,a,i)=>{var s=tl(t,r,n,o);return s===e?P.none():i(s)})),sh=[co("selector"),Eo("getInitial",P.none),Eo("execute",Og),Fs("onEscape"),Eo("executeOnMove",!1),Eo("allowVertical",!0),Eo("allowHorizontal",!0),Eo("cycles",!0)],lh=(e,t,r)=>((e,t)=>t.focusManager.get(e).bind((e=>ks(e,t.selector))))(e,r).bind((n=>r.execute(e,t,n))),dh=(e,t,r)=>{t.getInitial(e).orThunk((()=>Cs(e.element,t.selector))).each((r=>{t.focusManager.set(e,r)}))},ch=(e,t,r)=>(r.cycles?ih:ah)(e,r.selector,t,-1),uh=(e,t,r)=>(r.cycles?ih:ah)(e,r.selector,t,1),mh=e=>(t,r,n,o)=>e(t,r,n,o).bind((()=>n.executeOnMove?lh(t,r,n):P.some(!0))),gh=T([bg(gg(og),Eg),bg(gg(ng),((e,t,r)=>r.onEscape(e,t)))]),hh=Cg(sh,Bi.init,((e,t,r,n)=>{var o=[...r.allowHorizontal?ag:[]].concat(r.allowVertical?ig:[]),a=[...r.allowHorizontal?sg:[]].concat(r.allowVertical?lg:[]);return[bg(gg(o),mh(Bg(ch,uh))),bg(gg(a),mh(Lg(ch,uh))),bg(gg(rg),lh),bg(gg(og),lh)]}),gh,(()=>P.some(dh))),ph=(e,t,r)=>P.from(e[t]).bind((e=>P.from(e[r]).map((e=>({rowIndex:t,columnIndex:r,cell:e}))))),vh=(e,t,r,n)=>{var o=e[t].length,a=tl(r,n,0,o-1);return ph(e,t,a)},fh=(e,t,r,n)=>{var o=tl(r,n,0,e.length-1),a=e[o].length,i=rl(t,0,a-1);return ph(e,o,i)},bh=(e,t,r,n)=>{var o=e[t].length,a=rl(r+n,0,o-1);return ph(e,t,a)},yh=(e,t,r,n)=>{var o=rl(r+n,0,e.length-1),a=e[o].length,i=rl(t,0,a-1);return ph(e,o,i)},wh=[vo("selectors",[co("row"),co("cell")]),Eo("cycles",!0),Eo("previousSelector",P.none),Eo("execute",Og)],xh=(e,t,r)=>{t.previousSelector(e).orThunk((()=>{var r=t.selectors;return Cs(e.element,r.cell)})).each((r=>{t.focusManager.set(e,r)}))},Ch=(e,t)=>(r,n,o)=>{var a=o.cycles?e:t;return ks(n,o.selectors.row).bind((e=>{var t=rc(e,o.selectors.cell);return jg(t,n).bind((t=>{var n=rc(r,o.selectors.row);return jg(n,e).bind((e=>{var r=((e,t)=>K(e,(e=>rc(e,t.selectors.cell))))(n,o);return a(r,e,t).map((e=>e.cell))}))}))}))},kh=Ch(((e,t,r)=>vh(e,t,r,-1)),((e,t,r)=>bh(e,t,r,-1))),Sh=Ch(((e,t,r)=>vh(e,t,r,1)),((e,t,r)=>bh(e,t,r,1))),_h=Ch(((e,t,r)=>fh(e,r,t,-1)),((e,t,r)=>yh(e,r,t,-1))),Oh=Ch(((e,t,r)=>fh(e,r,t,1)),((e,t,r)=>yh(e,r,t,1))),Eh=T([bg(gg(ag),Bg(kh,Sh)),bg(gg(sg),Lg(kh,Sh)),bg(gg(ig),Ig(_h)),bg(gg(lg),Fg(Oh)),bg(gg(og.concat(rg)),((e,t,r)=>Zl(e.element).bind((n=>r.execute(e,t,n)))))]),Th=T([bg(gg(og),Eg)]),Ah=Cg(wh,Bi.init,Eh,Th,(()=>P.some(xh))),Mh=[co("selector"),Eo("execute",Og),Eo("moveOnTab",!1)],Nh=(e,t,r)=>r.focusManager.get(e).bind((n=>r.execute(e,t,n))),Rh=(e,t,r)=>{Cs(e.element,t.selector).each((r=>{t.focusManager.set(e,r)}))},Dh=(e,t,r)=>ih(e,r.selector,t,-1),Bh=(e,t,r)=>ih(e,r.selector,t,1),Lh=T([bg(gg(ig),zg(Dh)),bg(gg(lg),zg(Bh)),bg(hg([pg,gg(tg)]),((e,t,r,n)=>r.moveOnTab?zg(Dh)(e,t,r,n):P.none())),bg(hg([fg,gg(tg)]),((e,t,r,n)=>r.moveOnTab?zg(Bh)(e,t,r,n):P.none())),bg(gg(rg),Nh),bg(gg(og),Nh)]),Hh=T([bg(gg(og),Eg)]),Ph=Cg(Mh,Bi.init,Lh,Hh,(()=>P.some(Rh))),Ih=[Fs("onSpace"),Fs("onEnter"),Fs("onShiftEnter"),Fs("onLeft"),Fs("onRight"),Fs("onTab"),Fs("onShiftTab"),Fs("onUp"),Fs("onDown"),Fs("onEscape"),Eo("stopSpaceKeyup",!1),yo("focusIn")],Fh=Cg(Ih,Bi.init,((e,t,r)=>[bg(gg(og),r.onSpace),bg(hg([fg,gg(rg)]),r.onEnter),bg(hg([pg,gg(rg)]),r.onShiftEnter),bg(hg([pg,gg(tg)]),r.onShiftTab),bg(hg([fg,gg(tg)]),r.onTab),bg(gg(ig),r.onUp),bg(gg(lg),r.onDown),bg(gg(ag),r.onLeft),bg(gg(sg),r.onRight),bg(gg(og),r.onSpace)]),((e,t,r)=>[...r.stopSpaceKeyup?[bg(gg(og),Eg)]:[],bg(gg(ng),r.onEscape)]),(e=>e.focusIn)),zh=Sg.schema(),Vh=_g.schema(),Zh=hh.schema(),jh=nh.schema(),Uh=Ah.schema(),Wh=Mg.schema(),qh=Ph.schema(),$h=Fh.schema(),Gh=Bl({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:zh,cyclic:Vh,flow:Zh,flatgrid:jh,matrix:Uh,execution:Wh,menu:qh,special:$h}),name:"keying",active:{events:(e,t)=>e.handler.toEvents(e,t)},apis:{focusIn:(e,t,r)=>{t.sendFocusIn(t).fold((()=>{e.getSystem().triggerFocus(e.element,e.element)}),(n=>{n(e,t,r)}))},setGridSize:(e,t,r,n,o)=>{(e=>Ae(e,"setGridSize"))(r)?r.setGridSize(n,o):console.error("Layout does not support setGridSize")}},state:Rg}),Kh=(e,t)=>{jl((()=>{((e,t,r)=>{var n=e.components();(e=>{Y(e.components(),(e=>Kr(e.element))),Gr(e.element),e.syncComponents()})(e);var o=r(t),a=se(n,o);Y(a,(t=>{Rc(t),e.getSystem().removeFromWorld(t)})),Y(o,(t=>{Nc(t)?Hc(e,t):(e.getSystem().addToWorld(t),Hc(e,t),At(e.element)&&Dc(t))})),e.syncComponents()})(e,t,(()=>K(t,e.getSystem().build)))}),e.element)},Yh=(e,t)=>{jl((()=>{((r,n,o)=>{var a=r.components(),i=oe(n,(e=>Ri(e).toArray()));Y(a,(e=>{W(i,e)||Lc(e)}));var s=((e,t,r)=>ns(e,t,((t,n)=>os(e,n,t,r))))(e.element,t,e.getSystem().buildOrPatch),l=se(a,s);Y(l,(e=>{Nc(e)&&Lc(e)})),Y(s,(e=>{Nc(e)||Bc(r,e)})),r.syncComponents()})(e,t)}),e.element)},Xh=(e,t,r,n)=>{Lc(t);var o=os(e.element,r,n,e.getSystem().buildOrPatch);Bc(e,o),e.syncComponents()},Jh=(e,t,r)=>{var n=e.getSystem().build(r);Ic(e,n,t)},Qh=(e,t,r,n)=>{zc(t),Jh(e,((e,t)=>((e,t,r)=>{bt(e,r).fold((()=>{qr(e,t)}),(e=>{jr(e,t)}))})(e,t,r)),n)},ep=(e,t)=>e.components(),tp=(e,t,r,n,o)=>{var a=ep(e);return P.from(a[n]).map((r=>(o.fold((()=>zc(r)),(o=>{(t.reuseDom?Xh:Qh)(e,r,n,o)})),r)))},rp=Object.freeze({__proto__:null,append:(e,t,r,n)=>{Jh(e,qr,n)},prepend:(e,t,r,n)=>{Jh(e,Wr,n)},remove:(e,t,r,n)=>{var o=ep(e),a=te(o,(e=>lt(n.element,e.element)));a.each(zc)},replaceAt:tp,replaceBy:(e,t,r,n,o)=>{var a=ep(e);return re(a,n).bind((r=>tp(e,t,0,r,o)))},set:(e,t,r,n)=>(t.reuseDom?Yh:Kh)(e,n),contents:ep}),np=Rl({fields:[Ro("reuseDom",!0)],name:"replacing",apis:rp}),op=(e,t)=>{var r=((e,t)=>{var r=Ka(t);return Rl({fields:[co("enabled")],name:e,active:{events:T(r)}})})(e,t);return{key:e,value:{config:{},me:r,configAsRaw:T({}),initialConfig:{},state:Bi}}},ap=(e,t)=>{t.ignore||(Il(e.element),t.onFocus(e))},ip=Object.freeze({__proto__:null,focus:ap,blur:(e,t)=>{t.ignore||Fl(e.element)},isFocused:e=>zl(e.element)}),sp=Object.freeze({__proto__:null,exhibit:(e,t)=>{var r=t.ignore?{}:{attributes:{tabindex:"-1"}};return Pi(r)},events:e=>Ka([Ja(fa(),((t,r)=>{ap(t,e),r.stop()}))].concat(e.stopMousedown?[Ja(Qo(),((e,t)=>{t.event.prevent()}))]:[]))}),lp=[Is("onFocus"),Eo("stopMousedown",!1),Eo("ignore",!1)],dp=Rl({fields:lp,name:"focusing",active:sp,apis:ip}),cp=(e,t,r,n)=>{var o=r.get();r.set(n),((e,t,r)=>{t.toggleClass.each((t=>{r.get()?Gi(e.element,t):Ki(e.element,t)}))})(e,t,r),((e,t,r)=>{var n=t.aria;n.update(e,n,r.get())})(e,t,r),o!==n&&t.onToggled(e,n)},up=(e,t,r)=>{cp(e,t,r,!r.get())},mp=(e,t,r)=>{cp(e,t,r,t.selected)},gp=Object.freeze({__proto__:null,onLoad:mp,toggle:up,isOn:(e,t,r)=>r.get(),on:(e,t,r)=>{cp(e,t,r,!0)},off:(e,t,r)=>{cp(e,t,r,!1)},set:cp}),hp=Object.freeze({__proto__:null,exhibit:()=>Pi({}),events:(e,t)=>{var r,n,o,a=(r=e,n=t,o=up,di((e=>{o(e,r,n)}))),i=El(e,t,mp);return Ka(ne([e.toggleOnExecute?[a]:[],[i]]))}}),pp=(e,t,r)=>{Dt(e.element,"aria-expanded",r)},vp=[Eo("selected",!1),yo("toggleClass"),Eo("toggleOnExecute",!0),Is("onToggled"),To("aria",{mode:"none"},oo("mode",{pressed:[Eo("syncWithExpanded",!1),Zs("update",((e,t,r)=>{Dt(e.element,"aria-pressed",r),t.syncWithExpanded&&pp(e,0,r)}))],checked:[Zs("update",((e,t,r)=>{Dt(e.element,"aria-checked",r)}))],expanded:[Zs("update",pp)],selected:[Zs("update",((e,t,r)=>{Dt(e.element,"aria-selected",r)}))],none:[Zs("update",_)]}))],fp=Rl({fields:vp,name:"toggling",active:hp,apis:gp,state:(!1,{init:()=>{var e=Ho(false);return{get:()=>e.get(),set:t=>e.set(t),clear:()=>e.set(false),readState:()=>e.get()}}})}),bp=()=>{var e=(e,t)=>{t.stop(),Wa(e)};return[Ja(ca(),e),Ja(ka(),e),ni(Ko()),ni(Qo())]},yp=e=>Ka(ne([e.map((e=>di(((t,r)=>{e(t),r.stop()})))).toArray(),bp()])),wp="alloy.item-hover",xp="alloy.item-focus",Cp="alloy.item-toggled",kp=e=>{(Zl(e.element).isNone()||dp.isFocused(e))&&(dp.isFocused(e)||dp.focus(e),Ua(e,wp,{item:e}))},Sp=e=>{Ua(e,xp,{item:e})},_p=T(wp),Op=T(xp),Ep=T(Cp),Tp=e=>e.toggling.map((e=>e.exclusive?"menuitemradio":"menuitemcheckbox")).getOr("menuitem"),Ap=[co("data"),co("components"),co("dom"),Eo("hasSubmenu",!1),yo("toggling"),Ou("itemBehaviours",[fp,dp,Gh,Cu]),Eo("ignoreFocus",!1),Eo("domModification",{}),Zs("builder",(e=>({dom:e.dom,domModification:d(d({},e.domModification),{},{attributes:d(d({role:Tp(e)},e.domModification.attributes),{},{"aria-haspopup":e.hasSubmenu},e.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Eu(e.itemBehaviours,[e.toggling.fold(fp.revoke,(e=>fp.config((e=>d(d({aria:{mode:"checked"}},ke(e,((e,t)=>"exclusive"!==t))),{},{onToggled:(t,r)=>{C(e.onToggled)&&e.onToggled(t,r),((e,t)=>{Ua(e,Cp,{item:e,state:t})})(t,r)}}))(e)))),dp.config({ignore:e.ignoreFocus,stopMousedown:e.ignoreFocus,onFocus:e=>{Sp(e)}}),Gh.config({mode:"execution"}),Cu.config({store:{mode:"memory",initialValue:e.data}}),op("item-type-events",[...bp(),Ja(na(),kp),Ja(Ca(),dp.focus)])]),components:e.components,eventOrder:e.eventOrder}))),Eo("eventOrder",{})],Mp=[co("dom"),co("components"),Zs("builder",(e=>({dom:e.dom,components:e.components,events:Ka([oi(Ca())])})))],Np=T("item-widget"),Rp=T([Yu({name:"widget",overrides:e=>({behaviours:Ml([Cu.config({store:{mode:"manual",getValue:t=>e.data,setValue:_}})])})})]),Dp=[co("uid"),co("data"),co("components"),co("dom"),Eo("autofocus",!1),Eo("ignoreFocus",!1),Ou("widgetBehaviours",[Cu,dp,Gh]),Eo("domModification",{}),fm(Rp()),Zs("builder",(e=>{var t=lm(Np(),e,Rp()),r=dm(Np(),e,t.internals()),n=t=>cm(t,e,"widget").map((e=>(Gh.focusIn(e),e))),o=(t,r)=>Om(r.event.target)?P.none():e.autofocus?(r.setSource(t.element),P.none()):P.none();return{dom:e.dom,components:r,domModification:e.domModification,events:Ka([di(((e,t)=>{n(e).each((e=>{t.stop()}))})),Ja(na(),kp),Ja(Ca(),((t,r)=>{e.autofocus?n(t):dp.focus(t)}))]),behaviours:Eu(e.widgetBehaviours,[Cu.config({store:{mode:"memory",initialValue:e.data}}),dp.config({ignore:e.ignoreFocus,onFocus:e=>{Sp(e)}}),Gh.config({mode:"special",focusIn:e.autofocus?e=>{n(e)}:Ll(),onLeft:o,onRight:o,onEscape:(t,r)=>dp.isFocused(t)||e.autofocus?e.autofocus?(r.setSource(t.element),P.none()):P.none():(dp.focus(t),P.some(!0))})])}}))],Bp=oo("type",{widget:Dp,item:Ap,separator:Mp}),Lp=T([Qu({factory:{sketch:e=>{var t=ro("menu.spec item",Bp,e);return t.builder(t)}},name:"items",unit:"item",defaults:(e,t)=>Te(t,"uid")?t:d(d({},t),{},{uid:Si("item")}),overrides:(e,t)=>({type:t.type,ignoreFocus:e.fakeFocus,domModification:{classes:[e.markers.item]}})})]),Hp=T([co("value"),co("items"),co("dom"),co("components"),Eo("eventOrder",{}),ku("menuBehaviours",[Qm,Cu,Am,Gh]),To("movement",{mode:"menu",moveOnTab:!0},oo("mode",{grid:[Us(),Zs("config",((e,t)=>({mode:"flatgrid",selector:"."+e.markers.item,initSize:{numColumns:t.initSize.numColumns,numRows:t.initSize.numRows},focusManager:e.focusManager})))],matrix:[Zs("config",((e,t)=>({mode:"matrix",selectors:{row:t.rowSelector,cell:"."+e.markers.item},previousSelector:t.previousSelector,focusManager:e.focusManager}))),co("rowSelector"),Eo("previousSelector",P.none)],menu:[Eo("moveOnTab",!0),Zs("config",((e,t)=>({mode:"menu",selector:"."+e.markers.item,moveOnTab:t.moveOnTab,focusManager:e.focusManager})))]})),uo("markers",Ds()),Eo("fakeFocus",!1),Eo("focusManager",wg()),Is("onHighlight"),Is("onDehighlight")]),Pp=T("alloy.menu-focus"),Ip=_m({name:"Menu",configFields:Hp(),partFields:Lp(),factory:(e,t,r,n)=>({uid:e.uid,dom:e.dom,markers:e.markers,behaviours:_u(e.menuBehaviours,[Qm.config({highlightClass:e.markers.selectedItem,itemClass:e.markers.item,onHighlight:e.onHighlight,onDehighlight:e.onDehighlight}),Cu.config({store:{mode:"memory",initialValue:e.value}}),Am.config({find:P.some}),Gh.config(e.movement.config(e,e.movement))]),events:Ka([Ja(Op(),((e,t)=>{var r=t.event;e.getSystem().getByDom(r.target).each((r=>{Qm.highlight(e,r),t.stop(),Ua(e,Pp(),{menu:e,item:r})}))})),Ja(_p(),((e,t)=>{var r=t.event.item;Qm.highlight(e,r)})),Ja(Ep(),((e,t)=>{var{item:r,state:n}=t.event;n&&"menuitemradio"===Lt(r.element,"role")&&((e,t)=>{var r=rc(e.element,'[role="menuitemradio"][aria-checked="true"]');Y(r,(r=>{lt(r,t.element)||e.getSystem().getByDom(r).each((e=>{fp.off(e)}))}))})(e,r)}))]),components:t,eventOrder:e.eventOrder,domModification:{attributes:{role:"menu"}}})}),Fp=(e,t,r,n)=>Ee(r,n).bind((n=>Ee(e,n).bind((n=>{var o=Fp(e,t,r,n);return P.some([n].concat(o))})))).getOr([]),zp=e=>"prepared"===e.type?P.some(e.menu):P.none(),Vp=()=>{var e=Ho({}),t=Ho({}),r=Ho({}),n=sd(),o=Ho({}),a=e=>i(e).bind(zp),i=e=>Ee(t.get(),e),s=t=>Ee(e.get(),t);return{setMenuBuilt:(e,r)=>{t.set(d(d({},t.get()),{},{[e]:{type:"prepared",menu:r}}))},setContents:(a,i,s,l)=>{n.set(a),e.set(s),t.set(i),o.set(l);var d=((e,t)=>{var r={};be(e,((e,t)=>{Y(e,(e=>{r[e]=t}))}));var n=t,o=we(t,((e,t)=>({k:e,v:t}))),a=ye(o,((e,t)=>[t].concat(Fp(r,n,o,t))));return ye(r,(e=>Ee(a,e).getOr([e])))})(l,s);r.set(d)},expand:t=>Ee(e.get(),t).map((e=>{var n=Ee(r.get(),t).getOr([]);return[e].concat(n)})),refresh:e=>Ee(r.get(),e),collapse:e=>Ee(r.get(),e).bind((e=>e.length>1?P.some(e.slice(1)):P.none())),lookupMenu:i,lookupItem:s,otherMenus:e=>{var t=o.get();return se(ve(t),e)},getPrimary:()=>n.get().bind(a),getMenus:()=>t.get(),clear:()=>{e.set({}),t.set({}),r.set({}),n.clear()},isClear:()=>n.get().isNone(),getTriggeringPath:(t,o)=>{var i=J(s(t).toArray(),(e=>a(e).isSome()));return Ee(r.get(),t).bind((t=>{var r=ie(i.concat(t));return(e=>{for(var t=[],r=0;r<e.length;r++){var n=e[r];if(!n.isSome())return P.none();t.push(n.getOrDie())}return P.some(t)})(oe(r,((t,i)=>((t,r,n)=>a(t).bind((o=>(t=>_e(e.get(),((e,r)=>e===t)))(t).bind((e=>r(e).map((e=>({triggeredMenu:o,triggeringItem:e,triggeringPath:n}))))))))(t,o,r.slice(0,i+1)).fold((()=>Me(n.get(),t)?[]:[P.none()]),(e=>[P.some(e)])))))}))}}},Zp=zp,jp=fi("tiered-menu-item-highlight"),Up=fi("tiered-menu-item-dehighlight");!function(e){e[e.HighlightMenuAndItem=0]="HighlightMenuAndItem",e[e.HighlightJustMenu=1]="HighlightJustMenu",e[e.HighlightNone=2]="HighlightNone"}(xg||(xg={}));var Wp,qp,$p=T("collapse-item"),Gp=Sm({name:"TieredMenu",configFields:[Vs("onExecute"),Vs("onEscape"),zs("onOpenMenu"),zs("onOpenSubmenu"),Is("onRepositionMenu"),Is("onCollapseMenu"),Eo("highlightOnOpen",xg.HighlightMenuAndItem),vo("data",[co("primary"),co("menus"),co("expansions")]),Eo("fakeFocus",!1),Is("onHighlightItem"),Is("onDehighlightItem"),Is("onHover"),Ls(),co("dom"),Eo("navigateOnHover",!0),Eo("stayInDom",!1),ku("tmenuBehaviours",[Gh,Qm,Am,np]),Eo("eventOrder",{})],apis:{collapseMenu:(e,t)=>{e.collapseMenu(t)},highlightPrimary:(e,t)=>{e.highlightPrimary(t)},repositionMenus:(e,t)=>{e.repositionMenus(t)}},factory:(e,t)=>{var r,n=sd(),o=Vp(),a=e=>Cu.getValue(e).value,i=t=>ye(e.data.menus,((e,t)=>oe(e.items,(e=>"separator"===e.type?[]:[e.data.value])))),s=Qm.highlight,l=(t,r)=>{s(t,r),Qm.getHighlighted(r).orThunk((()=>Qm.getFirst(r))).each((n=>{e.fakeFocus?Qm.highlight(r,n):qa(t,n.element,Ca())}))},c=(e,t)=>Ne(K(t,(t=>e.lookupMenu(t).bind((e=>"prepared"===e.type?P.some(e.menu):P.none()))))),u=(t,r,n)=>{var o=c(r,r.otherMenus(n));Y(o,(r=>{Ji(r.element,[e.markers.backgroundMenu]),e.stayInDom||np.remove(t,r)}))},m=(t,r)=>{var o=(t=>n.get().getOrThunk((()=>{var r={},o=rc(t.element,".".concat(e.markers.item)),i=J(o,(e=>"true"===Lt(e,"aria-haspopup")));return Y(i,(e=>{t.getSystem().getByDom(e).each((e=>{var t=a(e);r[t]=e}))})),n.set(r),r})))(t);be(o,((e,t)=>{var n=W(r,t);Dt(e.element,"aria-expanded",n)}))},g=(t,r,n)=>P.from(n[0]).bind((o=>r.lookupMenu(o).bind((o=>{if("notbuilt"===o.type)return P.none();var a=o.menu,i=c(r,n.slice(1));return Y(i,(t=>{Gi(t.element,e.markers.backgroundMenu)})),At(a.element)||np.append(t,ps(a)),Ji(a.element,[e.markers.backgroundMenu]),l(t,a),u(t,r,n),P.some(a)}))));!function(e){e[e.HighlightSubmenu=0]="HighlightSubmenu",e[e.HighlightParent=1]="HighlightParent"}(r||(r={}));var h=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.HighlightSubmenu;if(n.hasConfigured(jm)&&jm.isDisabled(n))return P.some(n);var s=a(n);return o.expand(s).bind((a=>(m(t,a),P.from(a[0]).bind((s=>o.lookupMenu(s).bind((l=>{var d=((e,t,r)=>{if("notbuilt"===r.type){var n=e.getSystem().build(r.nbMenu());return o.setMenuBuilt(t,n),n}return r.menu})(t,s,l);return At(d.element)||np.append(t,ps(d)),e.onOpenSubmenu(t,n,d,ie(a)),i===r.HighlightSubmenu?(Qm.highlightFirst(d),g(t,o,a)):(Qm.dehighlightAll(d),P.some(n))})))))))},p=(t,r)=>{var n=a(r);return o.collapse(n).bind((n=>(m(t,n),g(t,o,n).map((n=>(e.onCollapseMenu(t,r,n),n))))))},v=t=>(r,n)=>ks(n.getSource(),".".concat(e.markers.item)).bind((e=>r.getSystem().getByDom(e).toOptional().bind((e=>t(r,e).map(H))))),f=Ka([Ja(Pp(),((e,t)=>{var r=t.event.item;o.lookupItem(a(r)).each((()=>{var r=t.event.menu;Qm.highlight(e,r);var n=a(t.event.item);o.refresh(n).each((t=>u(e,o,t)))}))})),di(((t,n)=>{var o=n.event.target;t.getSystem().getByDom(o).each((n=>{0===a(n).indexOf("collapse-item")&&p(t,n),h(t,n,r.HighlightSubmenu).fold((()=>{e.onExecute(t,n)}),_)}))})),ii(((t,r)=>{(t=>{var r=((t,r,n)=>ye(n,((n,o)=>{var a=()=>{return Ip.sketch(d(d({},n),{},{value:o,markers:e.markers,fakeFocus:e.fakeFocus,onHighlight:(e,t)=>{Ua(e,jp,{menuComp:e,itemComp:t})},onDehighlight:(e,t)=>{Ua(e,Up,{menuComp:e,itemComp:t})},focusManager:e.fakeFocus?(t=e=>Qm.getHighlighted(e).map((e=>e.element)),{get:t,set:(e,r)=>{var n=t(e);e.getSystem().getByDom(r).fold(_,(t=>{Qm.highlight(e,t)}));var o=t(e);yg(e,n,o)}}):wg()}));var t};return o===r?{type:"prepared",menu:t.getSystem().build(a())}:{type:"notbuilt",nbMenu:a}})))(t,e.data.primary,e.data.menus),n=i();return o.setContents(e.data.primary,r,e.data.expansions,n),o.getPrimary()})(t).each((r=>{np.append(t,ps(r)),e.onOpenMenu(t,r),e.highlightOnOpen===xg.HighlightMenuAndItem?l(t,r):e.highlightOnOpen===xg.HighlightJustMenu&&s(t,r)}))})),Ja(jp,((t,r)=>{e.onHighlightItem(t,r.event.menuComp,r.event.itemComp)})),Ja(Up,((t,r)=>{e.onDehighlightItem(t,r.event.menuComp,r.event.itemComp)})),...e.navigateOnHover?[Ja(_p(),((t,n)=>{var i=n.event.item;((e,t)=>{var r=a(t);o.refresh(r).bind((t=>(m(e,t),g(e,o,t))))})(t,i),h(t,i,r.HighlightParent),e.onHover(t,i)}))]:[]]),b=e=>Qm.getHighlighted(e).bind(Qm.getHighlighted),y={collapseMenu:e=>{b(e).each((t=>{p(e,t)}))},highlightPrimary:e=>{o.getPrimary().each((t=>{l(e,t)}))},repositionMenus:t=>{var r=o.getPrimary().bind((e=>b(t).bind((e=>{var t=a(e),r=Oe(o.getMenus()),n=Ne(K(r,Zp));return o.getTriggeringPath(t,(e=>((e,t,r)=>pe(t,(e=>{if(!e.getSystem().isConnected())return P.none();var t=Qm.getCandidates(e);return te(t,(e=>a(e)===r))})))(0,n,e)))})).map((t=>({primary:e,triggeringPath:t})))));r.fold((()=>{(e=>P.from(e.components()[0]).filter((e=>"menu"===Lt(e.element,"role"))))(t).each((r=>{e.onRepositionMenu(t,r,[])}))}),(r=>{var{primary:n,triggeringPath:o}=r;e.onRepositionMenu(t,n,o)}))}};return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:_u(e.tmenuBehaviours,[Gh.config({mode:"special",onRight:v(((e,t)=>Om(t.element)?P.none():h(e,t,r.HighlightSubmenu))),onLeft:v(((e,t)=>Om(t.element)?P.none():p(e,t))),onEscape:v(((t,r)=>p(t,r).orThunk((()=>e.onEscape(t,r).map((()=>t)))))),focusIn:(e,t)=>{o.getPrimary().each((t=>{qa(e,t.element,Ca())}))}}),Qm.config({highlightClass:e.markers.selectedMenu,itemClass:e.markers.menu}),Am.config({find:e=>Qm.getHighlighted(e)}),np.config({})]),eventOrder:e.eventOrder,apis:y,events:f}},extraApis:{tieredData:(e,t,r)=>({primary:e,menus:t,expansions:r}),singleData:(e,t)=>({primary:e,menus:zo(e,t),expansions:{}}),collapseItem:e=>({value:fi($p()),meta:{text:e}})}}),Kp=Sm({name:"InlineView",configFields:[co("lazySink"),Is("onShow"),Is("onHide"),So("onEscape"),ku("inlineBehaviours",[ru,Cu,Hl]),Oo("fireDismissalEventInstead",[Eo("event",Ba())]),Oo("fireRepositionEventInstead",[Eo("event",La())]),Eo("getRelated",P.none),Eo("isExtraPart",L),Eo("eventOrder",P.none)],factory:(e,t)=>{var r=(t,r,n,o)=>{var a=e.lazySink(t).getOrDie();ru.openWhileCloaked(t,r,(()=>Mc.positionWithinBounds(a,t,n,o()))),Cu.setValue(t,P.some({mode:"position",config:n,getBounds:o}))},n=(t,r,n,o)=>{var a=((e,t,r,n,o)=>{var a=()=>e.lazySink(t),i="horizontal"===n.type?{layouts:{onLtr:()=>kl(),onRtl:()=>Sl()}}:{},s=e=>(e=>2===e.length)(e)?i:{};return Gp.sketch({dom:{tag:"div"},data:n.data,markers:n.menu.markers,highlightOnOpen:n.menu.highlightOnOpen,fakeFocus:n.menu.fakeFocus,onEscape:()=>(ru.close(t),e.onEscape.map((e=>e(t))),P.some(!0)),onExecute:()=>P.some(!0),onOpenMenu:(e,t)=>{Mc.positionWithinBounds(a().getOrDie(),t,r,o())},onOpenSubmenu:(e,t,r,n)=>{var o=a().getOrDie();Mc.position(o,r,{anchor:d({type:"submenu",item:t},s(n))})},onRepositionMenu:(e,t,n)=>{var i=a().getOrDie();Mc.positionWithinBounds(i,t,r,o()),Y(n,(e=>{var t=s(e.triggeringPath);Mc.position(i,e.triggeredMenu,{anchor:d({type:"submenu",item:e.triggeringItem},t)})}))}})})(e,t,r,n,o);ru.open(t,a),Cu.setValue(t,P.some({mode:"menu",menu:a}))},o=t=>{ru.isOpen(t)&&Cu.getValue(t).each((r=>{switch(r.mode){case"menu":ru.getState(t).each(Gp.repositionMenus);break;case"position":var n=e.lazySink(t).getOrDie();Mc.positionWithinBounds(n,t,r.config,r.getBounds())}}))},a={setContent:(e,t)=>{ru.setContent(e,t)},showAt:(e,t,n)=>{var o=P.none;r(e,t,n,o)},showWithinBounds:r,showMenuAt:(e,t,r)=>{n(e,t,r,P.none)},showMenuWithinBounds:n,hide:e=>{ru.isOpen(e)&&(Cu.setValue(e,P.none()),ru.close(e))},getContent:e=>ru.getState(e),reposition:o,isOpen:ru.isOpen};return{uid:e.uid,dom:e.dom,behaviours:_u(e.inlineBehaviours,[ru.config({isPartOf:(t,r,n)=>Os(r,n)||((t,r)=>e.getRelated(t).exists((e=>Os(e,r))))(t,n),getAttachPoint:t=>e.lazySink(t).getOrDie(),onOpen:t=>{e.onShow(t)},onClose:t=>{e.onHide(t)}}),Cu.config({store:{mode:"memory",initialValue:P.none()}}),Hl.config({channels:d(d({},su(d({isExtraPart:t.isExtraPart},e.fireDismissalEventInstead.map((e=>({fireEventInstead:{event:e.event}}))).getOr({})))),du(d(d({},e.fireRepositionEventInstead.map((e=>({fireEventInstead:{event:e.event}}))).getOr({})),{},{doReposition:o})))})]),eventOrder:e.eventOrder,apis:a}},apis:{showAt:(e,t,r,n)=>{e.showAt(t,r,n)},showWithinBounds:(e,t,r,n,o)=>{e.showWithinBounds(t,r,n,o)},showMenuAt:(e,t,r,n)=>{e.showMenuAt(t,r,n)},showMenuWithinBounds:(e,t,r,n,o)=>{e.showMenuWithinBounds(t,r,n,o)},hide:(e,t)=>{e.hide(t)},isOpen:(e,t)=>e.isOpen(t),getContent:(e,t)=>e.getContent(t),setContent:(e,t,r)=>{e.setContent(t,r)},reposition:(e,t)=>{e.reposition(t)}}}),Yp=tinymce.util.Tools.resolve("tinymce.util.Delay"),Xp=Sm({name:"Button",factory:e=>{var t=yp(e.action),r=e.dom.tag,n=t=>Ee(e.dom,"attributes").bind((e=>Ee(e,t)));return{uid:e.uid,dom:e.dom,components:e.components,events:t,behaviours:Eu(e.buttonBehaviours,[dp.config({}),Gh.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:"button"===r?d({type:n("type").getOr("button")},n("role").map((e=>({role:e}))).getOr({})):{role:e.role.getOr(n("role").getOr("button"))}},eventOrder:e.eventOrder}},configFields:[Eo("uid",void 0),co("dom"),Eo("components",[]),Ou("buttonBehaviours",[dp,Gh]),yo("action"),yo("role"),Eo("eventOrder",{})]}),Jp=e=>{var t=(e=>void 0!==e.uid)(e)&&Ae(e,"uid")?e.uid:Si("memento");return{get:e=>e.getSystem().getByUid(t).getOrDie(),getOpt:e=>e.getSystem().getByUid(t).toOptional(),asSpec:()=>d(d({},e),{},{uid:t})}},Qp=tinymce.util.Tools.resolve("tinymce.util.I18n"),ev={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},tv="temporary-placeholder",rv=e=>()=>Ee(e,tv).getOr("!not found!"),nv=(e,t)=>{var r=e.toLowerCase();if(Qp.isRtl()){var n=((e,t)=>Fe(e,t)?e:((e,t)=>e+t)(e,t))(r,"-rtl");return Te(t,n)?n:r}return r},ov=(e,t)=>Ee(t,nv(e,t)),av=(e,t)=>{var r=t();return ov(e,r).getOrThunk(rv(r))},iv=()=>op("add-focusable",[ii((e=>{xs(e.element,"svg").each((e=>Dt(e,"focusable","false")))}))]),sv=(e,t,r,n)=>{var o,a,i=(e=>!!Qp.isRtl()&&Te(ev,e))(t)?["tox-icon--flip"]:[],s=Ee(r,nv(t,r)).or(n).getOrThunk(rv(r));return{dom:{tag:e.tag,attributes:null!==(o=e.attributes)&&void 0!==o?o:{},classes:e.classes.concat(i),innerHtml:s},behaviours:Ml([...null!==(a=e.behaviours)&&void 0!==a?a:[],iv()])}},lv=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:P.none();return sv(t,e,r(),n)},dv={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},cv=Sm({name:"Notification",factory:e=>{var t,r,n,o,a,i=Jp({dom:{tag:"p",innerHtml:e.translationProvider(e.text)},behaviours:Ml([np.config({})])}),s=e=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:"".concat(e,"%")}}}),l=e=>({dom:{tag:"div",classes:["tox-text"],innerHtml:"".concat(e,"%")}}),d=Jp({dom:{tag:"div",classes:e.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[s(0)]},l(0)],behaviours:Ml([np.config({})])}),c={updateProgress:(e,t)=>{e.getSystem().isConnected()&&d.getOpt(e).each((e=>{np.set(e,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[s(t)]},l(t)])}))},updateText:(e,t)=>{if(e.getSystem().isConnected()){var r=i.get(e);np.set(r,[cs(t)])}}},u=ne([e.icon.toArray(),e.level.toArray(),e.level.bind((e=>P.from(dv[e]))).toArray()]),m=Jp(Xp.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[lv("close",{tag:"span",classes:["tox-icon"],attributes:{"aria-label":e.translationProvider("Close")}},e.iconProvider)],action:t=>{e.onAction(t)}})),g=(t=u,r={tag:"div",classes:["tox-notification__icon"]},n=e.iconProvider,o=n(),a=te(t,(e=>Te(o,nv(e,o)))),sv(r,a.getOr(tv),o,P.none())),h=[g,{dom:{tag:"div",classes:["tox-notification__body"]},components:[i.asSpec()],behaviours:Ml([np.config({})])}];return{uid:e.uid,dom:{tag:"div",attributes:{role:"alert"},classes:e.level.map((e=>["tox-notification","tox-notification--in","tox-notification--".concat(e)])).getOr(["tox-notification","tox-notification--in"])},behaviours:Ml([dp.config({}),op("notification-events",[Ja(oa(),(e=>{m.getOpt(e).each(dp.focus)}))])]),components:h.concat(e.progress?[d.asSpec()]:[]).concat(e.closeButton?[m.asSpec()]:[]),apis:c}},configFields:[yo("level"),co("progress"),yo("icon"),co("onAction"),co("text"),co("iconProvider"),co("translationProvider"),Ro("closeButton",!0)],apis:{updateProgress:(e,t,r)=>{e.updateProgress(t,r)},updateText:(e,t,r)=>{e.updateText(t,r)}}}),uv=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),mv=tinymce.util.Tools.resolve("tinymce.EditorManager"),gv=tinymce.util.Tools.resolve("tinymce.Env");!function(e){e.default="wrap",e.floating="floating",e.sliding="sliding",e.scrolling="scrolling"}(Wp||(Wp={})),function(e){e.auto="auto",e.top="top",e.bottom="bottom"}(qp||(qp={}));var hv,pv=e=>t=>t.options.get(e),vv=e=>t=>P.from(e(t)),fv=e=>{var t=gv.deviceType.isPhone(),r=gv.deviceType.isTablet()||t,n=e.options.register,o=e=>g(e)||!1===e,a=e=>g(e)||k(e);n("skin",{processor:e=>g(e)||!1===e,default:"oxide"}),n("skin_url",{processor:"string"}),n("height",{processor:a,default:Math.max(e.getElement().offsetHeight,400)}),n("width",{processor:a,default:uv.DOM.getStyle(e.getElement(),"width")}),n("min_height",{processor:"number",default:100}),n("min_width",{processor:"number"}),n("max_height",{processor:"number"}),n("max_width",{processor:"number"}),n("style_formats",{processor:"object[]"}),n("style_formats_merge",{processor:"boolean",default:!1}),n("style_formats_autohide",{processor:"boolean",default:!1}),n("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),n("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),n("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),n("font_size_input_default_unit",{processor:"string",default:"pt"}),n("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),n("content_langs",{processor:"object[]"}),n("removed_menuitems",{processor:"string",default:""}),n("menubar",{processor:e=>g(e)||b(e),default:!t}),n("menu",{processor:"object",default:{}}),n("toolbar",{processor:e=>b(e)||g(e)||v(e)?{value:e,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),$(9,(e=>{n("toolbar"+(e+1),{processor:"string"})})),n("toolbar_mode",{processor:"string",default:r?"scrolling":"floating"}),n("toolbar_groups",{processor:"object",default:{}}),n("toolbar_location",{processor:"string",default:qp.auto}),n("toolbar_persist",{processor:"boolean",default:!1}),n("toolbar_sticky",{processor:"boolean",default:e.inline}),n("toolbar_sticky_offset",{processor:"number",default:0}),n("fixed_toolbar_container",{processor:"string",default:""}),n("fixed_toolbar_container_target",{processor:"object"}),n("ui_mode",{processor:"string",default:"combined"}),n("file_picker_callback",{processor:"function"}),n("file_picker_validator_handler",{processor:"function"}),n("file_picker_types",{processor:"string"}),n("typeahead_urls",{processor:"boolean",default:!0}),n("anchor_top",{processor:o,default:"#top"}),n("anchor_bottom",{processor:o,default:"#bottom"}),n("draggable_modal",{processor:"boolean",default:!1}),n("statusbar",{processor:"boolean",default:!0}),n("elementpath",{processor:"boolean",default:!0}),n("branding",{processor:"boolean",default:!0}),n("promotion",{processor:"boolean",default:!0}),n("resize",{processor:e=>"both"===e||b(e),default:!gv.deviceType.isTouch()}),n("sidebar_show",{processor:"string"}),n("help_accessibility",{processor:"boolean",default:e.hasPlugin("help")})},bv=pv("readonly"),yv=pv("height"),wv=pv("width"),xv=vv(pv("min_width")),Cv=vv(pv("min_height")),kv=vv(pv("max_width")),Sv=vv(pv("max_height")),_v=vv(pv("style_formats")),Ov=pv("style_formats_merge"),Ev=pv("style_formats_autohide"),Tv=pv("content_langs"),Av=pv("removed_menuitems"),Mv=pv("toolbar_mode"),Nv=pv("toolbar_groups"),Rv=pv("toolbar_location"),Dv=pv("fixed_toolbar_container"),Bv=pv("fixed_toolbar_container_target"),Lv=pv("toolbar_persist"),Hv=pv("toolbar_sticky_offset"),Pv=pv("menubar"),Iv=pv("toolbar"),Fv=pv("file_picker_callback"),zv=pv("file_picker_validator_handler"),Vv=pv("font_size_input_default_unit"),Zv=pv("file_picker_types"),jv=pv("typeahead_urls"),Uv=pv("anchor_top"),Wv=pv("anchor_bottom"),qv=pv("draggable_modal"),$v=pv("statusbar"),Gv=pv("elementpath"),Kv=pv("branding"),Yv=pv("resize"),Xv=pv("paste_as_text"),Jv=pv("sidebar_show"),Qv=pv("promotion"),ef=pv("help_accessibility"),tf=e=>!1===e.options.get("skin"),rf=e=>!1!==e.options.get("menubar"),nf=e=>{var t=e.options.get("skin_url");if(tf(e))return t;if(t)return e.documentBaseURI.toAbsolute(t);var r=e.options.get("skin");return mv.baseURL+"/skins/ui/"+r},of=e=>e.options.get("line_height_formats").split(" "),af=e=>{var t=Iv(e),r=g(t),n=v(t)&&t.length>0;return!lf(e)&&(n||r||!0===t)},sf=e=>{var t=$(9,(t=>e.options.get("toolbar"+(t+1)))),r=J(t,g);return Be(r.length>0,r)},lf=e=>sf(e).fold((()=>{var t=Iv(e);return S(t,g)&&t.length>0}),H),df=e=>Rv(e)===qp.bottom,cf=e=>{var t;if(!e.inline)return P.none();var r=null!==(t=Dv(e))&&void 0!==t?t:"";if(r.length>0)return Cs(Mt(),r);var n=Bv(e);return x(n)?P.some($e(n)):P.none()},uf=e=>e.inline&&cf(e).isSome(),mf=e=>cf(e).getOrThunk((()=>Ot(_t($e(e.getElement()))))),gf=e=>e.inline&&!rf(e)&&!af(e)&&!lf(e),hf=e=>(e.options.get("toolbar_sticky")||e.inline)&&!uf(e)&&!gf(e),pf=e=>!uf(e)&&"split"===e.options.get("ui_mode"),vf=e=>{var t=e.options.get("menu");return ye(t,(e=>d(d({},e),{},{items:e.items})))},ff=Object.freeze({__proto__:null,get ToolbarMode(){return Wp},get ToolbarLocation(){return qp},register:fv,getSkinUrl:nf,isReadOnly:bv,isSkinDisabled:tf,getHeightOption:yv,getWidthOption:wv,getMinWidthOption:xv,getMinHeightOption:Cv,getMaxWidthOption:kv,getMaxHeightOption:Sv,getUserStyleFormats:_v,shouldMergeStyleFormats:Ov,shouldAutoHideStyleFormats:Ev,getLineHeightFormats:of,getContentLanguages:Tv,getRemovedMenuItems:Av,isMenubarEnabled:rf,isMultipleToolbars:lf,isToolbarEnabled:af,isToolbarPersist:Lv,getMultipleToolbarsOption:sf,getUiContainer:mf,useFixedContainer:uf,isSplitUiMode:pf,getToolbarMode:Mv,isDraggableModal:qv,isDistractionFree:gf,isStickyToolbar:hf,getStickyToolbarOffset:Hv,getToolbarLocation:Rv,isToolbarLocationBottom:df,getToolbarGroups:Nv,getMenus:vf,getMenubar:Pv,getToolbar:Iv,getFilePickerCallback:Fv,getFilePickerTypes:Zv,useTypeaheadUrls:jv,getAnchorTop:Uv,getAnchorBottom:Wv,getFilePickerValidatorHandler:zv,getFontSizeInputDefaultUnit:Vv,useStatusBar:$v,useElementPath:Gv,promotionEnabled:Qv,useBranding:Kv,getResize:Yv,getPasteAsText:Xv,getSidebarShow:Jv,useHelpAccessibility:ef}),bf="[data-mce-autocompleter]",yf=e=>ks(e,bf);!function(e){e[e.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",e[e.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"}(hv||(hv={}));var wf,xf=hv,Cf="tox-menu-nav__js",kf="tox-collection__item",Sf="tox-swatch",_f={normal:Cf,color:Sf},Of="tox-collection__item--enabled",Ef="tox-collection__item-icon",Tf="tox-collection__item-label",Af="tox-collection__item-caret",Mf="tox-collection__item--active",Nf="tox-collection__item-container",Rf="tox-collection__item-container--row",Df=e=>Ee(_f,e).getOr(Cf),Bf=e=>"color"===e?"tox-swatches":"tox-menu",Lf=e=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:Bf(e),tieredMenu:"tox-tiered-menu"}),Hf=e=>{var t=Lf(e);return{backgroundMenu:t.backgroundMenu,selectedMenu:t.selectedMenu,menu:t.menu,selectedItem:t.selectedItem,item:Df(e)}},Pf=(e,t,r)=>{var n=Lf(r);return{tag:"div",classes:ne([[n.menu,"tox-menu-".concat(t,"-column")],e?[n.hasIcons]:[]])}},If=[Ip.parts.items({})],Ff=(e,t,r)=>{var n=Lf(r);return{dom:{tag:"div",classes:ne([[n.tieredMenu]])},markers:Hf(r)}},zf=T([yo("data"),Eo("inputAttributes",{}),Eo("inputStyles",{}),Eo("tag","input"),Eo("inputClasses",[]),Is("onSetValue"),Eo("styles",{}),Eo("eventOrder",{}),ku("inputBehaviours",[Cu,dp]),Eo("selectOnFocus",!0)]),Vf=e=>Ml([dp.config({onFocus:e.selectOnFocus?e=>{var t=e.element,r=es(t);t.dom.setSelectionRange(0,r.length)}:_})]),Zf=e=>d(d({},Vf(e)),_u(e.inputBehaviours,[Cu.config({store:d(d({mode:"manual"},e.data.map((e=>({initialValue:e}))).getOr({})),{},{getValue:e=>es(e.element),setValue:(e,t)=>{es(e.element)!==t&&ts(e.element,t)}}),onSetValue:e.onSetValue})])),jf=e=>({tag:e.tag,attributes:d({type:"text"},e.inputAttributes),styles:e.inputStyles,classes:e.inputClasses}),Uf=Sm({name:"Input",configFields:zf(),factory:(e,t)=>({uid:e.uid,dom:jf(e),components:[],behaviours:Zf(e),eventOrder:e.eventOrder})}),Wf=fi("refetch-trigger-event"),qf=fi("redirect-menu-item-interaction"),$f="tox-menu__searcher",Gf=e=>Cs(e.element,".".concat($f)).bind((t=>e.getSystem().getByDom(t).toOptional())),Kf=Gf,Yf=e=>({fetchPattern:Cu.getValue(e),selectionStart:e.element.dom.selectionStart,selectionEnd:e.element.dom.selectionEnd}),Xf="tox-collection--results__js",Jf=e=>{var t;return e.dom?d(d({},e),{},{dom:d(d({},e.dom),{},{attributes:d(d({},null!==(t=e.dom.attributes)&&void 0!==t?t:{}),{},{id:fi("aria-item-search-result-id"),"aria-selected":"false"})})}):e},Qf=(e,t)=>r=>{var n=G(r,t);return K(n,(t=>({dom:e,components:t})))},eb=(e,t)=>{var r=[],n=[];return Y(e,((e,o)=>{t(e,o)?(n.length>0&&r.push(n),n=[],(Te(e.dom,"innerHtml")||e.components&&e.components.length>0)&&n.push(e)):n.push(e)})),n.length>0&&r.push(n),K(r,(e=>({dom:{tag:"div",classes:["tox-collection__group"]},components:e})))},tb=(e,t,r)=>Ip.parts.items({preprocess:n=>{var o=K(n,r);return"auto"!==e&&e>1?Qf({tag:"div",classes:["tox-collection__group"]},e)(o):eb(o,((e,r)=>"separator"===t[r].type))}}),rb=function(e,t){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===e?["tox-collection--list"]:["tox-collection--grid"])},components:[tb(e,t,A)]}},nb=e=>q(e,(e=>"icon"in e&&void 0!==e.icon)),ob=e=>(console.error(no(e)),console.log(e),P.none()),ab=(e,t,r,n,o)=>{var a,i=(a=r,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Ip.parts.items({preprocess:e=>eb(e,((e,t)=>"separator"===a[t].type))})]});return{value:e,dom:i.dom,components:i.components,items:r}},ib=(e,t,r,n,o)=>{if("color"===o.menuType){var a=(e=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Ip.parts.items({preprocess:"auto"!==e?Qf({tag:"div",classes:["tox-swatches__row"]},e):A})]}]}))(n);return{value:e,dom:a.dom,components:a.components,items:r}}if("normal"===o.menuType&&"auto"===n){var i=rb(n,r);return{value:e,dom:i.dom,components:i.components,items:r}}if("normal"===o.menuType||"searchable"===o.menuType){var s="searchable"!==o.menuType?rb(n,r):"search-with-field"===o.searchMode.searchMode?((e,t,r)=>{var n,o,a,i,s=fi("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===e?["tox-collection--list"]:["tox-collection--grid"])},components:[(n={i18n:Qp.translate,placeholder:r.placeholder},o=(e,t)=>(t.cut(),P.none()),a=(e,t)=>{var r={interactionEvent:t.event,eventType:t.event.raw.type};return Ua(e,qf,r),P.some(!0)},i="searcher-events",{dom:{tag:"div",classes:[kf]},components:[Uf.sketch({inputClasses:[$f,"tox-textfield"],inputAttributes:d(d({},n.placeholder.map((e=>({placeholder:n.i18n(e)}))).getOr({})),{},{type:"search","aria-autocomplete":"list"}),inputBehaviours:Ml([op(i,[Ja(la(),(e=>{ja(e,Wf)})),Ja(ia(),((e,t)=>{"Escape"===t.event.raw.key&&t.stop()}))]),Gh.config({mode:"special",onLeft:o,onRight:o,onSpace:o,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[i,Gh.name()]}})]}),{dom:{tag:"div",classes:[...1===e?["tox-collection--list"]:["tox-collection--grid"],Xf],attributes:{id:s}},components:[tb(e,t,Jf)]}]}})(n,r,o.searchMode):function(e,t){var r=fi("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",Xf].concat(1===e?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:r}},components:[tb(e,t,Jf)]}}(n,r);return{value:e,dom:s.dom,components:s.components,items:r}}if("listpreview"===o.menuType&&"auto"!==n){var l=(e=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Ip.parts.items({preprocess:Qf({tag:"div",classes:["tox-collection__group"]},e)})]}))(n);return{value:e,dom:l.dom,components:l.components,items:r}}return{value:e,dom:Pf(t,n,o.menuType),components:If,items:r}},sb=go("type"),lb=go("name"),db=go("label"),cb=go("text"),ub=go("title"),mb=go("icon"),gb=go("value"),hb=po("fetch"),pb=po("getSubmenuItems"),vb=po("onAction"),fb=po("onItemAction"),bb=Do("onSetup",(()=>_)),yb=Co("name"),wb=Co("text"),xb=Co("icon"),Cb=Co("tooltip"),kb=Co("label"),Sb=Co("shortcut"),_b=So("select"),Ob=Ro("active",!1),Eb=Ro("borderless",!1),Tb=Ro("enabled",!0),Ab=Ro("primary",!1),Mb=e=>Eo("columns",e),Nb=Eo("meta",{}),Rb=Do("onAction",_),Db=e=>Mo("type",e),Bb=e=>io("name","name",_n((()=>fi("".concat(e,"-name")))),qn),Lb=In([sb,wb]),Hb=In([Db("autocompleteitem"),Ob,Tb,Nb,gb,wb,xb]),Pb=[Tb,Cb,xb,wb,bb],Ib=In([sb,vb].concat(Pb)),Fb=e=>eo("toolbarbutton",Ib,e),zb=[Ob].concat(Pb),Vb=In(zb.concat([sb,vb])),Zb=e=>eo("ToggleButton",Vb,e),jb=[Do("predicate",L),No("scope","node",["node","editor"]),No("position","selection",["node","selection","line"])],Ub=Pb.concat([Db("contextformbutton"),Ab,vb,so("original",A)]),Wb=zb.concat([Db("contextformbutton"),Ab,vb,so("original",A)]),qb=Pb.concat([Db("contextformbutton")]),$b=zb.concat([Db("contextformtogglebutton")]),Gb=oo("type",{contextformbutton:Ub,contextformtogglebutton:Wb}),Kb=In([Db("contextform"),Do("initValue",T("")),kb,bo("commands",Gb),wo("launch",oo("type",{contextformbutton:qb,contextformtogglebutton:$b}))].concat(jb)),Yb=In([Db("contexttoolbar"),go("items")].concat(jb)),Xb=[sb,go("src"),Co("alt"),Bo("classes",[],qn)],Jb=In(Xb),Qb=[sb,cb,yb,Bo("classes",["tox-collection__item-label"],qn)],ey=In(Qb),ty=Ln((()=>Xn("type",{cardimage:Jb,cardtext:ey,cardcontainer:ry}))),ry=In([sb,Mo("direction","horizontal"),Mo("align","left"),Mo("valign","middle"),bo("items",ty)]),ny=[Tb,wb,Sb,("menuitem",io("value","value",_n((()=>fi("".concat("menuitem","-value")))),jn())),Nb],oy=In([sb,kb,bo("items",ty),bb,Rb].concat(ny)),ay=In([sb,Ob,xb].concat(ny)),iy=[sb,go("fancytype"),Rb],sy=[Eo("initData",{})].concat(iy),ly=[So("select"),Lo("initData",{},[Ro("allowCustomColors",!0),Mo("storageKey","default"),_o("colors",jn())])].concat(iy),dy=oo("fancytype",{inserttable:sy,colorswatch:ly}),cy=In([sb,bb,Rb,xb].concat(ny)),uy=In([sb,pb,bb,xb].concat(ny)),my=In([sb,xb,Ob,bb,vb].concat(ny)),gy=(e,t,r)=>{var n=rc(e.element,"."+r);if(n.length>0){var o=re(n,(e=>{var r=e.dom.getBoundingClientRect().top,o=n[0].dom.getBoundingClientRect().top;return Math.abs(r-o)>t})).getOr(n.length);return P.some({numColumns:o,numRows:Math.ceil(n.length/o)})}return P.none()},hy=e=>((e,t)=>Ml([op(e,t)]))(fi("unnamed-events"),e),py=fi("tooltip.exclusive"),vy=fi("tooltip.show"),fy=fi("tooltip.hide"),by=(e,t,r)=>{e.getSystem().broadcastOn([py],{})},yy=Object.freeze({__proto__:null,hideAllExclusive:by,setComponents:(e,t,r,n)=>{r.getTooltip().each((e=>{e.getSystem().isConnected()&&np.set(e,n)}))}}),wy=Object.freeze({__proto__:null,events:(e,t)=>{var r=r=>{t.getTooltip().each((n=>{zc(n),e.onHide(r,n),t.clearTooltip()})),t.clearTimer()};return Ka(ne([[Ja(vy,(r=>{t.resetTimer((()=>{(r=>{if(!t.isShowing()){by(r);var n=e.lazySink(r).getOrDie(),o=r.getSystem().build({dom:e.tooltipDom,components:e.tooltipComponents,events:Ka("normal"===e.mode?[Ja(na(),(e=>{ja(r,vy)})),Ja(ta(),(e=>{ja(r,fy)}))]:[]),behaviours:Ml([np.config({})])});t.setTooltip(o),Pc(n,o),e.onShow(r,o),Mc.position(n,o,{anchor:e.anchor(r)})}})(r)}),e.delay)})),Ja(fy,(n=>{t.resetTimer((()=>{r(n)}),e.delay)})),Ja(wa(),((e,t)=>{var n=t;n.universal||W(n.channels,py)&&r(e)})),si((e=>{r(e)}))],"normal"===e.mode?[Ja(oa(),(e=>{ja(e,vy)})),Ja(ba(),(e=>{ja(e,fy)})),Ja(na(),(e=>{ja(e,vy)})),Ja(ta(),(e=>{ja(e,fy)}))]:[Ja(Va(),((e,t)=>{ja(e,vy)})),Ja(Za(),(e=>{ja(e,fy)}))]]))}}),xy=[co("lazySink"),co("tooltipDom"),Eo("exclusive",!0),Eo("tooltipComponents",[]),Eo("delay",300),No("mode","normal",["normal","follow-highlight"]),Eo("anchor",(e=>({type:"hotspot",hotspot:e,layouts:{onLtr:T([vl,pl,ul,gl,ml,hl]),onRtl:T([vl,pl,ul,gl,ml,hl])}}))),Is("onHide"),Is("onShow")],Cy=Object.freeze({__proto__:null,init:()=>{var e=sd(),t=sd(),r=()=>{e.on(clearTimeout)},n=T("not-implemented");return Li({getTooltip:t.get,isShowing:t.isSet,setTooltip:t.set,clearTooltip:t.clear,clearTimer:r,resetTimer:(t,n)=>{r(),e.set(setTimeout(t,n))},readState:n})}}),ky=Rl({fields:xy,name:"tooltipping",active:wy,state:Cy,apis:yy}),Sy="silver.readonly",_y=In([("readonly",uo("readonly",$n))]),Oy=(e,t)=>{var r=e.mainUi.outerContainer.element,n=[e.mainUi.mothership,...e.uiMotherships];t&&Y(n,(e=>{e.broadcastOn([nu()],{target:r})})),Y(n,(e=>{e.broadcastOn([Sy],{readonly:t})}))},Ey=(e,t)=>{e.on("init",(()=>{e.mode.isReadOnly()&&Oy(t,!0)})),e.on("SwitchMode",(()=>Oy(t,e.mode.isReadOnly()))),bv(e)&&e.mode.set("readonly")},Ty=()=>Hl.config({channels:{[Sy]:{schema:_y,onReceive:(e,t)=>{jm.set(e,t.readonly)}}}}),Ay=e=>jm.config({disabled:e}),My=e=>jm.config({disabled:e,disableClass:"tox-tbtn--disabled"}),Ny=e=>jm.config({disabled:e,disableClass:"tox-tbtn--disabled",useNative:!1}),Ry=(e,t)=>{var r=e.getApi(t);return e=>{e(r)}},Dy=(e,t)=>ii((r=>{Ry(e,r)((r=>{var n=e.onSetup(r);C(n)&&t.set(n)}))})),By=(e,t)=>si((r=>Ry(e,r)(t.get()))),Ly=(e,t)=>di(((r,n)=>{Ry(e,r)(e.onAction),e.triggersSubmenu||t!==xf.CLOSE_ON_EXECUTE||(r.getSystem().isConnected()&&ja(r,_a()),n.stop())})),Hy={[xa()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Py=Ne,Iy=(e,t,r,n)=>{var o,a=Ho(_);return{type:"item",dom:t.dom,components:Py(t.optComponents),data:e.data,eventOrder:Hy,hasSubmenu:e.triggersSubmenu,itemBehaviours:Ml([op("item-events",[Ly(e,r),Dy(e,a),By(e,a)]),(o=()=>!e.enabled||n.isDisabled(),jm.config({disabled:o,disableClass:"tox-collection__item--state-disabled"})),Ty(),np.config({})].concat(e.itemBehaviours))}},Fy=e=>({value:e.value,meta:d({text:e.text.getOr("")},e.meta)}),zy=e=>{var t=gv.os.isMacOS()||gv.os.isiOS(),r=t?{alt:"",ctrl:"",shift:"",meta:"",access:""}:{meta:"Ctrl",access:"Shift+Alt"},n=e.split("+"),o=K(n,(e=>{var t=e.toLowerCase().trim();return Te(r,t)?r[t]:e}));return t?o.join(""):o.join("+")},Vy=function(e,t){return lv(e,{tag:"div",classes:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[Ef]},t)},Zy=e=>({dom:{tag:"div",classes:[Tf]},components:[cs(Qp.translate(e))]}),jy=(e,t)=>({dom:{tag:"div",classes:t,innerHtml:e}}),Uy=(e,t)=>({dom:{tag:"div",classes:[Tf]},components:[{dom:{tag:e.tag,styles:e.styles},components:[cs(Qp.translate(t))]}]}),Wy=e=>({dom:{tag:"div",classes:["tox-collection__item-accessory"]},components:[cs(zy(e))]}),qy=e=>Vy("checkmark",e,["tox-collection__item-checkmark"]),$y=e=>{var t=e.map((e=>({attributes:{title:Qp.translate(e),id:fi("menu-item")}}))).getOr({});return d({tag:"div",classes:[Cf,kf]},t)},Gy=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:P.none();return"color"===e.presets?((e,t,r)=>{var n=e.ariaLabel,o=e.value,a=e.iconContent.map((e=>((e,t,r)=>{var n=t();return ov(e,n).or(r).getOrThunk(rv(n))})(e,t.icons,r)));return{dom:(()=>{var e=Sf,r=a.getOr(""),i=n.map((e=>({title:t.translate(e)}))).getOr({}),s={tag:"div",attributes:i,classes:[e]};return"custom"===o?d(d({},s),{},{tag:"button",classes:[...s.classes,"tox-swatches__picker-btn"],innerHtml:r}):"remove"===o?d(d({},s),{},{classes:[...s.classes,"tox-swatch--remove"],innerHtml:r}):x(o)?d(d({},s),{},{attributes:d(d({},s.attributes),{},{"data-mce-color":o}),styles:{"background-color":o},innerHtml:r}):s})(),optComponents:[]}})(e,t,n):((e,t,r,n)=>{var o={tag:"div",classes:[Ef]},a=r?e.iconContent.map((e=>lv(e,o,t.icons,n))).orThunk((()=>P.some({dom:o}))):P.none(),i=e.checkMark,s=P.from(e.meta).fold((()=>Zy),(e=>Te(e,"style")?N(Uy,e.style):Zy)),l=e.htmlContent.fold((()=>e.textContent.map(s)),(e=>P.some(jy(e,[Tf]))));return{dom:$y(e.ariaLabel),optComponents:[a,l,e.shortcutContent.map(Wy),i,e.caret]}})(e,t,r,n)},Ky=(e,t)=>Ee(e,"tooltipWorker").map((e=>[ky.config({lazySink:t.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:e=>({type:"submenu",item:e,overrides:{maxHeightFunction:fd}}),mode:"follow-highlight",onShow:(t,r)=>{e((e=>{ky.setComponents(t,[us({element:$e(e)})])}))}})])).getOr([]),Yy=(e,t)=>{var r=(e=>uv.DOM.encode(e))(Qp.translate(e));if(t.length>0){var n=new RegExp((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))(t),"gi");return r.replace(n,(e=>'<span class="tox-autocompleter-highlight">'.concat(e,"</span>")))}return r},Xy=(e,t)=>K(e,(e=>{switch(e.type){case"cardcontainer":return((e,t)=>{var r="vertical"===e.direction?"tox-collection__item-container--column":Rf,n="left"===e.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right";return{dom:{tag:"div",classes:[Nf,r,n,(()=>{switch(e.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}})()]},components:t}})(e,Xy(e.items,t));case"cardimage":return((e,t,r)=>({dom:{tag:"img",classes:t,attributes:{src:e,alt:r.getOr("")}}}))(e.src,e.classes,e.alt);case"cardtext":var r=e.name.exists((e=>W(t.cardText.highlightOn,e))),n=r?P.from(t.cardText.matchText).getOr(""):"";return jy(Yy(e.text,n),e.classes)}})),Jy=nm(Np(),Rp()),Qy=e=>({value:nw(e)}),ew=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,tw=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rw=e=>ew.test(e)||tw.test(e),nw=e=>He(e,"#").toUpperCase(),ow=e=>{var t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},aw=e=>{var t=ow(e.red)+ow(e.green)+ow(e.blue);return Qy(t)},iw=Math.min,sw=Math.max,lw=Math.round,dw=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,cw=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,uw=(e,t,r,n)=>({red:e,green:t,blue:r,alpha:n}),mw=e=>{var t=parseInt(e,10);return t.toString()===e&&t>=0&&t<=255},gw=e=>{var t,r,n,o=(e.hue||0)%360,a=e.saturation/100,i=e.value/100;if(a=sw(0,iw(a,1)),i=sw(0,iw(i,1)),0===a)return t=r=n=lw(255*i),uw(t,r,n,1);var s=o/60,l=i*a,d=l*(1-Math.abs(s%2-1)),c=i-l;switch(Math.floor(s)){case 0:t=l,r=d,n=0;break;case 1:t=d,r=l,n=0;break;case 2:t=0,r=l,n=d;break;case 3:t=0,r=d,n=l;break;case 4:t=d,r=0,n=l;break;case 5:t=l,r=0,n=d;break;default:t=r=n=0}return t=lw(255*(t+c)),r=lw(255*(r+c)),n=lw(255*(n+c)),uw(t,r,n,1)},hw=e=>{var t,r,n=(t=(e=>{var t=e.value.replace(ew,((e,t,r,n)=>t+t+r+r+n+n));return{value:t}})(e),null===(r=tw.exec(t.value))?["FFFFFF","FF","FF","FF"]:r),o=parseInt(n[1],16),a=parseInt(n[2],16),i=parseInt(n[3],16);return uw(o,a,i,1)},pw=(e,t,r,n)=>{var o=parseInt(e,10),a=parseInt(t,10),i=parseInt(r,10),s=parseFloat(n);return uw(o,a,i,s)},vw=e=>{if("transparent"===e)return P.some(uw(0,0,0,0));var t=dw.exec(e);if(null!==t)return P.some(pw(t[1],t[2],t[3],"1"));var r=cw.exec(e);return null!==r?P.some(pw(r[1],r[2],r[3],r[4])):P.none()},fw=e=>"rgba(".concat(e.red,",").concat(e.green,",").concat(e.blue,",").concat(e.alpha,")"),bw=uw(255,0,0,1),yw=(e,t)=>{e.dispatch("ResizeContent",t)},ww=(e,t)=>{e.dispatch("TextColorChange",t)},xw=(e,t)=>e.dispatch("ResolveName",{name:t.nodeName.toLowerCase(),target:t}),Cw=(e,t)=>()=>{e(),t()},kw=e=>_w(e,"NodeChange",(t=>{t.setEnabled(e.selection.isEditable())})),Sw=(e,t)=>r=>{var n=kw(e)(r),o=((e,t)=>r=>{var n=id(),o=()=>{r.setActive(e.formatter.match(t));var o=e.formatter.formatChanged(t,r.setActive);n.set(o)};return e.initialized?o():e.once("init",o),()=>{e.off("init",o),n.clear()}})(e,t)(r);return()=>{n(),o()}},_w=(e,t,r)=>n=>{var o=()=>r(n),a=()=>{r(n),e.on(t,o)};return e.initialized?a():e.once("init",a),()=>{e.off("init",a),e.off(t,o)}},Ow=e=>t=>()=>{e.undoManager.transact((()=>{e.focus(),e.execCommand("mceToggleFormat",!1,t.format)}))},Ew=(e,t)=>()=>e.execCommand(t),Tw=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),Aw={},Mw=e=>Ee(Aw,e).getOrThunk((()=>{var t="tinymce-custom-colors-".concat(e),r=Tw.getItem(t);if(w(r)){var n=Tw.getItem("tinymce-custom-colors");Tw.setItem(t,x(n)?n:"[]")}var o=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=Tw.getItem(e),o=g(n)?JSON.parse(n):[],a=r-(t=o).length<0?t.slice(0,r):t,i=e=>{a.splice(e,1)};return{add:t=>{U(a,t).each(i),a.unshift(t),a.length>r&&a.pop(),Tw.setItem(e,JSON.stringify(a))},state:()=>a.slice(0)}}(t,10);return Aw[e]=o,o})),Nw=(e,t)=>{Mw(e).add(t)},Rw=(e,t,r)=>({hue:e,saturation:t,value:r}),Dw=e=>{var t,r=0,n=0,o=e.red/255,a=e.green/255,i=e.blue/255,s=Math.min(o,Math.min(a,i)),l=Math.max(o,Math.max(a,i));return s===l?Rw(0,0,100*(n=s)):(r=60*((r=o===s?3:i===s?1:5)-(o===s?a-i:i===s?o-a:i-o)/(l-s)),t=(l-s)/l,n=l,Rw(Math.round(r),Math.round(100*t),Math.round(100*n)))},Bw=e=>aw(gw(e)),Lw=e=>{return(t=e,rw(t)?P.some({value:nw(t)}):P.none()).orThunk((()=>vw(e).map(aw))).getOrThunk((()=>{var t=document.createElement("canvas");t.height=1,t.width=1;var r=t.getContext("2d");r.clearRect(0,0,t.width,t.height),r.fillStyle="#FFFFFF",r.fillStyle=e,r.fillRect(0,0,1,1);var n=r.getImageData(0,0,1,1).data,o=n[0],a=n[1],i=n[2],s=n[3];return aw(uw(o,a,i,s))}));var t},Hw="forecolor",Pw="hilitecolor",Iw=e=>{for(var t=[],r=0;r<e.length;r+=2)t.push({text:e[r+1],value:"#"+Lw(e[r]).value,icon:"checkmark",type:"choiceitem"});return t},Fw=e=>t=>t.options.get(e),zw="#000000",Vw=(e,t)=>t===Hw&&e.options.isSet("color_map_foreground")?Fw("color_map_foreground")(e):t===Pw&&e.options.isSet("color_map_background")?Fw("color_map_background")(e):Fw("color_map")(e),Zw=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return Math.max(5,Math.ceil(Math.sqrt(Vw(e,t).length)))},jw=(e,t)=>{var r=Fw("color_cols")(e),n=Zw(e,t);return r===Zw(e)?n:r},Uw=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return Math.round(t===Hw?Fw("color_cols_foreground")(e):t===Pw?Fw("color_cols_background")(e):Fw("color_cols")(e))},Ww=Fw("custom_colors"),qw=Fw("color_default_foreground"),$w=Fw("color_default_background"),Gw=(e,t)=>{var r=$e(e.selection.getStart()),n="hilitecolor"===t?Uo(r,(e=>{if(tt(e)){var t=Ut(e,"background-color");return Be(vw(t).exists((e=>0!==e.alpha)),t)}return P.none()})).getOr("rgba(0, 0, 0, 0)"):Ut(r,"color");return vw(n).map((e=>"#"+aw(e).value))},Kw=e=>{var t="choiceitem",r={type:t,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return e?[r,{type:t,text:"Custom color",icon:"color-picker",value:"custom"}]:[r]},Yw=(e,t,r,n)=>{"custom"===r?nx(e)((r=>{r.each((r=>{Nw(t,r),e.execCommand("mceApplyTextcolor",t,r),n(r)}))}),Gw(e,t).getOr(zw)):"remove"===r?(n(""),e.execCommand("mceRemoveTextcolor",t)):(n(r),e.execCommand("mceApplyTextcolor",t,r))},Xw=(e,t,r)=>e.concat((e=>K(Mw(e).state(),(e=>({type:"choiceitem",text:e,icon:"checkmark",value:e}))))(t).concat(Kw(r))),Jw=(e,t,r)=>n=>{n(Xw(e,t,r))},Qw=(e,t,r)=>{var n="forecolor"===t?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";e.setIconFill(n,r)},ex=(e,t)=>r=>{var n=Gw(e,t);return Me(n,r.toUpperCase())},tx=(e,t,r,n,o)=>{e.ui.registry.addSplitButton(t,{tooltip:n,presets:"color",icon:"forecolor"===t?"text-color":"highlight-bg-color",select:ex(e,r),columns:Uw(e,r),fetch:Jw(Vw(e,r),r,Ww(e)),onAction:t=>{Yw(e,r,o.get(),_)},onItemAction:(n,a)=>{Yw(e,r,a,(r=>{o.set(r),ww(e,{name:t,color:r})}))},onSetup:r=>{Qw(r,t,o.get());var n=e=>{e.name===t&&Qw(r,e.name,e.color)};return e.on("TextColorChange",n),Cw(kw(e)(r),(()=>{e.off("TextColorChange",n)}))}})},rx=(e,t,r,n,o)=>{e.ui.registry.addNestedMenuItem(t,{text:n,icon:"forecolor"===t?"text-color":"highlight-bg-color",onSetup:r=>(Qw(r,t,o.get()),kw(e)(r)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:ex(e,r),initData:{storageKey:r},onAction:n=>{Yw(e,r,n.value,(r=>{o.set(r),ww(e,{name:t,color:r})}))}}]})},nx=e=>(t,r)=>{var n=!1,o={colorpicker:r};e.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onAction:(e,t)=>{"hex-valid"===t.name&&(n=t.value)},onSubmit:r=>{var o=r.getData().colorpicker;n?(t(P.from(o)),r.close()):e.windowManager.alert(e.translate(["Invalid hex color code: {0}",o]))},onClose:_,onCancel:()=>{t(P.none())}})},ox=(e,t,r,n,o,a,i,s)=>{var l=nb(t),d=ax(t,r,n,"color"!==o?"normal":"color",a,i,s);return ib(e,l,d,n,{menuType:o})},ax=(e,t,r,n,o,a,i)=>Ne(K(e,(s=>{return"choiceitem"===s.type?(l=s,eo("choicemenuitem",ay,l)).fold(ob,(s=>P.some(function(e,t,r,n,o,a,i){var s=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],l=Gy({presets:r,textContent:t?e.text:P.none(),htmlContent:P.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:t?e.shortcut:P.none(),checkMark:t?P.some(qy(i.icons)):P.none(),caret:P.none(),value:e.value},i,s);return kn(Iy({data:Fy(e),enabled:e.enabled,getApi:e=>({setActive:t=>{fp.set(e,t)},isActive:()=>fp.isOn(e),isEnabled:()=>!jm.isDisabled(e),setEnabled:t=>jm.set(e,!t)}),onAction:t=>n(e.value),onSetup:e=>(e.setActive(o),_),triggersSubmenu:!1,itemBehaviours:[]},l,a,i),{toggling:{toggleClass:Of,toggleOnExecute:!1,selected:e.active,exclusive:!0}})}(s,1===r,n,t,a(s.value),o,i,nb(e))))):P.none();var l}))),ix=(e,t)=>{var r=Hf(t);return 1===e?{mode:"menu",moveOnTab:!0}:"auto"===e?{mode:"grid",selector:"."+r.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===t?"tox-swatches__row":"tox-collection__group"),previousSelector:e=>"color"===t?Cs(e.element,"[aria-checked=true]"):P.none()}},sx=fi("cell-over"),lx=fi("cell-execute"),dx=(e,t,r)=>{var n=r=>Ua(r,lx,{row:e,col:t}),o=(e,t)=>{t.stop(),n(e)};return hs({dom:{tag:"div",attributes:{role:"button","aria-label":r}},behaviours:Ml([op("insert-table-picker-cell",[Ja(na(),dp.focus),Ja(xa(),n),Ja(ca(),o),Ja(ka(),o)]),fp.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),dp.config({onFocus:r=>Ua(r,sx,{row:e,col:t})})])})},cx=e=>oe(e,(e=>K(e,ps))),ux=(e,t)=>cs("".concat(t,"x").concat(e)),mx={inserttable:(e,t)=>{var r=(e=>(t,r)=>e.shared.providers.translate("".concat(r," columns, ").concat(t," rows")))(t),n=((e,t,r)=>{for(var n=[],o=0;o<10;o++){for(var a=[],i=0;i<10;i++){var s=e(o+1,i+1);a.push(dx(o,i,s))}n.push(a)}return n})(r),o=ux(0,0),a=Jp({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[o],behaviours:Ml([np.config({})])});return{type:"widget",data:{value:fi("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Jy.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:cx(n).concat(a.asSpec()),behaviours:Ml([op("insert-table-picker",[ii((e=>{np.set(a.get(e),[o])})),ri(sx,((e,t,r)=>{var{row:o,col:i}=r.event;((e,t,r,n,o)=>{for(var a=0;a<10;a++)for(var i=0;i<10;i++)fp.set(e[a][i],a<=t&&i<=r)})(n,o,i),np.set(a.get(e),[ux(o+1,i+1)])})),ri(lx,((t,r,n)=>{var{row:o,col:a}=n.event;e.onAction({numRows:o+1,numColumns:a+1}),ja(t,_a())}))]),Gh.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:(e,t)=>{var r=((e,t)=>{var r=e.initData.allowCustomColors&&t.colorinput.hasCustomColors();return e.initData.colors.fold((()=>Xw(t.colorinput.getColors(e.initData.storageKey),e.initData.storageKey,r)),(e=>e.concat(Kw(r))))})(e,t),n=t.colorinput.getColorCols(e.initData.storageKey),o="color",a=d(d({},ox(fi("menu-value"),r,(t=>{e.onAction({value:t})}),n,o,xf.CLOSE_ON_EXECUTE,e.select.getOr(L),t.shared.providers)),{},{markers:Hf(o),movement:ix(n,o)});return{type:"widget",data:{value:fi("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Jy.widget(Ip.sketch(a))]}}},gx=e=>({type:"separator",dom:{tag:"div",classes:[kf,"tox-collection__group-heading"]},components:e.text.map(cs).toArray()}),hx=Object.freeze({__proto__:null,getCoupled:(e,t,r,n)=>r.getOrCreate(e,t,n),getExistingCoupled:(e,t,r,n)=>r.getExisting(e,t,n)}),px=[uo("others",Qn(gn.value,jn()))],vx=Object.freeze({__proto__:null,init:()=>{var e={},t=(t,r)=>{if(0===ve(t.others).length)throw new Error("Cannot find any known coupled components");return Ee(e,r)},r=T({});return Li({readState:r,getExisting:(e,r,n)=>t(r,n).orThunk((()=>(Ee(r.others,n).getOrDie("No information found for coupled component: "+n),P.none()))),getOrCreate:(r,n,o)=>t(n,o).getOrThunk((()=>{var t=Ee(n.others,o).getOrDie("No information found for coupled component: "+o)(r),a=r.getSystem().build(t);return e[o]=a,a}))})}}),fx=Rl({fields:px,name:"coupling",apis:hx,state:vx}),bx=e=>{var t=P.none(),r=[],n=e=>{o()?a(e):r.push(e)},o=()=>t.isSome(),a=e=>{t.each((t=>{setTimeout((()=>{e(t)}),0)}))};return e((e=>{o()||(t=P.some(e),Y(r,a),r=[])})),{get:n,map:e=>bx((t=>{n((r=>{t(e(r))}))})),isReady:o}},yx={nu:bx,pure:e=>bx((t=>{t(e)}))},wx=e=>{setTimeout((()=>{throw e}),0)},xx=e=>{var t=t=>{e().then(t,wx)};return{map:t=>xx((()=>e().then(t))),bind:t=>xx((()=>e().then((e=>t(e).toPromise())))),anonBind:t=>xx((()=>e().then((()=>t.toPromise())))),toLazy:()=>yx.nu(t),toCached:()=>{var t=null;return xx((()=>(null===t&&(t=e()),t)))},toPromise:e,get:t}},Cx=e=>xx((()=>new Promise(e))),kx=e=>xx((()=>Promise.resolve(e))),Sx=T("sink"),_x=T(Ju({name:Sx(),overrides:T({dom:{tag:"div"},behaviours:Ml([Mc.config({useFixed:H})]),events:Ka([ni(ia()),ni(Qo()),ni(ca())])})})),Ox=(e,t)=>{var r=e.getHotspot(t).getOr(t),n="hotspot",o=e.getAnchorOverrides();return e.layouts.fold((()=>({type:n,hotspot:r,overrides:o})),(e=>({type:n,hotspot:r,overrides:o,layouts:e})))},Ex=(e,t,r,n,o,a,i)=>{var s=((e,t,r,n,o,a,i)=>{var s=((e,t,r)=>(0,e.fetch)(r).map(t))(e,t,n),l=Mx(n,e);return s.map((e=>e.bind((e=>P.from(Gp.sketch(d(d({},a.menu()),{},{uid:Si(""),data:e,highlightOnOpen:i,onOpenMenu:(e,t)=>{var n=l().getOrDie();Mc.position(n,t,{anchor:r}),ru.decloak(o)},onOpenSubmenu:(e,t,r)=>{var n=l().getOrDie();Mc.position(n,r,{anchor:{type:"submenu",item:t}}),ru.decloak(o)},onRepositionMenu:(e,t,n)=>{var o=l().getOrDie();Mc.position(o,t,{anchor:r}),Y(n,(e=>{Mc.position(o,e.triggeredMenu,{anchor:{type:"submenu",item:e.triggeringItem}})}))},onEscape:()=>(dp.focus(n),ru.close(o),P.some(!0))})))))))})(e,t,Ox(e,r),r,n,o,i);return s.map((e=>(e.fold((()=>{ru.isOpen(n)&&ru.close(n)}),(e=>{ru.cloak(n),ru.open(n,e),a(n)})),n)))},Tx=(e,t,r,n,o,a,i)=>(ru.close(n),kx(n)),Ax=(e,t,r,n,o,a)=>{var i=fx.getCoupled(r,"sandbox");return(ru.isOpen(i)?Tx:Ex)(e,t,r,i,n,o,a)},Mx=(e,t)=>e.getSystem().getByUid(t.uid+"-"+Sx()).map((e=>()=>gn.value(e))).getOrThunk((()=>t.lazySink.fold((()=>()=>gn.error(new Error("No internal sink is specified, nor could an external sink be found"))),(t=>()=>t(e))))),Nx=e=>{ru.getState(e).each((e=>{Gp.repositionMenus(e)}))},Rx=(e,t,r)=>{var n=_s(),o=Mx(t,e);return{dom:{tag:"div",classes:e.sandboxClasses,attributes:{id:n.id,role:"listbox"}},behaviours:Eu(e.sandboxBehaviours,[Cu.config({store:{mode:"memory",initialValue:t}}),ru.config({onOpen:(o,a)=>{var i=Ox(e,t);n.link(t.element),e.matchWidth&&((e,t,r)=>{var n=Am.getCurrent(t).getOr(t),o=sr(e.element);r?Vt(n.element,"min-width",o+"px"):((e,t)=>{ir.set(e,t)})(n.element,o)})(i.hotspot,a,e.useMinWidth),e.onOpen(i,o,a),void 0!==r&&void 0!==r.onOpen&&r.onOpen(o,a)},onClose:(e,o)=>{n.unlink(t.element),void 0!==r&&void 0!==r.onClose&&r.onClose(e,o)},isPartOf:(e,r,n)=>Os(r,n)||Os(t,n),getAttachPoint:()=>o().getOrDie()}),Am.config({find:e=>ru.getState(e).bind((e=>Am.getCurrent(e)))}),Hl.config({channels:d(d({},su({isExtraPart:L})),du({doReposition:Nx}))})])}},Dx=e=>{var t=fx.getCoupled(e,"sandbox");Nx(t)},Bx=()=>[Eo("sandboxClasses",[]),Ou("sandboxBehaviours",[Am,Hl,ru,Cu])],Lx=T([co("dom"),co("fetch"),Is("onOpen"),Fs("onExecute"),Eo("getHotspot",P.some),Eo("getAnchorOverrides",T({})),Td(),ku("dropdownBehaviours",[fp,fx,Gh,dp]),co("toggleClass"),Eo("eventOrder",{}),yo("lazySink"),Eo("matchWidth",!1),Eo("useMinWidth",!1),yo("role")].concat(Bx())),Hx=T([Xu({schema:[Ls(),Eo("fakeFocus",!1)],name:"menu",defaults:e=>({onExecute:e.onExecute})}),_x()]),Px=_m({name:"Dropdown",configFields:Lx(),partFields:Hx(),factory:(e,t,r,n)=>{var o=e=>{ru.getState(e).each((e=>{Gp.highlightPrimary(e)}))},a=(t,r,o)=>Ax(e,A,t,n,r,o),i={expand:e=>{fp.isOn(e)||a(e,_,xg.HighlightNone).get(_)},open:e=>{fp.isOn(e)||a(e,_,xg.HighlightMenuAndItem).get(_)},refetch:t=>fx.getExistingCoupled(t,"sandbox").fold((()=>a(t,_,xg.HighlightMenuAndItem).map(_)),(r=>Ex(e,A,t,r,n,_,xg.HighlightMenuAndItem).map(_))),isOpen:fp.isOn,close:e=>{fp.isOn(e)&&a(e,_,xg.HighlightMenuAndItem).get(_)},repositionMenus:e=>{fp.isOn(e)&&Dx(e)}},s=(e,t)=>(Wa(e),P.some(!0));return{uid:e.uid,dom:e.dom,components:t,behaviours:_u(e.dropdownBehaviours,[fp.config({toggleClass:e.toggleClass,aria:{mode:"expanded"}}),fx.config({others:{sandbox:t=>Rx(e,t,{onOpen:()=>fp.on(t),onClose:()=>fp.off(t)})}}),Gh.config({mode:"special",onSpace:s,onEnter:s,onDown:(e,t)=>{if(Px.isOpen(e)){var r=fx.getCoupled(e,"sandbox");o(r)}else Px.open(e);return P.some(!0)},onEscape:(e,t)=>Px.isOpen(e)?(Px.close(e),P.some(!0)):P.none()}),dp.config({})]),events:yp(P.some((e=>{a(e,o,xg.HighlightMenuAndItem).get(_)}))),eventOrder:d(d({},e.eventOrder),{},{[xa()]:["disabling","toggling","alloy.base.behaviour"]}),apis:i,domModification:{attributes:d(d({"aria-haspopup":"true"},e.role.fold((()=>({})),(e=>({role:e})))),"button"===e.dom.tag?{type:("type",Ee(e.dom,"attributes").bind((e=>Ee(e,"type")))).getOr("button")}:{})}}},apis:{open:(e,t)=>e.open(t),refetch:(e,t)=>e.refetch(t),expand:(e,t)=>e.expand(t),close:(e,t)=>e.close(t),isOpen:(e,t)=>e.isOpen(t),repositionMenus:(e,t)=>e.repositionMenus(t)}}),Ix=e=>ru.getState(e).bind(Qm.getHighlighted).bind(Qm.getHighlighted),Fx=(e,t,r)=>{Kf(e).each((e=>{var n;((e,t)=>{Ht(t.element,"id").each((t=>Dt(e.element,"aria-activedescendant",t)))})(e,r),(Yi((n=t).element,Xf)?P.some(n.element):Cs(n.element,"."+Xf)).each((t=>{Ht(t,"id").each((t=>Dt(e.element,"aria-controls",t)))}))})),Dt(r.element,"aria-selected","true")},zx=(e,t,r)=>{Dt(r.element,"aria-selected","false")},Vx=e=>fx.getExistingCoupled(e,"sandbox").bind(Gf).map(Yf).map((e=>e.fetchPattern)).getOr("");!function(e){e[e.ContentFocus=0]="ContentFocus",e[e.UiFocus=1]="UiFocus"}(wf||(wf={}));var Zx,jx=(e,t,r,n,o)=>{var a,i=r.shared.providers,s=e=>o?d(d({},e),{},{shortcut:P.none(),icon:e.text.isSome()?P.none():e.icon}):e;switch(e.type){case"menuitem":return(a=e,eo("menuitem",cy,a)).fold(ob,(e=>P.some(function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=Gy({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:P.none(),ariaLabel:e.text,caret:P.none(),checkMark:P.none(),shortcutContent:e.shortcut},r,n);return Iy({data:Fy(e),getApi:e=>({isEnabled:()=>!jm.isDisabled(e),setEnabled:t=>jm.set(e,!t)}),enabled:e.enabled,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},o,t,r)}(s(e),t,i,n))));case"nestedmenuitem":return(e=>eo("nestedmenuitem",uy,e))(e).fold(ob,(e=>P.some(function(e,t,r){var n,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4]?(n=r.icons,Vy("chevron-down",n,[Af])):(e=>Vy("chevron-right",e,[Af]))(r.icons),i=Gy({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:P.none(),ariaLabel:e.text,caret:P.some(a),checkMark:P.none(),shortcutContent:e.shortcut},r,o);return Iy({data:Fy(e),getApi:e=>({isEnabled:()=>!jm.isDisabled(e),setEnabled:t=>jm.set(e,!t),setIconFill:(t,r)=>{Cs(e.element,'svg path[class="'.concat(t,'"], rect[class="').concat(t,'"]')).each((e=>{Dt(e,"fill",r)}))}}),enabled:e.enabled,onAction:_,onSetup:e.onSetup,triggersSubmenu:!0,itemBehaviours:[]},i,t,r)}(s(e),t,i,n,o))));case"togglemenuitem":return(e=>eo("togglemenuitem",my,e))(e).fold(ob,(e=>P.some(function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=Gy({iconContent:e.icon,textContent:e.text,htmlContent:P.none(),ariaLabel:e.text,checkMark:P.some(qy(r.icons)),caret:P.none(),shortcutContent:e.shortcut,presets:"normal",meta:e.meta},r,n);return kn(Iy({data:Fy(e),enabled:e.enabled,getApi:e=>({setActive:t=>{fp.set(e,t)},isActive:()=>fp.isOn(e),isEnabled:()=>!jm.isDisabled(e),setEnabled:t=>jm.set(e,!t)}),onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},o,t,r),{toggling:{toggleClass:Of,toggleOnExecute:!1,selected:e.active}})}(s(e),t,i,n))));case"separator":return(e=>eo("separatormenuitem",Lb,e))(e).fold(ob,(e=>P.some(gx(e))));case"fancymenuitem":return(e=>eo("fancymenuitem",dy,e))(e).fold(ob,(e=>((e,t)=>Ee(mx,e.fancytype).map((r=>r(e,t))))(e,r)));default:return console.error("Unknown item in general menu",e),P.none()}},Ux=(e,t,r,n,o,a,i)=>{var s=1===n,l=!s||nb(e);return Ne(K(e,(e=>{switch(e.type){case"separator":return(n=e,eo("Autocompleter.Separator",Lb,n)).fold(ob,(e=>P.some(gx(e))));case"cardmenuitem":return(e=>eo("cardmenuitem",oy,e))(e).fold(ob,(e=>P.some(((e,t,r,n)=>{var o={dom:$y(e.label),optComponents:[P.some({dom:{tag:"div",classes:[Nf,Rf]},components:Xy(e.items,n)})]};return Iy({data:Fy(d({text:P.none()},e)),enabled:e.enabled,getApi:e=>({isEnabled:()=>!jm.isDisabled(e),setEnabled:t=>{jm.set(e,!t),Y(rc(e.element,"*"),(r=>{e.getSystem().getByDom(r).each((e=>{e.hasConfigured(jm)&&jm.set(e,!t)}))}))}}),onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:P.from(n.itemBehaviours).getOr([])},o,t,r.providers)})(d(d({},e),{},{onAction:t=>{e.onAction(t),r(e.value,e.meta)}}),o,a,{itemBehaviours:Ky(e.meta,a),cardText:{matchText:t,highlightOn:i}}))));default:return(e=>eo("Autocompleter.Item",Hb,e))(e).fold(ob,(e=>P.some(function(e,t,r,n,o,a,i){var s=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],l=Gy({presets:n,textContent:P.none(),htmlContent:r?e.text.map((e=>Yy(e,t))):P.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:P.none(),checkMark:P.none(),caret:P.none(),value:e.value},i.providers,s,e.icon);return Iy({data:Fy(e),enabled:e.enabled,getApi:T({}),onAction:t=>o(e.value,e.meta),onSetup:T(_),triggersSubmenu:!1,itemBehaviours:Ky(e.meta,i)},l,a,i.providers)}(e,t,s,"normal",r,o,a,l))))}var n})))},Wx=(e,t,r,n,o,a)=>{var i=nb(t),s=Ne(K(t,(e=>{var t=e=>jx(e,r,n,(e=>o?!Te(e,"text"):i)(e),o);return"nestedmenuitem"===e.type&&e.getSubmenuItems().length<=0?t(d(d({},e),{},{enabled:!1})):t(e)}))),l=(e=>"no-search"===e.searchMode?{menuType:"normal"}:{menuType:"searchable",searchMode:e})(a);return(o?ab:ib)(e,i,s,1,l)},qx=e=>Gp.singleData(e.value,e),$x=(e,t)=>{var r=Ho(!1),n=Ho(!1),o=hs(Kp.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:Ml([op("dismissAutocompleter",[Ja(Ba(),(()=>c()))])]),lazySink:t.getSink})),a=()=>Kp.isOpen(o),i=n.get,s=()=>{a()&&Kp.hide(o)},l=()=>Kp.getContent(o).bind((e=>ue(e.components(),0))),c=()=>e.execCommand("mceAutocompleterClose"),u=n=>{var a,i,u=(i=pe(a=n,(e=>P.from(e.columns))).getOr(1),oe(a,(n=>{var o=n.items;return Ux(o,n.matchText,((t,o)=>{var a=e.selection.getRng();((e,t)=>yf($e(t.startContainer)).map((t=>{var r=e.createRng();return r.selectNode(t.dom),r})))(e.dom,a).each((a=>{var i={hide:()=>c(),reload:t=>{s(),e.execCommand("mceAutocompleterReload",!1,{fetchOptions:t})}};r.set(!0),n.onAction(i,a,t,o),r.set(!1)}))}),i,xf.BUBBLE_TO_SANDBOX,t,n.highlightOn)})));u.length>0?((t,r)=>{var n;(n=$e(e.getBody()),Cs(n,bf)).each((n=>{var a=pe(t,(e=>P.from(e.columns))).getOr(1);Kp.showMenuAt(o,{anchor:{type:"node",root:$e(e.getBody()),node:P.from(n)}},((e,t,r,n)=>{var o=ix(t,n),a=Hf(n);return{data:qx(d(d({},e),{},{movement:o,menuBehaviours:hy("auto"!==t?[]:[ii(((e,t)=>{gy(e,4,a.item).each((t=>{var{numColumns:r,numRows:n}=t;Gh.setGridSize(e,n,r)}))}))])})),menu:{markers:Hf(n),fakeFocus:r===wf.ContentFocus}}})(ib("autocompleter-value",!0,r,a,{menuType:"normal"}),a,wf.ContentFocus,"normal"))})),l().each(Qm.highlightFirst)})(n,u):s()};e.on("AutocompleterStart",(e=>{var{lookupData:t}=e;n.set(!0),r.set(!1),u(t)})),e.on("AutocompleterUpdate",(e=>{var{lookupData:t}=e;return u(t)})),e.on("AutocompleterEnd",(()=>{s(),n.set(!1),r.set(!1)})),((e,t)=>{var r=(e,t)=>{Ua(e,ia(),{raw:t})},n=()=>e.getMenu().bind(Qm.getHighlighted);t.on("keydown",(t=>{var o=t.which;e.isActive()&&(e.isMenuOpen()?13===o?(n().each(Wa),t.preventDefault()):40===o?(n().fold((()=>{e.getMenu().each(Qm.highlightFirst)}),(e=>{r(e,t)})),t.preventDefault(),t.stopImmediatePropagation()):37!==o&&38!==o&&39!==o||n().each((e=>{r(e,t),t.preventDefault(),t.stopImmediatePropagation()})):13!==o&&38!==o&&40!==o||e.cancelIfNecessary())})),t.on("NodeChange",(t=>{e.isActive()&&!e.isProcessingAction()&&yf($e(t.element)).isNone()&&e.cancelIfNecessary()}))})({cancelIfNecessary:c,isMenuOpen:a,isActive:i,isProcessingAction:r.get,getMenu:l},e)},Gx=["visible","hidden","clip"],Kx=e=>ze(e).length>0&&!W(Gx,e),Yx=e=>{if(et(e)){var t=Ut(e,"overflow-x"),r=Ut(e,"overflow-y");return Kx(t)||Kx(r)}return!1},Xx=(e,t)=>pf(e)?(e=>{var t=tc(e,Yx),r=0===t.length?Et(e).map(Tt).map((e=>tc(e,Yx))).getOr([]):t;return me(r).map((e=>({element:e,others:r.slice(1)})))})(t):P.none(),Jx=e=>{var t=[...K(e.others,an),dn()];return((e,t)=>ee(t,((e,t)=>ln(e,t)),e))(an(e.element),t)},Qx=(e,t,r)=>ks(e,t,r).isSome(),eC=(e,t)=>{var r=null;return{cancel:()=>{null!==r&&(clearTimeout(r),r=null)},schedule:function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];r=setTimeout((()=>{e.apply(null,o),r=null}),t)}}},tC=e=>{var t=e.raw;return void 0===t.touches||1!==t.touches.length?P.none():P.some(t.touches[0])},rC=(e,t)=>{var r=d({stopBackspace:!0},t),n=(e=>{var t=sd(),r=Ho(!1),n=eC((t=>{e.triggerEvent(Sa(),t),r.set(!0)}),400),o=Vo([{key:Ko(),value:e=>(tC(e).each((o=>{n.cancel();var a={x:o.clientX,y:o.clientY,target:e.target};n.schedule(e),r.set(!1),t.set(a)})),P.none())},{key:Yo(),value:e=>(n.cancel(),tC(e).each((e=>{t.on((r=>{((e,t)=>{var r=Math.abs(e.clientX-t.x),n=Math.abs(e.clientY-t.y);return r>5||n>5})(e,r)&&t.clear()}))})),P.none())},{key:Xo(),value:o=>(n.cancel(),t.get().filter((e=>lt(e.target,o.target))).map((t=>r.get()?(o.prevent(),!1):e.triggerEvent(ka(),o))))}]);return{fireIfReady:(e,t)=>Ee(o,t).bind((t=>t(e)))}})(r),o=K(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),(t=>dd(e,t,(e=>{n.fireIfReady(e,t).each((t=>{t&&e.kill()})),r.triggerEvent(t,e)&&e.kill()})))),a=sd(),i=dd(e,"paste",(e=>{n.fireIfReady(e,"paste").each((t=>{t&&e.kill()})),r.triggerEvent("paste",e)&&e.kill(),a.set(setTimeout((()=>{r.triggerEvent(ya(),e)}),0))})),s=dd(e,"keydown",(e=>{r.triggerEvent("keydown",e)?e.kill():r.stopBackspace&&(e=>e.raw.which===eg[0]&&!W(["input","textarea"],Je(e.target))&&!Qx(e.target,'[contenteditable="true"]'))(e)&&e.prevent()})),l=dd(e,"focusin",(e=>{r.triggerEvent("focusin",e)&&e.kill()})),c=sd(),u=dd(e,"focusout",(e=>{r.triggerEvent("focusout",e)&&e.kill(),c.set(setTimeout((()=>{r.triggerEvent(ba(),e)}),0))}));return{unbind:()=>{Y(o,(e=>{e.unbind()})),s.unbind(),l.unbind(),u.unbind(),i.unbind(),a.on(clearTimeout),c.on(clearTimeout)}}},nC=(e,t)=>{var r=Ee(e,"target").getOr(t);return Ho(r)},oC=Po([{stopped:[]},{resume:["element"]},{complete:[]}]),aC=(e,t,r,n,o,a)=>{var i=e(t,n),s=((e,t)=>{var r=Ho(!1),n=Ho(!1);return{stop:()=>{r.set(!0)},cut:()=>{n.set(!0)},isStopped:r.get,isCut:n.get,event:e,setSource:t.set,getSource:t.get}})(r,o);return i.fold((()=>(a.logEventNoHandlers(t,n),oC.complete())),(e=>{var r=e.descHandler;return Ii(r)(s),s.isStopped()?(a.logEventStopped(t,e.element,r.purpose),oC.stopped()):s.isCut()?(a.logEventCut(t,e.element,r.purpose),oC.complete()):ht(e.element).fold((()=>(a.logNoParent(t,e.element,r.purpose),oC.complete())),(n=>(a.logEventResponse(t,e.element,r.purpose),oC.resume(n))))}))},iC=(e,t,r,n,o,a)=>aC(e,t,r,n,o,a).fold(H,(n=>iC(e,t,r,n,o,a)),L),sC=(e,t,r,n,o)=>{var a=nC(r,n);return iC(e,t,r,n,a,o)},lC=()=>{var e,t=(e={},{registerId:(t,r,n)=>{be(n,((n,o)=>{var a=void 0!==e[o]?e[o]:{};a[r]=((e,t)=>({cHandler:N.apply(void 0,[e.handler].concat(t)),purpose:e.purpose}))(n,t),e[o]=a}))},unregisterId:t=>{be(e,((e,r)=>{Te(e,t)&&delete e[t]}))},filterByType:t=>Ee(e,t).map((e=>Se(e,((e,t)=>((e,t)=>({id:e,descHandler:t}))(t,e))))).getOr([]),find:(t,r,n)=>Ee(e,r).bind((e=>Uo(n,(t=>((e,t)=>ki(t).bind((t=>Ee(e,t))).map((e=>((e,t)=>({element:e,descHandler:t}))(t,e))))(e,t)),t)))}),r={},n=e=>{ki(e.element).each((e=>{delete r[e],t.unregisterId(e)}))};return{find:(e,r,n)=>t.find(e,r,n),filter:e=>t.filterByType(e),register:e=>{var o=(e=>{var t=e.element;return ki(t).getOrThunk((()=>((e,t)=>{var r=fi(wi+"uid-");return Ci(t,r),r})(0,e.element)))})(e);Ae(r,o)&&((e,t)=>{var o=r[t];if(o!==e)throw new Error('The tagId "'+t+'" is already used by: '+gi(o.element)+"\nCannot use it for: "+gi(e.element)+"\nThe conflicting element is"+(At(o.element)?" ":" not ")+"already in the DOM");n(e)})(e,o);var a=[e];t.registerId(a,o,e.events),r[o]=e},unregister:n,getById:e=>Ee(r,e)}},dC=Sm({name:"Container",factory:e=>{var t=e.dom,{attributes:n}=t,o=s(t,r);return{uid:e.uid,dom:d({tag:"div",attributes:d({role:"presentation"},n)},o),components:e.components,behaviours:Su(e.containerBehaviours),events:e.events,domModification:e.domModification,eventOrder:e.eventOrder}},configFields:[Eo("components",[]),ku("containerBehaviours",[]),Eo("events",{}),Eo("domModification",{}),Eo("eventOrder",{})]}),cC=e=>{var t=t=>ht(e.element).fold(H,(e=>lt(t,e))),r=lC(),n=(e,n)=>r.find(t,e,n),o=rC(e.element,{triggerEvent:(e,t)=>As(e,t.target,(r=>((e,t,r,n)=>sC(e,t,r,r.target,n))(n,e,t,r)))}),a={debugInfo:T("real"),triggerEvent:(e,t,r)=>{As(e,t,(o=>sC(n,e,r,t,o)))},triggerFocus:(e,t)=>{ki(e).fold((()=>{Il(e)}),(r=>{As(fa(),e,(r=>(((e,t,r,n,o)=>{var a=nC(r,n);aC(e,t,r,n,a,o)})(n,fa(),{originator:t,kill:_,prevent:_,target:e},e,r),!1)))}))},triggerEscape:(e,t)=>{a.triggerEvent("keydown",e.element,t.event)},getByUid:e=>h(e),getByDom:e=>p(e),build:hs,buildOrPatch:gs,addToGui:e=>{l(e)},removeFromGui:e=>{d(e)},addToWorld:e=>{i(e)},removeFromWorld:e=>{s(e)},broadcast:e=>{u(e)},broadcastOn:(e,t)=>{m(e,t)},broadcastEvent:(e,t)=>{g(e,t)},isConnected:H},i=e=>{e.connect(a),rt(e.element)||(r.register(e),Y(e.components(),i),a.triggerEvent(Ea(),e.element,{target:e.element}))},s=e=>{rt(e.element)||(Y(e.components(),s),r.unregister(e)),e.disconnect()},l=t=>{Pc(e,t)},d=e=>{zc(e)},c=e=>{var t=r.filter(wa());Y(t,(t=>{var r=t.descHandler;Ii(r)(e)}))},u=e=>{c({universal:!0,data:e})},m=(e,t)=>{c({universal:!1,channels:e,data:t})},g=(e,t)=>((e,t,r)=>{var n=(e=>{var t=Ho(!1);return{stop:()=>{t.set(!0)},cut:_,isStopped:t.get,isCut:L,event:e,setSource:D("Cannot set source of a broadcasted event"),getSource:D("Cannot get source of a broadcasted event")}})(t);return Y(e,(e=>{var t=e.descHandler;Ii(t)(n)})),n.isStopped()})(r.filter(e),t),h=e=>r.getById(e).fold((()=>gn.error(new Error('Could not find component with uid: "'+e+'" in system.'))),gn.value),p=e=>{var t=ki(e).getOr("not found");return h(t)};return i(e),{root:e,element:e.element,destroy:()=>{o.unbind(),Kr(e.element)},add:l,remove:d,getByUid:h,getByDom:p,addToWorld:i,removeFromWorld:s,broadcast:u,broadcastOn:m,broadcastEvent:g}},uC=T([Eo("prefix","form-field"),ku("fieldBehaviours",[Am,Cu])]),mC=T([Ju({schema:[co("dom")],name:"label"}),Ju({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[co("text")],name:"aria-descriptor"}),Yu({factory:{sketch:e=>{var t=((e,t)=>{var r={};return be(e,((e,n)=>{W(t,n)||(r[n]=e)})),r})(e,["factory"]);return e.factory.sketch(t)}},schema:[co("factory")],name:"field"})]),gC=_m({name:"FormField",configFields:uC(),partFields:mC(),factory:(e,t,r,n)=>{var o=_u(e.fieldBehaviours,[Am.config({find:t=>cm(t,e,"field")}),Cu.config({store:{mode:"manual",getValue:e=>Am.getCurrent(e).bind(Cu.getValue),setValue:(e,t)=>{Am.getCurrent(e).each((e=>{Cu.setValue(e,t)}))}}})]),a=Ka([ii(((t,r)=>{var n=mm(t,e,["label","field","aria-descriptor"]);n.field().each((t=>{var r=fi(e.prefix);n.label().each((e=>{Dt(e.element,"for",r),Dt(t.element,"id",r)})),n["aria-descriptor"]().each((r=>{var n=fi(e.prefix);Dt(r.element,"id",n),Dt(t.element,"aria-describedby",n)}))}))}))]),i={getField:t=>cm(t,e,"field"),getLabel:t=>cm(t,e,"label")};return{uid:e.uid,dom:e.dom,components:t,behaviours:o,events:a,apis:i}},apis:{getField:(e,t)=>e.getField(t),getLabel:(e,t)=>e.getLabel(t)}}),hC=Object.freeze({__proto__:null,exhibit:(e,t)=>Pi({attributes:Vo([{key:t.tabAttr,value:"true"}])})}),pC=[Eo("tabAttr","data-alloy-tabstop")],vC=Rl({fields:pC,name:"tabstopping",active:hC}),fC=tinymce.util.Tools.resolve("tinymce.html.Entities"),bC=(e,t,r,n)=>{var o=yC(e,t,r,n);return gC.sketch(o)},yC=(e,t,r,n)=>({dom:wC(r),components:e.toArray().concat([t]),fieldBehaviours:Ml(n)}),wC=e=>({tag:"div",classes:["tox-form__group"].concat(e)}),xC=(e,t)=>gC.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[cs(t.translate(e))]}),CC=fi("form-component-change"),kC=fi("form-close"),SC=fi("form-cancel"),_C=fi("form-action"),OC=fi("form-submit"),EC=fi("form-block"),TC=fi("form-unblock"),AC=fi("form-tabchange"),MC=fi("form-resize"),NC=["input","textarea"],RC=e=>{var t=Je(e);return W(NC,t)},DC=(e,t)=>{var r=t.getRoot(e).getOr(e.element);Ki(r,t.invalidClass),t.notify.each((t=>{RC(e.element)&&Dt(e.element,"aria-invalid",!1),t.getContainer(e).each((e=>{ui(e,t.validHtml)})),t.onValid(e)}))},BC=(e,t,r,n)=>{var o=t.getRoot(e).getOr(e.element);Gi(o,t.invalidClass),t.notify.each((t=>{RC(e.element)&&Dt(e.element,"aria-invalid",!0),t.getContainer(e).each((e=>{ui(e,n)})),t.onInvalid(e,n)}))},LC=(e,t,r)=>t.validator.fold((()=>kx(gn.value(!0))),(t=>t.validate(e))),HC=(e,t,r)=>(t.notify.each((t=>{t.onValidate(e)})),LC(e,t).map((r=>e.getSystem().isConnected()?r.fold((r=>(BC(e,t,0,r),gn.error(r))),(r=>(DC(e,t),gn.value(r)))):gn.error("No longer in system")))),PC=Object.freeze({__proto__:null,markValid:DC,markInvalid:BC,query:LC,run:HC,isInvalid:(e,t)=>{var r=t.getRoot(e).getOr(e.element);return Yi(r,t.invalidClass)}}),IC=Object.freeze({__proto__:null,events:(e,t)=>e.validator.map((t=>Ka([Ja(t.onEvent,(t=>{HC(t,e).get(A)}))].concat(t.validateOnLoad?[ii((t=>{HC(t,e).get(_)}))]:[])))).getOr({})}),FC=[co("invalidClass"),Eo("getRoot",P.none),Oo("notify",[Eo("aria","alert"),Eo("getContainer",P.none),Eo("validHtml",""),Is("onValid"),Is("onInvalid"),Is("onValidate")]),Oo("validator",[co("validate"),Eo("onEvent","input"),Eo("validateOnLoad",!0)])],zC=Rl({fields:FC,name:"invalidating",active:IC,apis:PC,extra:{validation:e=>t=>{var r=Cu.getValue(t);return kx(e(r))}}}),VC=Object.freeze({__proto__:null,events:()=>Ka([Ya(ha(),H)]),exhibit:()=>Pi({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}),ZC=Rl({fields:[],name:"unselecting",active:VC}),jC=fi("color-input-change"),UC=fi("color-swatch-change"),WC=fi("color-picker-cancel"),qC=Ju({schema:[co("dom")],name:"label"}),$C=e=>Ju({name:e+"-edge",overrides:t=>t.model.manager.edgeActions[e].fold((()=>({})),(e=>({events:Ka([Qa(Ko(),((t,r,n)=>e(t,n)),[t]),Qa(Qo(),((t,r,n)=>e(t,n)),[t]),Qa(ea(),((t,r,n)=>{n.mouseIsDown.get()&&e(t,n)}),[t])])})))}),GC=$C("top-left"),KC=$C("top"),YC=$C("top-right"),XC=$C("right"),JC=$C("bottom-right"),QC=$C("bottom"),ek=$C("bottom-left"),tk=$C("left"),rk=Yu({name:"thumb",defaults:T({dom:{styles:{position:"absolute"}}}),overrides:e=>({events:Ka([ti(Ko(),e,"spectrum"),ti(Yo(),e,"spectrum"),ti(Xo(),e,"spectrum"),ti(Qo(),e,"spectrum"),ti(ea(),e,"spectrum"),ti(ra(),e,"spectrum")])})}),nk=Yu({schema:[so("mouseIsDown",(()=>Ho(!1)))],name:"spectrum",overrides:e=>{var t=e.model.manager,r=(r,n)=>t.getValueFromEvent(n).map((n=>t.setValueFrom(r,e,n)));return{behaviours:Ml([Gh.config({mode:"special",onLeft:r=>t.onLeft(r,e),onRight:r=>t.onRight(r,e),onUp:r=>t.onUp(r,e),onDown:r=>t.onDown(r,e)}),dp.config({})]),events:Ka([Ja(Ko(),r),Ja(Yo(),r),Ja(Qo(),r),Ja(ea(),((t,n)=>{e.mouseIsDown.get()&&r(t,n)}))])}}}),ok=[qC,tk,XC,KC,QC,GC,YC,ek,JC,rk,nk],ak=T("slider.change.value"),ik=e=>{var t=e.event.raw;if((e=>-1!==e.type.indexOf("touch"))(t)){var r=t;return void 0!==r.touches&&1===r.touches.length?P.some(r.touches[0]).map((e=>rr(e.clientX,e.clientY))):P.none()}var n=t;return void 0!==n.clientX?P.some(n).map((e=>rr(e.clientX,e.clientY))):P.none()},sk=e=>e.model.minX,lk=e=>e.model.minY,dk=e=>e.model.minX-1,ck=e=>e.model.minY-1,uk=e=>e.model.maxX,mk=e=>e.model.maxY,gk=e=>e.model.maxX+1,hk=e=>e.model.maxY+1,pk=(e,t,r)=>t(e)-r(e),vk=e=>pk(e,uk,sk),fk=e=>pk(e,mk,lk),bk=e=>vk(e)/2,yk=e=>fk(e)/2,wk=e=>e.stepSize,xk=e=>e.snapToGrid,Ck=e=>e.snapStart,kk=e=>e.rounded,Sk=(e,t)=>void 0!==e[t+"-edge"],_k=e=>Sk(e,"left"),Ok=e=>Sk(e,"right"),Ek=e=>Sk(e,"top"),Tk=e=>Sk(e,"bottom"),Ak=e=>e.model.value.get(),Mk=(e,t)=>({x:e,y:t}),Nk=(e,t)=>{Ua(e,ak(),{value:t})},Rk=(e,t,r,n)=>e<t?e:e>r?r:e===t?t-1:Math.max(t,e-n),Dk=(e,t,r,n)=>e>r?e:e<t?t:e===r?r+1:Math.min(r,e+n),Bk=(e,t,r)=>Math.max(t,Math.min(r,e)),Lk=e=>{var{min:t,max:r,range:n,value:o,step:a,snap:i,snapStart:s,rounded:l,hasMinEdge:d,hasMaxEdge:c,minBound:u,maxBound:m,screenRange:g}=e,h=d?t-1:t,p=c?r+1:r;if(o<u)return h;if(o>m)return p;var v=((e,t,r)=>Math.min(r,Math.max(e,t))-t)(o,u,m),f=Bk(v/g*n+t,h,p);return i&&f>=t&&f<=r?((e,t,r,n,o)=>o.fold((()=>{var o=e-t,a=Math.round(o/n)*n;return Bk(t+a,t-1,r+1)}),(t=>{var o=(e-t)%n,a=Math.round(o/n),i=Math.floor((e-t)/n),s=Math.floor((r-t)/n),l=t+Math.min(s,i+a)*n;return Math.max(t,l)})))(f,t,r,a,s):l?Math.round(f):f},Hk=e=>{var{min:t,max:r,range:n,value:o,hasMinEdge:a,hasMaxEdge:i,maxBound:s,maxOffset:l,centerMinEdge:d,centerMaxEdge:c}=e;return o<t?a?0:d:o>r?i?s:c:(o-t)/n*l},Pk="top",Ik="right",Fk="bottom",zk="left",Vk=e=>e.element.dom.getBoundingClientRect(),Zk=(e,t)=>e[t],jk=e=>{var t=Vk(e);return Zk(t,zk)},Uk=e=>{var t=Vk(e);return Zk(t,Ik)},Wk=e=>{var t=Vk(e);return Zk(t,Pk)},qk=e=>{var t=Vk(e);return Zk(t,Fk)},$k=e=>{var t=Vk(e);return Zk(t,"width")},Gk=e=>{var t=Vk(e);return Zk(t,"height")},Kk=(e,t,r)=>(e+t)/2-r,Yk=(e,t)=>{var r=Vk(e),n=Vk(t),o=Zk(r,zk),a=Zk(r,Ik),i=Zk(n,zk);return Kk(o,a,i)},Xk=(e,t)=>{var r=Vk(e),n=Vk(t),o=Zk(r,Pk),a=Zk(r,Fk),i=Zk(n,Pk);return Kk(o,a,i)},Jk=(e,t)=>{Ua(e,ak(),{value:t})},Qk=(e,t,r)=>{var n={min:sk(t),max:uk(t),range:vk(t),value:r,step:wk(t),snap:xk(t),snapStart:Ck(t),rounded:kk(t),hasMinEdge:_k(t),hasMaxEdge:Ok(t),minBound:jk(e),maxBound:Uk(e),screenRange:$k(e)};return Lk(n)},eS=e=>(t,r)=>((e,t,r)=>{var n=(e>0?Dk:Rk)(Ak(r),sk(r),uk(r),wk(r));return Jk(t,n),P.some(n)})(e,t,r).map(H),tS=(e,t,r,n,o,a)=>{var i=((e,t,r,n,o)=>{var a=$k(e),i=n.bind((t=>P.some(Yk(t,e)))).getOr(0),s=o.bind((t=>P.some(Yk(t,e)))).getOr(a),l={min:sk(t),max:uk(t),range:vk(t),value:r,hasMinEdge:_k(t),hasMaxEdge:Ok(t),minBound:jk(e),minOffset:0,maxBound:Uk(e),maxOffset:a,centerMinEdge:i,centerMaxEdge:s};return Hk(l)})(t,a,r,n,o);return jk(t)-jk(e)+i},rS=eS(-1),nS=eS(1),oS=P.none,aS=P.none,iS={"top-left":P.none(),top:P.none(),"top-right":P.none(),right:P.some(((e,t)=>{Nk(e,gk(t))})),"bottom-right":P.none(),bottom:P.none(),"bottom-left":P.none(),left:P.some(((e,t)=>{Nk(e,dk(t))}))},sS=Object.freeze({__proto__:null,setValueFrom:(e,t,r)=>{var n=Qk(e,t,r);return Jk(e,n),n},setToMin:(e,t)=>{var r=sk(t);Jk(e,r)},setToMax:(e,t)=>{var r=uk(t);Jk(e,r)},findValueOfOffset:Qk,getValueFromEvent:e=>ik(e).map((e=>e.left)),findPositionOfValue:tS,setPositionFromValue:(e,t,r,n)=>{var o=Ak(r),a=tS(e,n.getSpectrum(e),o,n.getLeftEdge(e),n.getRightEdge(e),r),i=sr(t.element)/2;Vt(t.element,"left",a-i+"px")},onLeft:rS,onRight:nS,onUp:oS,onDown:aS,edgeActions:iS}),lS=(e,t)=>{Ua(e,ak(),{value:t})},dS=(e,t,r)=>{var n={min:lk(t),max:mk(t),range:fk(t),value:r,step:wk(t),snap:xk(t),snapStart:Ck(t),rounded:kk(t),hasMinEdge:Ek(t),hasMaxEdge:Tk(t),minBound:Wk(e),maxBound:qk(e),screenRange:Gk(e)};return Lk(n)},cS=e=>(t,r)=>((e,t,r)=>{var n=(e>0?Dk:Rk)(Ak(r),lk(r),mk(r),wk(r));return lS(t,n),P.some(n)})(e,t,r).map(H),uS=(e,t,r,n,o,a)=>{var i=((e,t,r,n,o)=>{var a=Gk(e),i=n.bind((t=>P.some(Xk(t,e)))).getOr(0),s=o.bind((t=>P.some(Xk(t,e)))).getOr(a),l={min:lk(t),max:mk(t),range:fk(t),value:r,hasMinEdge:Ek(t),hasMaxEdge:Tk(t),minBound:Wk(e),minOffset:0,maxBound:qk(e),maxOffset:a,centerMinEdge:i,centerMaxEdge:s};return Hk(l)})(t,a,r,n,o);return Wk(t)-Wk(e)+i},mS=P.none,gS=P.none,hS=cS(-1),pS=cS(1),vS={"top-left":P.none(),top:P.some(((e,t)=>{Nk(e,ck(t))})),"top-right":P.none(),right:P.none(),"bottom-right":P.none(),bottom:P.some(((e,t)=>{Nk(e,hk(t))})),"bottom-left":P.none(),left:P.none()},fS=Object.freeze({__proto__:null,setValueFrom:(e,t,r)=>{var n=dS(e,t,r);return lS(e,n),n},setToMin:(e,t)=>{var r=lk(t);lS(e,r)},setToMax:(e,t)=>{var r=mk(t);lS(e,r)},findValueOfOffset:dS,getValueFromEvent:e=>ik(e).map((e=>e.top)),findPositionOfValue:uS,setPositionFromValue:(e,t,r,n)=>{var o=Ak(r),a=uS(e,n.getSpectrum(e),o,n.getTopEdge(e),n.getBottomEdge(e),r),i=Qt(t.element)/2;Vt(t.element,"top",a-i+"px")},onLeft:mS,onRight:gS,onUp:hS,onDown:pS,edgeActions:vS}),bS=(e,t)=>{Ua(e,ak(),{value:t})},yS=(e,t)=>({x:e,y:t}),wS=(e,t)=>(r,n)=>((e,t,r,n)=>{var o=e>0?Dk:Rk,a=t?Ak(n).x:o(Ak(n).x,sk(n),uk(n),wk(n)),i=t?o(Ak(n).y,lk(n),mk(n),wk(n)):Ak(n).y;return bS(r,yS(a,i)),P.some(a)})(e,t,r,n).map(H),xS=wS(-1,!1),CS=wS(1,!1),kS=wS(-1,!0),SS=wS(1,!0),_S={"top-left":P.some(((e,t)=>{Nk(e,Mk(dk(t),ck(t)))})),top:P.some(((e,t)=>{Nk(e,Mk(bk(t),ck(t)))})),"top-right":P.some(((e,t)=>{Nk(e,Mk(gk(t),ck(t)))})),right:P.some(((e,t)=>{Nk(e,Mk(gk(t),yk(t)))})),"bottom-right":P.some(((e,t)=>{Nk(e,Mk(gk(t),hk(t)))})),bottom:P.some(((e,t)=>{Nk(e,Mk(bk(t),hk(t)))})),"bottom-left":P.some(((e,t)=>{Nk(e,Mk(dk(t),hk(t)))})),left:P.some(((e,t)=>{Nk(e,Mk(dk(t),yk(t)))}))},OS=Object.freeze({__proto__:null,setValueFrom:(e,t,r)=>{var n=Qk(e,t,r.left),o=dS(e,t,r.top),a=yS(n,o);return bS(e,a),a},setToMin:(e,t)=>{var r=sk(t),n=lk(t);bS(e,yS(r,n))},setToMax:(e,t)=>{var r=uk(t),n=mk(t);bS(e,yS(r,n))},getValueFromEvent:e=>ik(e),setPositionFromValue:(e,t,r,n)=>{var o=Ak(r),a=tS(e,n.getSpectrum(e),o.x,n.getLeftEdge(e),n.getRightEdge(e),r),i=uS(e,n.getSpectrum(e),o.y,n.getTopEdge(e),n.getBottomEdge(e),r),s=sr(t.element)/2,l=Qt(t.element)/2;Vt(t.element,"left",a-s+"px"),Vt(t.element,"top",i-l+"px")},onLeft:xS,onRight:CS,onUp:kS,onDown:SS,edgeActions:_S}),ES=[Eo("stepSize",1),Eo("onChange",_),Eo("onChoose",_),Eo("onInit",_),Eo("onDragStart",_),Eo("onDragEnd",_),Eo("snapToGrid",!1),Eo("rounded",!0),yo("snapStart"),uo("model",oo("mode",{x:[Eo("minX",0),Eo("maxX",100),so("value",(e=>Ho(e.mode.minX))),co("getInitialValue"),Zs("manager",sS)],y:[Eo("minY",0),Eo("maxY",100),so("value",(e=>Ho(e.mode.minY))),co("getInitialValue"),Zs("manager",fS)],xy:[Eo("minX",0),Eo("maxX",100),Eo("minY",0),Eo("maxY",100),so("value",(e=>Ho({x:e.mode.minX,y:e.mode.minY}))),co("getInitialValue"),Zs("manager",OS)]})),ku("sliderBehaviours",[Gh,Cu]),so("mouseIsDown",(()=>Ho(!1)))],TS=_m({name:"Slider",configFields:ES,partFields:ok,factory:(e,t,r,n)=>{var o=t=>um(t,e,"thumb"),a=t=>um(t,e,"spectrum"),i=t=>cm(t,e,"left-edge"),s=t=>cm(t,e,"right-edge"),l=t=>cm(t,e,"top-edge"),d=t=>cm(t,e,"bottom-edge"),c=e.model,u=c.manager,m=(t,r)=>{u.setPositionFromValue(t,r,e,{getLeftEdge:i,getRightEdge:s,getTopEdge:l,getBottomEdge:d,getSpectrum:a})},g=(e,t)=>{c.value.set(t);var r=o(e);m(e,r)},h=t=>{var r=e.mouseIsDown.get();e.mouseIsDown.set(!1),r&&cm(t,e,"thumb").each((r=>{var n=c.value.get();e.onChoose(t,r,n)}))},p=(t,r)=>{r.stop(),e.mouseIsDown.set(!0),e.onDragStart(t,o(t))},v=(t,r)=>{r.stop(),e.onDragEnd(t,o(t)),h(t)};return{uid:e.uid,dom:e.dom,components:t,behaviours:_u(e.sliderBehaviours,[Gh.config({mode:"special",focusIn:t=>cm(t,e,"spectrum").map(Gh.focusIn).map(H)}),Cu.config({store:{mode:"manual",getValue:e=>c.value.get(),setValue:g}}),Hl.config({channels:{[au()]:{onReceive:h}}})]),events:Ka([Ja(ak(),((t,r)=>{((t,r)=>{g(t,r);var n=o(t);e.onChange(t,n,r),P.some(!0)})(t,r.event.value)})),ii(((t,r)=>{var n=c.getInitialValue();c.value.set(n);var i=o(t);m(t,i);var s=a(t);e.onInit(t,i,s,c.value.get())})),Ja(Ko(),p),Ja(Xo(),v),Ja(Qo(),p),Ja(ra(),v)]),apis:{resetToMin:t=>{u.setToMin(t,e)},resetToMax:t=>{u.setToMax(t,e)},setValue:g,refresh:m},domModification:{styles:{position:"relative"}}}},apis:{setValue:(e,t,r)=>{e.setValue(t,r)},resetToMin:(e,t)=>{e.resetToMin(t)},resetToMax:(e,t)=>{e.resetToMax(t)},refresh:(e,t)=>{e.refresh(t)}}}),AS=fi("rgb-hex-update"),MS=fi("slider-update"),NS=fi("palette-update"),RS="form",DS=[ku("formBehaviours",[Cu])],BS=e=>"<alloy.field."+e+">",LS=(e,t)=>({uid:e.uid,dom:e.dom,components:t,behaviours:_u(e.formBehaviours,[Cu.config({store:{mode:"manual",getValue:t=>{var r=gm(t,e);return ye(r,((e,t)=>e().bind((e=>{var r,n;return r=Am.getCurrent(e),n=new Error("Cannot find a current component to extract the value from for form part '".concat(t,"': ")+gi(e.element)),r.fold((()=>gn.error(n)),gn.value)})).map(Cu.getValue)))},setValue:(t,r)=>{be(r,((r,n)=>{cm(t,e,n).each((e=>{Am.getCurrent(e).each((e=>{Cu.setValue(e,r)}))}))}))}}})]),apis:{getField:(t,r)=>cm(t,e,r).bind(Am.getCurrent)}}),HS={getField:Di(((e,t,r)=>e.getField(t,r))),sketch:e=>{var t=(()=>{var e=[];return{field:(t,r)=>(e.push(t),am(RS,BS(t),r)),record:T(e)}})(),r=e(t),n=t.record(),o=K(n,(e=>Yu({name:e,pname:BS(e)})));return wm(RS,DS,o,LS,r)}},PS=fi("valid-input"),IS=fi("invalid-input"),FS=fi("validating-input"),zS="colorcustom.rgb.",VS=(e,t,r,n)=>{var o=(r,n)=>zC.config({invalidClass:t("invalid"),notify:{onValidate:e=>{Ua(e,FS,{type:r})},onValid:e=>{Ua(e,PS,{type:r,value:Cu.getValue(e)})},onInvalid:e=>{Ua(e,IS,{type:r,value:Cu.getValue(e)})}},validator:{validate:t=>{var r=Cu.getValue(t),o=n(r)?gn.value(!0):gn.error(e("aria.input.invalid"));return kx(o)},validateOnLoad:!1}}),a=(r,n,a,i,s)=>{var l=e(zS+"range"),c=gC.parts.label({dom:{tag:"label",attributes:{"aria-label":i}},components:[cs(a)]}),u=gC.parts.field({data:s,factory:Uf,inputAttributes:d({type:"text"},"hex"===n?{"aria-live":"polite"}:{}),inputClasses:[t("textfield")],inputBehaviours:Ml([o(n,r),vC.config({})]),onSetValue:e=>{zC.isInvalid(e)&&zC.run(e).get(_)}}),m=[c,u],g="hex"!==n?[gC.parts["aria-descriptor"]({text:l})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:m.concat(g)}},i=(e,t)=>{var r=t.red,n=t.green,o=t.blue;Cu.setValue(e,{red:r,green:n,blue:o})},s=Jp({dom:{tag:"div",classes:[t("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),l=(e,t)=>{s.getOpt(e).each((e=>{Vt(e.element,"background-color","#"+t.value)}))},c=Sm({factory:()=>{var o={red:Ho(P.some(255)),green:Ho(P.some(255)),blue:Ho(P.some(255)),hex:Ho(P.some("ffffff"))},d=e=>o[e].get(),c=(e,t)=>{o[e].set(t)},u=e=>{var t=e.red,r=e.green,n=e.blue;c("red",P.some(t)),c("green",P.some(r)),c("blue",P.some(n))},m=(e,t)=>{var r=t.event;"hex"!==r.type?c(r.type,P.none()):n(e)},g=(e,t)=>{var n=t.event;(e=>"hex"===e.type)(n)?((e,t)=>{r(e);var n=Qy(t);c("hex",P.some(n.value));var o=hw(n);i(e,o),u(o),Ua(e,AS,{hex:n}),l(e,n)})(e,n.value):((e,t,r)=>{var n=parseInt(r,10);c(t,P.some(n)),d("red").bind((e=>d("green").bind((t=>d("blue").map((r=>uw(e,t,r,1))))))).each((t=>{var r=((e,t)=>{var r=aw(t);return HS.getField(e,"hex").each((t=>{dp.isFocused(t)||Cu.setValue(e,{hex:r.value})})),r})(e,t);Ua(e,AS,{hex:r}),l(e,r)}))})(e,n.type,n.value)},h=t=>({label:e(zS+t+".label"),description:e(zS+t+".description")}),p=h("red"),v=h("green"),f=h("blue"),b=h("hex");return kn(HS.sketch((r=>({dom:{tag:"form",classes:[t("rgb-form")],attributes:{"aria-label":e("aria.color.picker")}},components:[r.field("red",gC.sketch(a(mw,"red",p.label,p.description,255))),r.field("green",gC.sketch(a(mw,"green",v.label,v.description,255))),r.field("blue",gC.sketch(a(mw,"blue",f.label,f.description,255))),r.field("hex",gC.sketch(a(rw,"hex",b.label,b.description,"ffffff"))),s.asSpec()],formBehaviours:Ml([zC.config({invalidClass:t("form-invalid")}),op("rgb-form-events",[Ja(PS,g),Ja(IS,m),Ja(FS,m)])])}))),{apis:{updateHex:(e,t)=>{Cu.setValue(e,{hex:t.value}),((e,t)=>{var r=hw(t);i(e,r),u(r)})(e,t),l(e,t)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(e,t,r)=>{e.updateHex(t,r)}},extraApis:{}});return c},ZS=(e,t)=>{var r=Sm({name:"ColourPicker",configFields:[co("dom"),Eo("onValidHex",_),Eo("onInvalidHex",_)],factory:r=>{var n,o=VS(e,t,r.onValidHex,r.onInvalidHex),a=((e,t)=>{var r=TS.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[t("sv-palette-spectrum")]}}),n=TS.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette-thumb")],innerHtml:"<div class=".concat(t("sv-palette-inner-thumb"),' role="presentation"></div>')}}),o=(e,t)=>{var{width:r,height:n}=e,o=e.getContext("2d");if(null!==o){o.fillStyle=t,o.fillRect(0,0,r,n);var a=o.createLinearGradient(0,0,r,0);a.addColorStop(0,"rgba(255,255,255,1)"),a.addColorStop(1,"rgba(255,255,255,0)"),o.fillStyle=a,o.fillRect(0,0,r,n);var i=o.createLinearGradient(0,0,0,n);i.addColorStop(0,"rgba(0,0,0,0)"),i.addColorStop(1,"rgba(0,0,0,1)"),o.fillStyle=i,o.fillRect(0,0,r,n)}};return Sm({factory:e=>{var a=T({x:0,y:0}),i=Ml([Am.config({find:P.some}),dp.config({})]);return TS.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette")]},model:{mode:"xy",getInitialValue:a},rounded:!1,components:[r,n],onChange:(e,t,r)=>{Ua(e,NS,{value:r})},onInit:(e,t,r,n)=>{o(r.element.dom,fw(bw))},sliderBehaviours:i})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(e,t,r)=>{((e,t)=>{var r=e.components()[0].element.dom,n=Rw(t,100,100),a=gw(n);o(r,fw(a))})(t,r)},setThumb:(e,t,r)=>{((e,t)=>{var r=Dw(hw(t));TS.setValue(e,{x:r.saturation,y:100-r.value})})(t,r)}},extraApis:{}})})(0,t),i={paletteRgba:Ho(bw),paletteHue:Ho(0)},s=Jp(((e,t)=>{var r=TS.parts.spectrum({dom:{tag:"div",classes:[t("hue-slider-spectrum")],attributes:{role:"presentation"}}}),n=TS.parts.thumb({dom:{tag:"div",classes:[t("hue-slider-thumb")],attributes:{role:"presentation"}}});return TS.sketch({dom:{tag:"div",classes:[t("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:T(0)},components:[r,n],sliderBehaviours:Ml([dp.config({})]),onChange:(e,t,r)=>{Ua(e,MS,{value:r})}})})(0,t)),l=Jp(a.sketch({})),d=Jp(o.sketch({})),c=(e,t,r)=>{l.getOpt(e).each((e=>{a.setHue(e,r)}))},u=(e,t)=>{d.getOpt(e).each((e=>{o.updateHex(e,t)}))},m=(e,t,r,n)=>{((e,t)=>{var r=hw(e);i.paletteRgba.set(r),i.paletteHue.set(t)})(t,r),Y(n,(n=>{n(e,t,r)}))};return{uid:r.uid,dom:r.dom,components:[l.asSpec(),s.asSpec(),d.asSpec()],behaviours:Ml([op("colour-picker-events",[Ja(AS,(n=[c,(e,t,r)=>{s.getOpt(e).each((e=>{TS.setValue(e,(e=>100-e/360*100)(r))}))},(e,t)=>{l.getOpt(e).each((e=>{a.setThumb(e,t)}))}],(e,t)=>{var r=t.event.hex,o=(e=>Dw(hw(e)))(r);m(e,r,o.hue,n)})),Ja(NS,(()=>{var e=[u];return(t,r)=>{var n=r.event.value,o=i.paletteHue.get(),a=Rw(o,n.x,100-n.y),s=Bw(a);m(t,s,o,e)}})()),Ja(MS,(()=>{var e=[c,u];return(t,r)=>{var n=(e=>(100-e)/100*360)(r.event.value),o=i.paletteRgba.get(),a=Dw(o),s=Rw(n,a.saturation,a.value),l=Bw(s);m(t,l,n,e)}})())]),Am.config({find:e=>d.getOpt(e)}),Gh.config({mode:"acyclic"})])}}});return r},jS=()=>Am.config({find:P.some}),US=e=>Am.config({find:e.getOpt}),WS=e=>Am.config({find:t=>bt(t.element,e).bind((e=>t.getSystem().getByDom(e).toOptional()))}),qS=In([Eo("preprocess",A),Eo("postprocess",A)]),$S=(e,t,r)=>Cu.config({store:d(d({mode:"manual"},e.map((e=>({initialValue:e}))).getOr({})),{},{getValue:t,setValue:r})}),GS=(e,t,r)=>$S(e,(e=>t(e.element)),((e,t)=>r(e.element,t))),KS=e=>Cu.config({store:{mode:"memory",initialValue:e}}),YS={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},XS=tinymce.util.Tools.resolve("tinymce.Resource"),JS=tinymce.util.Tools.resolve("tinymce.util.Tools"),QS=(e,t)=>{var r=null,n=()=>{f(r)||(clearTimeout(r),r=null)};return{cancel:n,throttle:function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];n(),r=setTimeout((()=>{r=null,e.apply(null,a)}),t)}}},e_=fi("alloy-fake-before-tabstop"),t_=fi("alloy-fake-after-tabstop"),r_=e=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:e},behaviours:Ml([dp.config({ignore:!0}),vC.config({})])}),n_=(e,t)=>({dom:{tag:"div",classes:["tox-navobj",...e.getOr([])]},components:[r_([e_]),t,r_([t_])],behaviours:Ml([WS(1)])}),o_=(e,t)=>{Ua(e,ia(),{raw:{which:9,shiftKey:t}})},a_=(e,t)=>{var r=t.element;Yi(r,e_)?o_(e,!0):Yi(r,t_)&&o_(e,!1)},i_=e=>Qx(e,["."+e_,"."+t_].join(","),L),s_=fi("update-dialog"),l_=fi("update-title"),d_=fi("update-body"),c_=fi("update-footer"),u_=fi("body-send-message"),m_=fi("dialog-focus-shifted"),g_=Fr().browser,h_=g_.isSafari(),p_=g_.isFirefox(),v_=h_||p_,f_=g_.isChromium(),b_=e=>{var{scrollTop:t,scrollHeight:r,clientHeight:n}=e;return Math.ceil(t)+n>=r},y_=(e,t)=>e.scrollTo(0,"bottom"===t?99999999:t),w_=(e,t,r)=>{var n=e.dom;P.from(n.contentDocument).fold(r,(e=>{var r=0,o=((e,t)=>{var r=e.body;return P.from(!/^<!DOCTYPE (html|HTML)/.test(t)&&(!f_&&!h_||x(r)&&(0!==r.scrollTop||Math.abs(r.scrollHeight-r.clientHeight)>1))?r:e.documentElement)})(e,t).map((e=>(r=e.scrollTop,e))).forall(b_),a=()=>{var e=n.contentWindow;x(e)&&(o?y_(e,"bottom"):!o&&v_&&0!==r&&y_(e,r))};h_&&n.addEventListener("load",a,{once:!0}),e.open(),e.write(t),e.close(),h_||a()}))},x_=Be(v_,h_?500:200),C_=x_.map((e=>{return t=w_,r=e,n=null,o=null,{cancel:()=>{f(n)||(clearTimeout(n),n=null,o=null)},throttle:function(){for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];o=a,f(n)&&(n=setTimeout((()=>{var e=o;n=null,o=null,t.apply(null,e)}),r))}};var t,r,n,o})),k_=fi("toolbar.button.execute"),S_=fi("common-button-display-events"),__={[xa()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[Ra()]:["toolbar-button-events",S_],[Qo()]:["focusing","alloy.base.behaviour",S_]},O_=e=>Vt(e.element,"width",Ut(e.element,"width")),E_=(e,t,r)=>lv(e,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:r},t),T_=(e,t)=>E_(e,t,[]),A_=(e,t)=>E_(e,t,[np.config({})]),M_=(e,t,r)=>({dom:{tag:"span",classes:["".concat(t,"__select-label")]},components:[cs(r.translate(e))],behaviours:Ml([np.config({})])}),N_=fi("update-menu-text"),R_=fi("update-menu-icon"),D_=(e,t,r)=>{var n=Ho(_),o=e.text.map((e=>Jp(M_(e,t,r.providers)))),a=e.icon.map((e=>Jp(A_(e,r.providers.icons)))),i=(e,t)=>{var r=Cu.getValue(e);return dp.focus(r),Ua(r,"keydown",{raw:t.event.raw}),Px.close(r),P.some(!0)},s=e.role.fold((()=>({})),(e=>({role:e}))),l=e.tooltip.fold((()=>({})),(e=>{var t=r.providers.translate(e);return{title:t,"aria-label":t}})),c=lv("chevron-down",{tag:"div",classes:["".concat(t,"__select-chevron")]},r.providers.icons),u=fi("common-button-display-events"),m=Jp(Px.sketch(d(d(d({},e.uid?{uid:e.uid}:{}),s),{},{dom:{tag:"button",classes:[t,"".concat(t,"--select")].concat(K(e.classes,(e=>"".concat(t,"--").concat(e)))),attributes:d({},l)},components:Py([a.map((e=>e.asSpec())),o.map((e=>e.asSpec())),P.some(c)]),matchWidth:!0,useMinWidth:!0,onOpen:(t,r,n)=>{e.searchable&&(e=>{Kf(e).each((e=>dp.focus(e)))})(n)},dropdownBehaviours:Ml([...e.dropdownBehaviours,Ay((()=>e.disabled||r.providers.isDisabled())),Ty(),ZC.config({}),np.config({}),op("dropdown-events",[Dy(e,n),By(e,n)]),op(u,[ii(((e,t)=>O_(e)))]),op("menubutton-update-display-text",[Ja(N_,((e,t)=>{o.bind((t=>t.getOpt(e))).each((e=>{np.set(e,[cs(r.providers.translate(t.event.text))])}))})),Ja(R_,((e,t)=>{a.bind((t=>t.getOpt(e))).each((e=>{np.set(e,[A_(t.event.icon,r.providers.icons)])}))}))])]),eventOrder:kn(__,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Ra()]:["toolbar-button-events","dropdown-events",u]}),sandboxBehaviours:Ml([Gh.config({mode:"special",onLeft:i,onRight:i}),op("dropdown-sandbox-events",[Ja(Wf,((e,t)=>{(e=>{var t=Cu.getValue(e),r=Gf(e).map(Yf);Px.refetch(t).get((()=>{var e=fx.getCoupled(t,"sandbox");r.each((t=>Gf(e).each((e=>((e,t)=>{Cu.setValue(e,t.fetchPattern),e.element.dom.selectionStart=t.selectionStart,e.element.dom.selectionEnd=t.selectionEnd})(e,t)))))}))})(e),t.stop()})),Ja(qf,((e,t)=>{((e,t)=>{Ix(e).each((r=>{((e,t,r,n)=>{var o=d(d({},n),{},{target:t});e.getSystem().triggerEvent(r,t,o)})(e,r.element,t.event.eventType,t.event.interactionEvent)}))})(e,t),t.stop()}))])]),lazySink:r.getSink,toggleClass:"".concat(t,"--active"),parts:{menu:d(d({},Ff(0,e.columns,e.presets)),{},{fakeFocus:e.searchable,onHighlightItem:Fx,onCollapseMenu:(e,t,r)=>{Qm.getHighlighted(r).each((t=>{Fx(e,r,t)}))},onDehighlightItem:zx})},getAnchorOverrides:()=>({maxHeightFunction:(e,t)=>{vd()(e,t-10)}}),fetch:t=>Cx(N(e.fetch,t))})));return m.asSpec()},B_=e=>"separator"===e.type,L_={type:"separator"},H_=(e,t)=>{var r=((e,t)=>{var r=ee(e,((e,r)=>(e=>g(e))(r)?""===r?e:"|"===r?e.length>0&&!B_(e[e.length-1])?e.concat([L_]):e:Te(t,r.toLowerCase())?e.concat([t[r.toLowerCase()]]):e:e.concat([r])),[]);return r.length>0&&B_(r[r.length-1])&&r.pop(),r})(g(e)?e.split(" "):e,t);return Q(r,((e,r)=>{if((e=>Te(e,"getSubmenuItems"))(r)){var n=(e=>{var t=Ee(e,"value").getOrThunk((()=>fi("generated-menu-item")));return kn({value:t},e)})(r),o=((e,t)=>{var r=e.getSubmenuItems(),n=H_(r,t);return{item:e,menus:kn(n.menus,{[e.value]:n.items}),expansions:kn(n.expansions,{[e.value]:e.value})}})(n,t);return{menus:kn(e.menus,o.menus),items:[o.item,...e.items],expansions:kn(e.expansions,o.expansions)}}return d(d({},e),{},{items:[r,...e.items]})}),{menus:{},expansions:{},items:[]})},P_=(e,t,r,n)=>{var o=fi("primary-menu"),a=H_(e,r.shared.providers.menuItems());if(0===a.items.length)return P.none();var i=(e=>e.search.fold((()=>({searchMode:"no-search"})),(e=>({searchMode:"search-with-field",placeholder:e.placeholder}))))(n),s=Wx(o,a.items,t,r,n.isHorizontalMenu,i),l=(e=>e.search.fold((()=>({searchMode:"no-search"})),(e=>({searchMode:"search-with-results"}))))(n),d=ye(a.menus,((e,n)=>Wx(n,e,t,r,!1,l))),c=kn(d,zo(o,s));return P.from(Gp.tieredData(o,c,a.expansions))},I_=e=>!Te(e,"items"),F_="data-value",z_=(e,t,r,n)=>K(r,(r=>I_(r)?{type:"togglemenuitem",text:r.text,value:r.value,active:r.value===n,onAction:()=>{Cu.setValue(e,r.value),Ua(e,CC,{name:t}),dp.focus(e)}}:{type:"nestedmenuitem",text:r.text,getSubmenuItems:()=>z_(e,t,r.items,n)})),V_=(e,t)=>pe(e,(e=>I_(e)?Be(e.value===t,e):V_(e.items,t))),Z_=Sm({name:"HtmlSelect",configFields:[co("options"),ku("selectBehaviours",[dp,Cu]),Eo("selectClasses",[]),Eo("selectAttributes",{}),yo("data")],factory:(e,t)=>{var r=K(e.options,(e=>({dom:{tag:"option",value:e.value,innerHtml:e.text}}))),n=e.data.map((e=>zo("initialValue",e))).getOr({});return{uid:e.uid,dom:{tag:"select",classes:e.selectClasses,attributes:e.selectAttributes},components:r,behaviours:_u(e.selectBehaviours,[dp.config({}),Cu.config({store:d({mode:"manual",getValue:e=>es(e.element),setValue:(t,r)=>{var n=me(e.options);te(e.options,(e=>e.value===r)).isSome()?ts(t.element,r):-1===t.element.dom.selectedIndex&&""===r&&n.each((e=>ts(t.element,e.value)))}},n)})])}}}),j_=T([Eo("field1Name","field1"),Eo("field2Name","field2"),zs("onLockedChange"),Hs(["lockClass"]),Eo("locked",!1),Ou("coupledFieldBehaviours",[Am,Cu])]),U_=(e,t)=>Yu({factory:gC,name:e,overrides:e=>({fieldBehaviours:Ml([op("coupled-input-behaviour",[Ja(la(),(r=>{((e,t,r)=>cm(e,t,r).bind(Am.getCurrent))(r,e,t).each((t=>{cm(r,e,"lock").each((n=>{fp.isOn(n)&&e.onLockedChange(r,t,n)}))}))}))])])})}),W_=T([U_("field1","field2"),U_("field2","field1"),Yu({factory:Xp,schema:[co("dom")],name:"lock",overrides:e=>({buttonBehaviours:Ml([fp.config({selected:e.locked,toggleClass:e.markers.lockClass,aria:{mode:"pressed"}})])})})]),q_=_m({name:"FormCoupledInputs",configFields:j_(),partFields:W_(),factory:(e,t,r,n)=>({uid:e.uid,dom:e.dom,components:t,behaviours:Eu(e.coupledFieldBehaviours,[Am.config({find:P.some}),Cu.config({store:{mode:"manual",getValue:t=>{var r=pm(t,e,["field1","field2"]);return{[e.field1Name]:Cu.getValue(r.field1()),[e.field2Name]:Cu.getValue(r.field2())}},setValue:(t,r)=>{var n=pm(t,e,["field1","field2"]);Ae(r,e.field1Name)&&Cu.setValue(n.field1(),r[e.field1Name]),Ae(r,e.field2Name)&&Cu.setValue(n.field2(),r[e.field2Name])}}})]),apis:{getField1:t=>cm(t,e,"field1"),getField2:t=>cm(t,e,"field2"),getLock:t=>cm(t,e,"lock")}}),apis:{getField1:(e,t)=>e.getField1(t),getField2:(e,t)=>e.getField2(t),getLock:(e,t)=>e.getLock(t)}}),$_=e=>{var t=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(e);if(null!==t){var r=parseFloat(t[1]),n=t[2];return gn.value({value:r,unit:n})}return gn.error(e)},G_=(e,t)=>{var r={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},n=e=>Te(r,e);return e.unit===t?P.some(e.value):n(e.unit)&&n(t)?r[e.unit]===r[t]?P.some(e.value):P.some(e.value/r[e.unit]*r[t]):P.none()},K_=e=>P.none(),Y_=(e,t)=>{var r=e.label.map((e=>xC(e,t))),n=[jm.config({disabled:()=>e.disabled||t.isDisabled()}),Ty(),Gh.config({mode:"execution",useEnter:!0!==e.multiline,useControlEnter:!0===e.multiline,execute:e=>(ja(e,OC),P.some(!0))}),op("textfield-change",[Ja(la(),((t,r)=>{Ua(t,CC,{name:e.name})})),Ja(ya(),((t,r)=>{Ua(t,CC,{name:e.name})}))]),vC.config({})],o=e.validation.map((e=>zC.config({getRoot:e=>pt(e.element),invalidClass:"tox-invalid",validator:{validate:t=>{var r=Cu.getValue(t),n=e.validator(r);return kx(!0===n?gn.value(r):gn.error(n))},validateOnLoad:e.validateOnLoad}}))).toArray(),a=e.placeholder.fold(T({}),(e=>({placeholder:t.translate(e)}))),i=e.inputMode.fold(T({}),(e=>({inputmode:e}))),s=d(d({},a),i),l=gC.parts.field(d(d({tag:!0===e.multiline?"textarea":"input"},e.data.map((e=>({data:e}))).getOr({})),{},{inputAttributes:s,inputClasses:[e.classname],inputBehaviours:Ml(ne([n,o])),selectOnFocus:!1,factory:Uf})),c=e.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[l]}:l,u=(e.flex?["tox-form__group--stretched"]:[]).concat(e.maximized?["tox-form-group--maximize"]:[]),m=[jm.config({disabled:()=>e.disabled||t.isDisabled(),onDisabled:e=>{gC.getField(e).each(jm.disable)},onEnabled:e=>{gC.getField(e).each(jm.enable)}}),Ty()];return bC(r,c,u,m)},X_=(e,t)=>t.getAnimationRoot.fold((()=>e.element),(t=>t(e))),J_=e=>e.dimension.property,Q_=(e,t)=>e.dimension.getDimension(t),eO=(e,t)=>{var r=X_(e,t);Ji(r,[t.shrinkingClass,t.growingClass])},tO=(e,t)=>{Ki(e.element,t.openClass),Gi(e.element,t.closedClass),Vt(e.element,J_(t),"0px"),Yt(e.element)},rO=(e,t)=>{Ki(e.element,t.closedClass),Gi(e.element,t.openClass),Kt(e.element,J_(t))},nO=(e,t,r,n)=>{r.setCollapsed(),Vt(e.element,J_(t),Q_(t,e.element)),eO(e,t),tO(e,t),t.onStartShrink(e),t.onShrunk(e)},oO=(e,t,r,n)=>{var o=n.getOrThunk((()=>Q_(t,e.element)));r.setCollapsed(),Vt(e.element,J_(t),o),Yt(e.element);var a=X_(e,t);Ki(a,t.growingClass),Gi(a,t.shrinkingClass),tO(e,t),t.onStartShrink(e)},aO=(e,t,r)=>{var n=Q_(t,e.element);("0px"===n?nO:oO)(e,t,r,P.some(n))},iO=(e,t,r)=>{var n=X_(e,t),o=Yi(n,t.shrinkingClass),a=Q_(t,e.element);rO(e,t);var i=Q_(t,e.element);(o?()=>{Vt(e.element,J_(t),a),Yt(e.element)}:()=>{tO(e,t)})(),Ki(n,t.shrinkingClass),Gi(n,t.growingClass),rO(e,t),Vt(e.element,J_(t),i),r.setExpanded(),t.onStartGrow(e)},sO=(e,t,r)=>{var n=X_(e,t);return!0===Yi(n,t.growingClass)},lO=(e,t,r)=>{var n=X_(e,t);return!0===Yi(n,t.shrinkingClass)},dO=Object.freeze({__proto__:null,refresh:(e,t,r)=>{if(r.isExpanded()){Kt(e.element,J_(t));var n=Q_(t,e.element);Vt(e.element,J_(t),n)}},grow:(e,t,r)=>{r.isExpanded()||iO(e,t,r)},shrink:(e,t,r)=>{r.isExpanded()&&aO(e,t,r)},immediateShrink:(e,t,r)=>{r.isExpanded()&&nO(e,t,r)},hasGrown:(e,t,r)=>r.isExpanded(),hasShrunk:(e,t,r)=>r.isCollapsed(),isGrowing:sO,isShrinking:lO,isTransitioning:(e,t,r)=>sO(e,t)||lO(e,t),toggleGrow:(e,t,r)=>{(r.isExpanded()?aO:iO)(e,t,r)},disableTransitions:eO,immediateGrow:(e,t,r)=>{r.isExpanded()||(rO(e,t),Vt(e.element,J_(t),Q_(t,e.element)),eO(e,t),r.setExpanded(),t.onStartGrow(e),t.onGrown(e))}}),cO=Object.freeze({__proto__:null,exhibit:(e,t,r)=>{var n=t.expanded;return Pi(n?{classes:[t.openClass],styles:{}}:{classes:[t.closedClass],styles:zo(t.dimension.property,"0px")})},events:(e,t)=>Ka([ai(ma(),((r,n)=>{n.event.raw.propertyName===e.dimension.property&&(eO(r,e),t.isExpanded()&&Kt(r.element,e.dimension.property),(t.isExpanded()?e.onGrown:e.onShrunk)(r))}))])}),uO=[co("closedClass"),co("openClass"),co("shrinkingClass"),co("growingClass"),yo("getAnimationRoot"),Is("onShrunk"),Is("onStartShrink"),Is("onGrown"),Is("onStartGrow"),Eo("expanded",!1),uo("dimension",oo("property",{width:[Zs("property","width"),Zs("getDimension",(e=>sr(e)+"px"))],height:[Zs("property","height"),Zs("getDimension",(e=>Qt(e)+"px"))]}))],mO=Object.freeze({__proto__:null,init:e=>{var t=Ho(e.expanded);return Li({isExpanded:()=>!0===t.get(),isCollapsed:()=>!1===t.get(),setCollapsed:N(t.set,!1),setExpanded:N(t.set,!0),readState:()=>"expanded: "+t.get()})}}),gO=Rl({fields:uO,name:"sliding",active:cO,apis:dO,state:mO}),hO=e=>({isEnabled:()=>!jm.isDisabled(e),setEnabled:t=>jm.set(e,!t),setActive:t=>{var r=e.element;t?(Gi(r,"tox-tbtn--enabled"),Dt(r,"aria-pressed",!0)):(Ki(r,"tox-tbtn--enabled"),It(r,"aria-pressed"))},isActive:()=>Yi(e.element,"tox-tbtn--enabled"),setText:t=>{Ua(e,N_,{text:t})},setIcon:t=>Ua(e,R_,{icon:t})}),pO=function(e,t,r,n){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return D_({text:e.text,icon:e.icon,tooltip:e.tooltip,searchable:e.search.isSome(),role:n,fetch:(t,n)=>{var o={pattern:e.search.isSome()?Vx(t):""};e.fetch((t=>{n(P_(t,xf.CLOSE_ON_EXECUTE,r,{isHorizontalMenu:!1,search:e.search}))}),o,hO(t))},onSetup:e.onSetup,getApi:hO,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...o?[vC.config({})]:[]]},t,r.shared)},vO=(e,t,r)=>{var n=e=>n=>{var o=!n.isActive();n.setActive(o),e.storage.set(o),r.shared.getSink().each((r=>{t().getOpt(r).each((t=>{Il(t.element),Ua(t,_C,{name:e.name,value:e.storage.get()})}))}))},o=e=>t=>{t.setActive(e.storage.get())};return t=>{t(K(e,(e=>{var t=e.text.fold((()=>({})),(e=>({text:e})));return d(d({type:e.type,active:!1},t),{},{onAction:n(e),onSetup:o(e)})})))}},fO=e=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:e,"aria-label":e}},components:[cs(e)]}),bO=fi("leaf-label-event-id"),yO=e=>{var{leaf:t,onLeafAction:r,visible:n,treeId:o,selectedId:a,backstage:i}=e,s=t.menu.map((e=>pO(e,"tox-mbtn",i,P.none(),n))),l=[fO(t.title)];return s.each((e=>l.push(e))),Xp.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(n?["tox-tree--leaf__label--visible"]:[])},components:l,role:"treeitem",action:e=>{r(t.id),e.getSystem().broadcastOn(["update-active-item-".concat(o)],{value:t.id})},eventOrder:{[ia()]:[bO,"keying"]},buttonBehaviours:Ml([...n?[vC.config({})]:[],fp.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Hl.config({channels:{["update-active-item-".concat(o)]:{onReceive:(e,r)=>{(r.value===t.id?fp.on:fp.off)(e)}}}}),op(bO,[ii(((e,r)=>{a.each((r=>{(r===t.id?fp.on:fp.off)(e)}))})),Ja(ia(),((e,t)=>{var r="ArrowLeft"===t.event.raw.code,n="ArrowRight"===t.event.raw.code;r?(ws(e.element,".tox-tree--directory").each((t=>{e.getSystem().getByDom(t).each((e=>{xs(t,".tox-tree--directory__label").each((t=>{e.getSystem().getByDom(t).each(dp.focus)}))}))})),t.stop()):n&&t.stop()}))])])})},wO=fi("directory-label-event-id"),xO=e=>{var t,r,{directory:n,visible:o,noChildren:a,backstage:i}=e,s=n.menu.map((e=>pO(e,"tox-mbtn",i,P.none()))),l=[{dom:{tag:"div",classes:["tox-chevron"]},components:[(t="chevron-right",r=i.shared.providers.icons,((e,t,r)=>lv(e,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:[]},t))(t,r))]},fO(n.title)];s.each((e=>{l.push(e)}));var d=e=>{ws(e.element,".tox-tree--directory").each((t=>{e.getSystem().getByDom(t).each((t=>{var r=!fp.isOn(t);fp.toggle(t),Ua(e,"expand-tree-node",{expanded:r,node:n.id})}))}))};return Xp.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(o?["tox-tree--directory__label--visible"]:[])},components:l,action:d,eventOrder:{[ia()]:[wO,"keying"]},buttonBehaviours:Ml([...o?[vC.config({})]:[],op(wO,[Ja(ia(),((e,t)=>{var r="ArrowRight"===t.event.raw.code,n="ArrowLeft"===t.event.raw.code;r&&a&&t.stop(),(r||n)&&ws(e.element,".tox-tree--directory").each((o=>{e.getSystem().getByDom(o).each((o=>{!fp.isOn(o)&&r||fp.isOn(o)&&n?(d(e),t.stop()):n&&!fp.isOn(o)&&(ws(o.element,".tox-tree--directory").each((e=>{xs(e,".tox-tree--directory__label").each((e=>{o.getSystem().getByDom(e).each(dp.focus)}))})),t.stop())}))}))}))])])})},CO=e=>{var{children:t,onLeafAction:r,visible:n,treeId:o,expandedIds:a,selectedId:i,backstage:s}=e;return{dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map((e=>"leaf"===e.type?yO({leaf:e,selectedId:i,onLeafAction:r,visible:n,treeId:o,backstage:s}):SO({directory:e,expandedIds:a,selectedId:i,onLeafAction:r,labelTabstopping:n,treeId:o,backstage:s}))),behaviours:Ml([gO.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:n}),np.config({})])}},kO=fi("directory-event-id"),SO=e=>{var{directory:t,onLeafAction:r,labelTabstopping:n,treeId:o,backstage:a,expandedIds:i,selectedId:s}=e,{children:l}=t,c=Ho(i),u=i.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[xO({directory:t,visible:n,noChildren:0===t.children.length,backstage:a}),CO({children:l,expandedIds:i,selectedId:s,onLeafAction:r,visible:u,treeId:o,backstage:a})],behaviours:Ml([op(kO,[ii(((e,t)=>{fp.set(e,u)})),Ja("expand-tree-node",((e,t)=>{var{expanded:r,node:n}=t.event;c.set(r?[...c.get(),n]:c.get().filter((e=>e!==n)))}))]),fp.config(d(d({},t.children.length>0?{aria:{mode:"expanded"}}:{}),{},{toggleClass:"tox-tree--directory--expanded",onToggled:(e,t)=>{var n,i=e.components()[1],d=(n=t,l.map((e=>"leaf"===e.type?yO({leaf:e,selectedId:s,onLeafAction:r,visible:n,treeId:o,backstage:a}):SO({directory:e,expandedIds:c.get(),selectedId:s,onLeafAction:r,labelTabstopping:n,treeId:o,backstage:a}))));t?gO.grow(i):gO.shrink(i),np.set(i,d)}}))])}},_O=fi("tree-event-id"),OO=Object.freeze({__proto__:null,events:(e,t)=>{var r=e.stream.streams.setup(e,t);return Ka([Ja(e.event,r),si((()=>t.cancel()))].concat(e.cancelEvent.map((e=>[Ja(e,(()=>t.cancel()))])).getOr([])))}}),EO=e=>{var t=Ho(null);return Li({readState:()=>({timer:null!==t.get()?"set":"unset"}),setTimer:e=>{t.set(e)},cancel:()=>{var e=t.get();null!==e&&e.cancel()}})},TO=Object.freeze({__proto__:null,throttle:EO,init:e=>e.stream.streams.state(e)}),AO=[uo("stream",oo("mode",{throttle:[co("delay"),Eo("stopEvent",!0),Zs("streams",{setup:(e,t)=>{var r=e.stream,n=QS(e.onStream,r.delay);return t.setTimer(n),(e,t)=>{n.throttle(e,t),r.stopEvent&&t.stop()}},state:EO})]})),Eo("event","input"),yo("cancelEvent"),zs("onStream")],MO=Rl({fields:AO,name:"streaming",active:OO,state:TO}),NO=(e,t,r)=>{var n=Cu.getValue(r);Cu.setValue(t,n),DO(t)},RO=(e,t)=>{var r=e.element,n=es(r),o=r.dom;"number"!==Lt(r,"type")&&t(o,n)},DO=e=>{RO(e,((e,t)=>e.setSelectionRange(t.length,t.length)))},BO=T("alloy.typeahead.itemexecute"),LO=T([yo("lazySink"),co("fetch"),Eo("minChars",5),Eo("responseTime",1e3),Is("onOpen"),Eo("getHotspot",P.some),Eo("getAnchorOverrides",T({})),Eo("layouts",P.none()),Eo("eventOrder",{}),Lo("model",{},[Eo("getDisplayText",(e=>void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.value)),Eo("selectsOver",!0),Eo("populateFromBrowse",!0)]),Is("onSetValue"),Fs("onExecute"),Is("onItemExecute"),Eo("inputClasses",[]),Eo("inputAttributes",{}),Eo("inputStyles",{}),Eo("matchWidth",!0),Eo("useMinWidth",!1),Eo("dismissOnBlur",!0),Hs(["openClass"]),yo("initialData"),ku("typeaheadBehaviours",[dp,Cu,MO,Gh,fp,fx]),so("lazyTypeaheadComp",(()=>Ho(P.none))),so("previewing",(()=>Ho(!0)))].concat(zf()).concat(Bx())),HO=T([Xu({schema:[Ls()],name:"menu",overrides:e=>({fakeFocus:!0,onHighlightItem:(t,r,n)=>{e.previewing.get()?e.lazyTypeaheadComp.get().each((t=>{((e,t,r)=>{if(e.selectsOver){var n=Cu.getValue(t),o=e.getDisplayText(n),a=Cu.getValue(r);return 0===e.getDisplayText(a).indexOf(o)?P.some((()=>{NO(0,t,r),((e,t)=>{RO(e,((e,r)=>e.setSelectionRange(t,r.length)))})(t,o.length)})):P.none()}return P.none()})(e.model,t,n).fold((()=>{e.model.selectsOver?(Qm.dehighlight(r,n),e.previewing.set(!0)):e.previewing.set(!1)}),(t=>{t(),e.previewing.set(!1)}))})):e.lazyTypeaheadComp.get().each((t=>{e.model.populateFromBrowse&&NO(e.model,t,n),Ht(n.element,"id").each((e=>Dt(t.element,"aria-activedescendant",e)))}))},onExecute:(t,r)=>e.lazyTypeaheadComp.get().map((e=>(Ua(e,BO(),{item:r}),!0))),onHover:(t,r)=>{e.previewing.set(!1),e.lazyTypeaheadComp.get().each((t=>{e.model.populateFromBrowse&&NO(e.model,t,r)}))}})})]),PO=_m({name:"Typeahead",configFields:LO(),partFields:HO(),factory:(e,t,r,n)=>{var o=(t,r,o)=>{e.previewing.set(!1);var a=fx.getCoupled(t,"sandbox");ru.isOpen(a)?Am.getCurrent(a).each((e=>{Qm.getHighlighted(e).fold((()=>{o(e)}),(()=>{Ga(a,e.element,"keydown",r)}))})):Ex(e,i(t),t,a,n,(e=>{Am.getCurrent(e).each(o)}),xg.HighlightMenuAndItem).get(_)},a=Vf(e),i=e=>t=>t.map((t=>{var r=Oe(t.menus),n=oe(r,(e=>J(e.items,(e=>"item"===e.type))));return Cu.getState(e).update(K(n,(e=>e.data))),t})),s=e=>Am.getCurrent(e),l="typeaheadevents",c=[dp.config({}),Cu.config({onSetValue:e.onSetValue,store:d({mode:"dataset",getDataKey:e=>es(e.element),getFallbackEntry:e=>({value:e,meta:{}}),setValue:(t,r)=>{ts(t.element,e.model.getDisplayText(r))}},e.initialData.map((e=>zo("initialValue",e))).getOr({}))}),MO.config({stream:{mode:"throttle",delay:e.responseTime,stopEvent:!1},onStream:(t,r)=>{var o=fx.getCoupled(t,"sandbox");if(dp.isFocused(t)&&es(t.element).length>=e.minChars){var a=s(o).bind((e=>Qm.getHighlighted(e).map(Cu.getValue)));e.previewing.set(!0),Ex(e,i(t),t,o,n,(t=>{s(o).each((t=>{a.fold((()=>{e.model.selectsOver&&Qm.highlightFirst(t)}),(e=>{Qm.highlightBy(t,(t=>Cu.getValue(t).value===e.value)),Qm.getHighlighted(t).orThunk((()=>(Qm.highlightFirst(t),P.none())))}))}))}),xg.HighlightJustMenu).get(_)}},cancelEvent:Oa()}),Gh.config({mode:"special",onDown:(e,t)=>(o(e,t,Qm.highlightFirst),P.some(!0)),onEscape:e=>{var t=fx.getCoupled(e,"sandbox");return ru.isOpen(t)?(ru.close(t),P.some(!0)):P.none()},onUp:(e,t)=>(o(e,t,Qm.highlightLast),P.some(!0)),onEnter:t=>{var r=fx.getCoupled(t,"sandbox"),n=ru.isOpen(r);if(n&&!e.previewing.get())return s(r).bind((e=>Qm.getHighlighted(e))).map((e=>(Ua(t,BO(),{item:e}),!0)));var o=Cu.getValue(t);return ja(t,Oa()),e.onExecute(r,t,o),n&&ru.close(r),P.some(!0)}}),fp.config({toggleClass:e.markers.openClass,aria:{mode:"expanded"}}),fx.config({others:{sandbox:t=>Rx(e,t,{onOpen:()=>fp.on(t),onClose:()=>{e.lazyTypeaheadComp.get().each((e=>It(e.element,"aria-activedescendant"))),fp.off(t)}})}}),op(l,[ii((t=>{e.lazyTypeaheadComp.set(P.some(t))})),si((t=>{e.lazyTypeaheadComp.set(P.none())})),di((t=>{var r=_;Ax(e,i(t),t,n,r,xg.HighlightMenuAndItem).get(_)})),Ja(BO(),((t,r)=>{var n=fx.getCoupled(t,"sandbox");NO(e.model,t,r.event.item),ja(t,Oa()),e.onItemExecute(t,n,r.event.item,Cu.getValue(t)),ru.close(n),DO(t)}))].concat(e.dismissOnBlur?[Ja(ba(),(e=>{var t=fx.getCoupled(e,"sandbox");Zl(t.element).isNone()&&ru.close(t)}))]:[]))],u=d({[Da()]:[Cu.name(),MO.name(),l]},e.eventOrder);return{uid:e.uid,dom:jf(kn(e,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:d(d({},a),_u(e.typeaheadBehaviours,c)),eventOrder:u}}}),IO=e=>d(d({},e),{},{toCached:()=>IO(e.toCached()),bindFuture:t=>IO(e.bind((e=>e.fold((e=>kx(gn.error(e))),(e=>t(e)))))),bindResult:t=>IO(e.map((e=>e.bind(t)))),mapResult:t=>IO(e.map((e=>e.map(t)))),mapError:t=>IO(e.map((e=>e.mapError(t)))),foldResult:(t,r)=>e.map((e=>e.fold(t,r))),withTimeout:(t,r)=>IO(Cx((n=>{var o=!1,a=setTimeout((()=>{o=!0,n(gn.error(r()))}),t);e.get((e=>{o||(clearTimeout(a),n(e))}))})))}),FO=e=>IO(Cx(e)),zO=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,i=t.fold((()=>({})),(e=>({action:e}))),s=d({buttonBehaviours:Ml([Ay((()=>!e.enabled||a.isDisabled())),Ty(),vC.config({}),op("button press",[Xa("click"),Xa("mousedown")])].concat(r)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},i),l=kn(s,{dom:n});return kn(l,{components:o})},VO=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o={tag:"button",classes:["tox-tbtn"],attributes:e.tooltip.map((e=>({"aria-label":r.translate(e),title:r.translate(e)}))).getOr({})},a=e.icon.map((e=>T_(e,r.icons))),i=Py([a]);return zO(e,t,n,o,i,r)},ZO=e=>{switch(e){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];default:return["tox-button","tox-button--secondary"]}},jO=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=r.translate(e.text),i=e.icon.map((e=>T_(e,r.icons))),s=[i.getOrThunk((()=>cs(a)))],l=e.buttonType.getOr(e.primary||e.borderless?"primary":"secondary"),d=[...ZO(l),...i.isSome()?["tox-button--icon"]:[],...e.borderless?["tox-button--naked"]:[],...o];return zO(e,t,n,{tag:"button",classes:d,attributes:{title:a}},s,r)},UO=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=jO(e,P.some(t),r,n,o);return Xp.sketch(a)},WO=(e,t)=>r=>{"custom"===t?Ua(r,_C,{name:e,value:{}}):"submit"===t?ja(r,OC):"cancel"===t?ja(r,SC):console.error("Unknown button type: ",t)},qO=(e,t,r)=>{if(((e,t)=>"menu"===t)(0,t)){var n=e,o=d(d({},e),{},{type:"menubutton",search:P.none(),onSetup:t=>(t.setEnabled(e.enabled),_),fetch:vO(n.items,(()=>a),r)}),a=Jp(pO(o,"tox-tbtn",r,P.none()));return a.asSpec()}if(((e,t)=>"custom"===t||"cancel"===t||"submit"===t)(0,t)){var i=WO(e.name,t),s=d(d({},e),{},{borderless:!1});return UO(s,i,r.shared.providers,[])}if(((e,t)=>"togglebutton"===t)(0,t))return((e,t)=>{var r,n,o=e.icon.map((e=>A_(e,t.icons))).map(Jp),a=e.buttonType.getOr(e.primary?"primary":"secondary"),i=d(d({},e),{},{name:null!==(r=e.name)&&void 0!==r?r:"",primary:"primary"===a,tooltip:P.from(e.tooltip),enabled:null!==(n=e.enabled)&&void 0!==n&&n,borderless:!1}),s=i.tooltip.map((e=>({"aria-label":t.translate(e),title:t.translate(e)}))).getOr({}),l=ZO(null!=a?a:"secondary"),c=e.icon.isSome()&&e.text.isSome(),u={tag:"button",classes:[...l.concat(e.icon.isSome()?["tox-button--icon"]:[]),...e.active?["tox-button--enabled"]:[],...c?["tox-button--icon-and-text"]:[]],attributes:s},m=t.translate(e.text.getOr("")),g=cs(m),h=[...Py([o.map((e=>e.asSpec()))]),...e.text.isSome()?[g]:[]],p=zO(i,P.some((r=>{Ua(r,_C,{name:e.name,value:{setIcon:e=>{o.map((n=>n.getOpt(r).each((r=>{np.set(r,[A_(e,t.icons)])}))))}}})})),[],u,h,t);return Xp.sketch(p)})(e,r.shared.providers);throw console.error("Unknown footer button type: ",t),new Error("Unknown footer button type")},$O={type:"separator"},GO=e=>({type:"menuitem",value:e.url,text:e.title,meta:{attach:e.attach},onAction:_}),KO=(e,t)=>({type:"menuitem",value:t,text:e,meta:{attach:void 0},onAction:_}),YO=(e,t)=>(e=>K(e,GO))(((e,t)=>J(t,(t=>t.type===e)))(e,t)),XO=e=>YO("header",e.targets),JO=e=>YO("anchor",e.targets),QO=e=>P.from(e.anchorTop).map((e=>KO("<top>",e))).toArray(),eE=e=>P.from(e.anchorBottom).map((e=>KO("<bottom>",e))).toArray(),tE=(e,t)=>{var r=e.toLowerCase();return J(t,(e=>{var t,n=void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.text,o=null!==(t=e.value)&&void 0!==t?t:"";return Pe(n.toLowerCase(),r)||Pe(o.toLowerCase(),r)}))},rE=fi("aria-invalid"),nE=(e,t)=>{e.dom.checked=t},oE=e=>e.dom.checked,aE=e=>(t,r,n,o)=>Ee(r,"name").fold((()=>e(r,o,P.none())),(a=>t.field(a,e(r,o,Ee(n,a))))),iE={bar:aE(((e,t)=>((e,t)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:K(e.items,t.interpreter)}))(e,t.shared))),collection:aE(((e,t,r)=>((e,t,r)=>{var n,o=e.label.map((e=>xC(e,t))),a=e=>(t,r)=>{ks(r.event.target,"[data-collection-item-value]").each((n=>{e(t,r,n,Lt(n,"data-collection-item-value"))}))},i=a(((r,n,o,a)=>{n.stop(),t.isDisabled()||Ua(r,_C,{name:e.name,value:a})})),s=[Ja(na(),a(((e,t,r)=>{Il(r)}))),Ja(ca(),i),Ja(ka(),i),Ja(oa(),a(((e,t,r)=>{Cs(e.element,"."+Mf).each((e=>{Ki(e,Mf)})),Gi(r,Mf)}))),Ja(aa(),a((e=>{Cs(e.element,"."+Mf).each((e=>{Ki(e,Mf)}))}))),di(a(((t,r,n,o)=>{Ua(t,_C,{name:e.name,value:o})})))],l=(e,t)=>K(rc(e.element,".tox-collection__item"),t),d=gC.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==e.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:A},behaviours:Ml([jm.config({disabled:t.isDisabled,onDisabled:e=>{l(e,(e=>{Gi(e,"tox-collection__item--state-disabled"),Dt(e,"aria-disabled",!0)}))},onEnabled:e=>{l(e,(e=>{Ki(e,"tox-collection__item--state-disabled"),It(e,"aria-disabled")}))}}),Ty(),np.config({}),Cu.config({store:{mode:"memory",initialValue:r.getOr([])},onSetValue:(r,n)=>{((r,n)=>{var o=K(n,(r=>{var n=Qp.translate(r.text),o=1===e.columns?'<div class="tox-collection__item-label">'.concat(n,"</div>"):"",a='<div class="tox-collection__item-icon">'.concat(r.icon,"</div>"),i={_:" "," - ":" ","-":" "},s=n.replace(/\_| \- |\-/g,(e=>i[e])),l=t.isDisabled()?" tox-collection__item--state-disabled":"";return'<div class="tox-collection__item'.concat(l,'" tabindex="-1" data-collection-item-value="').concat(fC.encodeAllRaw(r.value),'" title="').concat(s,'" aria-label="').concat(s,'">').concat(a).concat(o,"</div>")})),a="auto"!==e.columns&&e.columns>1?G(o,e.columns):[o],i=K(a,(e=>'<div class="tox-collection__group">'.concat(e.join(""),"</div>")));ui(r.element,i.join(""))})(r,n),"auto"===e.columns&&gy(r,5,"tox-collection__item").each((e=>{var{numRows:t,numColumns:n}=e;Gh.setGridSize(r,t,n)})),ja(r,MC)}}),vC.config({}),Gh.config((n=e.columns,1===n?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===n?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:".tox-collection__group",cell:".".concat(kf)}})),op("collection-events",s)]),eventOrder:{[xa()]:["disabling","alloy.base.behaviour","collection-events"]}});return bC(o,d,["tox-form__group--collection"],[])})(e,t.shared.providers,r))),alertbanner:aE(((e,t)=>((e,t)=>{var r=av(e.icon,t.icons);return dC.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--".concat(e.level)]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:e.url?void 0:r},components:e.url?[Xp.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:r,attributes:{title:t.translate(e.iconTooltip)}},action:t=>Ua(t,_C,{name:"alert-banner",value:e.url}),buttonBehaviours:Ml([iv()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:t.translate(e.text)}}]})})(e,t.shared.providers))),input:aE(((e,t,r)=>((e,t,r)=>Y_({name:e.name,multiline:!1,label:e.label,inputMode:e.inputMode,placeholder:e.placeholder,flex:!1,disabled:!e.enabled,classname:"tox-textfield",validation:P.none(),maximized:e.maximized,data:r},t))(e,t.shared.providers,r))),textarea:aE(((e,t,r)=>((e,t,r)=>Y_({name:e.name,multiline:!0,label:e.label,inputMode:P.none(),placeholder:e.placeholder,flex:!0,disabled:!e.enabled,classname:"tox-textarea",validation:P.none(),maximized:e.maximized,data:r},t))(e,t.shared.providers,r))),label:aE(((e,t)=>((e,t)=>{var r,n="tox-label";return{dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"label",classes:[n,..."center"===e.align?["".concat(n,"--center")]:[],..."end"===e.align?["".concat(n,"--end")]:[]]},components:[cs(t.providers.translate(e.label))]},...K(e.items,t.interpreter)],behaviours:Ml([jS(),np.config({}),(r=P.none(),GS(r,ci,ui)),Gh.config({mode:"acyclic"})])}})(e,t.shared))),iframe:(e=>(t,r,n,o)=>{var a=kn(r,{source:"dynamic"});return aE(e)(t,a,n,o)})(((e,t,r)=>((e,t,r)=>{var n="tox-dialog__iframe",o=e.transparent?[]:["".concat(n,"--opaque")],a=e.border?["tox-navobj-bordered"]:[],i=d(d(d({},e.label.map((e=>({title:e}))).getOr({})),r.map((e=>({srcdoc:e}))).getOr({})),e.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}),s=((e,t)=>{var r=Ho(e.getOr(""));return{getValue:e=>r.get(),setValue:(e,n)=>{if(r.get()!==n){var o=e.element,a=()=>Dt(o,"srcdoc",n);t?C_.fold(T(w_),(e=>e.throttle))(o,n,a):a()}r.set(n)}}})(r,e.streamContent),l=e.label.map((e=>xC(e,t))),c=gC.parts.field({factory:{sketch:e=>n_(P.from(a),{uid:e.uid,dom:{tag:"iframe",attributes:i,classes:[n,...o]},behaviours:Ml([vC.config({}),dp.config({}),$S(r,s.getValue,s.setValue),Hl.config({channels:{[m_]:{onReceive:(e,t)=>{t.newFocus.each((t=>{pt(e.element).each((r=>{(lt(e.element,t)?Gi:Ki)(r,"tox-navobj-bordered-focus")}))}))}}}})])})}});return bC(l,c,["tox-form__group--stretched"],[])})(e,t.shared.providers,r))),button:aE(((e,t)=>((e,t)=>{var r,n,o=WO(e.name,"custom");return r=P.none(),n=gC.parts.field(d({factory:Xp},jO(e,P.some(o),t,[KS(""),jS()]))),bC(r,n,[],[])})(e,t.shared.providers))),checkbox:aE(((e,t,r)=>((e,t,r)=>{var n=e=>(e.element.dom.click(),P.some(!0)),o=gC.parts.field({factory:{sketch:A},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Ml([jS(),jm.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:e=>{pt(e.element).each((e=>Gi(e,"tox-checkbox--disabled")))},onEnabled:e=>{pt(e.element).each((e=>Ki(e,"tox-checkbox--disabled")))}}),vC.config({}),dp.config({}),GS(r,oE,nE),Gh.config({mode:"special",onEnter:n,onSpace:n,stopSpaceKeyup:!0}),op("checkbox-events",[Ja(da(),((t,r)=>{Ua(t,CC,{name:e.name})}))])])}),a=gC.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[cs(t.translate(e.label))],behaviours:Ml([ZC.config({})])}),i=e=>lv("checked"===e?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+e]},t.icons),s=Jp({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[i("checked"),i("unchecked")]});return gC.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[o,s.asSpec(),a],fieldBehaviours:Ml([jm.config({disabled:()=>!e.enabled||t.isDisabled()}),Ty()])})})(e,t.shared.providers,r))),colorinput:aE(((e,t,r)=>((e,t,r,n)=>{var o=gC.parts.field({factory:Uf,inputClasses:["tox-textfield"],data:n,onSetValue:e=>zC.run(e).get(_),inputBehaviours:Ml([jm.config({disabled:t.providers.isDisabled}),Ty(),vC.config({}),zC.config({invalidClass:"tox-textbox-field-invalid",getRoot:e=>pt(e.element),notify:{onValid:e=>{var t=Cu.getValue(e);Ua(e,jC,{color:t})}},validator:{validateOnLoad:!1,validate:e=>{var t=Cu.getValue(e);if(0===t.length)return kx(gn.value(!0));var r=We("span");Vt(r,"background-color",t);var n=qt(r,"background-color").fold((()=>gn.error("blah")),(e=>gn.value(t)));return kx(n)}}})]),selectOnFocus:!1}),a=e.label.map((e=>xC(e,t.providers))),i=(e,t)=>{Ua(e,UC,{value:t})},s=Jp(((e,t)=>Px.sketch({dom:e.dom,components:e.components,toggleClass:"mce-active",dropdownBehaviours:Ml([Ay(t.providers.isDisabled),Ty(),ZC.config({}),vC.config({})]),layouts:e.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:t.getSink,fetch:r=>Cx((t=>e.fetch(t))).map((n=>P.from(qx(kn(ox(fi("menu-value"),n,(t=>{e.onItemAction(r,t)}),e.columns,e.presets,xf.CLOSE_ON_EXECUTE,L,t.providers),{movement:ix(e.columns,e.presets)}))))),parts:{menu:Ff(0,0,e.presets)}}))({dom:{tag:"span",attributes:{"aria-label":t.providers.translate("Color swatch")}},layouts:{onRtl:()=>[ml,ul,vl],onLtr:()=>[ul,ml,vl]},components:[],fetch:Jw(r.getColors(e.storageKey),e.storageKey,r.hasCustomColors()),columns:r.getColorCols(e.storageKey),presets:"color",onItemAction:(t,n)=>{s.getOpt(t).each((t=>{"custom"===n?r.colorPicker((r=>{r.fold((()=>ja(t,WC)),(r=>{i(t,r),Nw(e.storageKey,r)}))}),"#ffffff"):i(t,"remove"===n?"":n)}))}},t));return gC.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:a.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[o,s.asSpec()]}]),fieldBehaviours:Ml([op("form-field-events",[Ja(jC,((t,r)=>{s.getOpt(t).each((e=>{Vt(e.element,"background-color",r.event.color)})),Ua(t,CC,{name:e.name})})),Ja(UC,((e,t)=>{gC.getField(e).each((r=>{Cu.setValue(r,t.event.value),Am.getCurrent(e).each(dp.focus)}))})),Ja(WC,((e,t)=>{gC.getField(e).each((t=>{Am.getCurrent(e).each(dp.focus)}))}))])])})})(e,t.shared,t.colorinput,r))),colorpicker:aE(((e,t,r)=>{return n=t.shared.providers,o=r,a=e=>"tox-"+e,i=ZS((e=>t=>e.translate(YS[t]))(n),a),{dom:{tag:"div"},components:[(s=Jp(i.sketch({dom:{tag:"div",classes:[a("color-picker-container")],attributes:{role:"presentation"}},onValidHex:e=>{Ua(e,_C,{name:"hex-valid",value:!0})},onInvalidHex:e=>{Ua(e,_C,{name:"hex-valid",value:!1})}}))).asSpec()],behaviours:Ml([$S(o,(e=>{var t=s.get(e);return Am.getCurrent(t).bind((e=>Cu.getValue(e).hex)).map((e=>"#"+He(e,"#"))).getOr("")}),((e,t)=>{var r=P.from(/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(t)).bind((e=>ue(e,1))),n=s.get(e);Am.getCurrent(n).fold((()=>{console.log("Can not find form")}),(e=>{Cu.setValue(e,{hex:r.getOr("")}),HS.getField(e,"hex").each((e=>{ja(e,la())}))}))})),jS()])};var n,o,a,i,s})),dropzone:aE(((e,t,r)=>((e,t,r)=>{var n=(e,t)=>{t.stop()},o=e=>(t,r)=>{Y(e,(e=>{e(t,r)}))},a=(e,t)=>{var r;if(!jm.isDisabled(e)){var n=t.event.raw;s(e,null===(r=n.dataTransfer)||void 0===r?void 0:r.files)}},i=(e,t)=>{var r=t.event.raw.target;s(e,r.files)},s=(r,n)=>{n&&(Cu.setValue(r,((e,t)=>{var r=JS.explode(t.getOption("images_file_types"));return J(he(e),(e=>q(r,(t=>Fe(e.name.toLowerCase(),".".concat(t.toLowerCase()))))))})(n,t)),Ua(r,CC,{name:e.name}))},l=Jp({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Ml([op("input-file-events",[ni(ca()),ni(ka())])])}),d=e.label.map((e=>xC(e,t))),c=gC.parts.field({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Ml([KS(r.getOr([])),jS(),jm.config({}),fp.config({toggleClass:"dragenter",toggleOnExecute:!1}),op("dropzone-events",[Ja("dragenter",o([n,fp.toggle])),Ja("dragleave",o([n,fp.toggle])),Ja("dragover",n),Ja("drop",o([n,a])),Ja(da(),i)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[cs(t.translate("Drop an image here"))]},Xp.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[cs(t.translate("Browse for an image")),l.asSpec()],action:e=>{l.get(e).element.dom.click()},buttonBehaviours:Ml([vC.config({}),Ay(t.isDisabled),Ty()])})]}]})}});return bC(d,c,["tox-form__group--stretched"],[])})(e,t.shared.providers,r))),grid:aE(((e,t)=>((e,t)=>({dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--".concat(e.columns,"col")]},components:K(e.items,t.interpreter)}))(e,t.shared))),listbox:aE(((e,t,r)=>((e,t,r)=>{var n=t.shared.providers,o=r.bind((t=>V_(e.items,t))).orThunk((()=>me(e.items).filter(I_))),a=e.label.map((e=>xC(e,n))),i=gC.parts.field({dom:{},factory:{sketch:r=>D_({uid:r.uid,text:o.map((e=>e.text)),icon:P.none(),tooltip:e.label,role:P.none(),fetch:(r,n)=>{var o=z_(r,e.name,e.items,Cu.getValue(r));n(P_(o,xf.CLOSE_ON_EXECUTE,t,{isHorizontalMenu:!1,search:P.none()}))},onSetup:T(_),getApi:T({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[vC.config({}),$S(o.map((e=>e.value)),(e=>Lt(e.element,F_)),((t,r)=>{V_(e.items,r).each((e=>{Dt(t.element,F_,e.value),Ua(t,N_,{text:e.text})}))}))]},"tox-listbox",t.shared)}}),s={dom:{tag:"div",classes:["tox-listboxfield"]},components:[i]};return gC.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:ne([a.toArray(),[s]]),fieldBehaviours:Ml([jm.config({disabled:T(!e.enabled),onDisabled:e=>{gC.getField(e).each(jm.disable)},onEnabled:e=>{gC.getField(e).each(jm.enable)}})])})})(e,t,r))),selectbox:aE(((e,t,r)=>((e,t,r)=>{var n=K(e.items,(e=>({text:t.translate(e.text),value:e.value}))),o=e.label.map((e=>xC(e,t))),a=gC.parts.field(d(d({dom:{}},r.map((e=>({data:e}))).getOr({})),{},{selectAttributes:{size:e.size},options:n,factory:Z_,selectBehaviours:Ml([jm.config({disabled:()=>!e.enabled||t.isDisabled()}),vC.config({}),op("selectbox-change",[Ja(da(),((t,r)=>{Ua(t,CC,{name:e.name})}))])])})),i=e.size>1?P.none():P.some(lv("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},t.icons)),s={dom:{tag:"div",classes:["tox-selectfield"]},components:ne([[a],i.toArray()])};return gC.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:ne([o.toArray(),[s]]),fieldBehaviours:Ml([jm.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:e=>{gC.getField(e).each(jm.disable)},onEnabled:e=>{gC.getField(e).each(jm.enable)}}),Ty()])})})(e,t.shared.providers,r))),sizeinput:aE(((e,t)=>((e,t)=>{var r=K_,n=fi("ratio-event"),o=e=>lv(e,{tag:"span",classes:["tox-icon","tox-lock-icon__"+e]},t.icons),a=q_.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:t.translate(e.label.getOr("Constrain proportions"))}},components:[o("lock"),o("unlock")],buttonBehaviours:Ml([jm.config({disabled:()=>!e.enabled||t.isDisabled()}),Ty(),vC.config({})])}),i=e=>({dom:{tag:"div",classes:["tox-form__group"]},components:e}),s=r=>gC.parts.field({factory:Uf,inputClasses:["tox-textfield"],inputBehaviours:Ml([jm.config({disabled:()=>!e.enabled||t.isDisabled()}),Ty(),vC.config({}),op("size-input-events",[Ja(oa(),((e,t)=>{Ua(e,n,{isField1:r})})),Ja(da(),((t,r)=>{Ua(t,CC,{name:e.name})}))])]),selectOnFocus:!1}),l=e=>({dom:{tag:"label",classes:["tox-label"]},components:[cs(t.translate(e))]}),d=q_.parts.field1(i([gC.parts.label(l("Width")),s(!0)])),c=q_.parts.field2(i([gC.parts.label(l("Height")),s(!1)]));return q_.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[d,c,i([l(""),a])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(e,t,n)=>{$_(Cu.getValue(e)).each((e=>{r(e).each((e=>{Cu.setValue(t,(e=>{var t,r={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},n=e.value.toFixed((t=e.unit)in r?r[t]:1);return-1!==n.indexOf(".")&&(n=n.replace(/\.?0*$/,"")),n+e.unit})(e))}))}))},coupledFieldBehaviours:Ml([jm.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:e=>{q_.getField1(e).bind(gC.getField).each(jm.disable),q_.getField2(e).bind(gC.getField).each(jm.disable),q_.getLock(e).each(jm.disable)},onEnabled:e=>{q_.getField1(e).bind(gC.getField).each(jm.enable),q_.getField2(e).bind(gC.getField).each(jm.enable),q_.getLock(e).each(jm.enable)}}),Ty(),op("size-input-events2",[Ja(n,((e,t)=>{var n,o,a,i=t.event.isField1,s=i?q_.getField1(e):q_.getField2(e),l=i?q_.getField2(e):q_.getField1(e),d=s.map(Cu.getValue).getOr(""),c=l.map(Cu.getValue).getOr("");n=c,o=$_(d).toOptional(),a=$_(n).toOptional(),r=Re(o,a,((e,t)=>G_(e,t.unit).map((e=>t.value/e)).map((e=>{return r=e,n=t.unit,e=>G_(e,n).map((e=>({value:e*r,unit:n})));var r,n})).getOr(K_))).getOr(K_)}))])])})})(e,t.shared.providers))),slider:aE(((e,t,r)=>((e,t,r)=>{var n=TS.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[cs(t.translate(e.label))]}),o=TS.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),a=TS.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return TS.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:e.min,maxX:e.max,getInitialValue:T(r.getOrThunk((()=>(Math.abs(e.max)-Math.abs(e.min))/2)))},components:[n,o,a],sliderBehaviours:Ml([jS(),dp.config({})]),onChoose:(t,r,n)=>{Ua(t,CC,{name:e.name,value:n})}})})(e,t.shared.providers,r))),urlinput:aE(((e,t,r)=>((e,t,r,n)=>{var o=t.shared.providers,a=t=>{var n=Cu.getValue(t);r.addToHistory(n.value,e.filetype)},i=d(d({},n.map((e=>({initialData:e}))).getOr({})),{},{dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":rE,type:"url"},minChars:0,responseTime:0,fetch:n=>{var o=((e,t,r)=>{var n,o,a=Cu.getValue(t),i=null!==(o=null===(n=null==a?void 0:a.meta)||void 0===n?void 0:n.text)&&void 0!==o?o:a.value;return r.getLinkInformation().fold((()=>[]),(t=>{var n,o=tE(i,(e=>K(e,(e=>KO(e,e))))(r.getHistory(e)));return"file"===e?(n=[o,tE(i,XO(t)),tE(i,ne([QO(t),JO(t),eE(t)]))],ee(n,((e,t)=>0===e.length||0===t.length?e.concat(t):e.concat($O,t)),[])):o}))})(e.filetype,n,r),a=P_(o,xf.BUBBLE_TO_SANDBOX,t,{isHorizontalMenu:!1,search:P.none()});return kx(a)},getHotspot:e=>h.getOpt(e),onSetValue:(e,t)=>{e.hasConfigured(zC)&&zC.run(e).get(_)},typeaheadBehaviours:Ml([...r.getValidationHandler().map((t=>zC.config({getRoot:e=>pt(e.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(e,t)=>{c.getOpt(e).each((e=>{Dt(e.element,"title",o.translate(t))}))}},validator:{validate:r=>{var n=Cu.getValue(r);return FO((r=>{t({type:e.filetype,url:n.value},(e=>{if("invalid"===e.status){var t=gn.error(e.message);r(t)}else{var n=gn.value(e.message);r(n)}}))}))},validateOnLoad:!1}}))).toArray(),jm.config({disabled:()=>!e.enabled||o.isDisabled()}),vC.config({}),op("urlinput-events",[Ja(la(),(t=>{var r=es(t.element),n=r.trim();n!==r&&ts(t.element,n),"file"===e.filetype&&Ua(t,CC,{name:e.name})})),Ja(da(),(t=>{Ua(t,CC,{name:e.name}),a(t)})),Ja(ya(),(t=>{Ua(t,CC,{name:e.name}),a(t)}))])]),eventOrder:{[la()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:e=>e.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:t.shared.getSink,parts:{menu:Ff(0,0,"normal")},onExecute:(e,t,r)=>{Ua(t,OC,{})},onItemExecute:(t,r,n,o)=>{a(t),Ua(t,CC,{name:e.name})}}),s=gC.parts.field(d(d({},i),{},{factory:PO})),l=e.label.map((e=>xC(e,o))),c=Jp(function(e,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;return lv(arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+e],attributes:d({title:o.translate(r),"aria-live":"polite"},t.fold((()=>({})),(e=>({id:e}))))},o.icons)}("invalid",P.some(rE),"warning")),u=Jp({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[c.asSpec()]}),m=r.getUrlPicker(e.filetype),g=fi("browser.url.event"),h=Jp({dom:{tag:"div",classes:["tox-control-wrap"]},components:[s,u.asSpec()],behaviours:Ml([jm.config({disabled:()=>!e.enabled||o.isDisabled()})])}),p=Jp(UO({name:e.name,icon:P.some("browse"),text:e.label.getOr(""),enabled:e.enabled,primary:!1,buttonType:P.none(),borderless:!0},(e=>ja(e,g)),o,[],["tox-browse-url"]));return gC.sketch({dom:wC([]),components:l.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:ne([[h.asSpec()],m.map((()=>p.asSpec())).toArray()])}]),fieldBehaviours:Ml([jm.config({disabled:()=>!e.enabled||o.isDisabled(),onDisabled:e=>{gC.getField(e).each(jm.disable),p.getOpt(e).each(jm.disable)},onEnabled:e=>{gC.getField(e).each(jm.enable),p.getOpt(e).each(jm.enable)}}),Ty(),op("url-input-events",[Ja(g,(t=>{Am.getCurrent(t).each((r=>{var n=Cu.getValue(r),o=d({fieldname:e.name},n);m.each((n=>{n(o).get((n=>{Cu.setValue(r,n),Ua(t,CC,{name:e.name})}))}))}))}))])])})})(e,t,t.urlinput,r))),customeditor:aE((e=>{var t=sd(),r=Jp({dom:{tag:e.tag}}),n=sd();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Ml([op("custom-editor-events",[ii((o=>{r.getOpt(o).each((r=>{((e=>Te(e,"init"))(e)?e.init(r.element.dom):XS.load(e.scriptId,e.scriptUrl).then((t=>t(r.element.dom,e.settings)))).then((e=>{n.on((t=>{e.setValue(t)})),n.clear(),t.set(e)}))}))}))]),$S(P.none(),(()=>t.get().fold((()=>n.get().getOr("")),(e=>e.getValue()))),((e,r)=>{t.get().fold((()=>n.set(r)),(e=>e.setValue(r)))})),jS()]),components:[r.asSpec()]}})),htmlpanel:aE((e=>"presentation"===e.presets?dC.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html}}):dC.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html,attributes:{role:"document"}},containerBehaviours:Ml([vC.config({}),dp.config({})])}))),imagepreview:aE(((e,t,r)=>((e,t)=>{var r=Ho(t.getOr({url:""})),n=Jp({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:t.map((e=>({src:e.url}))).getOr({})}}),o=Jp({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[n.asSpec()]}),a={};e.height.each((e=>a.height=e));var i=t.map((e=>({url:e.url,zoom:P.from(e.zoom),cachedWidth:P.from(e.cachedWidth),cachedHeight:P.from(e.cachedHeight)})));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:a,attributes:{role:"presentation"}},components:[o.asSpec()],behaviours:Ml([jS(),$S(i,(()=>r.get()),((e,t)=>{var a={url:t.url};t.zoom.each((e=>a.zoom=e)),t.cachedWidth.each((e=>a.cachedWidth=e)),t.cachedHeight.each((e=>a.cachedHeight=e)),r.set(a);var i=()=>{var t,r,n,i,s,{cachedWidth:l,cachedHeight:d,zoom:c}=a;if(!y(l)&&!y(d)){if(y(c)){var u=(t=e.element,r=l,n=d,i=sr(t),s=Qt(t),Math.min(i/r,s/n,1));a.zoom=u}var m=((e,t,r,n,o)=>{var a=r*o,i=n*o,s=Math.max(0,e/2-a/2),l=Math.max(0,t/2-i/2);return{left:s.toString()+"px",top:l.toString()+"px",width:a.toString()+"px",height:i.toString()+"px"}})(sr(e.element),Qt(e.element),l,d,a.zoom);o.getOpt(e).each((e=>{Zt(e.element,m)}))}};n.getOpt(e).each((r=>{var n,o=r.element;t.url!==Lt(o,"src")&&(Dt(o,"src",t.url),Ki(e.element,"tox-imagepreview__loaded")),i(),(n=o,new Promise(((e,t)=>{var r=()=>{a(),e(n)},o=[dd(n,"load",r),dd(n,"error",(()=>{a(),t("Unable to load data from image: "+n.dom.src)}))],a=()=>Y(o,(e=>e.unbind()));n.dom.complete&&r()}))).then((t=>{e.getSystem().isConnected()&&(Gi(e.element,"tox-imagepreview__loaded"),a.cachedWidth=t.dom.naturalWidth,a.cachedHeight=t.dom.naturalHeight,i())}))}))}))])}})(e,r))),table:aE(((e,t)=>((e,t)=>{var r,n,o=e=>({dom:{tag:"td",innerHtml:t.translate(e)}});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(n=e.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:K(n,(e=>({dom:{tag:"th",innerHtml:t.translate(e)}})))}]}),(r=e.cells,{dom:{tag:"tbody"},components:K(r,(e=>({dom:{tag:"tr"},components:K(e,o)})))})],behaviours:Ml([vC.config({}),dp.config({})])}})(e,t.shared.providers))),tree:aE(((e,t)=>((e,t)=>{var r=e.onLeafAction.getOr(_),n=e.onToggleExpand.getOr(_),o=e.defaultExpandedIds,a=Ho(o),i=Ho(e.defaultSelectedId),s=fi("tree-id"),l=(n,o)=>e.items.map((e=>"leaf"===e.type?yO({leaf:e,selectedId:n,onLeafAction:r,visible:!0,treeId:s,backstage:t}):SO({directory:e,selectedId:n,onLeafAction:r,expandedIds:o,labelTabstopping:!0,treeId:s,backstage:t})));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:l(i.get(),a.get()),behaviours:Ml([Gh.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),op(_O,[Ja("expand-tree-node",((e,t)=>{var{expanded:r,node:o}=t.event;a.set(r?[...a.get(),o]:a.get().filter((e=>e!==o))),n(a.get(),{expanded:r,node:o})}))]),Hl.config({channels:{["update-active-item-".concat(s)]:{onReceive:(e,t)=>{i.set(P.some(t.value)),np.set(e,l(P.some(t.value),a.get()))}}}}),np.config({})])}})(e,t))),panel:aE(((e,t)=>((e,t)=>({dom:{tag:"div",classes:e.classes},components:K(e.items,t.shared.interpreter)}))(e,t)))},sE={field:(e,t)=>t,record:T([])},lE=(e,t,r,n)=>{var o=kn(n,{shared:{interpreter:t=>dE(e,t,r,o)}});return dE(e,t,r,o)},dE=(e,t,r,n)=>Ee(iE,t.type).fold((()=>(console.error('Unknown factory type "'.concat(t.type,'", defaulting to container: '),t),t)),(o=>o(e,t,r,n))),cE=(e,t,r)=>dE(sE,e,t,r),uE="layout-inset",mE=e=>e.x,gE=(e,t)=>e.x+e.width/2-t.width/2,hE=(e,t)=>e.x+e.width-t.width,pE=e=>e.y,vE=(e,t)=>e.y+e.height-t.height,fE=(e,t)=>e.y+e.height/2-t.height/2,bE=(e,t,r)=>Ws(hE(e,t),vE(e,t),r.insetSouthwest(),Ys(),"southwest",nl(e,{right:0,bottom:3}),uE),yE=(e,t,r)=>Ws(mE(e),vE(e,t),r.insetSoutheast(),Ks(),"southeast",nl(e,{left:1,bottom:3}),uE),wE=(e,t,r)=>Ws(hE(e,t),pE(e),r.insetNorthwest(),Gs(),"northwest",nl(e,{right:0,top:2}),uE),xE=(e,t,r)=>Ws(mE(e),pE(e),r.insetNortheast(),$s(),"northeast",nl(e,{left:1,top:2}),uE),CE=(e,t,r)=>Ws(gE(e,t),pE(e),r.insetNorth(),Xs(),"north",nl(e,{top:2}),uE),kE=(e,t,r)=>Ws(gE(e,t),vE(e,t),r.insetSouth(),Js(),"south",nl(e,{bottom:3}),uE),SE=(e,t,r)=>Ws(hE(e,t),fE(e,t),r.insetEast(),el(),"east",nl(e,{right:0}),uE),_E=(e,t,r)=>Ws(mE(e),fE(e,t),r.insetWest(),Qs(),"west",nl(e,{left:1}),uE),OE=e=>{switch(e){case"north":return CE;case"northeast":return xE;case"northwest":return wE;case"south":return kE;case"southeast":return yE;case"southwest":return bE;case"east":return SE;case"west":return _E}},EE=(e,t,r,n,o)=>rd(n).map(OE).getOr(CE)(e,t,r,n,o),TE=e=>{switch(e){case"north":return kE;case"northeast":return yE;case"northwest":return bE;case"south":return CE;case"southeast":return xE;case"southwest":return wE;case"east":return _E;case"west":return SE}},AE=(e,t,r,n,o)=>rd(n).map(TE).getOr(CE)(e,t,r,n,o),ME={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},NE=(e,t,r)=>{var n={maxHeightFunction:fd()};return()=>r()?{type:"node",root:Ot(_t(e())),node:P.from(e()),bubble:xd(12,12,ME),layouts:{onRtl:()=>[xE],onLtr:()=>[wE]},overrides:n}:{type:"hotspot",hotspot:t(),bubble:xd(-12,12,ME),layouts:{onRtl:()=>[ul,ml,vl],onLtr:()=>[ml,ul,vl]},overrides:n}},RE=(e,t,r,n)=>{var o={maxHeightFunction:fd()};return()=>n()?{type:"node",root:Ot(_t(t())),node:P.from(t()),bubble:xd(12,12,ME),layouts:{onRtl:()=>[CE],onLtr:()=>[CE]},overrides:o}:e?{type:"node",root:Ot(_t(t())),node:P.from(t()),bubble:xd(0,-er(t()),ME),layouts:{onRtl:()=>[pl],onLtr:()=>[pl]},overrides:o}:{type:"hotspot",hotspot:r(),bubble:xd(0,0,ME),layouts:{onRtl:()=>[pl],onLtr:()=>[pl]},overrides:o}},DE=(e,t,r)=>()=>r()?{type:"node",root:Ot(_t(e())),node:P.from(e()),layouts:{onRtl:()=>[CE],onLtr:()=>[CE]}}:{type:"hotspot",hotspot:t(),layouts:{onRtl:()=>[vl],onLtr:()=>[vl]}},BE=(e,t)=>()=>({type:"selection",root:t(),getSelection:()=>{var t=e.selection.getRng(),r=e.model.table.getSelectedCells();if(r.length>1){var n=r[0],o=r[r.length-1],a={firstCell:$e(n),lastCell:$e(o)};return P.some(a)}return P.some($d.range($e(t.startContainer),t.startOffset,$e(t.endContainer),t.endOffset))}}),LE=e=>t=>({type:"node",root:e(),node:t}),HE=(e,t,r,n)=>{var o=uf(e),a=()=>$e(e.getBody()),i=()=>$e(e.getContentAreaContainer()),s=()=>o||!n();return{inlineDialog:NE(i,t,s),inlineBottomDialog:RE(e.inline,i,r,s),banner:DE(i,t,s),cursor:BE(e,a),node:LE(a)}},PE=e=>(t,r)=>{nx(e)(t,r)},IE=e=>()=>Ww(e),FE=e=>t=>Vw(e,t),zE=e=>t=>Uw(e,t),VE=e=>()=>qv(e),ZE=e=>Ae(e,"items"),jE=e=>Ae(e,"format"),UE=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],WE=e=>ee(e,((e,t)=>{if(Te(t,"items")){var r=WE(t.items);return{customFormats:e.customFormats.concat(r.customFormats),formats:e.formats.concat([{title:t.title,items:r.formats}])}}if(Te(t,"inline")||(e=>Te(e,"block"))(t)||(e=>Te(e,"selector"))(t)){var n=g(t.name)?t.name:t.title.toLowerCase(),o="custom-".concat(n);return{customFormats:e.customFormats.concat([{name:o,format:t}]),formats:e.formats.concat([{title:t.title,format:o,icon:t.icon}])}}return d(d({},e),{},{formats:e.formats.concat(t)})}),{customFormats:[],formats:[]}),qE=e=>_v(e).map((t=>{var r=((e,t)=>{var r=WE(t),n=t=>{Y(t,(t=>{e.formatter.has(t.name)||e.formatter.register(t.name,t.format)}))};return e.formatter?n(r.customFormats):e.on("init",(()=>{n(r.customFormats)})),r.formats})(e,t);return Ov(e)?UE.concat(r):r})).getOr(UE),$E=(e,t,r)=>d(d({},e),{},{type:"formatter",isSelected:t(e.format),getStylePreview:r(e.format)}),GE=(e,t,r,n)=>{var o=t=>K(t,(t=>{return ZE(t)?(e=>{var t=o(e.items);return d(d({},e),{},{type:"submenu",getStyleItems:T(t)})})(t):jE(t)?(e=>$E(e,r,n))(t):1===(a=ve(t)).length&&W(a,"title")?d(d({},t),{},{type:"separator"}):(t=>{var o=g(t.name)?t.name:fi(t.title),a="custom-".concat(o),i=d(d({},t),{},{type:"formatter",format:a,isSelected:r(a),getStylePreview:n(a)});return e.formatter.register(o,i),i})(t);var a}));return o(t)},KE=JS.trim,YE=e=>t=>{if((e=>x(e)&&1===e.nodeType)(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1},XE=YE("true"),JE=YE("false"),QE=(e,t,r,n,o)=>({type:e,title:t,url:r,level:n,attach:o}),eT=e=>e.innerText||e.textContent,tT=e=>(e=>e&&"A"===e.nodeName&&void 0!==(e.id||e.name))(e)&&nT(e),rT=e=>e&&/^(H[1-6])$/.test(e.nodeName),nT=e=>(e=>{for(var t=e;t=t.parentNode;){var r=t.contentEditable;if(r&&"inherit"!==r)return XE(t)}return!1})(e)&&!JE(e),oT=e=>rT(e)&&nT(e),aT=e=>{var t,r=(e=>e.id?e.id:fi("h"))(e);return QE("header",null!==(t=eT(e))&&void 0!==t?t:"","#"+r,(e=>rT(e)?parseInt(e.nodeName.substr(1),10):0)(e),(()=>{e.id=r}))},iT=e=>{var t=e.id||e.name,r=eT(e);return QE("anchor",r||"#"+t,"#"+t,0,_)},sT=e=>KE(e.title).length>0,lT=e=>{var t=(e=>{var t=K(rc($e(e),"h1,h2,h3,h4,h5,h6,a:not([href])"),(e=>e.dom));return t})(e);return J((e=>K(J(e,oT),aT))(t).concat((e=>K(J(e,tT),iT))(t)),sT)},dT="tinymce-url-history",cT=e=>g(e)&&/^https?/.test(e),uT=e=>h(e)&&_e(e,(e=>{return!(v(t=e)&&t.length<=5&&ae(t,cT));var t})).isNone(),mT=()=>{var e,t=Tw.getItem(dT);if(null===t)return{};try{e=JSON.parse(t)}catch(e){if(e instanceof SyntaxError)return console.log("Local storage "+dT+" was not valid JSON",e),{};throw e}return uT(e)?e:(console.log("Local storage "+dT+" was not valid format",e),{})},gT=e=>{var t=mT();return Ee(t,e).getOr([])},hT=(e,t)=>{if(cT(e)){var r=mT(),n=Ee(r,t).getOr([]),o=J(n,(t=>t!==e));r[t]=[e].concat(o).slice(0,5),(e=>{if(!uT(e))throw new Error("Bad format for history:\n"+JSON.stringify(e));Tw.setItem(dT,JSON.stringify(e))})(r)}},pT=e=>!!e,vT=e=>ye(JS.makeMap(e,/[, ]/),pT),fT=e=>P.from(Fv(e)),bT=e=>P.from(e).filter(g).getOrUndefined(),yT=e=>({getHistory:gT,addToHistory:hT,getLinkInformation:()=>(e=>jv(e)?P.some({targets:lT(e.getBody()),anchorTop:bT(Uv(e)),anchorBottom:bT(Wv(e))}):P.none())(e),getValidationHandler:()=>(e=>P.from(zv(e)))(e),getUrlPicker:t=>((e,t)=>((e,t)=>{var r=(e=>{var t=P.from(Zv(e)).filter(pT).map(vT);return fT(e).fold(L,(e=>t.fold(H,(e=>ve(e).length>0&&e))))})(e);return b(r)?r?fT(e):P.none():r[t]?fT(e):P.none()})(e,t).map((r=>n=>Cx((o=>{var a=d({filetype:t,fieldname:n.fieldname},P.from(n.meta).getOr({}));r.call(e,((e,t)=>{if(!g(e))throw new Error("Expected value to be string");if(void 0!==t&&!h(t))throw new Error("Expected meta to be a object");o({value:e,meta:t})}),n.value,a)})))))(e,t)}),wT=bm,xT=tm,CT=T([Eo("shell",!1),co("makeItem"),Eo("setupItem",_),Ou("listBehaviours",[np])]),kT=Ju({name:"items",overrides:()=>({behaviours:Ml([np.config({})])})}),ST=T([kT]),_T=_m({name:T("CustomList")(),configFields:CT(),partFields:ST(),factory:(e,t,r,n)=>{var o=e.shell?{behaviours:[np.config({})],components:[]}:{behaviours:[],components:t};return{uid:e.uid,dom:e.dom,components:o.components,behaviours:_u(e.listBehaviours,o.behaviours),apis:{setItems:(t,r)=>{var n;(n=t,e.shell?P.some(n):cm(n,e,"items")).fold((()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")}),(n=>{var o=np.contents(n),a=r.length,i=a-o.length,s=i>0?$(i,(()=>e.makeItem())):[],l=o.slice(a);Y(l,(e=>np.remove(n,e))),Y(s,(e=>np.append(n,e)));var d=np.contents(n);Y(d,((n,o)=>{e.setupItem(t,n,r[o],o)}))}))}}}},apis:{setItems:(e,t,r)=>{e.setItems(t,r)}}}),OT=T([co("dom"),Eo("shell",!0),ku("toolbarBehaviours",[np])]),ET=T([Ju({name:"groups",overrides:()=>({behaviours:Ml([np.config({})])})})]),TT=_m({name:"Toolbar",configFields:OT(),partFields:ET(),factory:(e,t,r,n)=>{var o=e.shell?{behaviours:[np.config({})],components:[]}:{behaviours:[],components:t};return{uid:e.uid,dom:e.dom,components:o.components,behaviours:_u(e.toolbarBehaviours,o.behaviours),apis:{setGroups:(t,r)=>{var n;(n=t,e.shell?P.some(n):cm(n,e,"groups")).fold((()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")}),(e=>{np.set(e,r)}))},refresh:_},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,t,r)=>{e.setGroups(t,r)}}}),AT=_,MT=L,NT=T([]),RT=Object.freeze({__proto__:null,setup:AT,isDocked:MT,getBehaviours:NT}),DT=e=>(Me(qt(e,"position"),"fixed")?P.none():vt(e)).orThunk((()=>{var t=We("span");return ht(e).bind((e=>{qr(e,t);var r=vt(t);return Kr(t),r}))})),BT=e=>DT(e).map(or).getOrThunk((()=>rr(0,0))),LT=(e,t)=>{var r=e.element;Gi(r,t.transitionClass),Ki(r,t.fadeOutClass),Gi(r,t.fadeInClass),t.onShow(e)},HT=(e,t)=>{var r=e.element;Gi(r,t.transitionClass),Ki(r,t.fadeInClass),Gi(r,t.fadeOutClass),t.onHide(e)},PT=(e,t)=>e.y>=t.y,IT=(e,t)=>e.bottom<=t.bottom,FT=(e,t,r)=>({location:"top",leftX:t,topY:r.bounds.y-e.y}),zT=(e,t,r)=>({location:"bottom",leftX:t,bottomY:e.bottom-r.bounds.bottom}),VT=e=>e.box.x-e.win.x,ZT=(e,t,r)=>r.getInitialPos().map((r=>{var n=((e,t)=>{var r=t.optScrollEnv.fold(T(e.bounds.y),(t=>t.scrollElmTop+(e.bounds.y-t.currentScrollTop)));return rr(e.bounds.x,r)})(r,t);return{box:on(n.left,n.top,sr(e),Qt(e)),location:r.location}})),jT=(e,t,r,n,o)=>{var a=((e,t)=>{var r=t.optScrollEnv.fold(T(e.y),(t=>e.y+t.currentScrollTop-t.scrollElmTop));return rr(e.x,r)})(t,r),i=on(a.left,a.top,t.width,t.height);n.setInitialPos({style:$t(e),position:Ut(e,"position")||"static",bounds:i,location:o.location})},UT=(e,t,r)=>r.getInitialPos().bind((n=>{var o;switch(r.clearInitialPos(),n.position){case"static":return P.some({morph:"static"});case"absolute":var a=DT(e).getOr(Mt()),i=an(a),s=null!==(o=a.dom.scrollTop)&&void 0!==o?o:0;return P.some({morph:"absolute",positionCss:Ul("absolute",Ee(n.style,"left").map((e=>t.x-i.x)),Ee(n.style,"top").map((e=>t.y-i.y+s)),Ee(n.style,"right").map((e=>i.right-t.right)),Ee(n.style,"bottom").map((e=>i.bottom-t.bottom)))});default:return P.none()}})),WT=e=>{switch(e.location){case"top":return P.some({morph:"fixed",positionCss:Ul("fixed",P.some(e.leftX),P.some(e.topY),P.none(),P.none())});case"bottom":return P.some({morph:"fixed",positionCss:Ul("fixed",P.some(e.leftX),P.none(),P.none(),P.some(e.bottomY))});default:return P.none()}},qT=(e,t,r)=>{var n=e.element;return Me(qt(n,"position"),"fixed")?((e,t,r)=>((e,t,r)=>ZT(e,t,r).filter((e=>{var{box:n}=e;return((e,t,r)=>ae(e,(e=>{switch(e){case"bottom":return IT(t,r.bounds);case"top":return PT(t,r.bounds)}})))(r.getModes(),n,t)})).bind((t=>{var{box:n}=t;return UT(e,n,r)})))(e,t,r).orThunk((()=>t.optScrollEnv.bind((n=>ZT(e,t,r))).bind((e=>{var{box:r,location:n}=e,o=dn(),a=VT({win:o,box:r}),i="top"===n?FT(o,a,t):zT(o,a,t);return WT(i)})))))(n,t,r):((e,t,r)=>{var n=an(e),o=dn(),a=((e,t,r)=>{var n=t.win,o=t.box,a=VT(t);return pe(e,(e=>{switch(e){case"bottom":return IT(o,r.bounds)?P.none():P.some(zT(n,a,r));case"top":return PT(o,r.bounds)?P.none():P.some(FT(n,a,r));default:return P.none()}})).getOr({location:"no-dock"})})(r.getModes(),{win:o,box:n},t);return"top"===a.location||"bottom"===a.location?(jT(e,n,t,r,a),WT(a)):P.none()})(n,t,r)},$T=(e,t,r)=>{r.setDocked(!1),Y(["left","right","top","bottom","position"],(t=>Kt(e.element,t))),t.onUndocked(e)},GT=(e,t,r,n)=>{var o="fixed"===n.position;r.setDocked(o),Wl(e.element,n),(o?t.onDocked:t.onUndocked)(e)},KT=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];t.contextual.each((t=>{t.lazyContext(e).each((a=>{var i=((e,t)=>e.y<t.bottom&&e.bottom>t.y)(a,n.bounds);i!==r.isVisible()&&(r.setVisible(i),o&&!i?(Xi(e.element,[t.fadeOutClass]),t.onHide(e)):(i?LT:HT)(e,t))}))}))},YT=(e,t,r,n,o)=>{KT(e,t,r,n,!0),GT(e,t,r,o.positionCss)},XT=(e,t,r)=>{e.getSystem().isConnected()&&((e,t,r)=>{var n=t.lazyViewport(e);KT(e,t,r,n),qT(e,n,r).each((o=>{((e,t,r,n,o)=>{switch(o.morph){case"static":return $T(e,t,r);case"absolute":return GT(e,t,r,o.positionCss);case"fixed":YT(e,t,r,n,o)}})(e,t,r,n,o)}))})(e,t,r)},JT=(e,t,r)=>{r.isDocked()&&((e,t,r)=>{var n=e.element;r.setDocked(!1);var o=t.lazyViewport(e);((e,t,r)=>{var n=e.element;return ZT(n,t,r).bind((e=>{var{box:t}=e;return UT(n,t,r)}))})(e,o,r).each((n=>{switch(n.morph){case"static":$T(e,t,r);break;case"absolute":GT(e,t,r,n.positionCss)}})),r.setVisible(!0),t.contextual.each((t=>{Ji(n,[t.fadeInClass,t.fadeOutClass,t.transitionClass]),t.onShow(e)})),XT(e,t,r)})(e,t,r)},QT=e=>(t,r,n)=>{var o=r.lazyViewport(t);((e,t,r,n)=>{var o=an(e),a=dn(),i=n(a,VT({win:a,box:o}),t);return"bottom"===i.location||"top"===i.location?(((e,t,r,n,o)=>{n.getInitialPos().fold((()=>jT(e,t,r,n,o)),(()=>_))})(e,o,t,r,i),WT(i)):P.none()})(t.element,o,n,e).each((e=>{YT(t,r,n,o,e)}))},eA=QT(FT),tA=QT(zT),rA=Object.freeze({__proto__:null,refresh:XT,reset:JT,isDocked:(e,t,r)=>r.isDocked(),getModes:(e,t,r)=>r.getModes(),setModes:(e,t,r,n)=>r.setModes(n),forceDockToTop:eA,forceDockToBottom:tA}),nA=Object.freeze({__proto__:null,events:(e,t)=>Ka([ai(ma(),((r,n)=>{e.contextual.each((e=>{Yi(r.element,e.transitionClass)&&(Ji(r.element,[e.transitionClass,e.fadeInClass]),(t.isVisible()?e.onShown:e.onHidden)(r)),n.stop()}))})),Ja(Ma(),((r,n)=>{XT(r,e,t)})),Ja(Ia(),((r,n)=>{XT(r,e,t)})),Ja(Na(),((r,n)=>{JT(r,e,t)}))])}),oA=[Oo("contextual",[go("fadeInClass"),go("fadeOutClass"),go("transitionClass"),po("lazyContext"),Is("onShow"),Is("onShown"),Is("onHide"),Is("onHidden")]),Do("lazyViewport",(()=>({bounds:dn(),optScrollEnv:P.none()}))),Bo("modes",["top","bottom"],qn),Is("onDocked"),Is("onUndocked")],aA=Rl({fields:oA,name:"docking",active:nA,apis:rA,state:Object.freeze({__proto__:null,init:e=>{var t=Ho(!1),r=Ho(!0),n=sd(),o=Ho(e.modes);return Li({isDocked:t.get,setDocked:t.set,getInitialPos:n.get,setInitialPos:n.set,clearInitialPos:n.clear,isVisible:r.get,setVisible:r.set,getModes:o.get,setModes:o.set,readState:()=>"docked:  ".concat(t.get(),", visible: ").concat(r.get(),", modes: ").concat(o.get().join(","))})}})}),iA=T(fi("toolbar-height-change")),sA={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},lA="tox-tinymce--toolbar-sticky-on",dA="tox-tinymce--toolbar-sticky-off",cA=(e,t)=>W(aA.getModes(e),t),uA=e=>{var t=e.element;pt(t).each((r=>{var n="padding-"+aA.getModes(e)[0];if(aA.isDocked(e)){var o=sr(r);Vt(t,"width",o+"px"),Vt(r,n,(e=>er(e)+(parseInt(Ut(e,"margin-top"),10)||0)+(parseInt(Ut(e,"margin-bottom"),10)||0))(t)+"px")}else Kt(t,"width"),Kt(r,n)}))},mA=(e,t)=>{t?(Ki(e,sA.fadeOutClass),Xi(e,[sA.transitionClass,sA.fadeInClass])):(Ki(e,sA.fadeInClass),Xi(e,[sA.fadeOutClass,sA.transitionClass]))},gA=(e,t)=>{var r=$e(e.getContainer());t?(Gi(r,lA),Ki(r,dA)):(Gi(r,dA),Ki(r,lA))},hA=(e,t)=>{var r=sd(),n=t.getSink,o=e=>{n().each((t=>e(t.element)))},a=t=>{e.inline||uA(t),gA(e,aA.isDocked(t)),t.getSystem().broadcastOn([ou()],{}),n().each((e=>e.getSystem().broadcastOn([ou()],{})))},i=e.inline?[]:[Hl.config({channels:{[iA()]:{onReceive:uA}}})];return[dp.config({}),aA.config({contextual:d({lazyContext:t=>{var r=er(t.element),n=e.inline?e.getContentAreaContainer():e.getContainer();return P.from(n).map((n=>{var o=an($e(n));return Xx(e,t.element).fold((()=>{var e=o.height-r,n=o.y+(cA(t,"top")?0:r);return on(o.x,n,o.width,e)}),(e=>{var n=ln(o,Jx(e)),a=cA(t,"top")?n.y:n.y+r;return on(n.x,a,n.width,n.height-r)}))}))},onShow:()=>{o((e=>mA(e,!0)))},onShown:e=>{o((e=>Ji(e,[sA.transitionClass,sA.fadeInClass]))),r.get().each((t=>{var n,o,a;n=e.element,a=ct(o=t),Vl(a).filter((e=>!lt(o,e))).filter((e=>lt(e,$e(a.dom.body))||dt(n,e))).each((()=>Il(o))),r.clear()}))},onHide:e=>{((e,t)=>Zl(e).orThunk((()=>t().toOptional().bind((e=>Zl(e.element))))))(e.element,n).fold(r.clear,r.set),o((e=>mA(e,!1)))},onHidden:()=>{o((e=>Ji(e,[sA.transitionClass])))}},sA),lazyViewport:t=>Xx(e,t.element).fold((()=>{var r=dn(),n=Hv(e),o=r.y+(cA(t,"top")?n:0),a=r.height-(cA(t,"bottom")?n:0);return{bounds:on(r.x,o,r.width,a),optScrollEnv:P.none()}}),(e=>({bounds:Jx(e),optScrollEnv:P.some({currentScrollTop:e.element.dom.scrollTop,scrollElmTop:or(e.element).top})}))),modes:[t.header.getDockingMode()],onDocked:a,onUndocked:a}),...i]},pA=Object.freeze({__proto__:null,setup:(e,t,r)=>{e.inline||(t.header.isPositionedAtTop()||e.on("ResizeEditor",(()=>{r().each(aA.reset)})),e.on("ResizeWindow ResizeEditor",(()=>{r().each(uA)})),e.on("SkinLoaded",(()=>{r().each((e=>{aA.isDocked(e)?aA.reset(e):aA.refresh(e)}))})),e.on("FullscreenStateChanged",(()=>{r().each(aA.reset)}))),e.on("AfterScrollIntoView",(e=>{r().each((t=>{aA.refresh(t);var r=t.element;Vg(r)&&((e,t)=>{var r=ct(t),n=gt(t).dom.innerHeight,o=Yr(r),a=$e(e.elm),i=sn(a),s=Qt(a),l=i.y,d=l+s,c=or(t),u=Qt(t),m=c.top,g=m+u,h=Math.abs(m-o.top)<2,p=Math.abs(g-(o.top+n))<2;if(h&&l<g)Xr(o.left,l-u,r);else if(p&&d>m){var v=l-n+s+u;Xr(o.left,v,r)}})(e,r)}))})),e.on("PostRender",(()=>{gA(e,!1)}))},isDocked:e=>e().map(aA.isDocked).getOr(!1),getBehaviours:hA}),vA=In([sb,uo("items",zn([Zn([lb,bo("items",qn)]),qn]))].concat(Pb)),fA=[Co("text"),Co("tooltip"),Co("icon"),To("search",!1,zn([$n,In([Co("placeholder")])],(e=>b(e)?e?P.some({placeholder:P.none()}):P.none():P.some(e)))),po("fetch"),Do("onSetup",(()=>_))],bA=In([sb,...fA]),yA=e=>eo("menubutton",bA,e),wA=In([sb,Cb,xb,wb,_b,hb,bb,No("presets","normal",["normal","color","listpreview"]),Mb(1),vb,fb]),xA=Sm({factory:(e,t)=>{var r={focus:Gh.focusIn,setMenus:(e,r)=>{var n=K(r,(e=>{var r={type:"menubutton",text:e.text,fetch:t=>{t(e.getItems())}},n=yA(r).mapError((e=>no(e))).getOrDie();return pO(n,"tox-mbtn",t.backstage,P.some("menuitem"))}));np.set(e,n)}};return{uid:e.uid,dom:e.dom,components:[],behaviours:Ml([np.config({}),op("menubar-events",[ii((t=>{e.onSetup(t)})),Ja(na(),((e,t)=>{Cs(e.element,".tox-mbtn--active").each((r=>{ks(t.event.target,".tox-mbtn").each((t=>{lt(r,t)||e.getSystem().getByDom(r).each((r=>{e.getSystem().getByDom(t).each((e=>{Px.expand(e),Px.close(r),dp.focus(e)}))}))}))}))})),Ja(Ha(),((e,t)=>{t.event.prevFocus.bind((t=>e.getSystem().getByDom(t).toOptional())).each((r=>{t.event.newFocus.bind((t=>e.getSystem().getByDom(t).toOptional())).each((e=>{Px.isOpen(r)&&(Px.expand(e),Px.close(r))}))}))}))]),Gh.config({mode:"flow",selector:".tox-mbtn",onEscape:t=>(e.onEscape(t),P.some(!0))}),vC.config({})]),apis:r,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[co("dom"),co("uid"),co("onEscape"),co("backstage"),Eo("onSetup",_)],apis:{focus:(e,t)=>{e.focus(t)},setMenus:(e,t,r)=>{e.setMenus(t,r)}}}),CA="container",kA=[ku("slotBehaviours",[])],SA=e=>"<alloy.field."+e+">",_A=(e,t)=>{var r=t=>hm(e),n=(t,r)=>(n,o)=>cm(n,e,o).map((e=>t(e,o))).getOr(r),o=(e,t)=>"true"!==Lt(e.element,"aria-hidden"),a=n(o,!1),i=n(((e,t)=>{if(o(e)){var r=e.element;Vt(r,"display","none"),Dt(r,"aria-hidden","true"),Ua(e,Pa(),{name:t,visible:!1})}})),s=(e=>(t,r)=>{Y(r,(r=>e(t,r)))})(i),l=n(((e,t)=>{if(!o(e)){var r=e.element;Kt(r,"display"),It(r,"aria-hidden"),Ua(e,Pa(),{name:t,visible:!0})}})),d={getSlotNames:r,getSlot:(t,r)=>cm(t,e,r),isShowing:a,hideSlot:i,hideAllSlots:e=>s(e,r()),showSlot:l};return{uid:e.uid,dom:e.dom,components:t,behaviours:Su(e.slotBehaviours),apis:d}},OA=ye({getSlotNames:(e,t)=>e.getSlotNames(t),getSlot:(e,t,r)=>e.getSlot(t,r),isShowing:(e,t,r)=>e.isShowing(t,r),hideSlot:(e,t,r)=>e.hideSlot(t,r),hideAllSlots:(e,t)=>e.hideAllSlots(t),showSlot:(e,t,r)=>e.showSlot(t,r)},(e=>Di(e))),EA=d(d({},OA),{sketch:e=>{var t=(()=>{var e=[];return{slot:(t,r)=>(e.push(t),am(CA,SA(t),r)),record:T(e)}})(),r=e(t),n=t.record(),o=K(n,(e=>Yu({name:e,pname:SA(e)})));return wm(CA,kA,o,_A,r)}}),TA=In([xb,Cb,Do("onShow",_),Do("onHide",_),bb]),AA=e=>({element:()=>e.element.dom}),MA=(e,t)=>{var r=K(ve(t),(e=>{var r=t[e],n=to((e=>eo("sidebar",TA,e))(r));return{name:e,getApi:AA,onSetup:n.onSetup,onShow:n.onShow,onHide:n.onHide}}));return K(r,(t=>{var n=Ho(_);return e.slot(t.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:hy([Dy(t,n),By(t,n),Ja(Pa(),((e,t)=>{var n=t.event,o=te(r,(e=>e.name===n.name));o.each((t=>{(n.visible?t.onShow:t.onHide)(t.getApi(e))}))}))])})}))},NA=e=>EA.sketch((t=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:MA(t,e),slotBehaviours:hy([ii((e=>EA.hideAllSlots(e)))])}))),RA=(e,t)=>{Dt(e,"role",t)},DA=e=>Am.getCurrent(e).bind((e=>gO.isGrowing(e)||gO.hasGrown(e)?Am.getCurrent(e).bind((e=>te(EA.getSlotNames(e),(t=>EA.isShowing(e,t))))):P.none())),BA=fi("FixSizeEvent"),LA=fi("AutoSizeEvent"),HA=Object.freeze({__proto__:null,block:(e,t,r,n)=>{Dt(e.element,"aria-busy",!0);var o=t.getRoot(e).getOr(e),a=Ml([Gh.config({mode:"special",onTab:()=>P.some(!0),onShiftTab:()=>P.some(!0)}),dp.config({})]),i=n(o,a),s=o.getSystem().build(i);np.append(o,ps(s)),s.hasConfigured(Gh)&&t.focus&&Gh.focusIn(s),r.isBlocked()||t.onBlock(e),r.blockWith((()=>np.remove(o,s)))},unblock:(e,t,r)=>{It(e.element,"aria-busy"),r.isBlocked()&&t.onUnblock(e),r.clear()},isBlocked:(e,t,r)=>r.isBlocked()}),PA=[Do("getRoot",P.none),Ro("focus",!0),Is("onBlock"),Is("onUnblock")],IA=Rl({fields:PA,name:"blocking",apis:HA,state:Object.freeze({__proto__:null,init:()=>{var e=ad((e=>e.destroy()));return Li({readState:e.isSet,blockWith:t=>{e.set({destroy:t})},clear:e.clear,isBlocked:e.isSet})}})}),FA=e=>{var t=Ue(e),r=ft(t),n=(e=>{var t=void 0!==e.dom.attributes?e.dom.attributes:[];return ee(t,((e,t)=>"class"===t.name?e:d(d({},e),{},{[t.name]:t.value})),{})})(t),o=(e=>Array.prototype.slice.call(e.dom.classList,0))(t),a=0===r.length?{}:{innerHtml:ci(t)};return d({tag:Je(t),classes:o,attributes:n},a)},zA=e=>Am.getCurrent(e).each((e=>Il(e.element))),VA=(e,t,r)=>{var n=Ho(!1),o=sd(),a=r=>{var o;!n.get()||(e=>"focusin"===e.type)(o=r)&&(o.composed?me(o.composedPath()):P.from(o.target)).map($e).filter(tt).exists((e=>Yi(e,"mce-pastebin")))||(r.preventDefault(),zA(t()),e.editorManager.setActive(e))};e.inline||e.on("PreInit",(()=>{e.dom.bind(e.getWin(),"focusin",a),e.on("BeforeExecCommand",(e=>{"mcefocus"===e.command.toLowerCase()&&!0!==e.value&&a(e)}))}));var i=o=>{o!==n.get()&&(n.set(o),((e,t,r,n)=>{var o=t.element;if(((e,t)=>{var r="tabindex",n="data-mce-".concat(r);P.from(e.iframeElement).map($e).each((e=>{t?(Ht(e,r).each((t=>Dt(e,n,t))),Dt(e,r,-1)):(It(e,r),Ht(e,n).each((t=>{Dt(e,r,t),It(e,n)})))}))})(e,r),r)IA.block(t,(e=>(t,r)=>({dom:{tag:"div",attributes:{"aria-label":e.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:FA('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}))(n)),Kt(o,"display"),It(o,"aria-hidden"),e.hasFocus()&&zA(t);else{var a=Am.getCurrent(t).exists((e=>zl(e.element)));IA.unblock(t),Vt(o,"display","none"),Dt(o,"aria-hidden","true"),a&&e.focus()}})(e,t(),o,r.providers),((e,t)=>{e.dispatch("AfterProgressState",{state:t})})(e,o))};e.on("ProgressState",(t=>{if(o.on(clearTimeout),k(t.time)){var r=Yp.setEditorTimeout(e,(()=>i(t.state)),t.time);o.set(r)}else i(t.state),o.clear()}))},ZA=(e,t,r)=>({within:e,extra:t,withinWidth:r}),jA=(e,t,r)=>{var n=ee(e,((e,t)=>{return(n=t,o=e.len,a=r(n),P.some({element:n,start:o,finish:o+a,width:a})).fold(T(e),(t=>({len:t.finish,list:e.list.concat([t])})));var n,o,a}),{len:0,list:[]}).list,o=J(n,(e=>e.finish<=t)),a=Q(o,((e,t)=>e+t.width),0);return{within:o,extra:n.slice(o.length),withinWidth:a}},UA=e=>K(e,(e=>e.element)),WA=(e,t)=>{var r=K(t,(e=>ps(e)));TT.setGroups(e,r)},qA=(e,t,r)=>{var n=t.builtGroups.get();if(0!==n.length){var o=um(e,t,"primary"),a=fx.getCoupled(e,"overflowGroup");Vt(o.element,"visibility","hidden");var i=n.concat([a]),s=pe(i,(e=>Zl(e.element).bind((t=>e.getSystem().getByDom(t).toOptional()))));r([]),WA(o,i);var l=((e,t,r,n)=>{var o=((e,t,r)=>{var n=jA(t,e,r);return 0===n.extra.length?P.some(n):P.none()})(e,t,r).getOrThunk((()=>jA(t,e-r(n),r))),a=o.within,i=o.extra,s=o.withinWidth;return 1===i.length&&i[0].width<=r(n)?((e,t,r)=>{var n=UA(e.concat(t));return ZA(n,[],r)})(a,i,s):i.length>=1?((e,t,r,n)=>{var o=UA(e).concat([r]);return ZA(o,UA(t),n)})(a,i,n,s):((e,t,r)=>ZA(UA(e),[],r))(a,0,s)})(sr(o.element),t.builtGroups.get(),(e=>sr(e.element)),a);0===l.extra.length?(np.remove(o,a),r([])):(WA(o,l.within),r(l.extra)),Kt(o.element,"visibility"),Yt(o.element),s.each(dp.focus)}},$A=T([ku("splitToolbarBehaviours",[fx]),so("builtGroups",(()=>Ho([])))]),GA=T([Hs(["overflowToggledClass"]),So("getOverflowBounds"),co("lazySink"),so("overflowGroups",(()=>Ho([]))),Is("onOpened"),Is("onClosed")].concat($A())),KA=T([Yu({factory:TT,schema:OT(),name:"primary"}),Xu({schema:OT(),name:"overflow"}),Xu({name:"overflow-button"}),Xu({name:"overflow-group"})]),YA=T(((e,t)=>{((e,t)=>{var r=ir.max(e,t,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]);Vt(e,"max-width",r+"px")})(e,Math.floor(t))})),XA=T([Hs(["toggledClass"]),co("lazySink"),po("fetch"),So("getBounds"),Oo("fireDismissalEventInstead",[Eo("event",Ba())]),Td(),Is("onToggled")]),JA=T([Xu({name:"button",overrides:e=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Ml([fp.config({toggleClass:e.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:e.onToggled})])})}),Xu({factory:TT,schema:OT(),name:"toolbar",overrides:e=>({toolbarBehaviours:Ml([Gh.config({mode:"cyclic",onEscape:t=>(cm(t,e,"button").each(dp.focus),P.none())})])})})]),QA=sd(),eM=(e,t)=>{var r=fx.getCoupled(e,"toolbarSandbox");ru.isOpen(r)?ru.close(r):ru.open(r,t.toolbar())},tM=(e,t,r,n)=>{var o=r.getBounds.map((e=>e())),a=r.lazySink(e).getOrDie();Mc.positionWithinBounds(a,t,{anchor:{type:"hotspot",hotspot:e,layouts:n,overrides:{maxWidthFunction:YA()}}},o)},rM=(e,t,r,n,o)=>{TT.setGroups(t,o),tM(e,t,r,n),fp.on(e)},nM=_m({name:"FloatingToolbarButton",factory:(e,t,r,n)=>d(d({},Xp.sketch(d(d({},n.button()),{},{action:e=>{eM(e,n)},buttonBehaviours:Eu({dump:n.button().buttonBehaviours},[fx.config({others:{toolbarSandbox:t=>((e,t,r)=>{var n=_s();return{dom:{tag:"div",attributes:{id:n.id}},behaviours:Ml([Gh.config({mode:"special",onEscape:e=>(ru.close(e),P.some(!0))}),ru.config({onOpen:(o,a)=>{var i=QA.get().getOr(!1);r.fetch().get((o=>{rM(e,a,r,t.layouts,o),n.link(e.element),i||Gh.focusIn(a)}))},onClose:()=>{fp.off(e),QA.get().getOr(!1)||dp.focus(e),n.unlink(e.element)},isPartOf:(t,r,n)=>Os(r,n)||Os(e,n),getAttachPoint:()=>r.lazySink(e).getOrDie()}),Hl.config({channels:d(d({},su(d({isExtraPart:L},r.fireDismissalEventInstead.map((e=>({fireEventInstead:{event:e.event}}))).getOr({})))),du({doReposition:()=>{ru.getState(fx.getCoupled(e,"toolbarSandbox")).each((n=>{tM(e,n,r,t.layouts)}))}}))})])}})(t,r,e)}})])}))),{},{apis:{setGroups:(t,n)=>{ru.getState(fx.getCoupled(t,"toolbarSandbox")).each((o=>{rM(t,o,e,r.layouts,n)}))},reposition:t=>{ru.getState(fx.getCoupled(t,"toolbarSandbox")).each((n=>{tM(t,n,e,r.layouts)}))},toggle:e=>{eM(e,n)},toggleWithoutFocusing:e=>{((e,t)=>{QA.set(!0),eM(e,t),QA.clear()})(e,n)},getToolbar:e=>ru.getState(fx.getCoupled(e,"toolbarSandbox")),isOpen:e=>ru.isOpen(fx.getCoupled(e,"toolbarSandbox"))}}),configFields:XA(),partFields:JA(),apis:{setGroups:(e,t,r)=>{e.setGroups(t,r)},reposition:(e,t)=>{e.reposition(t)},toggle:(e,t)=>{e.toggle(t)},toggleWithoutFocusing:(e,t)=>{e.toggleWithoutFocusing(t)},getToolbar:(e,t)=>e.getToolbar(t),isOpen:(e,t)=>e.isOpen(t)}}),oM=T([co("items"),Hs(["itemSelector"]),ku("tgroupBehaviours",[Gh])]),aM=T([Qu({name:"items",unit:"item"})]),iM=_m({name:"ToolbarGroup",configFields:oM(),partFields:aM(),factory:(e,t,r,n)=>({uid:e.uid,dom:e.dom,components:t,behaviours:_u(e.tgroupBehaviours,[Gh.config({mode:"flow",selector:e.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}})}),sM=e=>K(e,(e=>ps(e))),lM=(e,t,r)=>{qA(e,r,(n=>{r.overflowGroups.set(n),t.getOpt(e).each((e=>{nM.setGroups(e,sM(n))}))}))},dM=_m({name:"SplitFloatingToolbar",configFields:GA(),partFields:KA(),factory:(e,t,r,n)=>{var o=Jp(nM.sketch({fetch:()=>Cx((t=>{t(sM(e.overflowGroups.get()))})),layouts:{onLtr:()=>[ml,ul],onRtl:()=>[ul,ml],onBottomLtr:()=>[hl,gl],onBottomRtl:()=>[gl,hl]},getBounds:r.getOverflowBounds,lazySink:e.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:e.markers.overflowToggledClass},parts:{button:n["overflow-button"](),toolbar:n.overflow()},onToggled:(t,r)=>e[r?"onOpened":"onClosed"](t)}));return{uid:e.uid,dom:e.dom,components:t,behaviours:_u(e.splitToolbarBehaviours,[fx.config({others:{overflowGroup:()=>iM.sketch(d(d({},n["overflow-group"]()),{},{items:[o.asSpec()]}))}})]),apis:{setGroups:(t,r)=>{e.builtGroups.set(K(r,t.getSystem().build)),lM(t,o,e)},refresh:t=>lM(t,o,e),toggle:e=>{o.getOpt(e).each((e=>{nM.toggle(e)}))},toggleWithoutFocusing:e=>{o.getOpt(e).each(nM.toggleWithoutFocusing)},isOpen:e=>o.getOpt(e).map(nM.isOpen).getOr(!1),reposition:e=>{o.getOpt(e).each((e=>{nM.reposition(e)}))},getOverflow:e=>o.getOpt(e).bind(nM.getToolbar)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,t,r)=>{e.setGroups(t,r)},refresh:(e,t)=>{e.refresh(t)},reposition:(e,t)=>{e.reposition(t)},toggle:(e,t)=>{e.toggle(t)},toggleWithoutFocusing:(e,t)=>{e.toggle(t)},isOpen:(e,t)=>e.isOpen(t),getOverflow:(e,t)=>e.getOverflow(t)}}),cM=T([Hs(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Is("onOpened"),Is("onClosed")].concat($A())),uM=T([Yu({factory:TT,schema:OT(),name:"primary"}),Yu({factory:TT,schema:OT(),name:"overflow",overrides:e=>({toolbarBehaviours:Ml([gO.config({dimension:{property:"height"},closedClass:e.markers.closedClass,openClass:e.markers.openClass,shrinkingClass:e.markers.shrinkingClass,growingClass:e.markers.growingClass,onShrunk:t=>{cm(t,e,"overflow-button").each((e=>{fp.off(e),dp.focus(e)})),e.onClosed(t)},onGrown:t=>{Gh.focusIn(t),e.onOpened(t)},onStartGrow:t=>{cm(t,e,"overflow-button").each(fp.on)}}),Gh.config({mode:"acyclic",onEscape:t=>(cm(t,e,"overflow-button").each(dp.focus),P.some(!0))})])})}),Xu({name:"overflow-button",overrides:e=>({buttonBehaviours:Ml([fp.config({toggleClass:e.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),Xu({name:"overflow-group"})]),mM=(e,t)=>{cm(e,t,"overflow-button").bind((()=>cm(e,t,"overflow"))).each((r=>{gM(e,t),gO.toggleGrow(r)}))},gM=(e,t)=>{cm(e,t,"overflow").each((r=>{qA(e,t,(e=>{var t=K(e,(e=>ps(e)));TT.setGroups(r,t)})),cm(e,t,"overflow-button").each((e=>{gO.hasGrown(r)&&fp.on(e)})),gO.refresh(r)}))},hM=_m({name:"SplitSlidingToolbar",configFields:cM(),partFields:uM(),factory:(e,t,r,n)=>{var o="alloy.toolbar.toggle";return{uid:e.uid,dom:e.dom,components:t,behaviours:_u(e.splitToolbarBehaviours,[fx.config({others:{overflowGroup:e=>iM.sketch(d(d({},n["overflow-group"]()),{},{items:[Xp.sketch(d(d({},n["overflow-button"]()),{},{action:t=>{ja(e,o)}}))]}))}}),op("toolbar-toggle-events",[Ja(o,(t=>{mM(t,e)}))])]),apis:{setGroups:(t,r)=>{((t,r)=>{var n=K(r,t.getSystem().build);e.builtGroups.set(n)})(t,r),gM(t,e)},refresh:t=>gM(t,e),toggle:t=>mM(t,e),isOpen:t=>((e,t)=>cm(e,t,"overflow").map(gO.hasGrown).getOr(!1))(t,e)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,t,r)=>{e.setGroups(t,r)},refresh:(e,t)=>{e.refresh(t)},toggle:(e,t)=>{e.toggle(t)},isOpen:(e,t)=>e.isOpen(t)}}),pM=e=>{var t=e.title.fold((()=>({})),(e=>({attributes:{title:e}})));return{dom:d({tag:"div",classes:["tox-toolbar__group"]},t),components:[iM.parts.items({})],items:e.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Ml([vC.config({}),dp.config({})])}},vM=e=>iM.sketch(pM(e)),fM=(e,t)=>{var r=ii((t=>{var r=K(e.initGroups,vM);TT.setGroups(t,r)}));return Ml([Ny(e.providers.isDisabled),Ty(),Gh.config({mode:t,onEscape:e.onEscape,selector:".tox-toolbar__group"}),op("toolbar-events",[r])])},bM=e=>{var t=e.cyclicKeying?"cyclic":"acyclic";return{uid:e.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":pM({title:P.none(),items:[]}),"overflow-button":VO({name:"more",icon:P.some("more-drawer"),enabled:!0,tooltip:P.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:P.none(),borderless:!1},P.none(),e.providers)},splitToolbarBehaviours:fM(e,t)}},yM=e=>{var t=bM(e),r=dM.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return dM.sketch(d(d({},t),{},{lazySink:e.getSink,getOverflowBounds:()=>{var t=e.moreDrawerData.lazyHeader().element,r=sn(t),n=mt(t),o=sn(n),a=Math.max(n.dom.scrollHeight,o.height);return on(r.x+4,o.y,r.width-8,a)},parts:d(d({},t.parts),{},{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:e.attributes}}}),components:[r],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:t=>e.onToggled(t,!0),onClosed:t=>e.onToggled(t,!1)}))},wM=e=>{var t=hM.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),r=hM.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),n=bM(e);return hM.sketch(d(d({},n),{},{components:[t,r],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:t=>{t.getSystem().broadcastOn([iA()],{type:"opened"}),e.onToggled(t,!0)},onClosed:t=>{t.getSystem().broadcastOn([iA()],{type:"closed"}),e.onToggled(t,!1)}}))},xM=e=>{var t=e.cyclicKeying?"cyclic":"acyclic";return TT.sketch({uid:e.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(e.type===Wp.scrolling?["tox-toolbar--scrolling"]:[])},components:[TT.parts.groups({})],toolbarBehaviours:fM(e,t)})},CM=[wb,xb,Co("tooltip"),No("buttonType","secondary",["primary","secondary"]),Ro("borderless",!1),po("onAction")],kM={button:[...CM,cb,ho("type",["button"])],togglebutton:[...CM,Ro("active",!1),ho("type",["togglebutton"])]},SM=[ho("type",["group"]),Bo("buttons",[],oo("type",kM))],_M=oo("type",d(d({},kM),{},{group:SM})),OM=In([Bo("buttons",[],_M),po("onShow"),po("onHide")]),EM=(e,t)=>((e,t)=>{var r,n,o="togglebutton"===e.type,a=e.icon.map((e=>A_(e,t.icons))).map(Jp),i=d(d({},e),{},{name:o?e.text.getOr(e.icon.getOr("")):null!==(r=e.text)&&void 0!==r?r:e.icon.getOr(""),primary:"primary"===e.buttonType,buttonType:P.from(e.buttonType),tooltip:e.tooltip,icon:e.icon,enabled:!0,borderless:e.borderless}),s=ZO(null!==(n=e.buttonType)&&void 0!==n?n:"secondary"),l=o?e.text.map(t.translate):P.some(t.translate(e.text)),c=l.map(cs),u=i.tooltip.or(l).map((e=>({"aria-label":t.translate(e),title:t.translate(e)}))).getOr({}),m=a.map((e=>e.asSpec())),g=Py([m,c]),h=e.icon.isSome()&&c.isSome(),p={tag:"button",classes:s.concat(...e.icon.isSome()&&!h?["tox-button--icon"]:[]).concat(...h?["tox-button--icon-and-text"]:[]).concat(...e.borderless?["tox-button--naked"]:[]).concat(..."togglebutton"===e.type&&e.active?["tox-button--enabled"]:[]),attributes:u},v=zO(i,P.some((r=>{var n=e=>{a.map((n=>n.getOpt(r).each((r=>{np.set(r,[A_(e,t.icons)])}))))};return o?e.onAction({setIcon:n,setActive:e=>{var t=r.element;e?(Gi(t,"tox-button--enabled"),Dt(t,"aria-pressed",!0)):(Ki(t,"tox-button--enabled"),It(t,"aria-pressed"))},isActive:()=>Yi(r.element,"tox-button--enabled")}):"button"===e.type?e.onAction({setIcon:n}):void 0})),[],p,g,t);return Xp.sketch(v)})(e,t),TM=Fr().deviceType,AM=TM.isPhone(),MM=TM.isTablet(),NM=_m({name:"silver.View",configFields:[co("viewConfig")],partFields:[Ju({factory:{sketch:e=>{var t=!1,r=K(e.buttons,(r=>"group"===r.type?(t=!0,((e,t)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:K(e.buttons,(e=>EM(e,t)))}))(r,e.providers)):EM(r,e.providers)));return{uid:e.uid,dom:{tag:"div",classes:[t?"tox-view__toolbar":"tox-view__header",...AM||MM?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Ml([dp.config({}),Gh.config({mode:"flow",selector:"button, .tox-button",focusInside:ec.OnEnterOrSpaceMode})]),components:t?r:[dC.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),dC.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:r})]}}},schema:[co("buttons"),co("providers")],name:"header"}),Ju({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-view__pane"]}})},schema:[],name:"pane"})],factory:(e,t,r,n)=>{var o={getPane:t=>wT.getPart(t,e,"pane"),getOnShow:t=>e.viewConfig.onShow,getOnHide:t=>e.viewConfig.onHide};return{uid:e.uid,dom:e.dom,components:t,apis:o}},apis:{getPane:(e,t)=>e.getPane(t),getOnShow:(e,t)=>e.getOnShow(t),getOnHide:(e,t)=>e.getOnHide(t)}}),RM=(e,t,r)=>Se(t,((t,n)=>{var o=to(eo("view",OM,t));return e.slot(n,NM.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:o,components:[...o.buttons.length>0?[NM.parts.header({buttons:o.buttons,providers:r})]:[],NM.parts.pane({})]}))})),DM=(e,t)=>EA.sketch((r=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:RM(r,e,t),slotBehaviours:hy([ii((e=>EA.hideAllSlots(e)))])}))),BM=e=>te(EA.getSlotNames(e),(t=>EA.isShowing(e,t))),LM=(e,t,r)=>{EA.getSlot(e,t).each((e=>{NM.getPane(e).each((t=>{var n;r(e)((n=t.element.dom,{getContainer:T(n)}))}))}))},HM=Sm({factory:(e,t)=>{var r={setViews:(e,r)=>{np.set(e,[DM(r,t.backstage.shared.providers)])},whichView:e=>Am.getCurrent(e).bind(BM),toggleView:(e,t,r,n)=>Am.getCurrent(e).exists((o=>{var a=BM(o),i=a.exists((e=>n===e)),s=EA.getSlot(o,n).isSome();return s&&(EA.hideAllSlots(o),i?((e=>{var t=e.element;Vt(t,"display","none"),Dt(t,"aria-hidden","true")})(e),t()):(r(),(e=>{var t=e.element;Kt(t,"display"),It(t,"aria-hidden")})(e),EA.showSlot(o,n),((e,t)=>{LM(e,t,NM.getOnShow)})(o,n)),a.each((e=>((e,t)=>LM(e,t,NM.getOnHide))(o,e)))),s}))};return{uid:e.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Ml([np.config({}),Am.config({find:e=>{var t=np.contents(e);return me(t)}})]),apis:r}},name:"silver.ViewWrapper",configFields:[co("backstage")],apis:{setViews:(e,t,r)=>e.setViews(t,r),toggleView:(e,t,r,n,o)=>e.toggleView(t,r,n,o),whichView:(e,t)=>e.whichView(t)}}),PM=xT.optional({factory:xA,name:"menubar",schema:[co("backstage")]}),IM=xT.optional({factory:{sketch:e=>_T.sketch({uid:e.uid,dom:e.dom,listBehaviours:Ml([Gh.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>xM({type:e.type,uid:fi("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:e.providers,onEscape:()=>(e.onEscape(),P.some(!0))}),setupItem:(e,t,r,n)=>{TT.setGroups(t,r)},shell:!0})},name:"multiple-toolbar",schema:[co("dom"),co("onEscape")]}),FM=xT.optional({factory:{sketch:e=>{var t=(e=>e.type===Wp.sliding?wM:e.type===Wp.floating?yM:xM)(e);return t({type:e.type,uid:e.uid,onEscape:()=>(e.onEscape(),P.some(!0)),onToggled:(t,r)=>e.onToolbarToggled(r),cyclicKeying:!1,initGroups:[],getSink:e.getSink,providers:e.providers,moreDrawerData:{lazyToolbar:e.lazyToolbar,lazyMoreButton:e.lazyMoreButton,lazyHeader:e.lazyHeader},attributes:e.attributes})}},name:"toolbar",schema:[co("dom"),co("onEscape"),co("getSink")]}),zM=xT.optional({factory:{sketch:e=>{var t=e.editor,r=e.sticky?hA:NT;return{uid:e.uid,dom:e.dom,components:e.components,behaviours:Ml(r(t,e.sharedBackstage))}}},name:"header",schema:[co("dom")]}),VM=xT.optional({factory:{sketch:e=>({uid:e.uid,dom:e.dom,components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_source=TinyMCE&utm_medium=SPAP&utm_campaign=SPAP&utm_id=editorreferral",rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:"Upgrade"}}]})},name:"promotion",schema:[co("dom")]}),ZM=xT.optional({name:"socket",schema:[co("dom")]}),jM=xT.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Ml([vC.config({}),dp.config({}),gO.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:e=>{Am.getCurrent(e).each(EA.hideAllSlots),ja(e,LA)},onGrown:e=>{ja(e,LA)},onStartGrow:e=>{Ua(e,BA,{width:qt(e.element,"width").getOr("")})},onStartShrink:e=>{Ua(e,BA,{width:sr(e.element)+"px"})}}),np.config({}),Am.config({find:e=>{var t=np.contents(e);return me(t)}})])}],behaviours:Ml([WS(0),op("sidebar-sliding-events",[Ja(BA,((e,t)=>{Vt(e.element,"width",t.event.width)})),Ja(LA,((e,t)=>{Kt(e.element,"width")}))])])})},name:"sidebar",schema:[co("dom")]}),UM=xT.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Ml([np.config({}),IA.config({focus:!1}),Am.config({find:e=>me(e.components())})]),components:[]})},name:"throbber",schema:[co("dom")]}),WM=xT.optional({factory:HM,name:"viewWrapper",schema:[co("backstage")]}),qM=xT.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:e.components})},name:"editorContainer",schema:[]}),$M=_m({name:"OuterContainer",factory:(e,t,r)=>{var n=!1,o={getSocket:t=>wT.getPart(t,e,"socket"),setSidebar:(t,r,n)=>{wT.getPart(t,e,"sidebar").each((e=>((e,t,r)=>{Am.getCurrent(e).each((n=>{np.set(n,[NA(t)]);var o=null==r?void 0:r.toLowerCase();g(o)&&Te(t,o)&&Am.getCurrent(n).each((t=>{EA.showSlot(t,o),gO.immediateGrow(n),Kt(n.element,"width"),RA(e.element,"region")}))}))})(e,r,n)))},toggleSidebar:(t,r)=>{wT.getPart(t,e,"sidebar").each((e=>((e,t)=>{Am.getCurrent(e).each((r=>{Am.getCurrent(r).each((n=>{gO.hasGrown(r)?EA.isShowing(n,t)?(gO.shrink(r),RA(e.element,"presentation")):(EA.hideAllSlots(n),EA.showSlot(n,t),RA(e.element,"region")):(EA.hideAllSlots(n),EA.showSlot(n,t),gO.grow(r),RA(e.element,"region"))}))}))})(e,r)))},whichSidebar:t=>wT.getPart(t,e,"sidebar").bind(DA).getOrNull(),getHeader:t=>wT.getPart(t,e,"header"),getToolbar:t=>wT.getPart(t,e,"toolbar"),setToolbar:(t,r)=>{wT.getPart(t,e,"toolbar").each((e=>{var t=K(r,vM);e.getApis().setGroups(e,t)}))},setToolbars:(t,r)=>{wT.getPart(t,e,"multiple-toolbar").each((e=>{var t=K(r,(e=>K(e,vM)));_T.setItems(e,t)}))},refreshToolbar:t=>{wT.getPart(t,e,"toolbar").each((e=>e.getApis().refresh(e)))},toggleToolbarDrawer:t=>{wT.getPart(t,e,"toolbar").each((e=>{De(e.getApis().toggle,(t=>t(e)))}))},toggleToolbarDrawerWithoutFocusing:t=>{wT.getPart(t,e,"toolbar").each((e=>{De(e.getApis().toggleWithoutFocusing,(t=>t(e)))}))},isToolbarDrawerToggled:t=>wT.getPart(t,e,"toolbar").bind((e=>P.from(e.getApis().isOpen).map((t=>t(e))))).getOr(!1),getThrobber:t=>wT.getPart(t,e,"throbber"),focusToolbar:t=>{wT.getPart(t,e,"toolbar").orThunk((()=>wT.getPart(t,e,"multiple-toolbar"))).each((e=>{Gh.focusIn(e)}))},setMenubar:(t,r)=>{wT.getPart(t,e,"menubar").each((e=>{xA.setMenus(e,r)}))},focusMenubar:t=>{wT.getPart(t,e,"menubar").each((e=>{xA.focus(e)}))},setViews:(t,r)=>{wT.getPart(t,e,"viewWrapper").each((e=>{HM.setViews(e,r)}))},toggleView:(t,r)=>wT.getPart(t,e,"viewWrapper").exists((e=>HM.toggleView(e,(()=>o.showMainView(t)),(()=>o.hideMainView(t)),r))),whichView:t=>wT.getPart(t,e,"viewWrapper").bind(HM.whichView).getOrNull(),hideMainView:t=>{(n=o.isToolbarDrawerToggled(t))&&o.toggleToolbarDrawer(t),wT.getPart(t,e,"editorContainer").each((e=>{var t=e.element;Vt(t,"display","none"),Dt(t,"aria-hidden","true")}))},showMainView:t=>{n&&o.toggleToolbarDrawer(t),wT.getPart(t,e,"editorContainer").each((e=>{var t=e.element;Kt(t,"display"),It(t,"aria-hidden")}))}};return{uid:e.uid,dom:e.dom,components:t,apis:o,behaviours:e.behaviours}},configFields:[co("dom"),co("behaviours")],partFields:[zM,PM,FM,IM,ZM,jM,VM,UM,WM,qM],apis:{getSocket:(e,t)=>e.getSocket(t),setSidebar:(e,t,r,n)=>{e.setSidebar(t,r,n)},toggleSidebar:(e,t,r)=>{e.toggleSidebar(t,r)},whichSidebar:(e,t)=>e.whichSidebar(t),getHeader:(e,t)=>e.getHeader(t),getToolbar:(e,t)=>e.getToolbar(t),setToolbar:(e,t,r)=>{e.setToolbar(t,r)},setToolbars:(e,t,r)=>{e.setToolbars(t,r)},refreshToolbar:(e,t)=>e.refreshToolbar(t),toggleToolbarDrawer:(e,t)=>{e.toggleToolbarDrawer(t)},toggleToolbarDrawerWithoutFocusing:(e,t)=>{e.toggleToolbarDrawerWithoutFocusing(t)},isToolbarDrawerToggled:(e,t)=>e.isToolbarDrawerToggled(t),getThrobber:(e,t)=>e.getThrobber(t),setMenubar:(e,t,r)=>{e.setMenubar(t,r)},focusMenubar:(e,t)=>{e.focusMenubar(t)},focusToolbar:(e,t)=>{e.focusToolbar(t)},setViews:(e,t,r)=>{e.setViews(t,r)},toggleView:(e,t,r)=>e.toggleView(t,r),whichView:(e,t)=>e.whichView(t)}}),GM={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},KM=e=>e.split(" "),YM=(e,t)=>{var r=d(d({},GM),t.menus),n=ve(t.menus).length>0,o=void 0===t.menubar||!0===t.menubar?KM("file edit view insert format tools table help"):KM(!1===t.menubar?"":t.menubar),a=J(o,(e=>{var r=Te(GM,e);return n?r||Ee(t.menus,e).exists((e=>Te(e,"items"))):r})),i=K(a,(n=>{var o=r[n];return((e,t,r)=>{var n=Av(r).split(/[ ,]/);return{text:e.title,getItems:()=>oe(e.items,(e=>{var r=e.toLowerCase();return 0===r.trim().length||q(n,(e=>e===r))?[]:"separator"===r||"|"===r?[{type:"separator"}]:t.menuItems[r]?[t.menuItems[r]]:[]}))}})({title:o.title,items:KM(o.items)},t,e)}));return J(i,(e=>e.getItems().length>0&&q(e.getItems(),(e=>g(e)||"separator"!==e.type))))},XM=e=>{var t=()=>{e._skinLoaded=!0,(e=>{e.dispatch("SkinLoaded")})(e)};return()=>{e.initialized?t():e.on("init",t)}},JM=(e,t,r)=>(e.on("remove",(()=>r.unload(t))),r.load(t)),QM=(e,t)=>JM(e,t+"/skin.min.css",e.ui.styleSheetLoader),eN=(e,t)=>{var r;return r=$e(e.getElement()),Et(r).isSome()?JM(e,t+"/skin.shadowdom.min.css",uv.DOM.styleSheetLoader):Promise.resolve()},tN=(e,t)=>{var r=nf(t);return r&&t.contentCSS.push(r+(e?"/content.inline":"/content")+".min.css"),!tf(t)&&g(r)?Promise.all([QM(t,r),eN(t,r)]).then(XM(t),((e,t)=>()=>((e,t)=>{e.dispatch("SkinLoadError",t)})(e,{message:"Skin could not be loaded"}))(t)):Promise.resolve(XM(t)())},rN=N(tN,!1),nN=N(tN,!0),oN=(e,t,r)=>{var n=(e,n,a,i)=>{var s=t.shared.providers.translate(e.title);if("separator"===e.type)return P.some({type:"separator",text:s});if("submenu"===e.type){var l=oe(e.getStyleItems(),(e=>o(e,n,i)));return 0===n&&l.length<=0?P.none():P.some({type:"nestedmenuitem",text:s,enabled:l.length>0,getSubmenuItems:()=>oe(e.getStyleItems(),(e=>o(e,n,i)))})}return P.some(d({type:"togglemenuitem",text:s,icon:e.icon,active:e.isSelected(i),enabled:!a,onAction:r.onAction(e)},e.getStylePreview().fold((()=>({})),(e=>({meta:{style:e}})))))},o=(e,t,o)=>{var a="formatter"===e.type&&r.isInvalid(e);return 0===t?a?[]:n(e,t,!1,o).toArray():n(e,t,a,o).toArray()},a=e=>{var t=r.getCurrentValue(),n=r.shouldHide?0:1;return oe(e,(e=>o(e,n,t)))};return{validateItems:a,getFetch:(e,t)=>(r,n)=>{var o=t(),i=a(o);n(P_(i,xf.CLOSE_ON_EXECUTE,e,{isHorizontalMenu:!1,search:P.none()}))}}},aN=(e,t,r)=>{var n=r.dataset,o="basic"===n.type?()=>K(n.data,(e=>$E(e,r.isSelectedFor,r.getPreviewFor))):n.getData;return{items:oN(0,t,r),getStyleItems:o}},iN=(e,t,r)=>{var{items:n,getStyleItems:o}=aN(0,t,r),a=_w(e,"NodeChange",(t=>{var n=t.getComponent();r.updateText(n),jm.set(t.getComponent(),!e.selection.isEditable())}));return D_({text:r.icon.isSome()?P.none():r.text,icon:r.icon,tooltip:P.from(r.tooltip),role:P.none(),fetch:n.getFetch(t,o),onSetup:a,getApi:e=>({getComponent:T(e)}),columns:1,presets:"normal",classes:r.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",t.shared)};!function(e){e[e.SemiColon=0]="SemiColon",e[e.Space=1]="Space"}(Zx||(Zx={}));var sN,lN,dN,cN,uN,mN,gN=(e,t,r)=>{var n,o=(n=((e,t)=>t===Zx.SemiColon?e.replace(/;$/,"").split(";"):e.split(" "))(e.options.get(t),r),K(n,(e=>{var t=e,r=e,n=e.split("=");return n.length>1&&(t=n[0],r=n[1]),{title:t,format:r}})));return{type:"basic",data:o}},hN=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],pN=e=>{var t={type:"basic",data:hN};return{tooltip:"Align",text:P.none(),icon:P.some("align-left"),isSelectedFor:t=>()=>e.formatter.match(t),getCurrentValue:P.none,getPreviewFor:e=>P.none,onAction:t=>()=>te(hN,(e=>e.format===t.format)).each((t=>e.execCommand(t.command))),updateText:t=>{var r=te(hN,(t=>e.formatter.match(t.format))).fold(T("left"),(e=>e.title.toLowerCase()));Ua(t,R_,{icon:"align-".concat(r)})},dataset:t,shouldHide:!1,isInvalid:t=>!e.formatter.canApply(t.format)}},vN=(e,t)=>{var r=t(),n=K(r,(e=>e.format));return P.from(e.formatter.closest(n)).bind((e=>te(r,(t=>t.format===e)))).orThunk((()=>Be(e.formatter.match("p"),{title:"Paragraph",format:"p"})))},fN=e=>{var t="Paragraph",r=gN(e,"block_formats",Zx.SemiColon);return{tooltip:"Blocks",text:P.some(t),icon:P.none(),isSelectedFor:t=>()=>e.formatter.match(t),getCurrentValue:P.none,getPreviewFor:t=>()=>{var r=e.formatter.get(t);return r?P.some({tag:r.length>0&&(r[0].inline||r[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))}):P.none()},onAction:Ow(e),updateText:n=>{var o=vN(e,(()=>r.data)).fold(T(t),(e=>e.title));Ua(n,N_,{text:o})},dataset:r,shouldHide:!1,isInvalid:t=>!e.formatter.canApply(t.format)}},bN=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],yN=e=>{var t=e.split(/\s*,\s*/);return K(t,(e=>e.replace(/^['"]+|['"]+$/g,"")))},wN=e=>{var t="System Font",r=()=>{var r=e=>e?yN(e)[0]:"",o=e.queryCommandValue("FontName"),a=n.data,i=o?o.toLowerCase():"",s=te(a,(e=>{var t=e.format;return t.toLowerCase()===i||r(t).toLowerCase()===r(i).toLowerCase()})).orThunk((()=>Be((e=>{var t;return 0===e.indexOf("-apple-system")&&(t=yN(e.toLowerCase()),ae(bN,(e=>t.indexOf(e.toLowerCase())>-1)))})(i),{title:t,format:i})));return{matchOpt:s,font:o}},n=gN(e,"font_family_formats",Zx.SemiColon);return{tooltip:"Fonts",text:P.some(t),icon:P.none(),isSelectedFor:e=>t=>t.exists((t=>t.format===e)),getCurrentValue:()=>{var{matchOpt:e}=r();return e},getPreviewFor:e=>()=>P.some({tag:"div",styles:-1===e.indexOf("dings")?{"font-family":e}:{}}),onAction:t=>()=>{e.undoManager.transact((()=>{e.focus(),e.execCommand("FontName",!1,t.format)}))},updateText:e=>{var{matchOpt:t,font:n}=r(),o=t.fold(T(n),(e=>e.title));Ua(e,N_,{text:o})},dataset:n,shouldHide:!1,isInvalid:L}},xN={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},CN=(lN="[eE][+-]?"+(sN="[0-9]+"),dN=e=>"(?:".concat(e,")?"),cN=["Infinity",sN+"\\."+dN(sN)+dN(lN),"\\."+sN+dN(lN),sN+dN(lN)].join("|"),uN="[+-]?(?:".concat(cN,")"),new RegExp("^(".concat(uN,")(.*)$"))),kN=(e,t)=>P.from(CN.exec(e)).bind((e=>{var r=Number(e[1]),n=e[2];return((e,t)=>q(t,(t=>q(xN[t],(t=>e===t)))))(n,t)?P.some({value:r,unit:n}):P.none()})),SN={tab:T(9),escape:T(27),enter:T(13),backspace:T(8),delete:T(46),left:T(37),up:T(38),right:T(39),down:T(40),space:T(32),home:T(36),end:T(35),pageUp:T(33),pageDown:T(34)},_N={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},ON={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},EN=e=>{var t=()=>{var t=P.none(),r=n.data,o=e.queryCommandValue("FontSize");if(o)for(var a=function(){var e=((e,t)=>/[0-9.]+px$/.test(e)?((e,t)=>{var r=Math.pow(10,t);return Math.round(e*r)/r})(72*parseInt(e,10)/96,t||0)+"pt":Ee(ON,e).getOr(e))(o,i),n=(e=>Ee(_N,e).getOr(""))(e);t=te(r,(t=>t.format===o||t.format===e||t.format===n))},i=3;t.isNone()&&i>=0;i--)a();return{matchOpt:t,size:o}},r=T(P.none),n=gN(e,"font_size_formats",Zx.Space);return{tooltip:"Font sizes",text:P.some("12pt"),icon:P.none(),isSelectedFor:e=>t=>t.exists((t=>t.format===e)),getPreviewFor:r,getCurrentValue:()=>{var{matchOpt:e}=t();return e},onAction:t=>()=>{e.undoManager.transact((()=>{e.focus(),e.execCommand("FontSize",!1,t.format)}))},updateText:e=>{var{matchOpt:r,size:n}=t(),o=r.fold(T(n),(e=>e.title));Ua(e,N_,{text:o})},dataset:n,shouldHide:!1,isInvalid:L}},TN=(e,t)=>{var r="Paragraph";return{tooltip:"Formats",text:P.some(r),icon:P.none(),isSelectedFor:t=>()=>e.formatter.match(t),getCurrentValue:P.none,getPreviewFor:t=>()=>{var r=e.formatter.get(t);return void 0!==r?P.some({tag:r.length>0&&(r[0].inline||r[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))}):P.none()},onAction:Ow(e),updateText:t=>{var n=e=>ZE(e)?oe(e.items,n):jE(e)?[{title:e.title,format:e.format}]:[],o=oe(qE(e),n),a=vN(e,T(o)).fold(T(r),(e=>e.title));Ua(t,N_,{text:a})},shouldHide:Ev(e),isInvalid:t=>!e.formatter.canApply(t.format),dataset:t}},AN=T([co("toggleClass"),co("fetch"),zs("onExecute"),Eo("getHotspot",P.some),Eo("getAnchorOverrides",T({})),Td(),zs("onItemExecute"),yo("lazySink"),co("dom"),Is("onOpen"),ku("splitDropdownBehaviours",[fx,Gh,dp]),Eo("matchWidth",!1),Eo("useMinWidth",!1),Eo("eventOrder",{}),yo("role")].concat(Bx())),MN=Yu({factory:Xp,schema:[co("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Ml([dp.revoke()])}),overrides:e=>({dom:{tag:"span",attributes:{role:"presentation"}},action:t=>{t.getSystem().getByUid(e.uid).each(Wa)},buttonBehaviours:Ml([fp.config({toggleOnExecute:!1,toggleClass:e.toggleClass})])})}),NN=Yu({factory:Xp,schema:[co("dom")],name:"button",defaults:()=>({buttonBehaviours:Ml([dp.revoke()])}),overrides:e=>({dom:{tag:"span",attributes:{role:"presentation"}},action:t=>{t.getSystem().getByUid(e.uid).each((r=>{e.onExecute(r,t)}))}})}),RN=T([MN,NN,Ju({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[co("text")],name:"aria-descriptor"}),Xu({schema:[Ls()],name:"menu",defaults:e=>({onExecute:(t,r)=>{t.getSystem().getByUid(e.uid).each((n=>{e.onItemExecute(n,t,r)}))}})}),_x()]),DN=_m({name:"SplitDropdown",configFields:AN(),partFields:RN(),factory:(e,t,r,n)=>{var o=e=>{Am.getCurrent(e).each((e=>{Qm.highlightFirst(e),Gh.focusIn(e)}))},a=t=>{Ax(e,A,t,n,o,xg.HighlightMenuAndItem).get(_)},i=t=>{var r=um(t,e,"button");return Wa(r),P.some(!0)},s=d(d({},Ka([ii(((t,r)=>{cm(t,e,"aria-descriptor").each((e=>{var r=fi("aria");Dt(e.element,"id",r),Dt(t.element,"aria-describedby",r)}))}))])),yp(P.some(a))),l={repositionMenus:e=>{fp.isOn(e)&&Dx(e)}};return{uid:e.uid,dom:e.dom,components:t,apis:l,eventOrder:d(d({},e.eventOrder),{},{[xa()]:["disabling","toggling","alloy.base.behaviour"]}),events:s,behaviours:_u(e.splitDropdownBehaviours,[fx.config({others:{sandbox:t=>{var r=um(t,e,"arrow");return Rx(e,t,{onOpen:()=>{fp.on(r),fp.on(t)},onClose:()=>{fp.off(r),fp.off(t)}})}}}),Gh.config({mode:"special",onSpace:i,onEnter:i,onDown:e=>(a(e),P.some(!0))}),dp.config({}),fp.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:e.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:(e,t)=>e.repositionMenus(t)}}),BN=e=>({isEnabled:()=>!jm.isDisabled(e),setEnabled:t=>jm.set(e,!t),setText:t=>Ua(e,N_,{text:t}),setIcon:t=>Ua(e,R_,{icon:t})}),LN=e=>({setActive:t=>{fp.set(e,t)},isActive:()=>fp.isOn(e),isEnabled:()=>!jm.isDisabled(e),setEnabled:t=>jm.set(e,!t),setText:t=>Ua(e,N_,{text:t}),setIcon:t=>Ua(e,R_,{icon:t})}),HN=(e,t)=>e.map((e=>({"aria-label":t.translate(e),title:t.translate(e)}))).getOr({}),PN=fi("focus-button"),IN=(e,t,r,n,o)=>{var a=t.map((e=>Jp(M_(e,"tox-tbtn",o)))),i=e.map((e=>Jp(A_(e,o.icons))));return{dom:{tag:"button",classes:["tox-tbtn"].concat(t.isSome()?["tox-tbtn--select"]:[]),attributes:HN(r,o)},components:Py([i.map((e=>e.asSpec())),a.map((e=>e.asSpec()))]),eventOrder:{[Qo()]:["focusing","alloy.base.behaviour",S_],[Ra()]:[S_,"toolbar-group-button-events"]},buttonBehaviours:Ml([Ny(o.isDisabled),Ty(),op(S_,[ii(((e,t)=>O_(e))),Ja(N_,((e,t)=>{a.bind((t=>t.getOpt(e))).each((e=>{np.set(e,[cs(o.translate(t.event.text))])}))})),Ja(R_,((e,t)=>{i.bind((t=>t.getOpt(e))).each((e=>{np.set(e,[A_(t.event.icon,o.icons)])}))})),Ja(Qo(),((e,t)=>{t.event.prevent(),ja(e,PN)}))])].concat(n.getOr([])))}},FN=(e,t,r)=>{var n,o,a=Ho(_),i=IN(e.icon,e.text,e.tooltip,P.none(),r);return Xp.sketch({dom:i.dom,components:i.components,eventOrder:__,buttonBehaviours:d(d({},Ml([op("toolbar-button-events",[(o={onAction:e.onAction,getApi:t.getApi},di(((e,t)=>{Ry(o,e)((t=>{Ua(e,k_,{buttonApi:t}),o.onAction(t)}))}))),Dy(t,a),By(t,a)]),Ny((()=>!e.enabled||r.isDisabled())),Ty()].concat(t.toolbarButtonBehaviours))),{},{[S_]:null===(n=i.buttonBehaviours)||void 0===n?void 0:n[S_]})})},zN=(e,t,r)=>FN(e,{toolbarButtonBehaviours:r.length>0?[op("toolbarButtonWith",r)]:[],getApi:BN,onSetup:e.onSetup},t),VN=(e,t,r)=>FN(e,{toolbarButtonBehaviours:[np.config({}),fp.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(r.length>0?[op("toolbarToggleButtonWith",r)]:[]),getApi:LN,onSetup:e.onSetup},t),ZN=(e,t,r)=>n=>Cx((e=>t.fetch(e))).map((o=>P.from(qx(kn(ox(fi("menu-value"),o,(r=>{t.onItemAction(e(n),r)}),t.columns,t.presets,xf.CLOSE_ON_EXECUTE,t.select.getOr(L),r),{movement:ix(t.columns,t.presets),menuBehaviours:hy("auto"!==t.columns?[]:[ii(((e,r)=>{gy(e,4,Df(t.presets)).each((t=>{var{numRows:r,numColumns:n}=t;Gh.setGridSize(e,r,n)}))}))])}))))),jN=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],UN=(e,t)=>(r,n,o)=>{var a=e(r).mapError((e=>no(e))).getOrDie();return t(a,n,o)},WN={button:UN(Fb,((e,t)=>{return r=e,n=t.shared.providers,zN(r,n,[]);var r,n})),togglebutton:UN(Zb,((e,t)=>{return r=e,n=t.shared.providers,VN(r,n,[]);var r,n})),menubutton:UN(yA,((e,t)=>pO(e,"tox-tbtn",t,P.none(),!1))),splitbutton:UN((e=>eo("SplitButton",wA,e)),((e,t)=>((e,t)=>{var r=e=>({isEnabled:()=>!jm.isDisabled(e),setEnabled:t=>jm.set(e,!t),setIconFill:(t,r)=>{Cs(e.element,'svg path[class="'.concat(t,'"], rect[class="').concat(t,'"]')).each((e=>{Dt(e,"fill",r)}))},setActive:t=>{Dt(e.element,"aria-pressed",t),Cs(e.element,"span").each((r=>{e.getSystem().getByDom(r).each((e=>fp.set(e,t)))}))},isActive:()=>Cs(e.element,"span").exists((t=>e.getSystem().getByDom(t).exists(fp.isOn))),setText:t=>Cs(e.element,"span").each((r=>e.getSystem().getByDom(r).each((e=>Ua(e,N_,{text:t}))))),setIcon:t=>Cs(e.element,"span").each((r=>e.getSystem().getByDom(r).each((e=>Ua(e,R_,{icon:t})))))}),n=Ho(_),o={getApi:r,onSetup:e.onSetup};return DN.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:d({"aria-pressed":!1},HN(e.tooltip,t.providers))},onExecute:t=>{var n=r(t);n.isEnabled()&&e.onAction(n)},onItemExecute:(e,t,r)=>{},splitDropdownBehaviours:Ml([My(t.providers.isDisabled),Ty(),op("split-dropdown-events",[ii(((e,t)=>O_(e))),Ja(PN,dp.focus),Dy(o,n),By(o,n)]),ZC.config({})]),eventOrder:{[Ra()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:t.getSink,fetch:ZN(r,e,t.providers),parts:{menu:Ff(0,e.columns,e.presets)},components:[DN.parts.button(IN(e.icon,e.text,P.none(),P.some([fp.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),t.providers)),DN.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:av("chevron-down",t.providers.icons)},buttonBehaviours:Ml([My(t.providers.isDisabled),Ty(),iv()])}),DN.parts["aria-descriptor"]({text:t.providers.translate("To open the popup, press Shift+Enter")})]})})(e,t.shared))),grouptoolbarbutton:UN((e=>eo("GroupToolbarButton",vA,e)),((e,t,r)=>{var n=r.ui.registry.getAll().buttons,o={[Od]:t.shared.header.isPositionedAtTop()?Jl.TopToBottom:Jl.BottomToTop};if(Mv(r)===Wp.floating)return((e,t,r,n)=>{var o=t.shared,a=Ho(_),i={toolbarButtonBehaviours:[],getApi:BN,onSetup:e.onSetup},s=[op("toolbar-group-button-events",[Dy(i,a),By(i,a)])];return nM.sketch({lazySink:o.getSink,fetch:()=>Cx((t=>{t(K(r(e.items),vM))})),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:IN(e.icon,e.text,e.tooltip,P.some(s),o.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:n}}}})})(e,t,(e=>$N(r,{buttons:n,toolbar:e,allowToolbarGroups:!1},t,P.none())),o);throw new Error("Toolbar groups are only supported when using floating toolbar mode")}))},qN={styles:(e,t)=>{var r=d({type:"advanced"},t.styles);return iN(e,t,TN(e,r))},fontsize:(e,t)=>iN(e,t,EN(e)),fontsizeinput:(e,t)=>((e,t,r)=>{var n=P.none(),o=_w(e,"NodeChange SwitchMode",(t=>{var o=t.getComponent();n=P.some(o),r.updateInputValue(o),jm.set(o,!e.selection.isEditable())})),a=e=>({getComponent:T(e)}),i=Ho(_),s=fi("custom-number-input-events"),l=(e,t,o)=>{var a=n.map((e=>Cu.getValue(e))).getOr(""),i=r.getNewValue(a,e),s=a.length-"".concat(i).length,l=n.map((e=>e.element.dom.selectionStart-s)),d=n.map((e=>e.element.dom.selectionEnd-s));r.onAction(i,o),n.each((e=>{Cu.setValue(e,i),t&&(l.each((t=>e.element.dom.selectionStart=t)),d.each((t=>e.element.dom.selectionEnd=t)))}))},d=(e,t)=>l(((e,t)=>e-t),e,t),c=(e,t)=>l(((e,t)=>e+t),e,t),u=e=>pt(e.element).fold(P.none,(e=>(Il(e),P.some(!0)))),m=e=>zl(e.element)?(yt(e.element).each((e=>Il(e))),P.some(!0)):P.none(),g=(r,n,o,s)=>{var l=t.shared.providers.translate(o),d=fi("altExecuting"),c=_w(e,"NodeChange SwitchMode",(t=>{jm.set(t.getComponent(),!e.selection.isEditable())})),u=e=>{jm.isDisabled(e)||r(!0)};return Xp.sketch({dom:{tag:"button",attributes:{title:l,"aria-label":l},classes:s.concat(n)},components:[T_(n,t.shared.providers.icons)],buttonBehaviours:Ml([jm.config({}),op(d,[Dy({onSetup:c,getApi:a},i),By({getApi:a},i),Ja(ia(),((e,t)=>{t.event.raw.keyCode!==SN.space()&&t.event.raw.keyCode!==SN.enter()||jm.isDisabled(e)||r(!1)})),Ja(ca(),u),Ja(Xo(),u)])]),eventOrder:{[ia()]:[d,"keying"],[ca()]:[d,"alloy.base.behaviour"],[Xo()]:[d,"alloy.base.behaviour"]}})},h=Jp(g((e=>d(!1,e)),"minus","Decrease font size",["highlight-on-focus"])),p=Jp(g((e=>c(!1,e)),"plus","Increase font size",["highlight-on-focus"])),v=Jp({dom:{tag:"div",classes:["tox-input-wrapper","highlight-on-focus"]},components:[Uf.sketch({inputBehaviours:Ml([jm.config({}),op(s,[Dy({onSetup:o,getApi:a},i),By({getApi:a},i)]),op("input-update-display-text",[Ja(N_,((e,t)=>{Cu.setValue(e,t.event.text)})),Ja(aa(),(e=>{r.onAction(Cu.getValue(e))})),Ja(da(),(e=>{r.onAction(Cu.getValue(e))}))]),Gh.config({mode:"special",onEnter:e=>(l(A,!0,!0),P.some(!0)),onEscape:u,onUp:e=>(c(!0,!1),P.some(!0)),onDown:e=>(d(!0,!1),P.some(!0)),onLeft:(e,t)=>(t.cut(),P.none()),onRight:(e,t)=>(t.cut(),P.none())})])})],behaviours:Ml([dp.config({}),Gh.config({mode:"special",onEnter:m,onSpace:m,onEscape:u}),op("input-wrapper-events",[Ja(na(),(e=>{Y([h,p],(t=>{var r=$e(t.get(e).element.dom);zl(r)&&Fl(r)}))}))])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[h.asSpec(),v.asSpec(),p.asSpec()],behaviours:Ml([dp.config({}),Gh.config({mode:"flow",focusInside:ec.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:e=>zl(e.element)?P.none():(Il(e.element),P.some(!0))})])}})(e,t,(e=>{var t=()=>e.queryCommandValue("FontSize");return{updateInputValue:e=>Ua(e,N_,{text:t()}),onAction:(t,r)=>e.execCommand("FontSize",!1,t,{skip_focus:!r}),getNewValue:(r,n)=>{kN(r,["unsupportedLength","empty"]);var o=kN(r,["unsupportedLength","empty"]).or(kN(t(),["unsupportedLength","empty"])),a=o.map((e=>e.value)).getOr(16),i=Vv(e),s=o.map((e=>e.unit)).filter((e=>""!==e)).getOr(i),l=n(a,(e=>{var t;return null!==(t={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[e])&&void 0!==t?t:{step:1}})(s).step);return"".concat((e=>e>=0)(l)?l:a).concat(s)}}})(e)),fontfamily:(e,t)=>iN(e,t,wN(e)),blocks:(e,t)=>iN(e,t,fN(e)),align:(e,t)=>iN(e,t,pN(e))},$N=(e,t,r,n)=>{var o=(e=>{var t,r=e.toolbar,n=e.buttons;return!1===r?[]:void 0===r||!0===r?(e=>{var t=K(jN,(t=>{var r=J(t.items,(t=>Te(e,t)||Te(qN,t)));return{name:t.name,items:r}}));return J(t,(e=>e.items.length>0))})(n):g(r)?(t=r.split("|"),K(t,(e=>({items:e.trim().split(" ")})))):(e=>S(e,(e=>Te(e,"name")&&Te(e,"items"))))(r)?r:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])})(t),a=K(o,(o=>{var a=oe(o.items,(o=>0===o.trim().length?[]:((e,t,r,n,o,a)=>Ee(t,r.toLowerCase()).orThunk((()=>a.bind((e=>pe(e,(e=>Ee(t,e+r.toLowerCase()))))))).fold((()=>Ee(qN,r.toLowerCase()).map((t=>t(e,o)))),(t=>"grouptoolbarbutton"!==t.type||n?((e,t,r)=>Ee(WN,e.type).fold((()=>(console.error("skipping button defined by",e),P.none())),(n=>P.some(n(e,t,r)))))(t,o,e):(console.warn("Ignoring the '".concat(r,"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.")),P.none()))))(e,t.buttons,o,t.allowToolbarGroups,r,n).toArray()));return{title:P.from(e.translate(o.name)),items:a}}));return J(a,(e=>e.items.length>0))},GN=(e,t,r,n)=>{var o=t.mainUi.outerContainer,a=r.toolbar,i=r.buttons;if(S(a,g)){var s=a.map((t=>{var o={toolbar:t,buttons:i,allowToolbarGroups:r.allowToolbarGroups};return $N(e,o,n,P.none())}));$M.setToolbars(o,s)}else $M.setToolbar(o,$N(e,r,n,P.none()))},KN=Fr(),YN=KN.os.isiOS()&&KN.os.version.major<=12,XN=function(){var e=i((function*(e,t,r,n,o){var{mainUi:a,uiMotherships:i}=t,s=Ho(0),l=a.outerContainer;yield rN(e);var d=$e(o.targetNode),c=Ot(_t(d));jc(d,a.mothership),((e,t,r)=>{pf(e)&&jc(r.mainUi.mothership.element,r.popupUi.mothership),Zc(t,r.dialogUi.mothership)})(e,c,t),e.on("PostRender",(()=>{$M.setSidebar(l,r.sidebar,Jv(e)),GN(e,t,r,n),s.set(e.getWin().innerWidth),$M.setMenubar(l,YM(e,r)),$M.setViews(l,r.views),((e,t)=>{var{uiMotherships:r}=t,n=e.dom,o=e.getWin(),a=e.getDoc().documentElement,i=Ho(rr(o.innerWidth,o.innerHeight)),s=Ho(rr(a.offsetWidth,a.offsetHeight)),l=()=>{var t=i.get();t.left===o.innerWidth&&t.top===o.innerHeight||(i.set(rr(o.innerWidth,o.innerHeight)),yw(e))},d=()=>{var t=e.getDoc().documentElement,r=s.get();r.left===t.offsetWidth&&r.top===t.offsetHeight||(s.set(rr(t.offsetWidth,t.offsetHeight)),yw(e))},c=t=>{((e,t)=>{e.dispatch("ScrollContent",t)})(e,t)};n.bind(o,"resize",l),n.bind(o,"scroll",c);var u=cd($e(e.getBody()),"load",d);e.on("hide",(()=>{Y(r,(e=>{Vt(e.element,"display","none")}))})),e.on("show",(()=>{Y(r,(e=>{Kt(e.element,"display")}))})),e.on("NodeChange",d),e.on("remove",(()=>{u.unbind(),n.unbind(o,"resize",l),n.unbind(o,"scroll",c),o=null}))})(e,t)}));var u,m,g=$M.getSocket(l).getOrDie("Could not find expected socket element");if(YN){Zt(g.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});var h=(u=()=>{e.dispatch("ScrollContent")},20,m=null,{cancel:()=>{f(m)||(clearTimeout(m),m=null)},throttle:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];f(m)&&(m=setTimeout((()=>{m=null,u.apply(null,t)}),20))}}),p=dd(g.element,"scroll",h.throttle);e.on("remove",p.unbind)}Ey(e,t),e.addCommand("ToggleSidebar",((t,r)=>{$M.toggleSidebar(l,r),e.dispatch("ToggleSidebar")})),e.addQueryValueHandler("ToggleSidebar",(()=>{var e;return null!==(e=$M.whichSidebar(l))&&void 0!==e?e:""})),e.addCommand("ToggleView",((t,r)=>{if($M.toggleView(l,r)){var n=l.element;a.mothership.broadcastOn([nu()],{target:n}),Y(i,(e=>{e.broadcastOn([nu()],{target:n})})),f($M.whichView(l))&&(e.focus(),e.nodeChanged(),$M.refreshToolbar(l))}})),e.addQueryValueHandler("ToggleView",(()=>{var e;return null!==(e=$M.whichView(l))&&void 0!==e?e:""}));var v=Mv(e);v!==Wp.sliding&&v!==Wp.floating||e.on("ResizeWindow ResizeEditor ResizeContent",(()=>{var r=e.getWin().innerWidth;r!==s.get()&&($M.refreshToolbar(t.mainUi.outerContainer),s.set(r))}));var b={setEnabled:e=>{Oy(t,!e)},isEnabled:()=>!jm.isDisabled(l)};return{iframeContainer:g.element.dom,editorContainer:l.element.dom,api:b}}));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),JN=Object.freeze({__proto__:null,render:XN}),QN=e=>/^[0-9\.]+(|px)$/i.test(""+e)?P.some(parseInt(""+e,10)):P.none(),eR=e=>k(e)?e+"px":e,tR=(e,t,r)=>{var n=t.filter((t=>e<t)),o=r.filter((t=>e>t));return n.or(o).getOr(e)},rR=e=>{var t=wv(e),r=xv(e),n=kv(e);return QN(t).map((e=>tR(e,r,n)))},{ToolbarLocation:nR,ToolbarMode:oR}=ff,aR=(e,t,r,n,o)=>{var{mainUi:a,uiMotherships:i}=r,s=uv.DOM,l=uf(e),c=hf(e),u=kv(e).or(rR(e)),m=n.shared.header,g=m.isPositionedAtTop,h=Mv(e),p=h===oR.sliding||h===oR.floating,v=Ho(!1),f=()=>v.get()&&!e.removed,b=e=>p?e.fold(T(0),(e=>e.components().length>1?Qt(e.components()[1].element):0)):0,y=()=>{Y(i,(e=>{e.broadcastOn([ou()],{})}))},w=r=>{if(f()){l||o.on((e=>{var r=u.getOrThunk((()=>{var e=QN(Ut(Mt(),"margin-left")).getOr(0);return sr(Mt())-or(t).left+e}));Vt(e.element,"max-width",r+"px")}));var n=l?P.none():(()=>{if(l)return P.none();if(or(a.outerContainer.element).left+lr(a.outerContainer.element)>=window.innerWidth-40||qt(a.outerContainer.element,"width").isSome()){Vt(a.outerContainer.element,"position","absolute"),Vt(a.outerContainer.element,"left","0px"),Kt(a.outerContainer.element,"width");var e=lr(a.outerContainer.element);return P.some(e)}return P.none()})();p&&$M.refreshToolbar(a.outerContainer),l||(r=>{o.on((n=>{var o=$M.getToolbar(a.outerContainer),i=b(o),s=an(t),{top:l,left:c}=((e,t)=>pf(e)?DT(t):P.none())(e,a.outerContainer.element).fold((()=>({top:g()?Math.max(s.y-Qt(n.element)+i,0):s.bottom,left:s.x})),(e=>{var t,r=an(e),o=null!==(t=e.dom.scrollTop)&&void 0!==t?t:0,a=lt(e,Mt()),l=a?Math.max(s.y-Qt(n.element)+i,0):s.y-r.y+o-Qt(n.element)+i;return{top:g()?l:s.bottom,left:a?s.x:s.x-r.x}})),u={position:"absolute",left:Math.round(c)+"px",top:Math.round(l)+"px"},m=r.map((e=>{var t=Yr(),r=window.innerWidth-(c-t.left);return{width:Math.max(Math.min(e,r),150)+"px"}})).getOr({});Zt(a.outerContainer.element,d(d({},u),m))}))})(n),c&&o.on(r),y()}},x=()=>!(l||!c||!f())&&o.get().exists((r=>{var n,i=m.getDockingMode(),s=(r=>{switch(Rv(e)){case nR.auto:var n=$M.getToolbar(a.outerContainer),o=b(n),i=Qt(r.element)-o,s=an(t);if(s.y>i)return"top";var l=mt(t),d=Math.max(l.dom.scrollHeight,Qt(l));return s.bottom<d-i||dn().bottom<s.bottom-i?"bottom":"top";case nR.bottom:return"bottom";case nR.top:default:return"top"}})(r);return s!==i&&(n=s,o.on((e=>{aA.setModes(e,[n]),m.setDockingMode(n);var t=g()?Jl.TopToBottom:Jl.BottomToTop;Dt(e.element,Od,t)})),!0)}));return{isVisible:f,isPositionedAtTop:g,show:()=>{v.set(!0),Vt(a.outerContainer.element,"display","flex"),s.addClass(e.getBody(),"mce-edit-focus"),Y(i,(e=>{Kt(e.element,"display")})),x(),pf(e)?w((e=>aA.isDocked(e)?aA.reset(e):aA.refresh(e))):w(aA.refresh)},hide:()=>{v.set(!1),Vt(a.outerContainer.element,"display","none"),s.removeClass(e.getBody(),"mce-edit-focus"),Y(i,(e=>{Vt(e.element,"display","none")}))},update:w,updateMode:()=>{x()&&w(aA.reset)},repositionPopups:y}},iR=(e,t)=>{var r=an(e);return{pos:t?r.y:r.bottom,bounds:r}},sR=function(){var e=i((function*(e,t,r,n,o){var{mainUi:a}=t,i=sd(),s=$e(o.targetNode),l=aR(e,s,t,n,i),d=Lv(e);yield nN(e);var c=()=>{if(i.isSet())l.show();else{i.set($M.getHeader(a.outerContainer).getOrDie());var o=mf(e);pf(e)?(jc(s,a.mothership),jc(s,t.popupUi.mothership)):Zc(o,a.mothership),Zc(o,t.dialogUi.mothership),GN(e,t,r,n),$M.setMenubar(a.outerContainer,YM(e,r)),l.show(),((e,t,r,n)=>{var o=Ho(iR(t,r.isPositionedAtTop())),a=n=>{var{pos:a,bounds:i}=iR(t,r.isPositionedAtTop()),{pos:s,bounds:l}=o.get(),d=i.height!==l.height||i.width!==l.width;o.set({pos:a,bounds:i}),d&&yw(e,n),r.isVisible()&&(s!==a?r.update(aA.reset):d&&(r.updateMode(),r.repositionPopups()))};n||(e.on("activate",r.show),e.on("deactivate",r.hide)),e.on("SkinLoaded ResizeWindow",(()=>r.update(aA.reset))),e.on("NodeChange keydown",(e=>{requestAnimationFrame((()=>a(e)))}));var i=0,s=QS((()=>r.update(aA.refresh)),33);e.on("ScrollWindow",(()=>{var e=Yr().left;e!==i&&(i=e,s.throttle()),r.updateMode()})),pf(e)&&e.on("ElementScroll",(e=>{r.update(aA.refresh)}));var l=id();l.set(cd($e(e.getBody()),"load",(e=>a(e.raw)))),e.on("remove",(()=>{l.clear()}))})(e,s,l,d),e.nodeChanged()}};e.on("show",c),e.on("hide",l.hide),d||(e.on("focus",c),e.on("blur",l.hide)),e.on("init",(()=>{(e.hasFocus()||d)&&c()})),Ey(e,t);var u={show:c,hide:l.hide,setEnabled:e=>{Oy(t,!e)},isEnabled:()=>!jm.isDisabled(a.outerContainer)};return{editorContainer:a.outerContainer.element.dom,api:u}}));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),lR=Object.freeze({__proto__:null,render:sR}),dR="contexttoolbar-hide",cR=(e,t)=>Ja(k_,((r,n)=>{var o=(e=>({hide:()=>ja(e,_a()),getValue:()=>Cu.getValue(e)}))(e.get(r));t.onAction(o,n.event.buttonApi)})),uR=(e,t)=>{var r=e.label.fold((()=>({})),(e=>({"aria-label":e}))),a=Jp(Uf.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:e.initValue(),inputAttributes:r,selectOnFocus:!0,inputBehaviours:Ml([Gh.config({mode:"special",onEnter:e=>i.findPrimary(e).map((e=>(Wa(e),!0))),onLeft:(e,t)=>(t.cut(),P.none()),onRight:(e,t)=>(t.cut(),P.none())})])})),i=((e,t,r)=>{var a=K(t,(t=>Jp(((e,t,r)=>(e=>"contextformtogglebutton"===e.type)(t)?((e,t,r)=>{var n=t.original,{primary:a}=n,i=s(n,o),l=to(Zb(d(d({},i),{},{type:"togglebutton",onAction:_})));return VN(l,r,[cR(e,t)])})(e,t,r):((e,t,r)=>{var o=t.original,{primary:a}=o,i=s(o,n),l=to(Fb(d(d({},i),{},{type:"button",onAction:_})));return zN(l,r,[cR(e,t)])})(e,t,r))(e,t,r))));return{asSpecs:()=>K(a,(e=>e.asSpec())),findPrimary:e=>pe(t,((t,r)=>t.primary?P.from(a[r]).bind((t=>t.getOpt(e))).filter(R(jm.isDisabled)):P.none()))}})(a,e.commands,t);return[{title:P.none(),items:[a.asSpec()]},{title:P.none(),items:i.asSpecs()}]},mR=(e,t,r)=>t.bottom-e.y>=r&&e.bottom-t.y>=r,gR=e=>{var t=(e=>{var t=e.getBoundingClientRect();if(t.height<=0&&t.width<=0){var r=xt($e(e.startContainer),e.startOffset).element;return(rt(r)?ht(r):P.some(r)).filter(tt).map((e=>e.dom.getBoundingClientRect())).getOr(t)}return t})(e.selection.getRng());if(e.inline){var r=Yr();return on(r.left+t.left,r.top+t.top,t.width,t.height)}var n=sn($e(e.getBody()));return on(n.x+t.left,n.y+t.top,t.width,t.height)},hR=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=Qr(window),a=an($e(e.getContentAreaContainer())),i=rf(e)||af(e)||lf(e),{x:s,width:l}=((e,t,r)=>{var n=Math.max(e.x+r,t.x);return{x:n,width:Math.min(e.right-r,t.right)-n}})(a,o,n);if(e.inline&&!i)return on(s,o.y,l,o.height);var d=t.header.isPositionedAtTop(),{y:c,bottom:u}=((e,t,r,n,o,a)=>{var i=$e(e.getContainer()),s=Cs(i,".tox-editor-header").getOr(i),l=an(s),d=l.y>=t.bottom,c=n&&!d;if(e.inline&&c)return{y:Math.max(l.bottom+a,r.y),bottom:r.bottom};if(e.inline&&!c)return{y:r.y,bottom:Math.min(l.y-a,r.bottom)};var u="line"===o?an(i):t;return c?{y:Math.max(l.bottom+a,r.y),bottom:Math.min(u.bottom-a,r.bottom)}:{y:Math.max(u.y+a,r.y),bottom:Math.min(l.y-a,r.bottom)}})(e,a,o,d,r,n);return on(s,c,l,u-c)},pR={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},vR={maxHeightFunction:fd(),maxWidthFunction:YA()},fR=e=>"node"===e,bR=(e,t,r,n,o)=>{var a=gR(e),i=n.lastElement().exists((e=>lt(r,e)));return((e,t)=>{var r=e.selection.getRng(),n=xt($e(r.startContainer),r.startOffset);return r.startContainer===r.endContainer&&r.startOffset===r.endOffset-1&&lt(n.element,t)})(e,r)?i?EE:CE:i?((e,r,o)=>{var i=qt(e,"position");Vt(e,"position",r);var s=mR(a,an(t),-20)&&!n.isReposition()?AE:EE;return i.each((t=>Vt(e,"position",t))),s})(t,n.getMode()):("fixed"===n.getMode()?o.y+Yr().top:o.y)+(Qt(t)+12)<=a.y?CE:kE},yR=(e,t,r,n)=>{var o=t=>(n,o,a,i,s)=>{var l=bR(e,i,t,r,s),c=d(d({},n),{},{y:s.y,height:s.height});return d(d({},l(c,o,a,i,s)),{},{alwaysFit:!0})},a=e=>fR(n)?[o(e)]:[];return t?{onLtr:e=>[vl,ul,ml,gl,hl,pl].concat(a(e)),onRtl:e=>[vl,ml,ul,hl,gl,pl].concat(a(e))}:{onLtr:e=>[pl,vl,gl,ul,hl,ml].concat(a(e)),onRtl:e=>[pl,vl,hl,ml,gl,ul].concat(a(e))}},wR=(e,t)=>{var r=J(t,(t=>t.predicate(e.dom))),{pass:n,fail:o}=X(r,(e=>"contexttoolbar"===e.type));return{contextToolbars:n,contextForms:o}},xR=(e,t)=>{var r={},n=[],o=[],a={},i={},s=ve(e);return Y(s,(s=>{var l=e[s];"contextform"===l.type?((e,s)=>{var l=to(eo("ContextForm",Kb,s));r[e]=l,l.launch.map((r=>{a["form:"+e]=d(d({},s.launch),{},{type:"contextformtogglebutton"===r.type?"togglebutton":"button",onAction:()=>{t(l)}})})),"editor"===l.scope?o.push(l):n.push(l),i[e]=l})(s,l):"contexttoolbar"===l.type&&((e,t)=>{var r;(r=t,eo("ContextToolbar",Yb,r)).each((r=>{"editor"===t.scope?o.push(r):n.push(r),i[e]=r}))})(s,l)})),{forms:r,inNodeScope:n,inEditorScope:o,lookupTable:i,formNavigators:a}},CR=fi("forward-slide"),kR=fi("backward-slide"),SR=fi("change-slide-event"),_R="tox-pop--resizing",OR="tox-pop--transition",ER=(e,t,r,n)=>{var o,a,i=n.backstage,s=i.shared,l=Fr().deviceType.isTouch,c=sd(),u=sd(),m=sd(),g=hs((o={sink:r,onEscape:()=>(e.focus(),P.some(!0))},a=Ho([]),Kp.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:e=>{a.set([]),Kp.getContent(e).each((e=>{Kt(e.element,"visibility")})),Ki(e.element,_R),Kt(e.element,"width")},inlineBehaviours:Ml([op("context-toolbar-events",[ai(ma(),((e,t)=>{"width"===t.event.raw.propertyName&&(Ki(e.element,_R),Kt(e.element,"width"))})),Ja(SR,((e,t)=>{var r=e.element;Kt(r,"width");var n=sr(r);Kp.setContent(e,t.event.contents),Gi(r,_R);var o=sr(r);Vt(r,"width",n+"px"),Kp.getContent(e).each((e=>{t.event.focus.bind((e=>(Il(e),Zl(r)))).orThunk((()=>(Gh.focusIn(e),Vl(_t(r)))))})),setTimeout((()=>{Vt(e.element,"width",o+"px")}),0)})),Ja(CR,((e,t)=>{Kp.getContent(e).each((t=>{a.set(a.get().concat([{bar:t,focus:Vl(_t(e.element))}]))})),Ua(e,SR,{contents:t.event.forwardContents,focus:P.none()})})),Ja(kR,((e,t)=>{ge(a.get()).each((t=>{a.set(a.get().slice(0,a.get().length-1)),Ua(e,SR,{contents:ps(t.bar),focus:t.focus})}))}))]),Gh.config({mode:"special",onEscape:e=>ge(a.get()).fold((()=>o.onEscape()),(t=>(ja(e,kR),P.some(!0))))})]),lazySink:()=>gn.value(o.sink)}))),h=()=>{var t=m.get().getOr("node"),r=fR(t)?1:0;return hR(e,s,t,r)},p=()=>!(e.removed||l()&&i.isContextMenuOpen()),v=()=>{if(p()){var t=h(),r=Me(m.get(),"node")?((e,t)=>t.filter((e=>At(e)&&et(e))).map(sn).getOrThunk((()=>gR(e))))(e,c.get()):gR(e);return t.height<=0||!mR(r,t,.01)}return!0},f=()=>{c.clear(),u.clear(),m.clear(),Kp.hide(g)},b=()=>{if(Kp.isOpen(g)){var e=g.element;Kt(e,"display"),v()?Vt(e,"display","none"):(u.set(0),Kp.reposition(g))}},y=t=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[t],behaviours:Ml([Gh.config({mode:"acyclic"}),op("pop-dialog-wrap-events",[ii((t=>{e.shortcuts.add("ctrl+F9","focus statusbar",(()=>Gh.focusIn(t)))})),si((t=>{e.shortcuts.remove("ctrl+F9")}))])])}),w=dr((()=>xR(t,(e=>{var t=x([e]);Ua(g,CR,{forwardContents:y(t)})})))),x=t=>{var{buttons:r}=e.ui.registry.getAll(),o=w(),a=d(d({},r),o.formNavigators),i=Mv(e)===Wp.scrolling?Wp.scrolling:Wp.default,l=ne(K(t,(t=>"contexttoolbar"===t.type?((t,r)=>$N(e,{buttons:t,toolbar:r.items,allowToolbarGroups:!1},n.backstage,P.some(["form:"])))(a,t):((e,t)=>uR(e,t))(t,s.providers))));return xM({type:i,uid:fi("context-toolbar"),initGroups:l,onEscape:P.none,cyclicKeying:!0,providers:s.providers})},C=(t,n)=>{if(S.cancel(),p()){var o=x(t),a=t[0].position,i=((t,n)=>{var o="node"===t?s.anchors.node(n):s.anchors.cursor(),a=((e,t,r,n)=>"line"===t?{bubble:xd(12,0,pR),layouts:{onLtr:()=>[fl],onRtl:()=>[bl]},overrides:vR}:{bubble:xd(0,12,pR,1/12),layouts:yR(e,r,n,t),overrides:vR})(e,t,l(),{lastElement:c.get,isReposition:()=>Me(u.get(),0),getMode:()=>Mc.getMode(r)});return kn(o,a)})(a,n);m.set(a),u.set(1);var d=g.element;Kt(d,"display"),(e=>Me(Re(e,c.get(),lt),!0))(n)||(Ki(d,OR),Mc.reset(r,g)),Kp.showWithinBounds(g,y(o),{anchor:i,transition:{classes:[OR],mode:"placement"}},(()=>P.some(h()))),n.fold(c.clear,c.set),v()&&Vt(d,"display","none")}},k=!1,S=QS((()=>{!e.hasFocus()||e.removed||k||(Yi(g.element,OR)?S.throttle():((e,t)=>{var r=$e(t.getBody()),n=e=>lt(e,r),o=$e(t.selection.getNode());return(e=>!n(e)&&!dt(r,e))(o)?P.none():((e,t,r)=>{var n=wR(e,t);if(n.contextForms.length>0)return P.some({elem:e,toolbars:[n.contextForms[0]]});var o=wR(e,r);if(o.contextForms.length>0)return P.some({elem:e,toolbars:[o.contextForms[0]]});if(n.contextToolbars.length>0||o.contextToolbars.length>0){var a=(e=>{if(e.length<=1)return e;var t=t=>q(e,(e=>e.position===t)),r=t=>J(e,(e=>e.position===t)),n=t("selection"),o=t("node");if(n||o){if(o&&n){var a=r("node"),i=K(r("selection"),(e=>d(d({},e),{},{position:"node"})));return a.concat(i)}return r(n?"selection":"node")}return r("line")})(n.contextToolbars.concat(o.contextToolbars));return P.some({elem:e,toolbars:a})}return P.none()})(o,e.inNodeScope,e.inEditorScope).orThunk((()=>((e,t,r)=>e(t)?P.none():jo(t,(e=>{if(tt(e)){var{contextToolbars:t,contextForms:n}=wR(e,r.inNodeScope),o=n.length>0?n:(e=>{if(e.length<=1)return e;var t=t=>te(e,(e=>e.position===t));return t("selection").orThunk((()=>t("node"))).orThunk((()=>t("line"))).map((e=>e.position)).fold((()=>[]),(t=>J(e,(e=>e.position===t))))})(t);return o.length>0?P.some({elem:e,toolbars:o}):P.none()}return P.none()}),e))(n,o,e)))})(w(),e).fold(f,(e=>{C(e.toolbars,P.some(e.elem))})))}),17);e.on("init",(()=>{e.on("remove",f),e.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",b),e.on("click keyup focus SetContent",S.throttle),e.on(dR,f),e.on("contexttoolbar-show",(t=>{var r=w();Ee(r.lookupTable,t.toolbarKey).each((r=>{C([r],Be(t.target!==e,t.target)),Kp.getContent(g).each(Gh.focusIn)}))})),e.on("focusout",(t=>{Yp.setEditorTimeout(e,(()=>{Zl(r.element).isNone()&&Zl(g.element).isNone()&&f()}),0)})),e.on("SwitchMode",(()=>{e.mode.isReadOnly()&&f()})),e.on("AfterProgressState",(t=>{t.state?f():e.hasFocus()&&S.throttle()})),e.on("dragstart",(()=>{k=!0})),e.on("dragend drop",(()=>{k=!1})),e.on("NodeChange",(e=>{Zl(g.element).fold(S.throttle,_)}))}))},TR=(e,t)=>{var r=()=>{var r=t.getOptions(e),n=t.getCurrent(e).map(t.hash),o=sd();return K(r,(r=>({type:"togglemenuitem",text:t.display(r),onSetup:a=>{var i=e=>{e&&(o.on((e=>e.setActive(!1))),o.set(a)),a.setActive(e)};i(Me(n,t.hash(r)));var s=t.watcher(e,r,i);return()=>{o.clear(),s()}},onAction:()=>t.setCurrent(e,r)})))};e.ui.registry.addMenuButton(t.name,{tooltip:t.text,icon:t.icon,fetch:e=>e(r()),onSetup:t.onToolbarSetup}),e.ui.registry.addNestedMenuItem(t.name,{type:"nestedmenuitem",text:t.text,getSubmenuItems:r,onSetup:t.onMenuSetup})},AR=e=>{TR(e,(e=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:of,hash:e=>((e,t)=>kN(e,["fixed","relative","empty"]).map((e=>{var{value:t,unit:r}=e;return t+r})))(e).getOr(e),display:A,watcher:(e,t,r)=>e.formatter.formatChanged("lineheight",r,!1,{value:t}).unbind,getCurrent:e=>P.from(e.queryCommandValue("LineHeight")),setCurrent:(e,t)=>e.execCommand("LineHeight",!1,t),onToolbarSetup:kw(e),onMenuSetup:kw(e)}))(e)),(e=>P.from(Tv(e)).map((t=>({name:"language",text:"Language",icon:"language",getOptions:T(t),hash:e=>y(e.customCode)?e.code:"".concat(e.code,"/").concat(e.customCode),display:e=>e.title,watcher:(e,t,r)=>{var n;return e.formatter.formatChanged("lang",r,!1,{value:t.code,customValue:null!==(n=t.customCode)&&void 0!==n?n:null}).unbind},getCurrent:e=>{var t=$e(e.selection.getNode());return Uo(t,(e=>P.some(e).filter(tt).bind((e=>Ht(e,"lang").map((t=>({code:t,customCode:Ht(e,"data-mce-lang").getOrUndefined(),title:""})))))))},setCurrent:(e,t)=>e.execCommand("Lang",!1,t),onToolbarSetup:t=>{var r=id();return t.setActive(e.formatter.match("lang",{},void 0,!0)),r.set(e.formatter.formatChanged("lang",t.setActive,!0)),Cw(r.clear,kw(e)(t))},onMenuSetup:kw(e)}))))(e).each((t=>TR(e,t)))},MR=e=>_w(e,"NodeChange",(t=>{t.setEnabled(e.queryCommandState("outdent")&&e.selection.isEditable())})),NR=(e,t)=>r=>{r.setActive(t.get());var n=e=>{t.set(e.state),r.setActive(e.state)};return e.on("PastePlainTextToggle",n),Cw((()=>e.off("PastePlainTextToggle",n)),kw(e)(r))},RR=(e,t)=>()=>{e.execCommand("mceToggleFormat",!1,t)},DR=e=>{(e=>{(e=>{JS.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],((t,r)=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:Sw(e,t.name),onAction:RR(e,t.name)})}));for(var t=1;t<=6;t++){var r="h"+t;e.ui.registry.addToggleButton(r,{text:r.toUpperCase(),tooltip:"Heading "+t,onSetup:Sw(e,r),onAction:RR(e,r)})}})(e),(e=>{JS.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print"}],(t=>{e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:Ew(e,t.action)})})),JS.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],(t=>{e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:kw(e),onAction:Ew(e,t.action)})}))})(e),(e=>{JS.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],(t=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:Ew(e,t.action),onSetup:Sw(e,t.name)})}))})(e)})(e),(e=>{JS.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],(t=>{e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:Ew(e,t.action)})})),JS.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],(t=>{e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onSetup:kw(e),onAction:Ew(e,t.action)})})),e.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:kw(e),onAction:RR(e,"code")})})(e)},BR=(e,t)=>_w(e,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",(r=>{r.setEnabled(!e.mode.isReadOnly()&&e.undoManager[t]())})),LR=e=>_w(e,"VisualAid",(t=>{t.setActive(e.hasVisual)})),HR=(e,t)=>{(e=>{Y([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],(t=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:Ew(e,t.cmd),onSetup:Sw(e,t.name)})})),e.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:kw(e),onAction:Ew(e,"JustifyNone")})})(e),DR(e),((e,t)=>{((e,t)=>{var r=aN(0,t,pN(e));e.ui.registry.addNestedMenuItem("align",{text:t.shared.providers.translate("Align"),onSetup:kw(e),getSubmenuItems:()=>r.items.validateItems(r.getStyleItems())})})(e,t),((e,t)=>{var r=aN(0,t,wN(e));e.ui.registry.addNestedMenuItem("fontfamily",{text:t.shared.providers.translate("Fonts"),onSetup:kw(e),getSubmenuItems:()=>r.items.validateItems(r.getStyleItems())})})(e,t),((e,t)=>{var r=d({type:"advanced"},t.styles),n=aN(0,t,TN(e,r));e.ui.registry.addNestedMenuItem("styles",{text:"Formats",onSetup:kw(e),getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})})(e,t),((e,t)=>{var r=aN(0,t,fN(e));e.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",onSetup:kw(e),getSubmenuItems:()=>r.items.validateItems(r.getStyleItems())})})(e,t),((e,t)=>{var r=aN(0,t,EN(e));e.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",onSetup:kw(e),getSubmenuItems:()=>r.items.validateItems(r.getStyleItems())})})(e,t)})(e,t),(e=>{(e=>{e.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:BR(e,"hasUndo"),onAction:Ew(e,"undo")}),e.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:BR(e,"hasRedo"),onAction:Ew(e,"redo")})})(e),(e=>{e.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:BR(e,"hasUndo"),onAction:Ew(e,"undo")}),e.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:BR(e,"hasRedo"),onAction:Ew(e,"redo")})})(e)})(e),(e=>{(e=>{e.addCommand("mceApplyTextcolor",((t,r)=>{((e,t,r)=>{e.undoManager.transact((()=>{e.focus(),e.formatter.apply(t,{value:r}),e.nodeChanged()}))})(e,t,r)})),e.addCommand("mceRemoveTextcolor",(t=>{((e,t)=>{e.undoManager.transact((()=>{e.focus(),e.formatter.remove(t,{value:null},void 0,!0),e.nodeChanged()}))})(e,t)}))})(e);var t=qw(e),r=$w(e),n=Ho(t),o=Ho(r);tx(e,"forecolor","forecolor","Text color",n),tx(e,"backcolor","hilitecolor","Background color",o),rx(e,"forecolor","forecolor","Text color",n),rx(e,"backcolor","hilitecolor","Background color",o)})(e),(e=>{(e=>{e.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Ew(e,"mceToggleVisualAid")})})(e),(e=>{e.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:LR(e),onAction:Ew(e,"mceToggleVisualAid")})})(e)})(e),(e=>{(e=>{e.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:MR(e),onAction:Ew(e,"outdent")}),e.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:kw(e),onAction:Ew(e,"indent")})})(e)})(e),AR(e),(e=>{var t=Ho(Xv(e)),r=()=>e.execCommand("mceTogglePlainTextPaste");e.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:r,onSetup:NR(e,t)}),e.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:r,onSetup:NR(e,t)})})(e)},PR=e=>g(e)?e.split(/[ ,]/):e,IR=e=>t=>t.options.get(e),FR=IR("contextmenu_never_use_native"),zR=IR("contextmenu_avoid_overlap"),VR=e=>{var t=e.ui.registry.getAll().contextMenus,r=e.options.get("contextmenu");return e.options.isSet("contextmenu")?r:J(r,(e=>Te(t,e)))},ZR=(e,t)=>({type:"makeshift",x:e,y:t}),jR=e=>"longpress"===e.type||0===e.type.indexOf("touch"),UR=(e,t)=>"contextmenu"===t.type||"longpress"===t.type?e.inline?(e=>{if(jR(e)){var t=e.touches[0];return ZR(t.pageX,t.pageY)}return ZR(e.pageX,e.pageY)})(t):((e,t)=>{var r=uv.DOM.getPos(e);return((e,t,r)=>ZR(e.x+t,e.y+r))(t,r.x,r.y)})(e.getContentAreaContainer(),(e=>{if(jR(e)){var t=e.touches[0];return ZR(t.clientX,t.clientY)}return ZR(e.clientX,e.clientY)})(t)):WR(e),WR=e=>({type:"selection",root:$e(e.selection.getNode())}),qR=(e,t,r)=>{switch(r){case"node":return(e=>({type:"node",node:P.some($e(e.selection.getNode())),root:$e(e.getBody())}))(e);case"point":return UR(e,t);case"selection":return WR(e)}},$R=(e,t,r,n,o,a)=>{var i=r(),s=qR(e,t,a);P_(i,xf.CLOSE_ON_EXECUTE,n,{isHorizontalMenu:!1,search:P.none()}).map((e=>{t.preventDefault(),Kp.showMenuAt(o,{anchor:s},{menu:{markers:Hf("normal")},data:e})}))},GR={onLtr:()=>[vl,ul,ml,gl,hl,pl,CE,kE,xE,yE,wE,bE],onRtl:()=>[vl,ml,ul,hl,gl,pl,CE,kE,wE,bE,xE,yE]},KR={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},YR=(e,t,r,n,o,a)=>{var i=Fr(),s=i.os.isiOS(),l=i.os.isMacOS(),c=i.os.isAndroid(),u=i.deviceType.isTouch(),m=()=>{var i=r();((e,t,r,n,o,a,i)=>{var s=((e,t,r)=>{var n=qR(e,t,r);return d({bubble:xd(0,"point"===r?12:0,KR),layouts:GR,overrides:{maxWidthFunction:YA(),maxHeightFunction:fd()}},n)})(e,t,a);P_(r,xf.CLOSE_ON_EXECUTE,n,{isHorizontalMenu:!0,search:P.none()}).map((r=>{t.preventDefault();var l=i?xg.HighlightMenuAndItem:xg.HighlightNone;Kp.showMenuWithinBounds(o,{anchor:s},{menu:{markers:Hf("normal"),highlightOnOpen:l},data:r,type:"horizontal"},(()=>P.some(hR(e,n.shared,"node"===a?"node":"selection")))),e.dispatch(dR)}))})(e,t,i,n,o,a,!(c||s||l&&u))};if((l||s)&&"node"!==a){var g=()=>{(e=>{var t=e.selection.getRng(),r=()=>{Yp.setEditorTimeout(e,(()=>{e.selection.setRng(t)}),10),a()};e.once("touchend",r);var n=e=>{e.preventDefault(),e.stopImmediatePropagation()};e.on("mousedown",n,!0);var o=()=>a();e.once("longpresscancel",o);var a=()=>{e.off("touchend",r),e.off("longpresscancel",o),e.off("mousedown",n)}})(e),m()};((e,t)=>{var r=e.selection;if(r.isCollapsed()||t.touches.length<1)return!1;var n=t.touches[0],o=r.getRng();return ac(e.getWin(),$d.domRange(o)).exists((e=>e.left<=n.clientX&&e.right>=n.clientX&&e.top<=n.clientY&&e.bottom>=n.clientY))})(e,t)?g():(e.once("selectionchange",g),e.once("touchend",(()=>e.off("selectionchange",g))))}else m()},XR=e=>g(e)?"|"===e:"separator"===e.type,JR={type:"separator"},QR=e=>{var t=e=>({text:e.text,icon:e.icon,enabled:e.enabled,shortcut:e.shortcut});if(g(e))return e;switch(e.type){case"separator":return JR;case"submenu":return d(d({type:"nestedmenuitem"},t(e)),{},{getSubmenuItems:()=>{var t=e.getSubmenuItems();return g(t)?t:K(t,QR)}});default:var r=e;return d(d({type:"menuitem"},t(r)),{},{onAction:O(r.onAction)})}},eD=(e,t)=>{if(0===t.length)return e;var r=ge(e).filter((e=>!XR(e))).fold((()=>[]),(e=>[JR]));return e.concat(r).concat(t).concat([JR])},tD=(e,t)=>!(e=>"longpress"===e.type||Te(e,"touches"))(t)&&(2!==t.button||t.target===e.getBody()&&""===t.pointerType),rD=(e,t)=>tD(e,t)?e.selection.getStart(!0):t.target,nD=(e,t,r)=>{var n=Fr().deviceType.isTouch,o=hs(Kp.sketch({dom:{tag:"div"},lazySink:t,onEscape:()=>e.focus(),onShow:()=>r.setContextMenuState(!0),onHide:()=>r.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Ml([op("dismissContextMenu",[Ja(Ba(),((t,r)=>{ru.close(t),e.focus()}))])])})),a=()=>Kp.hide(o),i=t=>{if(FR(e)&&t.preventDefault(),!((e,t)=>t.ctrlKey&&!FR(e))(e,t)&&!(e=>0===VR(e).length)(e)){var a=((e,t)=>{var r=zR(e),n=tD(e,t)?"selection":"point";if(Ve(r)){var o=rD(e,t);return Qx($e(o),r)?"node":n}return n})(e,t);(n()?YR:$R)(e,t,(()=>{var r=rD(e,t),n=e.ui.registry.getAll(),o=VR(e);return((e,t,r)=>{var n=ee(t,((t,n)=>Ee(e,n.toLowerCase()).map((e=>{var n=e.update(r);if(g(n)&&Ve(ze(n)))return eD(t,n.split(" "));if(v(n)&&n.length>0){var o=K(n,QR);return eD(t,o)}return t})).getOrThunk((()=>t.concat([n])))),[]);return n.length>0&&XR(n[n.length-1])&&n.pop(),n})(n.contextMenus,o,r)}),r,o,a)}};e.on("init",(()=>{var t="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(n()?"":" ResizeWindow");e.on(t,a),e.on("longpress contextmenu",i)}))},oD=Po([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),aD=e=>t=>t.translate(-e.left,-e.top),iD=e=>t=>t.translate(e.left,e.top),sD=e=>(t,r)=>ee(e,((e,t)=>t(e)),rr(t,r)),lD=(e,t,r)=>e.fold(sD([iD(r),aD(t)]),sD([aD(t)]),sD([])),dD=(e,t,r)=>e.fold(sD([iD(r)]),sD([]),sD([iD(t)])),cD=(e,t,r)=>e.fold(sD([]),sD([aD(r)]),sD([iD(t),aD(r)])),uD=(e,t,r)=>{var n=e.fold(((e,t)=>({position:P.some("absolute"),left:P.some(e+"px"),top:P.some(t+"px")})),((e,t)=>({position:P.some("absolute"),left:P.some(e-r.left+"px"),top:P.some(t-r.top+"px")})),((e,t)=>({position:P.some("fixed"),left:P.some(e+"px"),top:P.some(t+"px")})));return d({right:P.none(),bottom:P.none()},n)},mD=(e,t,r,n)=>{var o=(e,o)=>(a,i)=>{var s=e(t,r,n);return o(a.getOr(s.left),i.getOr(s.top))};return e.fold(o(cD,gD),o(dD,hD),o(lD,pD))},gD=oD.offset,hD=oD.absolute,pD=oD.fixed,vD=(e,t)=>{var r=Lt(e,t);return y(r)?NaN:parseInt(r,10)},fD=(e,t,r,n,o,a)=>{var i=((e,t,r,n)=>((e,t)=>{var r=e.element,n=vD(r,t.leftAttr),o=vD(r,t.topAttr);return isNaN(n)||isNaN(o)?P.none():P.some(rr(n,o))})(e,t).fold((()=>r),(e=>pD(e.left+n.left,e.top+n.top))))(e,t,r,n),s=t.mustSnap?yD(e,t,i,o,a):wD(e,t,i,o,a),l=lD(i,o,a);return((e,t,r)=>{var n=e.element;Dt(n,t.leftAttr,r.left+"px"),Dt(n,t.topAttr,r.top+"px")})(e,t,l),s.fold((()=>({coord:pD(l.left,l.top),extra:P.none()})),(e=>({coord:e.output,extra:e.extra})))},bD=(e,t,r,n)=>pe(e,(e=>{var o=e.sensor,a=((e,t,r,n,o,a)=>{var i=dD(e,o,a),s=dD(t,o,a);return Math.abs(i.left-s.left)<=r&&Math.abs(i.top-s.top)<=n})(t,o,e.range.left,e.range.top,r,n);return a?P.some({output:mD(e.output,t,r,n),extra:e.extra}):P.none()})),yD=(e,t,r,n,o)=>{var a=t.getSnapPoints(e);return bD(a,r,n,o).orThunk((()=>{var e=ee(a,((e,t)=>{var a=t.sensor,i=((e,t,r,n,o,a)=>{var i=dD(e,o,a),s=dD(t,o,a),l=Math.abs(i.left-s.left),d=Math.abs(i.top-s.top);return rr(l,d)})(r,a,t.range.left,t.range.top,n,o);return e.deltas.fold((()=>({deltas:P.some(i),snap:P.some(t)})),(r=>(i.left+i.top)/2<=(r.left+r.top)/2?{deltas:P.some(i),snap:P.some(t)}:e))}),{deltas:P.none(),snap:P.none()});return e.snap.map((e=>({output:mD(e.output,r,n,o),extra:e.extra})))}))},wD=(e,t,r,n,o)=>{var a=t.getSnapPoints(e);return bD(a,r,n,o)},xD=Object.freeze({__proto__:null,snapTo:(e,t,r,n)=>{var o=t.getTarget(e.element);if(t.repositionTarget){var a=ct(e.element),i=Yr(a),s=BT(o),l=((e,t,r)=>({coord:mD(e.output,e.output,t,r),extra:e.extra}))(n,i,s),d=uD(l.coord,0,s);jt(o,d)}}}),CD="data-initial-z-index",kD=(e,t)=>{e.getSystem().addToGui(t),(e=>{ht(e.element).filter(tt).each((t=>{qt(t,"z-index").each((e=>{Dt(t,CD,e)})),Vt(t,"z-index",Ut(e.element,"z-index"))}))})(t)},SD=e=>{(e=>{ht(e.element).filter(tt).each((e=>{Ht(e,CD).fold((()=>Kt(e,"z-index")),(t=>Vt(e,"z-index",t))),It(e,CD)}))})(e),e.getSystem().removeFromGui(e)},_D=(e,t,r)=>e.getSystem().build(dC.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[t]},events:r})),OD=Oo("snaps",[co("getSnapPoints"),Is("onSensor"),co("leftAttr"),co("topAttr"),Eo("lazyViewport",dn),Eo("mustSnap",!1)]),ED=[Eo("useFixed",L),co("blockerClass"),Eo("getTarget",A),Eo("onDrag",_),Eo("repositionTarget",!0),Eo("onDrop",_),Do("getBounds",dn),OD],TD=e=>{return(t=qt(e,"left"),r=qt(e,"top"),n=qt(e,"position"),t.isSome()&&r.isSome()&&n.isSome()?P.some(((e,t,r)=>("fixed"===r?pD:gD)(parseInt(e,10),parseInt(t,10)))(t.getOrDie(),r.getOrDie(),n.getOrDie())):P.none()).getOrThunk((()=>{var t=or(e);return hD(t.left,t.top)}));var t,r,n},AD=(e,t)=>({bounds:e.getBounds(),height:er(t.element),width:lr(t.element)}),MD=(e,t,r,n,o)=>{var a=r.update(n,o),i=r.getStartData().getOrThunk((()=>AD(t,e)));a.each((r=>{((e,t,r,n)=>{var o=t.getTarget(e.element);if(t.repositionTarget){var a=ct(e.element),i=Yr(a),s=BT(o),l=TD(o),d=((e,t,r,n,o,a,i)=>((e,t,r,n,o)=>{var a=o.bounds,i=dD(t,r,n),s=rl(i.left,a.x,a.x+a.width-o.width),l=rl(i.top,a.y,a.y+a.height-o.height),d=hD(s,l);return t.fold((()=>{var e=cD(d,r,n);return gD(e.left,e.top)}),T(d),(()=>{var e=lD(d,r,n);return pD(e.left,e.top)}))})(0,t.fold((()=>{var e,t,i,s=(e=r,t=a.left,i=a.top,e.fold(((e,r)=>gD(e+t,r+i)),((e,r)=>hD(e+t,r+i)),((e,r)=>pD(e+t,r+i)))),l=lD(s,n,o);return pD(l.left,l.top)}),(t=>{var i=fD(e,t,r,a,n,o);return i.extra.each((r=>{t.onSensor(e,r)})),i.coord})),n,o,i))(e,t.snaps,l,i,s,n,r),c=uD(d,0,s);jt(o,c)}t.onDrag(e,o,n)})(e,t,i,r)}))},ND=(e,t,r,n)=>{t.each(SD),r.snaps.each((t=>{((e,t)=>{((e,t)=>{var r=e.element;It(r,t.leftAttr),It(r,t.topAttr)})(e,t)})(e,t)}));var o=r.getTarget(e.element);n.reset(),r.onDrop(e,o)},RD=e=>(t,r)=>{var n=e=>{r.setStartData(AD(t,e))};return Ka([Ja(Ma(),(e=>{r.getStartData().each((()=>n(e)))})),...e(t,r,n)])},DD=Object.freeze({__proto__:null,getData:e=>P.from(rr(e.x,e.y)),getDelta:(e,t)=>rr(t.left-e.left,t.top-e.top)}),BD=(e,t,r)=>[Ja(Qo(),((n,o)=>{if(0===o.event.raw.button){o.stop();var a=()=>ND(n,P.some(l),e,t),i=eC(a,200),s={drop:a,delayDrop:i.schedule,forceDrop:a,move:r=>{i.cancel(),MD(n,e,t,DD,r)}},l=_D(n,e.blockerClass,(e=>Ka([Ja(Qo(),e.forceDrop),Ja(ra(),e.drop),Ja(ea(),((t,r)=>{e.move(r.event)})),Ja(ta(),e.delayDrop)]))(s));r(n),kD(n,l)}}))],LD=[...ED,Zs("dragger",{handlers:RD(BD)})],HD=Object.freeze({__proto__:null,getData:e=>{var t=e.raw.touches;return 1===t.length?(e=>{var t=e[0];return P.some(rr(t.clientX,t.clientY))})(t):P.none()},getDelta:(e,t)=>rr(t.left-e.left,t.top-e.top)}),PD=(e,t,r)=>{var n=sd(),o=r=>{ND(r,n.get(),e,t),n.clear()};return[Ja(Ko(),((a,i)=>{i.stop();var s=()=>o(a),l={drop:s,delayDrop:_,forceDrop:s,move:r=>{MD(a,e,t,HD,r)}},d=_D(a,e.blockerClass,(e=>Ka([Ja(Ko(),e.forceDrop),Ja(Xo(),e.drop),Ja(Jo(),e.drop),Ja(Yo(),((t,r)=>{e.move(r.event)}))]))(l));n.set(d),r(a),kD(a,d)})),Ja(Yo(),((r,n)=>{n.stop(),MD(r,e,t,HD,n.event)})),Ja(Xo(),((e,t)=>{t.stop(),o(e)})),Ja(Jo(),o)]},ID=LD,FD=[...ED,Zs("dragger",{handlers:RD(PD)})],zD=[...ED,Zs("dragger",{handlers:RD(((e,t,r)=>[...BD(e,t,r),...PD(e,t,r)]))})],VD=Object.freeze({__proto__:null,mouse:ID,touch:FD,mouseOrTouch:zD}),ZD=Object.freeze({__proto__:null,init:()=>{var e=P.none(),t=P.none(),r=T({});return Li({readState:r,reset:()=>{e=P.none(),t=P.none()},update:(t,r)=>t.getData(r).bind((r=>((t,r)=>{var n=e.map((e=>t.getDelta(e,r)));return e=P.some(r),n})(t,r))),getStartData:()=>t,setStartData:e=>{t=P.some(e)}})}}),jD=Bl({branchKey:"mode",branches:VD,name:"dragging",active:{events:(e,t)=>e.dragger.handlers(e,t)},extra:{snap:e=>({sensor:e.sensor,range:e.range,output:e.output,extra:P.from(e.extra)})},state:ZD,apis:xD}),UD=(e,t,r,n,o,a)=>e.fold((()=>jD.snap({sensor:hD(r-20,n-20),range:rr(o,a),output:hD(P.some(r),P.some(n)),extra:{td:t}})),(e=>{var o=r-20,a=n-20,i=e.element.dom.getBoundingClientRect();return jD.snap({sensor:hD(o,a),range:rr(40,40),output:hD(P.some(r-i.width/2),P.some(n-i.height/2)),extra:{td:t}})})),WD=(e,t,r)=>({getSnapPoints:e,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(e,n)=>{var o=n.td;((e,t)=>e.exists((e=>lt(e,t))))(t.get(),o)||(t.set(o),r(o))},mustSnap:!0}),qD=e=>Jp(Xp.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Ml([jD.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:e}),ZC.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),$D=(e,t)=>{var r=Ho([]),n=Ho([]),o=Ho(!1),a=sd(),i=sd(),s=e=>{var r=sn(e);return UD(u.getOpt(t),e,r.x,r.y,r.width,r.height)},l=e=>{var r=sn(e);return UD(m.getOpt(t),e,r.right,r.bottom,r.width,r.height)},d=WD((()=>K(r.get(),(e=>s(e)))),a,(t=>{i.get().each((r=>{e.dispatch("TableSelectorChange",{start:t,finish:r})}))})),c=WD((()=>K(n.get(),(e=>l(e)))),i,(t=>{a.get().each((r=>{e.dispatch("TableSelectorChange",{start:r,finish:t})}))})),u=qD(d),m=qD(c),g=hs(u.asSpec()),h=hs(m.asSpec()),p=(t,r,n,o)=>{var a=n(r);jD.snapTo(t,a),((t,r,n,a)=>{var i=r.dom.getBoundingClientRect();Kt(t.element,"display");var s=gt($e(e.getBody())).dom.innerHeight,l=i[o]<0,d=((e,t)=>e[o]>t)(i,s);(l||d)&&Vt(t.element,"display","none")})(t,r)},v=e=>p(g,e,s,"top"),f=e=>p(h,e,l,"bottom");Fr().deviceType.isTouch()&&(e.on("TableSelectionChange",(e=>{o.get()||(Pc(t,g),Pc(t,h),o.set(!0)),a.set(e.start),i.set(e.finish),e.otherCells.each((t=>{r.set(t.upOrLeftCells),n.set(t.downOrRightCells),v(e.start),f(e.finish)}))})),e.on("ResizeEditor ResizeWindow ScrollContent",(()=>{a.get().each(v),i.get().each(f)})),e.on("TableSelectionClear",(()=>{o.get()&&(zc(g),zc(h),o.set(!1)),a.clear(),i.clear()})))},GD=(e,t,r)=>{var n,o=null!==(n=t.delimiter)&&void 0!==n?n:"";return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Ml([Gh.config({mode:"flow",selector:"div[role=button]"}),jm.config({disabled:r.isDisabled}),Ty(),vC.config({}),np.config({}),op("elementPathEvents",[ii(((t,n)=>{e.shortcuts.add("alt+F11","focus statusbar elementpath",(()=>Gh.focusIn(t))),e.on("NodeChange",(n=>{var a=(t=>{for(var r,n=[],o=t.length;o-- >0;){var a=t[o];if(1===a.nodeType&&"BR"!==(r=a).nodeName&&!r.getAttribute("data-mce-bogus")&&"bookmark"!==r.getAttribute("data-mce-type")){var i=xw(e,a);if(i.isDefaultPrevented()||n.push({name:i.name,element:a}),i.isPropagationStopped())break}}return n})(n.parents),i=a.length>0?ee(a,((t,n,a)=>{var i=((t,n,o)=>Xp.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":o,"aria-level":o+1}},components:[cs(t)],action:t=>{e.focus(),e.selection.select(n),e.nodeChanged()},buttonBehaviours:Ml([Ay(r.isDisabled),Ty()])}))(n.name,n.element,a);return 0===a?t.concat([i]):t.concat([{dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[cs(" ".concat(o," "))]},i])}),[]):[];np.set(t,i)}))}))])]),components:[]}};!function(e){e[e.None=0]="None",e[e.Both=1]="Both",e[e.Vertical=2]="Vertical"}(mN||(mN={}));var KD=(e,t,r)=>{var n=$e(e.getContainer()),o=((e,t,r,n,o)=>{var a={height:tR(n+t.top,Cv(e),Sv(e))};return r===mN.Both&&(a.width=tR(o+t.left,xv(e),kv(e))),a})(e,t,r,Qt(n),sr(n));be(o,((e,t)=>{k(e)&&Vt(n,t,eR(e))})),(e=>{e.dispatch("ResizeEditor")})(e)},YD=(e,t,r,n)=>{var o=rr(20*r,20*n);return KD(e,o,t),P.some(!0)},XD=(e,t)=>{var r=()=>{var r,n=[],o=ef(e),a=Gv(e),i=Kv(e)||e.hasPlugin("wordcount");return a&&n.push(GD(e,{},t)),o&&n.push((r=zy("Alt+0"),{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[cs(Qp.translate(["Press {0} for help",r]))]})),i&&n.push((()=>{var r=[];return e.hasPlugin("wordcount")&&r.push(((e,t)=>{var r=(e,r,n)=>np.set(e,[cs(t.translate(["{0} "+n,r[n]]))]);return Xp.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Ml([Ay(t.isDisabled),Ty(),vC.config({}),np.config({}),Cu.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),op("wordcount-events",[di((e=>{var t=Cu.getValue(e),n="words"===t.mode?"characters":"words";Cu.setValue(e,{mode:n,count:t.count}),r(e,t.count,n)})),ii((t=>{e.on("wordCountUpdate",(e=>{var{mode:n}=Cu.getValue(t);Cu.setValue(t,{mode:n,count:e.wordCount}),r(t,e.wordCount,n)}))}))])]),eventOrder:{[xa()]:["disabling","alloy.base.behaviour","wordcount-events"]}})})(e,t)),Kv(e)&&r.push({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6",rel:"noopener",target:"_blank","aria-label":Qp.translate(["Powered by {0}","Tiny"])},innerHtml:'<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>\n</svg>\n'.trim()},behaviours:Ml([dp.config({})])}]}),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:r}})()),n.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...(()=>{var e="tox-statusbar__text-container--flex-start",t="tox-statusbar__text-container--flex-end";if(o){var r="tox-statusbar__text-container-3-cols";return i||a?i&&!a?[r,t]:[r,e]:[r,"tox-statusbar__text-container--space-around"]}return[i&&!a?t:e]})()]},components:n}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{var n=r(),o=((e,t)=>{var r=(e=>{var t=Yv(e);return!1===t?mN.None:"both"===t?mN.Both:mN.Vertical})(e);if(r===mN.None)return P.none();var n=r===mN.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return P.some(lv("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:t.translate("Resize"),"aria-label":t.translate(n)},behaviours:[jD.config({mode:"mouse",repositionTarget:!1,onDrag:(t,n,o)=>KD(e,o,r),blockerClass:"tox-blocker"}),Gh.config({mode:"special",onLeft:()=>YD(e,r,-1,0),onRight:()=>YD(e,r,1,0),onUp:()=>YD(e,r,0,-1),onDown:()=>YD(e,r,0,1)}),vC.config({}),dp.config({})]},t.icons))})(e,t);return n.concat(o.toArray())})()}},JD=(e,t)=>t.get().getOrDie("UI for ".concat(e," has not been rendered")),QD=(e,t)=>{var r,n,o,a=e.inline,i=a?lR:JN,s=hf(e)?pA:RT,l=(r=sd(),n=sd(),o=sd(),{dialogUi:r,popupUi:n,mainUi:o,getUiMotherships:()=>{var e=r.get().map((e=>e.mothership)),t=n.get().map((e=>e.mothership));return e.fold((()=>t.toArray()),(e=>t.fold((()=>[e]),(t=>lt(e.element,t.element)?[e]:[e,t]))))},lazyGetInOuterOrDie:(e,t)=>()=>o.get().bind((e=>t(e.outerContainer))).getOrDie("Could not find ".concat(e," element in OuterContainer"))}),c=sd(),u=sd(),m=sd(),g=Fr().deviceType.isTouch()?["tox-platform-touch"]:[],h=df(e),p=Mv(e),v=Jp({dom:{tag:"div",classes:["tox-anchorbar"]}}),f=Jp({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),b=()=>l.mainUi.get().map((e=>e.outerContainer)).bind($M.getHeader),y=l.lazyGetInOuterOrDie("anchor bar",v.getOpt),w=l.lazyGetInOuterOrDie("bottom anchor bar",f.getOpt),x=l.lazyGetInOuterOrDie("toolbar",$M.getToolbar),C=l.lazyGetInOuterOrDie("throbber",$M.getThrobber),k=((e,t,r,n)=>{var o=Ho(!1),a=(e=>{var t=Ho(df(e)?"bottom":"top");return{isPositionedAtTop:()=>"top"===t.get(),getDockingMode:t.get,setDockingMode:t.set}})(t),i={icons:()=>t.ui.registry.getAll().icons,menuItems:()=>t.ui.registry.getAll().menuItems,translate:Qp.translate,isDisabled:()=>t.mode.isReadOnly()||!t.ui.isEnabled(),getOption:t.options.get},s=yT(t),l=(e=>{var t=t=>()=>e.formatter.match(t),r=t=>()=>{var r=e.formatter.get(t);return void 0!==r?P.some({tag:r.length>0&&(r[0].inline||r[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))}):P.none()},n=Ho([]),o=Ho([]),a=Ho(!1);return e.on("PreInit",(o=>{var a=qE(e),i=GE(e,a,t,r);n.set(i)})),e.on("addStyleModifications",(n=>{var i=GE(e,n.items,t,r);o.set(i),a.set(n.replace)})),{getData:()=>{var e=a.get()?[]:n.get(),t=o.get();return e.concat(t)}}})(t),c=(e=>({colorPicker:PE(e),hasCustomColors:IE(e),getColors:FE(e),getColorCols:zE(e)}))(t),u=(e=>({isDraggableModal:VE(e)}))(t),m={shared:{providers:i,anchors:HE(t,r,n,a.isPositionedAtTop),header:a},urlinput:s,styles:l,colorinput:c,dialog:u,isContextMenuOpen:()=>o.get(),setContextMenuState:e=>o.set(e)},g=d(d({},m),{},{shared:d(d({},m.shared),{},{interpreter:e=>cE(e,{},g),getSink:e.popup})}),h=d(d({},m),{},{shared:d(d({},m.shared),{},{interpreter:e=>cE(e,{},h),getSink:e.dialog})});return{popup:g,dialog:h}})({popup:()=>gn.fromOption(l.popupUi.get().map((e=>e.sink)),"(popup) UI has not been rendered"),dialog:()=>gn.fromOption(l.dialogUi.get().map((e=>e.sink)),"UI has not been rendered")},e,y,w),S=()=>{var t=(()=>{var t={attributes:{[Od]:h?Jl.BottomToTop:Jl.TopToBottom}},r=$M.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:k.popup,onEscape:()=>{e.focus()}}),n=$M.parts.toolbar(d({dom:{tag:"div",classes:["tox-toolbar"]},getSink:k.popup.shared.getSink,providers:k.popup.shared.providers,onEscape:()=>{e.focus()},onToolbarToggled:t=>{((e,t)=>{e.dispatch("ToggleToolbarDrawer",{state:t})})(e,t)},type:p,lazyToolbar:x,lazyHeader:()=>b().getOrDie("Could not find header element")},t)),o=$M.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:k.popup.shared.providers,onEscape:()=>{e.focus()},type:p}),a=lf(e),i=af(e),s=rf(e),l=Qv(e),c=$M.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),u=a||i||s,m=l?[c,r]:[r];return $M.parts.header({dom:d({tag:"div",classes:["tox-editor-header"].concat(u?[]:["tox-editor-header--empty"])},t),components:ne([s?m:[],a?[o]:i?[n]:[],uf(e)?[]:[v.asSpec()]]),sticky:hf(e),editor:e,sharedBackstage:k.popup.shared})})(),r={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[$M.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),$M.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}})]},n=$M.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:k.popup}),o=$M.parts.viewWrapper({backstage:k.popup}),i=$v(e)&&!a?P.some(XD(e,k.popup.shared.providers)):P.none(),s=ne([h?[]:[t],a?[]:[r],h?[t]:[]]),l=$M.parts.editorContainer({components:ne([s,a?[]:[f.asSpec(),...i.toArray()]])}),u=gf(e),m=d(d({role:"application"},Qp.isRtl()?{dir:"rtl"}:{}),u?{"aria-hidden":"true"}:{}),y=hs($M.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(h?["tox-tinymce--toolbar-bottom"]:[]).concat(g),styles:d({visibility:"hidden"},u?{opacity:"0",border:"0"}:{}),attributes:m},components:[l,...a?[]:[o],n],behaviours:Ml([Ty(),jm.config({disableClass:"tox-tinymce--disabled"}),Gh.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),w=cC(y);return c.set(w),{mothership:w,outerContainer:y}},_=t=>{var r=eR((e=>{var t=(e=>{var t=yv(e),r=Cv(e),n=Sv(e);return QN(t).map((e=>tR(e,r,n)))})(e);return t.getOr(yv(e))})(e)),n=eR((e=>rR(e).getOr(wv(e)))(e));return e.inline||(Gt("div","width",n)&&Vt(t.element,"width",n),Gt("div","height",r)?Vt(t.element,"height",r):Vt(t.element,"height","400px")),r};return{popups:{backstage:k.popup,getMothership:()=>JD("popups",m)},dialogs:{backstage:k.dialog,getMothership:()=>JD("dialogs",u)},renderUI:()=>{var r,n,o,a,c,h,v=S(),f=(r=mf(e),n=lt(Mt(),r)&&"grid"===Ut(r,"display"),o={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(g),attributes:d({},Qp.isRtl()?{dir:"rtl"}:{})},behaviours:Ml([Mc.config({useFixed:()=>s.isDocked(b)})])},a={dom:{styles:{width:document.body.clientWidth+"px"}},events:Ka([Ja(Na(),(e=>{Vt(e.element,"width",document.body.clientWidth+"px")}))])},c=hs(kn(o,n?a:{})),h=cC(c),u.set(h),{sink:c,mothership:h}),y=pf(e)?(()=>{var e={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(g),attributes:d({},Qp.isRtl()?{dir:"rtl"}:{})},behaviours:Ml([Mc.config({useFixed:()=>s.isDocked(b),getBounds:()=>t.getPopupSinkBounds()})])},r=hs(e),n=cC(r);return m.set(n),{sink:r,mothership:n}})():(e=>(m.set(e.mothership),e))(f);return l.dialogUi.set(f),l.popupUi.set(y),l.mainUi.set(v),(t=>{var{mainUi:r,popupUi:n,uiMotherships:o}=t;ye(Nv(e),((t,r)=>{e.ui.registry.addGroupToolbarButton(r,t)}));var a,{buttons:l,menuItems:d,contextToolbars:c,sidebars:u,views:m}=e.ui.registry.getAll(),g=sf(e),h={menuItems:d,menus:vf(e),menubar:Pv(e),toolbar:g.getOrThunk((()=>Iv(e))),allowToolbarGroups:p===Wp.floating,buttons:l,sidebar:u,views:m};a=r.outerContainer,e.addShortcut("alt+F9","focus menubar",(()=>{$M.focusMenubar(a)})),e.addShortcut("alt+F10","focus toolbar",(()=>{$M.focusToolbar(a)})),e.addCommand("ToggleToolbarDrawer",((e,t)=>{(null==t?void 0:t.skipFocus)?$M.toggleToolbarDrawerWithoutFocusing(a):$M.toggleToolbarDrawer(a)})),e.addQueryStateHandler("ToggleToolbarDrawer",(()=>$M.isToolbarDrawerToggled(a))),((e,t,r)=>{var n=(e,n)=>{Y([t,...r],(t=>{t.broadcastEvent(e,n)}))},o=(e,n)=>{Y([t,...r],(t=>{t.broadcastOn([e],n)}))},a=e=>o(nu(),{target:e.target}),i=en(),s=dd(i,"touchstart",a),l=dd(i,"touchmove",(e=>n(Ta(),e))),d=dd(i,"touchend",(e=>n(Aa(),e))),c=dd(i,"mousedown",a),u=dd(i,"mouseup",(e=>{0===e.raw.button&&o(au(),{target:e.target})})),m=e=>o(nu(),{target:$e(e.target)}),g=e=>{0===e.button&&o(au(),{target:$e(e.target)})},h=()=>{Y(e.editorManager.get(),(t=>{e!==t&&t.dispatch("DismissPopups",{relatedTarget:e})}))},p=e=>n(Ma(),ud(e)),v=e=>{o(ou(),{}),n(Na(),ud(e))},f=_t($e(e.getElement())),b=cd(f,"scroll",(r=>{requestAnimationFrame((()=>{if(null!=e.getContainer()){var o=Xx(e,t.element).map((e=>[e.element,...e.others])).getOr([]);q(o,(e=>lt(e,r.target)))&&(e.dispatch("ElementScroll",{target:r.target.dom}),n(Ia(),r))}}))})),y=()=>o(ou(),{}),w=t=>{t.state&&o(nu(),{target:$e(e.getContainer())})},x=e=>{o(nu(),{target:$e(e.relatedTarget.getContainer())})};e.on("PostRender",(()=>{e.on("click",m),e.on("tap",m),e.on("mouseup",g),e.on("mousedown",h),e.on("ScrollWindow",p),e.on("ResizeWindow",v),e.on("ResizeEditor",y),e.on("AfterProgressState",w),e.on("DismissPopups",x)})),e.on("remove",(()=>{e.off("click",m),e.off("tap",m),e.off("mouseup",g),e.off("mousedown",h),e.off("ScrollWindow",p),e.off("ResizeWindow",v),e.off("ResizeEditor",y),e.off("AfterProgressState",w),e.off("DismissPopups",x),c.unbind(),s.unbind(),l.unbind(),d.unbind(),u.unbind(),b.unbind()})),e.on("detach",(()=>{Y([t,...r],Wc),Y([t,...r],(e=>e.destroy()))}))})(e,r.mothership,o),s.setup(e,k.popup.shared,b),HR(e,k.popup),nD(e,k.popup.shared.getSink,k.popup),(e=>{var{sidebars:t}=e.ui.registry.getAll();Y(ve(t),(r=>{var n=t[r],o=()=>Me(P.from(e.queryCommandValue("ToggleSidebar")),r);e.ui.registry.addToggleButton(r,{icon:n.icon,tooltip:n.tooltip,onAction:t=>{e.execCommand("ToggleSidebar",!1,r),t.setActive(o())},onSetup:t=>{t.setActive(o());var r=()=>t.setActive(o());return e.on("ToggleSidebar",r),()=>{e.off("ToggleSidebar",r)}}})}))})(e),VA(e,C,k.popup.shared),ER(e,c,n.sink,{backstage:k.popup}),$D(e,n.sink);var v={targetNode:e.getElement(),height:_(r.outerContainer)};return i.render(e,t,h,k.popup,v)})({popupUi:y,dialogUi:f,mainUi:v,uiMotherships:l.getUiMotherships()})}}},eB=T([co("lazySink"),yo("dragBlockClass"),Do("getBounds",dn),Eo("useTabstopAt",H),Eo("firstTabstop",0),Eo("eventOrder",{}),ku("modalBehaviours",[Gh]),Fs("onExecute"),Vs("onEscape")]),tB={sketch:A},rB=T([Ju({name:"draghandle",overrides:(e,t)=>({behaviours:Ml([jD.config({mode:"mouse",getTarget:e=>ws(e,'[role="dialog"]').getOr(e),blockerClass:e.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(t,null,2)).message),getBounds:e.getDragBounds})])})}),Yu({schema:[co("dom")],name:"title"}),Yu({factory:tB,schema:[co("dom")],name:"close"}),Yu({factory:tB,schema:[co("dom")],name:"body"}),Ju({factory:tB,schema:[co("dom")],name:"footer"}),Xu({factory:{sketch:(e,t)=>d(d({},e),{},{dom:t.dom,components:t.components})},schema:[Eo("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Eo("components",[])],name:"blocker"})]),nB=_m({name:"ModalDialog",configFields:eB(),partFields:rB(),factory:(e,t,r,n)=>{var o=sd(),a=fi("modal-events"),i=d(d({},e.eventOrder),{},{[Ra()]:[a].concat(e.eventOrder["alloy.system.attached"]||[])});return{uid:e.uid,dom:e.dom,components:t,apis:{show:t=>{o.set(t);var r=e.lazySink(t).getOrDie(),a=n.blocker(),i=r.getSystem().build(d(d({},a),{},{components:a.components.concat([ps(t)]),behaviours:Ml([dp.config({}),op("dialog-blocker-events",[ai(oa(),(()=>{IA.isBlocked(t)||Gh.focusIn(t)}))])])}));Pc(r,i),Gh.focusIn(t)},hide:e=>{o.clear(),ht(e.element).each((t=>{e.getSystem().getByDom(t).each((e=>{zc(e)}))}))},getBody:t=>um(t,e,"body"),getFooter:t=>cm(t,e,"footer"),setIdle:e=>{IA.unblock(e)},setBusy:(e,t)=>{IA.block(e,t)}},eventOrder:i,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:_u(e.modalBehaviours,[np.config({}),Gh.config({mode:"cyclic",onEnter:e.onExecute,onEscape:e.onEscape,useTabstopAt:e.useTabstopAt,firstTabstop:e.firstTabstop}),IA.config({getRoot:o.get}),op(a,[ii((t=>{var r,n,o;r=t.element,n=um(t,e,"title").element,o=Ht(r,"id").fold((()=>{var e=fi("dialog-label");return Dt(n,"id",e),e}),A),Dt(r,"aria-labelledby",o)}))])])}},apis:{show:(e,t)=>{e.show(t)},hide:(e,t)=>{e.hide(t)},getBody:(e,t)=>e.getBody(t),getFooter:(e,t)=>e.getFooter(t),setBusy:(e,t,r)=>{e.setBusy(t,r)},setIdle:(e,t)=>{e.setIdle(t)}}}),oB=In([sb,lb].concat(ny)),aB=$n,iB=[Bb("button"),xb,No("align","end",["start","end"]),Ab,Tb,ko("buttonType",["primary","secondary"])],sB=[...iB,cb],lB=[ho("type",["submit","cancel","custom"]),...sB],dB=[ho("type",["menu"]),wb,Cb,xb,bo("items",oB),...iB],cB=[...iB,ho("type",["togglebutton"]),go("tooltip"),xb,wb,Ro("active",!1)],uB=oo("type",{submit:lB,cancel:lB,custom:lB,menu:dB,togglebutton:cB}),mB=[sb,cb,ho("level",["info","warn","error","success"]),mb,Eo("url","")],gB=In(mB),hB=[sb,cb,Tb,Bb("button"),xb,Eb,ko("buttonType",["primary","secondary","toolbar"]),Ab],pB=In(hB),vB=[sb,lb],fB=vB.concat([kb]),bB=vB.concat([db,Tb]),yB=In(bB),wB=$n,xB=fB.concat([Mb("auto")]),CB=In(xB),kB=Zn([gb,cb,mb]),SB=fB.concat([Mo("storageKey","default")]),_B=In(SB),OB=qn,EB=In(fB),TB=qn,AB=vB.concat([Mo("tag","textarea"),go("scriptId"),go("scriptUrl"),To("settings",void 0,Yn)]),MB=vB.concat([Mo("tag","textarea"),po("init")]),NB=Jn((e=>eo("customeditor.old",Pn(MB),e).orThunk((()=>eo("customeditor.new",Pn(AB),e))))),RB=qn,DB=In(fB),BB=Fn(Rn),LB=e=>[sb,mo("columns"),e],HB=[sb,go("html"),No("presets","presentation",["presentation","document"])],PB=In(HB),IB=fB.concat([Ro("border",!1),Ro("sandboxed",!0),Ro("streamContent",!1),Ro("transparent",!0)]),FB=In(IB),zB=qn,VB=In(vB.concat([Co("height")])),ZB=In([go("url"),xo("zoom"),xo("cachedWidth"),xo("cachedHeight")]),jB=fB.concat([Co("inputMode"),Co("placeholder"),Ro("maximized",!1),Tb]),UB=In(jB),WB=qn,qB=e=>[sb,db,e,No("align","start",["start","center","end"])],$B=[cb,gb],GB=[cb,bo("items",ao(0,(()=>KB)))],KB=zn([In($B),In(GB)]),YB=fB.concat([bo("items",KB),Tb]),XB=In(YB),JB=qn,QB=fB.concat([fo("items",[cb,gb]),Ao("size",1),Tb]),eL=In(QB),tL=qn,rL=fB.concat([Ro("constrain",!0),Tb]),nL=In(rL),oL=In([go("width"),go("height")]),aL=vB.concat([db,Ao("min",0),Ao("max",0)]),iL=In(aL),sL=Wn,lL=[sb,bo("header",qn),bo("cells",Fn(qn))],dL=In(lL),cL=fB.concat([Co("placeholder"),Ro("maximized",!1),Tb]),uL=In(cL),mL=qn,gL=[ho("type",["directory","leaf"]),ub,go("id"),wo("menu",bA)],hL=In(gL),pL=gL.concat([bo("children",ao(0,(()=>Xn("type",{directory:vL,leaf:hL}))))]),vL=In(pL),fL=Xn("type",{directory:vL,leaf:hL}),bL=[sb,bo("items",fL),So("onLeafAction"),So("onToggleExpand"),Bo("defaultExpandedIds",[],qn),Co("defaultSelectedId")],yL=In(bL),wL=fB.concat([No("filetype","file",["image","media","file"]),Tb]),xL=In(wL),CL=In([gb,Nb]),kL=e=>io("items","items",{tag:"required",process:{}},Fn(Jn((t=>eo("Checking item of ".concat(e),SL,t).fold((e=>gn.error(no(e))),(e=>gn.value(e))))))),SL=Ln((()=>{return Xn("type",{alertbanner:gB,bar:In((e=kL("bar"),[sb,e])),button:pB,checkbox:yB,colorinput:_B,colorpicker:EB,dropzone:DB,grid:In(LB(kL("grid"))),iframe:FB,input:UB,listbox:XB,selectbox:eL,sizeinput:nL,slider:iL,textarea:uL,urlinput:xL,customeditor:NB,htmlpanel:PB,imagepreview:VB,collection:CB,label:In(qB(kL("label"))),table:dL,tree:yL,panel:OL});var e})),_L=[sb,Eo("classes",[]),bo("items",SL)],OL=In(_L),EL=[Bb("tab"),ub,bo("items",SL)],TL=[sb,fo("tabs",EL)],AL=In(TL),ML=sB,NL=uB,RL=In([go("title"),uo("body",Xn("type",{panel:OL,tabpanel:AL})),Mo("size","normal"),Bo("buttons",[],NL),Eo("initialData",{}),Do("onAction",_),Do("onChange",_),Do("onSubmit",_),Do("onClose",_),Do("onCancel",_),Do("onTabChange",_)]),DL=In([ho("type",["cancel","custom"]),...ML]),BL=In([go("title"),go("url"),xo("height"),xo("width"),_o("buttons",DL),Do("onAction",_),Do("onCancel",_),Do("onClose",_),Do("onMessage",_)]),LL=e=>h(e)?[e].concat(oe(Oe(e),LL)):v(e)?oe(e,LL):[],HL=e=>g(e.type)&&g(e.name),PL={checkbox:wB,colorinput:OB,colorpicker:TB,dropzone:BB,input:WB,iframe:zB,imagepreview:ZB,selectbox:tL,sizeinput:oL,slider:sL,listbox:JB,size:oL,textarea:mL,urlinput:CL,customeditor:RB,collection:kB,togglemenuitem:aB},IL=e=>{var t=(e=>J(LL(e),HL))(e),r=oe(t,(e=>(e=>P.from(PL[e.type]))(e).fold((()=>[]),(t=>[uo(e.name,t)]))));return In(r)},FL=e=>{var t;return{internalDialog:to(eo("dialog",RL,e)),dataValidator:IL(e),initialData:null!==(t=e.initialData)&&void 0!==t?t:{}}},zL={open:(e,t)=>{var r=FL(t);return e(r.internalDialog,r.initialData,r.dataValidator)},openUrl:(e,t)=>e(to(eo("dialog",BL,t))),redial:e=>FL(e)},VL=Object.freeze({__proto__:null,events:(e,t)=>{var r=(r,n)=>{e.updateState.each((e=>{var o=e(r,n);t.set(o)})),e.renderComponents.each((o=>{var a=o(n,t.get());(e.reuseDom?Yh:Kh)(r,a)}))};return Ka([Ja(wa(),((t,n)=>{var o=n;if(!o.universal){var a=e.channel;W(o.channels,a)&&r(t,o.data)}})),ii(((t,n)=>{e.initialData.each((e=>{r(t,e)}))}))])}}),ZL=Object.freeze({__proto__:null,getState:(e,t,r)=>r}),jL=[co("channel"),yo("renderComponents"),yo("updateState"),yo("initialData"),Ro("reuseDom",!0)],UL=Rl({fields:jL,name:"reflecting",active:VL,apis:ZL,state:Object.freeze({__proto__:null,init:()=>{var e=Ho(P.none());return{readState:()=>e.get().getOr("none"),get:e.get,set:e.set,clear:()=>e.set(P.none())}}})}),WL=e=>{var t=[],r={};return be(e,((e,n)=>{e.fold((()=>{t.push(n)}),(e=>{r[n]=e}))})),t.length>0?gn.error(t):gn.value(r)},qL=(e,t,r)=>{var n,o,a,i=Jp(HS.sketch((n=>({dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:K(e.items,(e=>lE(n,e,t,r)))}))));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[i.asSpec()]}],behaviours:Ml([Gh.config({mode:"acyclic",useTabstopAt:R(i_)}),US(i),(n=i,o={postprocess:e=>WL(e).fold((e=>(console.error(e),{})),A)},a=ro("RepresentingConfigs.memento processors",qS,o),Cu.config({store:{mode:"manual",getValue:e=>{var t=n.get(e),r=Cu.getValue(t);return a.postprocess(r)},setValue:(e,t)=>{var r=a.preprocess(t),o=n.get(e);Cu.setValue(o,r)}}})),op("dialog-body-panel",[Ja(oa(),((e,t)=>{e.getSystem().broadcastOn([m_],{newFocus:P.some(t.event.target)})}))])])}},$L=Sm({name:"TabButton",configFields:[Eo("uid",void 0),co("value"),io("dom","dom",En((()=>({attributes:{role:"tab",id:fi("aria"),"aria-selected":"false"}}))),jn()),yo("action"),Eo("domModification",{}),ku("tabButtonBehaviours",[dp,Gh,Cu]),co("view")],factory:(e,t)=>({uid:e.uid,dom:e.dom,components:e.components,events:yp(e.action),behaviours:_u(e.tabButtonBehaviours,[dp.config({}),Gh.config({mode:"execution",useSpace:!0,useEnter:!0}),Cu.config({store:{mode:"memory",initialValue:e.value}})]),domModification:e.domModification})}),GL=T([co("tabs"),co("dom"),Eo("clickToDismiss",!1),ku("tabbarBehaviours",[Qm,Gh]),Hs(["tabClass","selectedClass"])]),KL=Qu({factory:$L,name:"tabs",unit:"tab",overrides:e=>{var t=(e,t)=>{Qm.dehighlight(e,t),Ua(e,za(),{tabbar:e,button:t})},r=(e,t)=>{Qm.highlight(e,t),Ua(e,Fa(),{tabbar:e,button:t})};return{action:n=>{var o=n.getSystem().getByUid(e.uid).getOrDie(),a=Qm.isHighlighted(o,n);(a&&e.clickToDismiss?t:a?_:r)(o,n)},domModification:{classes:[e.markers.tabClass]}}}}),YL=T([KL]),XL=_m({name:"Tabbar",configFields:GL(),partFields:YL(),factory:(e,t,r,n)=>({uid:e.uid,dom:e.dom,components:t,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:_u(e.tabbarBehaviours,[Qm.config({highlightClass:e.markers.selectedClass,itemClass:e.markers.tabClass,onHighlight:(e,t)=>{Dt(t.element,"aria-selected","true")},onDehighlight:(e,t)=>{Dt(t.element,"aria-selected","false")}}),Gh.config({mode:"flow",getInitial:e=>Qm.getHighlighted(e).map((e=>e.element)),selector:"."+e.markers.tabClass,executeOnMove:!0})])})}),JL=Sm({name:"Tabview",configFields:[ku("tabviewBehaviours",[np])],factory:(e,t)=>({uid:e.uid,dom:e.dom,behaviours:_u(e.tabviewBehaviours,[np.config({})]),domModification:{attributes:{role:"tabpanel"}}})}),QL=T([Eo("selectFirst",!0),Is("onChangeTab"),Is("onDismissTab"),Eo("tabs",[]),ku("tabSectionBehaviours",[])]),eH=Yu({factory:XL,schema:[co("dom"),vo("markers",[co("tabClass"),co("selectedClass")])],name:"tabbar",defaults:e=>({tabs:e.tabs})}),tH=Yu({factory:JL,name:"tabview"}),rH=T([eH,tH]),nH=_m({name:"TabSection",configFields:QL(),partFields:rH(),factory:(e,t,r,n)=>{var o=(t,r)=>{cm(t,e,"tabbar").each((e=>{r(e).each(Wa)}))};return{uid:e.uid,dom:e.dom,components:t,behaviours:Su(e.tabSectionBehaviours),events:Ka(ne([e.selectFirst?[ii(((e,t)=>{o(e,Qm.getFirst)}))]:[],[Ja(Fa(),((t,r)=>{var n,o;n=r.event.button,o=Cu.getValue(n),cm(n,e,"tabview").each((t=>{te(e.tabs,(e=>e.value===o)).each((r=>{var o=r.view();Ht(n.element,"id").each((e=>{Dt(t.element,"aria-labelledby",e)})),np.set(t,o),e.onChangeTab(t,n,o)}))}))})),Ja(za(),((t,r)=>{var n=r.event.button;e.onDismissTab(t,n)}))]])),apis:{getViewItems:t=>cm(t,e,"tabview").map((e=>np.contents(e))).getOr([]),showTab:(e,t)=>{o(e,(e=>{var r=Qm.getCandidates(e);return te(r,(e=>Cu.getValue(e)===t)).filter((t=>!Qm.isHighlighted(e,t)))}))}}}},apis:{getViewItems:(e,t)=>e.getViewItems(t),showTab:(e,t,r)=>{e.showTab(t,r)}}}),oH=(e,t)=>{Vt(e,"height",t+"px"),Vt(e,"flex-basis",t+"px")},aH=(e,t,r)=>{ws(e,'[role="dialog"]').each((e=>{Cs(e,'[role="tablist"]').each((n=>{r.get().map((r=>(Vt(t,"height","0"),Vt(t,"flex-basis","0"),Math.min(r,((e,t,r)=>{var n,o=mt(e).dom,a=ws(e,".tox-dialog-wrap").getOr(e);n="fixed"===Ut(a,"position")?Math.max(o.clientHeight,window.innerHeight):Math.max(o.offsetHeight,o.scrollHeight);var i=Qt(t),s=t.dom.offsetLeft>=r.dom.offsetLeft+sr(r)?Math.max(Qt(r),i):i,l=parseInt(Ut(e,"margin-top"),10)||0,d=parseInt(Ut(e,"margin-bottom"),10)||0;return n-(Qt(e)+l+d-s)})(e,t,n))))).each((e=>{oH(t,e)}))}))}))},iH=e=>Cs(e,'[role="tabpanel"]'),sH="send-data-to-section",lH="send-data-to-view",dH=(e,t,r)=>{var n=Ho({}),o=e=>{var t=Cu.getValue(e),r=WL(t).getOr({}),o=n.get(),a=kn(o,r);n.set(a)},a=e=>{var t=n.get();Cu.setValue(e,t)},i=Ho(null),s=K(e.tabs,(e=>({value:e.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[cs(r.shared.providers.translate(e.title))],view:()=>[HS.sketch((n=>({dom:{tag:"div",classes:["tox-form"]},components:K(e.items,(e=>lE(n,e,t,r))),formBehaviours:Ml([Gh.config({mode:"acyclic",useTabstopAt:R(i_)}),op("TabView.form.events",[ii(a),si(o)]),Hl.config({channels:Vo([{key:sH,value:{onReceive:o}},{key:lH,value:{onReceive:a}}])})])})))]}))),l=(e=>{var t=sd(),r=[ii((r=>{var n=r.element;iH(n).each((o=>{Vt(o,"visibility","hidden"),r.getSystem().getByDom(o).toOptional().each((r=>{var n=((e,t,r)=>K(e,((n,o)=>{np.set(r,e[o].view());var a=t.dom.getBoundingClientRect();return np.set(r,[]),a.height})))(e,o,r),a=(e=>me(ce(e,((e,t)=>e>t?-1:e<t?1:0))))(n);a.fold(t.clear,t.set)})),aH(n,o,t),Kt(o,"visibility"),((e,t)=>{me(e).each((e=>nH.showTab(t,e.value)))})(e,r),requestAnimationFrame((()=>{aH(n,o,t)}))}))})),Ja(Na(),(e=>{var r=e.element;iH(r).each((e=>{aH(r,e,t)}))})),Ja(MC,((e,r)=>{var n=e.element;iH(n).each((e=>{var r=Vl(_t(e));Vt(e,"visibility","hidden");var o=qt(e,"height").map((e=>parseInt(e,10)));Kt(e,"height"),Kt(e,"flex-basis");var a=e.dom.getBoundingClientRect().height;o.forall((e=>a>e))?(t.set(a),aH(n,e,t)):o.each((t=>{oH(e,t)})),Kt(e,"visibility"),r.each(Il)}))}))];return{extraEvents:r,selectFirst:!1}})(s);return nH.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(e,t,r)=>{var n=Cu.getValue(t);Ua(e,AC,{name:n,oldName:i.get()}),i.set(n)},tabs:s,components:[nH.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[XL.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Ml([vC.config({})])}),nH.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:l.selectFirst,tabSectionBehaviours:Ml([op("tabpanel",l.extraEvents),Gh.config({mode:"acyclic"}),Am.config({find:e=>me(nH.getViewItems(e))}),$S(P.none(),(e=>(e.getSystem().broadcastOn([sH],{}),n.get())),((e,t)=>{n.set(t),e.getSystem().broadcastOn([lH],{})}))])})},cH=(e,t,r,n,o)=>({dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:d(d({},r.map((e=>({id:e}))).getOr({})),o?{"aria-live":"polite"}:{})},components:[],behaviours:Ml([WS(0),UL.config({channel:"".concat(d_,"-").concat(t),updateState:(e,t)=>P.some({isTabPanel:()=>"tabpanel"===t.body.type}),renderComponents:e=>{var t=e.body;return"tabpanel"===t.type?[dH(t,e.initialData,n)]:[qL(t,e.initialData,n)]},initialData:e})])});function uH(e){return uH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uH(e)}function mH(e,t){return mH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},mH(e,t)}function gH(e,t,r){return gH=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&mH(o,r.prototype),o},gH.apply(null,arguments)}function hH(e){return function(e){if(Array.isArray(e))return pH(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return pH(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pH(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var vH=Object.hasOwnProperty,fH=Object.setPrototypeOf,bH=Object.isFrozen,yH=Object.getPrototypeOf,wH=Object.getOwnPropertyDescriptor,xH=Object.freeze,CH=Object.seal,kH=Object.create,SH="undefined"!=typeof Reflect&&Reflect,_H=SH.apply,OH=SH.construct;_H||(_H=function(e,t,r){return e.apply(t,r)}),xH||(xH=function(e){return e}),CH||(CH=function(e){return e}),OH||(OH=function(e,t){return gH(e,hH(t))});var EH,TH=IH(Array.prototype.forEach),AH=IH(Array.prototype.pop),MH=IH(Array.prototype.push),NH=IH(String.prototype.toLowerCase),RH=IH(String.prototype.match),DH=IH(String.prototype.replace),BH=IH(String.prototype.indexOf),LH=IH(String.prototype.trim),HH=IH(RegExp.prototype.test),PH=(EH=TypeError,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return OH(EH,t)});function IH(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return _H(e,t,n)}}function FH(e,t){fH&&fH(e,null);for(var r=t.length;r--;){var n=t[r];if("string"==typeof n){var o=NH(n);o!==n&&(bH(t)||(t[r]=o),n=o)}e[n]=!0}return e}function zH(e){var t,r=kH(null);for(t in e)_H(vH,e,[t])&&(r[t]=e[t]);return r}function VH(e,t){for(;null!==e;){var r=wH(e,t);if(r){if(r.get)return IH(r.get);if("function"==typeof r.value)return IH(r.value)}e=yH(e)}return function(e){return console.warn("fallback value for",e),null}}var ZH=xH(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),jH=xH(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),UH=xH(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),WH=xH(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),qH=xH(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),$H=xH(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),GH=xH(["#text"]),KH=xH(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),YH=xH(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),XH=xH(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),JH=xH(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),QH=CH(/\{\{[\w\W]*|[\w\W]*\}\}/gm),eP=CH(/<%[\w\W]*|[\w\W]*%>/gm),tP=CH(/^data-[\-\w.\u00B7-\uFFFF]/),rP=CH(/^aria-[\-\w]+$/),nP=CH(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),oP=CH(/^(?:\w+script|data):/i),aP=CH(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),iP=CH(/^html$/i),sP=function(){return"undefined"==typeof window?null:window},lP=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sP(),r=function(t){return e(t)};if(r.version="2.3.8",r.removed=[],!t||!t.document||9!==t.document.nodeType)return r.isSupported=!1,r;var n=t.document,o=t.document,a=t.DocumentFragment,i=t.HTMLTemplateElement,s=t.Node,l=t.Element,d=t.NodeFilter,c=t.NamedNodeMap,u=void 0===c?t.NamedNodeMap||t.MozNamedAttrMap:c,m=t.HTMLFormElement,g=t.DOMParser,h=t.trustedTypes,p=l.prototype,v=VH(p,"cloneNode"),f=VH(p,"nextSibling"),b=VH(p,"childNodes"),y=VH(p,"parentNode");if("function"==typeof i){var w=o.createElement("template");w.content&&w.content.ownerDocument&&(o=w.content.ownerDocument)}var x=function(e,t){if("object"!==uH(e)||"function"!=typeof e.createPolicy)return null;var r=null,n="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(n)&&(r=t.currentScript.getAttribute(n));var o="dompurify"+(r?"#"+r:"");try{return e.createPolicy(o,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}}(h,n),C=x?x.createHTML(""):"",k=o,S=k.implementation,_=k.createNodeIterator,O=k.createDocumentFragment,E=k.getElementsByTagName,T=n.importNode,A={};try{A=zH(o).documentMode?o.documentMode:{}}catch(e){}var M={};r.isSupported="function"==typeof y&&S&&void 0!==S.createHTMLDocument&&9!==A;var N,R,D=QH,B=eP,L=tP,H=rP,P=oP,I=aP,F=nP,z=null,V=FH({},[].concat(hH(ZH),hH(jH),hH(UH),hH(qH),hH(GH))),Z=null,j=FH({},[].concat(hH(KH),hH(YH),hH(XH),hH(JH))),U=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),W=null,q=null,$=!0,G=!0,K=!1,Y=!1,X=!1,J=!1,Q=!1,ee=!1,te=!1,re=!1,ne=!0,oe=!0,ae=!1,ie={},se=null,le=FH({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),de=null,ce=FH({},["audio","video","img","source","image","track"]),ue=null,me=FH({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ge="http://www.w3.org/1998/Math/MathML",he="http://www.w3.org/2000/svg",pe="http://www.w3.org/1999/xhtml",ve=pe,fe=!1,be=["application/xhtml+xml","text/html"],ye=null,we=o.createElement("form"),xe=function(e){return e instanceof RegExp||e instanceof Function},Ce=function(e){ye&&ye===e||(e&&"object"===uH(e)||(e={}),e=zH(e),z="ALLOWED_TAGS"in e?FH({},e.ALLOWED_TAGS):V,Z="ALLOWED_ATTR"in e?FH({},e.ALLOWED_ATTR):j,ue="ADD_URI_SAFE_ATTR"in e?FH(zH(me),e.ADD_URI_SAFE_ATTR):me,de="ADD_DATA_URI_TAGS"in e?FH(zH(ce),e.ADD_DATA_URI_TAGS):ce,se="FORBID_CONTENTS"in e?FH({},e.FORBID_CONTENTS):le,W="FORBID_TAGS"in e?FH({},e.FORBID_TAGS):{},q="FORBID_ATTR"in e?FH({},e.FORBID_ATTR):{},ie="USE_PROFILES"in e&&e.USE_PROFILES,$=!1!==e.ALLOW_ARIA_ATTR,G=!1!==e.ALLOW_DATA_ATTR,K=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Y=e.SAFE_FOR_TEMPLATES||!1,X=e.WHOLE_DOCUMENT||!1,ee=e.RETURN_DOM||!1,te=e.RETURN_DOM_FRAGMENT||!1,re=e.RETURN_TRUSTED_TYPE||!1,Q=e.FORCE_BODY||!1,ne=!1!==e.SANITIZE_DOM,oe=!1!==e.KEEP_CONTENT,ae=e.IN_PLACE||!1,F=e.ALLOWED_URI_REGEXP||F,ve=e.NAMESPACE||pe,e.CUSTOM_ELEMENT_HANDLING&&xe(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(U.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&xe(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(U.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(U.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),N=N=-1===be.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,R="application/xhtml+xml"===N?function(e){return e}:NH,Y&&(G=!1),te&&(ee=!0),ie&&(z=FH({},hH(GH)),Z=[],!0===ie.html&&(FH(z,ZH),FH(Z,KH)),!0===ie.svg&&(FH(z,jH),FH(Z,YH),FH(Z,JH)),!0===ie.svgFilters&&(FH(z,UH),FH(Z,YH),FH(Z,JH)),!0===ie.mathMl&&(FH(z,qH),FH(Z,XH),FH(Z,JH))),e.ADD_TAGS&&(z===V&&(z=zH(z)),FH(z,e.ADD_TAGS)),e.ADD_ATTR&&(Z===j&&(Z=zH(Z)),FH(Z,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&FH(ue,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(se===le&&(se=zH(se)),FH(se,e.FORBID_CONTENTS)),oe&&(z["#text"]=!0),X&&FH(z,["html","head","body"]),z.table&&(FH(z,["tbody"]),delete W.tbody),xH&&xH(e),ye=e)},ke=FH({},["mi","mo","mn","ms","mtext"]),Se=FH({},["foreignobject","desc","title","annotation-xml"]),_e=FH({},["title","style","font","a","script"]),Oe=FH({},jH);FH(Oe,UH),FH(Oe,WH);var Ee=FH({},qH);FH(Ee,$H);var Te=function(e){MH(r.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=C}catch(t){e.remove()}}},Ae=function(e,t){try{MH(r.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){MH(r.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!Z[e])if(ee||te)try{Te(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Me=function(e){var t,r;if(Q)e="<remove></remove>"+e;else{var n=RH(e,/^[\r\n\t ]+/);r=n&&n[0]}"application/xhtml+xml"===N&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var a=x?x.createHTML(e):e;if(ve===pe)try{t=(new g).parseFromString(a,N)}catch(e){}if(!t||!t.documentElement){t=S.createDocument(ve,"template",null);try{t.documentElement.innerHTML=fe?"":a}catch(e){}}var i=t.body||t.documentElement;return e&&r&&i.insertBefore(o.createTextNode(r),i.childNodes[0]||null),ve===pe?E.call(t,X?"html":"body")[0]:X?t.documentElement:i},Ne=function(e){return _.call(e.ownerDocument||e,e,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},Re=function(e){return"object"===uH(s)?e instanceof s:e&&"object"===uH(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},De=function(e,t,n){M[e]&&TH(M[e],(function(e){e.call(r,t,n,ye)}))},Be=function(e){var t,n;if(De("beforeSanitizeElements",e,null),(n=e)instanceof m&&("string"!=typeof n.nodeName||"string"!=typeof n.textContent||"function"!=typeof n.removeChild||!(n.attributes instanceof u)||"function"!=typeof n.removeAttribute||"function"!=typeof n.setAttribute||"string"!=typeof n.namespaceURI||"function"!=typeof n.insertBefore))return Te(e),!0;if(HH(/[\u0080-\uFFFF]/,e.nodeName))return Te(e),!0;var o=R(e.nodeName);if(De("uponSanitizeElement",e,{tagName:o,allowedTags:z}),e.hasChildNodes()&&!Re(e.firstElementChild)&&(!Re(e.content)||!Re(e.content.firstElementChild))&&HH(/<[/\w]/g,e.innerHTML)&&HH(/<[/\w]/g,e.textContent))return Te(e),!0;if("select"===o&&HH(/<template/i,e.innerHTML))return Te(e),!0;if(!z[o]||W[o]){if(!W[o]&&He(o)){if(U.tagNameCheck instanceof RegExp&&HH(U.tagNameCheck,o))return!1;if(U.tagNameCheck instanceof Function&&U.tagNameCheck(o))return!1}if(oe&&!se[o]){var a=y(e)||e.parentNode,i=b(e)||e.childNodes;if(i&&a)for(var s=i.length-1;s>=0;--s)a.insertBefore(v(i[s],!0),f(e))}return Te(e),!0}return e instanceof l&&!function(e){var t=y(e);t&&t.tagName||(t={namespaceURI:pe,tagName:"template"});var r=NH(e.tagName),n=NH(t.tagName);return e.namespaceURI===he?t.namespaceURI===pe?"svg"===r:t.namespaceURI===ge?"svg"===r&&("annotation-xml"===n||ke[n]):Boolean(Oe[r]):e.namespaceURI===ge?t.namespaceURI===pe?"math"===r:t.namespaceURI===he?"math"===r&&Se[n]:Boolean(Ee[r]):e.namespaceURI===pe&&!(t.namespaceURI===he&&!Se[n])&&!(t.namespaceURI===ge&&!ke[n])&&!Ee[r]&&(_e[r]||!Oe[r])}(e)?(Te(e),!0):"noscript"!==o&&"noembed"!==o||!HH(/<\/no(script|embed)/i,e.innerHTML)?(Y&&3===e.nodeType&&(t=e.textContent,t=DH(t,D," "),t=DH(t,B," "),e.textContent!==t&&(MH(r.removed,{element:e.cloneNode()}),e.textContent=t)),De("afterSanitizeElements",e,null),!1):(Te(e),!0)},Le=function(e,t,r){if(ne&&("id"===t||"name"===t)&&(r in o||r in we))return!1;if(G&&!q[t]&&HH(L,t));else if($&&HH(H,t));else if(!Z[t]||q[t]){if(!(He(e)&&(U.tagNameCheck instanceof RegExp&&HH(U.tagNameCheck,e)||U.tagNameCheck instanceof Function&&U.tagNameCheck(e))&&(U.attributeNameCheck instanceof RegExp&&HH(U.attributeNameCheck,t)||U.attributeNameCheck instanceof Function&&U.attributeNameCheck(t))||"is"===t&&U.allowCustomizedBuiltInElements&&(U.tagNameCheck instanceof RegExp&&HH(U.tagNameCheck,r)||U.tagNameCheck instanceof Function&&U.tagNameCheck(r))))return!1}else if(ue[t]);else if(HH(F,DH(r,I,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==BH(r,"data:")||!de[e])if(K&&!HH(P,DH(r,I,"")));else if(r)return!1;return!0},He=function(e){return e.indexOf("-")>0},Pe=function(e){var t,r,n,o;De("beforeSanitizeAttributes",e,null);var a=e.attributes;if(a){var i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Z};for(o=a.length;o--;){var s=t=a[o],l=s.name,d=s.namespaceURI;r="value"===l?t.value:LH(t.value),n=R(l);var c=r;if(i.attrName=n,i.attrValue=r,i.keepAttr=!0,i.forceKeepAttr=void 0,De("uponSanitizeAttribute",e,i),r=i.attrValue,!i.forceKeepAttr)if(i.keepAttr)if(HH(/\/>/i,r))Ae(l,e);else{Y&&(r=DH(r,D," "),r=DH(r,B," "));var u=R(e.nodeName);if(Le(u,n,r)){if(r!==c)try{d?e.setAttributeNS(d,l,r):e.setAttribute(l,r)}catch(t){Ae(l,e)}}else Ae(l,e)}else Ae(l,e)}De("afterSanitizeAttributes",e,null)}},Ie=function e(t){var r,n=Ne(t);for(De("beforeSanitizeShadowDOM",t,null);r=n.nextNode();)De("uponSanitizeShadowNode",r,null),Be(r)||(r.content instanceof a&&e(r.content),Pe(r));De("afterSanitizeShadowDOM",t,null)};return r.sanitize=function(e,o){var i,l,d,c,u;if((fe=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Re(e)){if("function"!=typeof e.toString)throw PH("toString is not a function");if("string"!=typeof(e=e.toString()))throw PH("dirty is not a string, aborting")}if(!r.isSupported){if("object"===uH(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(Re(e))return t.toStaticHTML(e.outerHTML)}return e}if(J||Ce(o),r.removed=[],"string"==typeof e&&(ae=!1),ae){if(e.nodeName){var m=R(e.nodeName);if(!z[m]||W[m])throw PH("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof s)1===(l=(i=Me("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===l.nodeName||"HTML"===l.nodeName?i=l:i.appendChild(l);else{if(!ee&&!Y&&!X&&-1===e.indexOf("<"))return x&&re?x.createHTML(e):e;if(!(i=Me(e)))return ee?null:re?C:""}i&&Q&&Te(i.firstChild);for(var g=Ne(ae?e:i);d=g.nextNode();)3===d.nodeType&&d===c||Be(d)||(d.content instanceof a&&Ie(d.content),Pe(d),c=d);if(c=null,ae)return e;if(ee){if(te)for(u=O.call(i.ownerDocument);i.firstChild;)u.appendChild(i.firstChild);else u=i;return Z.shadowroot&&(u=T.call(n,u,!0)),u}var h=X?i.outerHTML:i.innerHTML;return X&&z["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&HH(iP,i.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+h),Y&&(h=DH(h,D," "),h=DH(h,B," ")),x&&re?x.createHTML(h):h},r.setConfig=function(e){Ce(e),J=!0},r.clearConfig=function(){ye=null,J=!1},r.isValidAttribute=function(e,t,r){ye||Ce({});var n=R(e),o=R(t);return Le(n,o,r)},r.addHook=function(e,t){"function"==typeof t&&(M[e]=M[e]||[],MH(M[e],t))},r.removeHook=function(e){if(M[e])return AH(M[e])},r.removeHooks=function(e){M[e]&&(M[e]=[])},r.removeAllHooks=function(){M={}},r}(),dP=e=>lP().sanitize(e),cP=gv.deviceType.isTouch(),uP=(e,t)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[e,t]}),mP=(e,t)=>nB.parts.close(Xp.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close")}},action:e,buttonBehaviours:Ml([vC.config({})])})),gP=()=>nB.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),hP=(e,t)=>nB.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:FA("<p>".concat(dP(t.translate(e)),"</p>"))}]}]}),pP=e=>nB.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:e}),vP=(e,t)=>[dC.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:e}),dC.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:t})],fP=e=>{var t="tox-dialog",r=t+"-wrap",n=r+"__backdrop",o=t+"__disable-scroll";return nB.sketch({lazySink:e.lazySink,onEscape:t=>(e.onEscape(t),P.some(!0)),useTabstopAt:e=>!i_(e),firstTabstop:e.firstTabstop,dom:{tag:"div",classes:[t].concat(e.extraClasses),styles:d({position:"relative"},e.extraStyles)},components:[e.header,e.body,...e.footer.toArray()],parts:{blocker:{dom:FA('<div class="'.concat(r,'"></div>')),components:[{dom:{tag:"div",classes:cP?[n,n+"--opaque"]:[n]}}]}},dragBlockClass:r,modalBehaviours:Ml([dp.config({}),op("dialog-events",e.dialogEvents.concat([ai(oa(),((e,t)=>{IA.isBlocked(e)||Gh.focusIn(e)})),Ja(Ha(),((e,t)=>{e.getSystem().broadcastOn([m_],{newFocus:t.event.newFocus})}))])),op("scroll-lock",[ii((()=>{Gi(Mt(),o)})),si((()=>{Ki(Mt(),o)}))]),...e.extraBehaviours]),eventOrder:d({[xa()]:["dialog-events"],[Ra()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Da()]:["alloy.base.behaviour","dialog-events","scroll-lock"]},e.eventOrder)})},bP=e=>Xp.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close"),title:e.translate("Close")}},buttonBehaviours:Ml([vC.config({})]),components:[lv("close",{tag:"span",classes:["tox-icon"]},e.icons)],action:e=>{ja(e,SC)}}),yP=(e,t,r,n)=>({dom:{tag:"div",classes:["tox-dialog__title"],attributes:d({},r.map((e=>({id:e}))).getOr({}))},components:[],behaviours:Ml([UL.config({channel:"".concat(l_,"-").concat(t),initialData:e,renderComponents:e=>[cs(n.translate(e.title))]})])}),wP=()=>({dom:FA('<div class="tox-dialog__draghandle"></div>')}),xP=(e,t,r)=>((e,t,r)=>{var n=nB.parts.title(yP(e,t,P.none(),r)),o=nB.parts.draghandle(wP()),a=nB.parts.close(bP(r)),i=[n].concat(e.draggable?[o]:[]).concat([a]);return dC.sketch({dom:FA('<div class="tox-dialog__header"></div>'),components:i})})({title:r.shared.providers.translate(e),draggable:r.dialog.isDraggableModal()},t,r.shared.providers),CP=(e,t,r,n)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":r.translate(e)},styles:{left:"0px",right:"0px",bottom:"0px",top:"".concat(n.getOr(0),"px"),position:"absolute"}},behaviours:t,components:[{dom:FA('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),kP=(e,t,r)=>({onClose:()=>r.closeWindow(),onBlock:r=>{var n=Cs(e().element,".tox-dialog__header").map((e=>Qt(e)));nB.setBusy(e(),((e,o)=>CP(r.message,o,t,n)))},onUnblock:()=>{nB.setIdle(e())}}),SP=(e,t,r,n)=>hs(fP(d(d({},e),{},{firstTabstop:1,lazySink:n.shared.getSink,extraBehaviours:[UL.config({channel:"".concat(s_,"-").concat(e.id),updateState:(e,t)=>P.some(t),initialData:t}),KS({}),...e.extraBehaviours],onEscape:e=>{ja(e,SC)},dialogEvents:r,eventOrder:{[wa()]:[UL.name(),Hl.name()],[Ra()]:["scroll-lock",UL.name(),"messages","dialog-events","alloy.base.behaviour"],[Da()]:["alloy.base.behaviour","dialog-events","messages",UL.name(),"scroll-lock"]}}))),_P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K(e,(e=>"menu"===e.type?(e=>{var r=K(e.items,(e=>{var r=Ee(t,e.name).getOr(Ho(!1));return d(d({},e),{},{storage:r})}));return d(d({},e),{},{items:r})})(e):e))},OP=e=>ee(e,((e,t)=>"menu"===t.type?ee(t.items,((e,t)=>(e[t.name]=t.storage,e)),e):e),{}),EP=(e,t)=>[ri(oa(),a_),e(kC,((e,r,n,o)=>{Vl(_t(o.element)).fold(_,Fl),t.onClose(),r.onClose()})),e(SC,((e,t,r,n)=>{t.onCancel(e),ja(n,kC)})),Ja(TC,((e,r)=>t.onUnblock())),Ja(EC,((e,r)=>t.onBlock(r.event)))],TP=(e,t,r)=>{var n=(t,r)=>Ja(t,((t,n)=>{o(t,((o,a)=>{r(e(),o,n.event,t)}))})),o=(e,t)=>{UL.getState(e).get().each((r=>{t(r.internalDialog,e)}))};return[...EP(n,t),n(OC,((e,t)=>t.onSubmit(e))),n(CC,((e,t,r)=>{t.onChange(e,{name:r.name})})),n(_C,((e,t,n,o)=>{var a=()=>o.getSystem().isConnected()?Gh.focusIn(o):void 0,i=e=>Pt(e,"disabled")||Ht(e,"aria-disabled").exists((e=>"true"===e)),s=_t(o.element),l=Vl(s);t.onAction(e,{name:n.name,value:n.value}),Vl(s).fold(a,(e=>{i(e)||l.exists((t=>dt(e,t)&&i(t)))?a():r().toOptional().filter((t=>!dt(t.element,e))).each(a)}))})),n(AC,((e,t,r)=>{t.onTabChange(e,{newTabName:r.name,oldTabName:r.oldName})})),si((t=>{var r=e();Cu.setValue(t,r.getData())}))]},AP=(e,t)=>{var r=t.map((e=>e.footerButtons)).getOr([]),n=X(r,(e=>"start"===e.align)),o=(e,t)=>dC.sketch({dom:{tag:"div",classes:["tox-dialog__footer-".concat(e)]},components:K(t,(e=>e.memento.asSpec()))});return[o("start",n.pass),o("end",n.fail)]},MP=(e,t,r)=>({dom:FA('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Ml([UL.config({channel:"".concat(c_,"-").concat(t),initialData:e,updateState:(e,t)=>{var n=K(t.buttons,(e=>{var t=Jp(((e,t)=>qO(e,e.type,t))(e,r));return{name:e.name,align:e.align,memento:t}}));return P.some({lookupByName:t=>((e,t,r)=>te(t,(e=>e.name===r)).bind((t=>t.memento.getOpt(e))))(e,n,t),footerButtons:n})},renderComponents:AP})])}),NP=(e,t,r)=>nB.parts.footer(MP(e,t,r)),RP=(e,t)=>{if(e.getRoot().getSystem().isConnected()){var r=Am.getCurrent(e.getFormWrapper()).getOr(e.getFormWrapper());return HS.getField(r,t).orThunk((()=>{var r=e.getFooter().bind((e=>UL.getState(e).get()));return r.bind((e=>e.lookupByName(t)))}))}return P.none()},DP=(e,t,r)=>{var n=t=>{var r=e.getRoot();r.getSystem().isConnected()&&t(r)},o={getData:()=>{var t=e.getRoot(),n=t.getSystem().isConnected()?e.getFormWrapper():t,o=Cu.getValue(n),a=ye(r,(e=>e.get()));return d(d({},o),a)},setData:t=>{n((n=>{var a=o.getData(),i=kn(a,t),s=((e,t)=>{var r=e.getRoot();return UL.getState(r).get().map((e=>to(eo("data",e.dataValidator,t)))).getOr(t)})(e,i),l=e.getFormWrapper();Cu.setValue(l,s),be(r,((e,t)=>{Te(i,t)&&e.set(i[t])}))}))},setEnabled:(t,r)=>{RP(e,t).each(r?jm.enable:jm.disable)},focus:t=>{RP(e,t).each(dp.focus)},block:e=>{if(!g(e))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");n((t=>{Ua(t,EC,{message:e})}))},unblock:()=>{n((e=>{ja(e,TC)}))},showTab:t=>{n((r=>{var n=e.getBody();UL.getState(n).get().exists((e=>e.isTabPanel()))&&Am.getCurrent(n).each((e=>{nH.showTab(e,t)}))}))},redial:a=>{n((n=>{var i=e.getId(),s=t(a),l=_P(s.internalDialog.buttons,r);n.getSystem().broadcastOn(["".concat(s_,"-").concat(i)],s),n.getSystem().broadcastOn(["".concat(l_,"-").concat(i)],s.internalDialog),n.getSystem().broadcastOn(["".concat(d_,"-").concat(i)],s.internalDialog),n.getSystem().broadcastOn(["".concat(c_,"-").concat(i)],d(d({},s.internalDialog),{},{buttons:l})),o.setData(s.initialData)}))},close:()=>{n((e=>{ja(e,kC)}))},toggleFullscreen:e.toggleFullscreen};return o},BP=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=fi("dialog"),a=fi("dialog-label"),i=fi("dialog-content"),s=e.internalDialog,l="medium"===s.size?P.some("tox-dialog--width-md"):P.none(),d=Jp(((e,t,r,n)=>dC.sketch({dom:FA('<div class="tox-dialog__header"></div>'),components:[yP(e,t,P.some(r),n),wP(),bP(n)],containerBehaviours:Ml([jD.config({mode:"mouse",blockerClass:"blocker",getTarget:e=>ks(e,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))({title:s.title,draggable:!0},o,a,r.shared.providers)),c=Jp(((e,t,r,n,o)=>cH(e,t,P.some(r),n,o))({body:s.body,initialData:s.initialData},o,i,r,n)),u=_P(s.buttons),m=OP(u),g=Be(0!==u.length,Jp(((e,t,r)=>MP(e,t,r))({buttons:u},o,r))),h=TP((()=>f),{onBlock:e=>{IA.block(v,((t,n)=>{var o=d.getOpt(v).map((e=>Qt(e.element)));return CP(e.message,n,r.shared.providers,o)}))},onUnblock:()=>{IA.unblock(v)},onClose:()=>t.closeWindow()},r.shared.getSink),p="tox-dialog-inline",v=hs({dom:{tag:"div",classes:["tox-dialog",p,...l.toArray()],attributes:{role:"dialog","aria-labelledby":a}},eventOrder:{[wa()]:[UL.name(),Hl.name()],[xa()]:["execute-on-form"],[Ra()]:["reflecting","execute-on-form"]},behaviours:Ml([Gh.config({mode:"cyclic",onEscape:e=>(ja(e,kC),P.some(!0)),useTabstopAt:e=>!i_(e)&&("button"!==Je(e)||"disabled"!==Lt(e,"disabled")),firstTabstop:1}),UL.config({channel:"".concat(s_,"-").concat(o),updateState:(e,t)=>P.some(t),initialData:e}),dp.config({}),op("execute-on-form",h.concat([ai(oa(),((e,t)=>{Gh.focusIn(e)})),Ja(Ha(),((e,t)=>{e.getSystem().broadcastOn([m_],{newFocus:t.event.newFocus})}))])),IA.config({getRoot:()=>P.some(v)}),np.config({}),KS({})]),components:[d.asSpec(),c.asSpec(),...g.map((e=>e.asSpec())).toArray()]}),f=DP({getId:T(o),getRoot:T(v),getFooter:()=>g.map((e=>e.get(v))),getBody:()=>c.get(v),getFormWrapper:()=>{var e=c.get(v);return Am.getCurrent(e).getOr(e)},toggleFullscreen:()=>{var e="tox-dialog--fullscreen",t=$e(v.element.dom);Qi(t,[e])?(Ji(t,[e]),Xi(t,[p])):(Ji(t,[p]),Xi(t,[e]))}},t.redial,m);return{dialog:v,instanceApi:f}},LP=tinymce.util.Tools.resolve("tinymce.util.URI"),HP=["insertContent","setContent","execCommand","close","block","unblock"],PP=e=>h(e)&&-1!==HP.indexOf(e.mceAction),IP=(e,t,r,n)=>{var o,a,i,s,l,c,u,m,p=fi("dialog"),v=xP(e.title,p,n),f=(u=e,m={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[n_(P.none(),{dom:{tag:"iframe",attributes:{src:u.url}},behaviours:Ml([vC.config({}),dp.config({})])})]}],behaviours:Ml([Gh.config({mode:"acyclic",useTabstopAt:R(i_)})])},nB.parts.body(m)),y=e.buttons.bind((e=>0===e.length?P.none():P.some(NP({buttons:e},p,n)))),w=(o=()=>A,a=kP((()=>T),n.shared.providers,t),i=(e,t)=>Ja(e,((e,r)=>{s(e,((n,a)=>{t(o(),n,r.event,e)}))})),s=(e,t)=>{UL.getState(e).get().each((r=>{t(r,e)}))},[...EP(i,a),i(_C,((e,t,r)=>{t.onAction(e,{name:r.name})}))]),C=d(d({},e.height.fold((()=>({})),(e=>({height:e+"px","max-height":e+"px"})))),e.width.fold((()=>({})),(e=>({width:e+"px","max-width":e+"px"})))),k=e.width.isNone()&&e.height.isNone()?["tox-dialog--width-lg"]:[],S=new LP(e.url,{base_uri:new LP(window.location.href)}),_="".concat(S.protocol,"://").concat(S.host).concat(S.port?":"+S.port:""),O=id(),E=[op("messages",[ii((()=>{var t=dd($e(window),"message",(t=>{if(S.isSameOrigin(new LP(t.raw.origin))){var n=t.raw.data;PP(n)?((e,t,r)=>{switch(r.mceAction){case"insertContent":e.insertContent(r.content);break;case"setContent":e.setContent(r.content);break;case"execCommand":var n=!!b(r.ui)&&r.ui;e.execCommand(r.cmd,n,r.value);break;case"close":t.close();break;case"block":t.block(r.message);break;case"unblock":t.unblock()}})(r,A,n):(e=>!PP(e)&&h(e)&&Te(e,"mceAction"))(n)&&e.onMessage(A,n)}}));O.set(t)})),si(O.clear)]),Hl.config({channels:{[u_]:{onReceive:(e,t)=>{Cs(e.element,"iframe").each((e=>{var r=e.dom.contentWindow;x(r)&&r.postMessage(t,_)}))}}}})],T=SP({id:p,header:v,body:f,footer:y,extraClasses:k,extraBehaviours:E,extraStyles:C},e,w,n),A=(l=T,c=e=>{l.getSystem().isConnected()&&e(l)},{block:e=>{if(!g(e))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");c((t=>{Ua(t,EC,{message:e})}))},unblock:()=>{c((e=>{ja(e,TC)}))},close:()=>{c((e=>{ja(e,kC)}))},sendMessage:e=>{c((t=>{t.getSystem().broadcastOn([u_],e)}))}});return{dialog:T,instanceApi:A}},FP=(e,t)=>to(eo("data",t,e)),zP=e=>Qx(e,".tox-alert-dialog")||Qx(e,".tox-confirm-dialog"),VP=(e,t,r)=>t&&r?[]:[aA.config({contextual:{lazyContext:()=>P.some(an($e(e.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:t=>Xx(e,t.element).map((e=>({bounds:Jx(e),optScrollEnv:P.some({currentScrollTop:e.element.dom.scrollTop,scrollElmTop:or(e.element).top})}))).getOrThunk((()=>({bounds:dn(),optScrollEnv:P.none()})))})],ZP=e=>{var t,r,n=e.editor,o=hf(n),a=(t=e.backstages.dialog,r=t.shared,{open:(e,n)=>{var o=()=>{nB.hide(l),n()},a=Jp(qO({name:"close-alert",text:"OK",primary:!0,buttonType:P.some("primary"),align:"end",enabled:!0,icon:P.none()},"cancel",t)),i=gP(),s=mP(o,r.providers),l=hs(fP({lazySink:()=>r.getSink(),header:uP(i,s),body:hP(e,r.providers),footer:P.some(pP(vP([],[a.asSpec()]))),onEscape:o,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ja(SC,o)],eventOrder:{}}));nB.show(l);var d=a.get(l);dp.focus(d)}}),i=(e=>{var t=e.shared;return{open:(r,n)=>{var o=e=>{nB.hide(d),n(e)},a=Jp(qO({name:"yes",text:"Yes",primary:!0,buttonType:P.some("primary"),align:"end",enabled:!0,icon:P.none()},"submit",e)),i=qO({name:"no",text:"No",primary:!1,buttonType:P.some("secondary"),align:"end",enabled:!0,icon:P.none()},"cancel",e),s=gP(),l=mP((()=>o(!1)),t.providers),d=hs(fP({lazySink:()=>t.getSink(),header:uP(s,l),body:hP(r,t.providers),footer:P.some(pP(vP([],[i,a.asSpec()]))),onEscape:()=>o(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ja(SC,(()=>o(!1))),Ja(OC,(()=>o(!0)))],eventOrder:{}}));nB.show(d);var c=a.get(d);dp.focus(c)}}})(e.backstages.dialog),s=(t,r)=>zL.open(((t,n,o)=>{var a=n,i=((e,t,r)=>{var n=fi("dialog"),o=e.internalDialog,a=xP(o.title,n,r),i=((e,t,r)=>{var n=cH(e,t,P.none(),r,!1);return nB.parts.body(n)})({body:o.body,initialData:o.initialData},n,r),s=_P(o.buttons),l=OP(s),d=Be(0!==s.length,NP({buttons:s},n,r)),c=TP((()=>h),kP((()=>m),r.shared.providers,t),r.shared.getSink),u=(e=>{switch(e){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}})(o.size),m=SP({id:n,header:a,body:i,footer:d,extraClasses:u,extraBehaviours:[],extraStyles:{}},e,c,r),g={getId:T(n),getRoot:T(m),getBody:()=>nB.getBody(m),getFooter:()=>nB.getFooter(m),getFormWrapper:()=>{var e=nB.getBody(m);return Am.getCurrent(e).getOr(e)},toggleFullscreen:()=>{var e="tox-dialog--fullscreen",t=$e(m.element.dom);Yi(t,e)?(Ki(t,e),Xi(t,u)):(Ji(t,u),Gi(t,e))}},h=DP(g,t.redial,l);return{dialog:m,instanceApi:h}})({dataValidator:o,initialData:a,internalDialog:t},{redial:zL.redial,closeWindow:()=>{nB.hide(i.dialog),r(i.instanceApi)}},e.backstages.dialog);return nB.show(i.dialog),i.instanceApi.setData(a),i.instanceApi}),t),l=(t,r,a,i)=>zL.open(((t,s,l)=>{var c=FP(s,l),u=sd(),m=e.backstages.popup.shared.header.isPositionedAtTop(),g=()=>u.on((e=>{Kp.reposition(e),aA.refresh(e)})),h=BP({dataValidator:l,initialData:c,internalDialog:t},{redial:zL.redial,closeWindow:()=>{u.on(Kp.hide),n.off("ResizeEditor",g),u.clear(),a(h.instanceApi)}},e.backstages.popup,i.ariaAttrs),p=hs(Kp.sketch(d(d({lazySink:e.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:i.persistent?{event:"doNotDismissYet"}:{}},m?{}:{fireRepositionEventInstead:{}}),{},{inlineBehaviours:Ml([op("window-manager-inline-events",[Ja(Ba(),((e,t)=>{ja(h.dialog,SC)}))]),...VP(n,o,m)]),isExtraPart:(e,t)=>zP(t)})));return u.set(p),Kp.showWithinBounds(p,ps(h.dialog),{anchor:r},(()=>{var e=n.inline?Mt():$e(n.getContainer()),t=an(e);return P.some(t)})),o&&m||(aA.refresh(p),n.on("ResizeEditor",g)),h.instanceApi.setData(c),Gh.focusIn(h.dialog),h.instanceApi}),t),c=(t,r,o,a)=>zL.open(((t,i,s)=>{var l=FP(i,s),c=sd(),u=e.backstages.popup.shared.header.isPositionedAtTop(),m=()=>c.on((e=>{Kp.reposition(e),aA.refresh(e)})),g=BP({dataValidator:s,initialData:l,internalDialog:t},{redial:zL.redial,closeWindow:()=>{c.on(Kp.hide),n.off("ResizeEditor ScrollWindow ElementScroll",m),c.clear(),o(g.instanceApi)}},e.backstages.popup,a.ariaAttrs),h=hs(Kp.sketch(d(d({lazySink:e.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:a.persistent?{event:"doNotDismissYet"}:{}},u?{}:{fireRepositionEventInstead:{}}),{},{inlineBehaviours:Ml([op("window-manager-inline-events",[Ja(Ba(),((e,t)=>{ja(g.dialog,SC)}))]),aA.config({contextual:{lazyContext:()=>P.some(an($e(n.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:e=>Xx(n,e.element).map((e=>({bounds:Jx(e),optScrollEnv:P.some({currentScrollTop:e.element.dom.scrollTop,scrollElmTop:or(e.element).top})}))).getOrThunk((()=>({bounds:dn(),optScrollEnv:P.none()})))})]),isExtraPart:(e,t)=>zP(t)})));return c.set(h),Kp.showWithinBounds(h,ps(g.dialog),{anchor:r},(()=>e.backstages.popup.shared.getSink().toOptional().bind((e=>{var t=Xx(n,e.element).map((e=>Jx(e))).getOr(dn()),r=an($e(n.getContentAreaContainer())),o=ln(r,t);return P.some(on(o.x,o.y,o.width,o.height-15))})))),aA.refresh(h),n.on("ResizeEditor ScrollWindow ElementScroll",m),g.instanceApi.setData(l),Gh.focusIn(g.dialog),g.instanceApi}),t);return{open:(t,r,n)=>{if(!y(r)){if("toolbar"===r.inline)return l(t,e.backstages.popup.shared.anchors.inlineDialog(),n,r);if("bottom"===r.inline)return c(t,e.backstages.popup.shared.anchors.inlineBottomDialog(),n,r);if("cursor"===r.inline)return l(t,e.backstages.popup.shared.anchors.cursor(),n,r)}return s(t,n)},openUrl:(t,r)=>((t,r)=>zL.openUrl((t=>{var o=IP(t,{closeWindow:()=>{nB.hide(o.dialog),r(o.instanceApi)}},n,e.backstages.dialog);return nB.show(o.dialog),o.instanceApi}),t))(t,r),alert:(e,t)=>{a.open(e,t)},close:e=>{e.close()},confirm:(e,t)=>{i.open(e,t)}}};cn.add("silver",(e=>{(e=>{fv(e),(e=>{var t=e.options.register,r=e=>S(e,g)?{value:Iw(e),valid:!0}:{valid:!1,message:"Must be an array of strings."},n=e=>k(e)&&e>0?{value:e,valid:!0}:{valid:!1,message:"Must be a positive number."};t("color_map",{processor:r,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),t("color_map_background",{processor:r}),t("color_map_foreground",{processor:r}),t("color_cols",{processor:n,default:Zw(e)}),t("color_cols_foreground",{processor:n,default:jw(e,Hw)}),t("color_cols_background",{processor:n,default:jw(e,Pw)}),t("custom_colors",{processor:"boolean",default:!0}),t("color_default_foreground",{processor:"string",default:zw}),t("color_default_background",{processor:"string",default:zw})})(e),(e=>{var t=e.options.register;t("contextmenu_avoid_overlap",{processor:"string",default:""}),t("contextmenu_never_use_native",{processor:"boolean",default:!1}),t("contextmenu",{processor:e=>!1===e?{value:[],valid:!0}:g(e)||S(e,g)?{value:PR(e),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})})(e)})(e);var t=()=>dn(),{dialogs:r,popups:n,renderUI:o}=QD(e,{getPopupSinkBounds:()=>t()}),a=function(){var r=i((function*(){var r=yield o();return Xx(e,n.getMothership().element).each((e=>{t=()=>Jx(e)})),r}));return function(){return r.apply(this,arguments)}}();$x(e,n.backstage.shared);var s=ZP({editor:e,backstages:{popup:n.backstage,dialog:r.backstage}});return{renderUI:a,getWindowManagerImpl:T(s),getNotificationManagerImpl:()=>((e,t,r)=>{var n=t.backstage.shared,o=()=>{var t=an($e(e.getContentAreaContainer())),r=dn(),n=rl(r.x,t.x,t.right),o=rl(r.y,t.y,t.bottom),a=Math.max(t.right,r.right),i=Math.max(t.bottom,r.bottom);return P.some(on(n,o,a-n,i-o))};return{open:(t,a)=>{var i=()=>{a(),Kp.hide(l)},s=hs(cv.sketch({text:t.text,level:W(["success","error","warning","warn","info"],t.type)?t.type:void 0,progress:!0===t.progressBar,icon:t.icon,closeButton:t.closeButton,onAction:i,iconProvider:n.providers.icons,translationProvider:n.providers.translate})),l=hs(Kp.sketch(d({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:n.getSink,fireDismissalEventInstead:{}},n.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));r.add(l),k(t.timeout)&&t.timeout>0&&Yp.setEditorTimeout(e,(()=>{i()}),t.timeout);var c={close:i,reposition:()=>{var t=ps(s),r={maxHeightFunction:fd()},a=e.notificationManager.getNotifications();if(a[0]===c){var i=d(d({},n.anchors.banner()),{},{overrides:r});Kp.showWithinBounds(l,t,{anchor:i},o)}else U(a,c).each((e=>{var n=a[e-1].getEl(),i={type:"node",root:Mt(),node:P.some($e(n)),overrides:r,layouts:{onRtl:()=>[vl],onLtr:()=>[vl]}};Kp.showWithinBounds(l,t,{anchor:i},o)}))},text:e=>{cv.updateText(s,e)},settings:t,getEl:()=>s.element.dom,progressBar:{value:e=>{cv.updateProgress(s,e)}}};return c},close:e=>{e.close()},getArgs:e=>e.settings}})(e,{backstage:n.backstage},n.getMothership())}}))}()},344:e=>{var t=["uid"];function r(e,t,r,n,o,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){var n,o,a;n=e,o=t,a=r[t],(o=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(o))in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(){"use strict";var n=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},a=function(e){return{eq:e}},i=a((function(e,t){return e===t})),s=function(e){return a((function(t,r){if(t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e.eq(t[o],r[o]))return!1;return!0}))},l=function(e){return a((function(t,r){var n=Object.keys(t),o=Object.keys(r);if(!function(e,t){return function(e,t){return a((function(r,n){return e.eq(t(r),t(n))}))}(s(e),(function(e){return function(e,t){return Array.prototype.slice.call(e).sort(t)}(e,t)}))}(i).eq(n,o))return!1;for(var l=n.length,d=0;d<l;d++){var c=n[d];if(!e.eq(t[c],r[c]))return!1}return!0}))},d=a((function(e,t){if(e===t)return!0;var r=n(e);return r===n(t)&&(function(e){return-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(e)}(r)?e===t:"array"===r?s(d).eq(e,t):"object"===r&&l(d).eq(e,t))})),c=Object.getPrototypeOf,u=(e,t,r)=>{var n;return!!r(e,t.prototype)||(null===(n=e.constructor)||void 0===n?void 0:n.name)===t.name},m=e=>t=>{return n=typeof(r=t),(null===r?"null":"object"===n&&Array.isArray(r)?"array":"object"===n&&u(r,String,((e,t)=>t.isPrototypeOf(e)))?"string":n)===e;var r,n},g=e=>t=>typeof t===e,h=e=>t=>e===t,p=(e,t)=>f(e)&&u(e,t,((e,t)=>c(e)===t)),v=m("string"),f=m("object"),b=e=>p(e,Object),y=m("array"),w=h(null),x=g("boolean"),C=h(void 0),k=e=>null==e,S=e=>!k(e),_=g("function"),O=g("number"),E=(e,t)=>{if(y(e)){for(var r=0,n=e.length;r<n;++r)if(!t(e[r]))return!1;return!0}return!1},T=()=>{},A=(e,t)=>function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e(t.apply(null,n))},M=(e,t)=>r=>e(t(r)),N=e=>()=>e,R=e=>e,D=(e,t)=>e===t;function B(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var a=r.concat(n);return e.apply(null,a)}}var L=e=>t=>!e(t),H=e=>()=>{throw new Error(e)},P=e=>e(),I=e=>{e()},F=N(!1),z=N(!0);class V{constructor(e,t){this.tag=e,this.value=t}static some(e){return new V(!0,e)}static none(){return V.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?V.some(e(this.value)):V.none()}bind(e){return this.tag?e(this.value):V.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:V.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return S(e)?V.some(e):V.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?"some(".concat(this.value,")"):"none()"}}V.singletonNone=new V(!1);var Z=Array.prototype.slice,j=Array.prototype.indexOf,U=Array.prototype.push,W=(e,t)=>j.call(e,t),q=(e,t)=>W(e,t)>-1,$=(e,t)=>{for(var r=0,n=e.length;r<n;r++)if(t(e[r],r))return!0;return!1},G=(e,t)=>{for(var r=e.length,n=new Array(r),o=0;o<r;o++){var a=e[o];n[o]=t(a,o)}return n},K=(e,t)=>{for(var r=0,n=e.length;r<n;r++)t(e[r],r)},Y=(e,t)=>{for(var r=e.length-1;r>=0;r--)t(e[r],r)},X=(e,t)=>{for(var r=[],n=[],o=0,a=e.length;o<a;o++){var i=e[o];(t(i,o)?r:n).push(i)}return{pass:r,fail:n}},J=(e,t)=>{for(var r=[],n=0,o=e.length;n<o;n++){var a=e[n];t(a,n)&&r.push(a)}return r},Q=(e,t,r)=>(Y(e,((e,n)=>{r=t(r,e,n)})),r),ee=(e,t,r)=>(K(e,((e,n)=>{r=t(r,e,n)})),r),te=(e,t,r)=>{for(var n=0,o=e.length;n<o;n++){var a=e[n];if(t(a,n))return V.some(a);if(r(a,n))break}return V.none()},re=(e,t)=>te(e,t,F),ne=(e,t)=>{for(var r=0,n=e.length;r<n;r++)if(t(e[r],r))return V.some(r);return V.none()},oe=e=>{for(var t=[],r=0,n=e.length;r<n;++r){if(!y(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);U.apply(t,e[r])}return t},ae=(e,t)=>oe(G(e,t)),ie=(e,t)=>{for(var r=0,n=e.length;r<n;++r)if(!0!==t(e[r],r))return!1;return!0},se=e=>{var t=Z.call(e,0);return t.reverse(),t},le=(e,t)=>J(e,(e=>!q(t,e))),de=(e,t)=>{for(var r={},n=0,o=e.length;n<o;n++){var a=e[n];r[String(a)]=t(a,n)}return r},ce=(e,t)=>{var r=Z.call(e,0);return r.sort(t),r},ue=(e,t)=>t>=0&&t<e.length?V.some(e[t]):V.none(),me=e=>ue(e,0),ge=e=>ue(e,e.length-1),he=_(Array.from)?Array.from:e=>Z.call(e),pe=(e,t)=>{for(var r=0;r<e.length;r++){var n=t(e[r],r);if(n.isSome())return n}return V.none()},ve=Object.keys,fe=Object.hasOwnProperty,be=(e,t)=>{for(var r=ve(e),n=0,o=r.length;n<o;n++){var a=r[n];t(e[a],a)}},ye=(e,t)=>we(e,((e,r)=>({k:r,v:t(e,r)}))),we=(e,t)=>{var r={};return be(e,((e,n)=>{var o=t(e,n);r[o.k]=o.v})),r},xe=e=>(t,r)=>{e[r]=t},Ce=(e,t,r,n)=>{be(e,((e,o)=>{(t(e,o)?r:n)(e,o)}))},ke=(e,t)=>{var r={};return Ce(e,t,xe(r),T),r},Se=(e,t)=>{var r=[];return be(e,((e,n)=>{r.push(t(e,n))})),r},_e=e=>Se(e,R),Oe=(e,t)=>Ee(e,t)?V.from(e[t]):V.none(),Ee=(e,t)=>fe.call(e,t),Te=(e,t)=>Ee(e,t)&&void 0!==e[t]&&null!==e[t],Ae=e=>{var t={};return K(e,(e=>{t[e]={}})),ve(t)},Me=e=>void 0!==e.length,Ne=Array.isArray,Re=(e,t,r)=>{if(!e)return!1;if(r=r||e,Me(e)){for(var n=0,o=e.length;n<o;n++)if(!1===t.call(r,e[n],n,e))return!1}else for(var a in e)if(Ee(e,a)&&!1===t.call(r,e[a],a,e))return!1;return!0},De=(e,t)=>{var r=[];return Re(e,((n,o)=>{r.push(t(n,o,e))})),r},Be=(e,t)=>{var r=[];return Re(e,((n,o)=>{t&&!t(n,o,e)||r.push(n)})),r},Le=(e,t,r,n)=>{for(var o=C(r)?e[0]:r,a=0;a<e.length;a++)o=t.call(n,o,e[a],a);return o},He=(e,t,r)=>{for(var n=0,o=e.length;n<o;n++)if(t.call(r,e[n],n,e))return n;return-1},Pe=e=>e[e.length-1],Ie=e=>{var t,r=!1;return function(){if(!r){r=!0;for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];t=e.apply(null,o)}return t}},Fe=()=>ze(0,0),ze=(e,t)=>({major:e,minor:t}),Ve={nu:ze,detect:(e,t)=>{var r=String(t).toLowerCase();return 0===e.length?Fe():((e,t)=>{var r=((e,t)=>{for(var r=0;r<e.length;r++){var n=e[r];if(n.test(t))return n}})(e,t);if(!r)return{major:0,minor:0};var n=e=>Number(t.replace(r,"$"+e));return ze(n(1),n(2))})(e,r)},unknown:Fe},Ze=(e,t)=>{var r=String(t).toLowerCase();return re(e,(e=>e.search(r)))},je=(e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t,Ue=(e,t)=>qe(e,t)?((e,t)=>e.substring(t))(e,t.length):e,We=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,o=e.indexOf(t,r);return-1!==o&&(!!C(n)||o+t.length<=n)},qe=(e,t)=>je(e,t,0),$e=(e,t)=>je(e,t,e.length-t.length),Ge=e=>t=>t.replace(e,""),Ke=Ge(/^\s+|\s+$/g),Ye=Ge(/^\s+/g),Xe=Ge(/\s+$/g),Je=e=>e.length>0,Qe=e=>!Je(e),et=function(e){var t=parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:10);return isNaN(t)?V.none():V.some(t)},tt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,rt=e=>t=>We(t,e),nt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>We(e,"edge/")&&We(e,"chrome")&&We(e,"safari")&&We(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,tt],search:e=>We(e,"chrome")&&!We(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>We(e,"msie")||We(e,"trident")},{name:"Opera",versionRegexes:[tt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:rt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:rt("firefox")},{name:"Safari",versionRegexes:[tt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(We(e,"safari")||We(e,"mobile/"))&&We(e,"applewebkit")}],ot=[{name:"Windows",search:rt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>We(e,"iphone")||We(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:rt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:rt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:rt("linux"),versionRegexes:[]},{name:"Solaris",search:rt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:rt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:rt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],at={browsers:N(nt),oses:N(ot)},it="Edge",st="Chromium",lt="Opera",dt="Firefox",ct="Safari",ut=e=>{var t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isEdge:n(it),isChromium:n(st),isIE:n("IE"),isOpera:n(lt),isFirefox:n(dt),isSafari:n(ct)}},mt=()=>ut({current:void 0,version:Ve.unknown()}),gt=ut,ht=(N(it),N(st),N("IE"),N(lt),N(dt),N(ct),"Windows"),pt="Android",vt="Linux",ft="macOS",bt="Solaris",yt="FreeBSD",wt="ChromeOS",xt=e=>{var t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isWindows:n(ht),isiOS:n("iOS"),isAndroid:n(pt),isMacOS:n(ft),isLinux:n(vt),isSolaris:n(bt),isFreeBSD:n(yt),isChromeOS:n(wt)}},Ct=()=>xt({current:void 0,version:Ve.unknown()}),kt=xt,St=(N(ht),N("iOS"),N(pt),N(vt),N(ft),N(bt),N(yt),N(wt),e=>window.matchMedia(e).matches),_t=Ie((()=>((e,t,r)=>{var n=at.browsers(),o=at.oses(),a=t.bind((e=>((e,t)=>pe(t.brands,(t=>{var r=t.brand.toLowerCase();return re(e,(e=>{var t;return r===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:Ve.nu(parseInt(t.version,10),0)})))})))(n,e))).orThunk((()=>((e,t)=>Ze(e,t).map((e=>{var r=Ve.detect(e.versionRegexes,t);return{current:e.name,version:r}})))(n,e))).fold(mt,gt),i=((e,t)=>Ze(e,t).map((e=>{var r=Ve.detect(e.versionRegexes,t);return{current:e.name,version:r}})))(o,e).fold(Ct,kt),s=((e,t,r,n)=>{var o=e.isiOS()&&!0===/ipad/i.test(r),a=e.isiOS()&&!o,i=e.isiOS()||e.isAndroid(),s=i||n("(pointer:coarse)"),l=o||!a&&i&&n("(min-device-width:768px)"),d=a||i&&!l,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(r),u=!d&&!l&&!c;return{isiPad:N(o),isiPhone:N(a),isTablet:N(l),isPhone:N(d),isTouch:N(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:N(c),isDesktop:N(u)}})(i,a,e,r);return{browser:a,os:i,deviceType:s}})(navigator.userAgent,V.from(navigator.userAgentData),St))),Ot=()=>_t(),Et=navigator.userAgent,Tt=Ot(),At=Tt.browser,Mt=Tt.os,Nt=Tt.deviceType,Rt=-1!==Et.indexOf("Windows Phone"),Dt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:At.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!At.isIE(),windowsPhone:Rt,browser:{current:At.current,version:At.version,isChromium:At.isChromium,isEdge:At.isEdge,isFirefox:At.isFirefox,isIE:At.isIE,isOpera:At.isOpera,isSafari:At.isSafari},os:{current:Mt.current,version:Mt.version,isAndroid:Mt.isAndroid,isChromeOS:Mt.isChromeOS,isFreeBSD:Mt.isFreeBSD,isiOS:Mt.isiOS,isLinux:Mt.isLinux,isMacOS:Mt.isMacOS,isSolaris:Mt.isSolaris,isWindows:Mt.isWindows},deviceType:{isDesktop:Nt.isDesktop,isiPad:Nt.isiPad,isiPhone:Nt.isiPhone,isPhone:Nt.isPhone,isTablet:Nt.isTablet,isTouch:Nt.isTouch,isWebView:Nt.isWebView}},Bt=/^\s*|\s*$/g,Lt=e=>k(e)?"":(""+e).replace(Bt,""),Ht={trim:Lt,isArray:Ne,is:(e,t)=>t?!("array"!==t||!Ne(e))||typeof e===t:void 0!==e,toArray:e=>{if(Ne(e))return e;for(var t=[],r=0,n=e.length;r<n;r++)t[r]=e[r];return t},makeMap:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=v(e)?e.split(t||","):e||[],o=n.length;o--;)r[n[o]]={};return r},each:Re,map:De,grep:Be,inArray:(e,t)=>{if(e)for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},hasOwn:Ee,extend:function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t++){var r=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];for(var n in r)if(Ee(r,n)){var o=r[n];void 0!==o&&(e[n]=o)}}return e},walk:function e(t,r,n,o){o=o||this,t&&(n&&(t=t[n]),Re(t,((t,a)=>!1!==r.call(o,t,a,n)&&(e(t,r,n,o),!0))))},resolve:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,r=e.split("."),n=0,o=r.length;n<o&&(t=t[r[n]]);n++);return t},explode:(e,t)=>y(e)?e:""===e?[]:De(e.split(t||","),Lt),_addCacheSuffix:e=>{var t=Dt.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},Pt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:D;return e.exists((e=>r(e,t)))},It=function(e,t){return Ft(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:D).getOr(e.isNone()&&t.isNone())},Ft=(e,t,r)=>e.isSome()&&t.isSome()?V.some(r(e.getOrDie(),t.getOrDie())):V.none(),zt=(e,t)=>e?V.some(t):V.none(),Vt="undefined"!=typeof window?window:Function("return this;")(),Zt=(e,t)=>((e,t)=>{for(var r=null!=t?t:Vt,n=0;n<e.length&&null!=r;++n)r=r[e[n]];return r})(e.split("."),t),jt=Object.getPrototypeOf,Ut=e=>{var t=Zt("ownerDocument.defaultView",e);return f(e)&&((e=>((e,t)=>{var r=((e,t)=>Zt(e,t))(e,t);if(null==r)throw new Error(e+" not available on this browser");return r})("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(jt(e).constructor.name))},Wt=e=>e.dom.nodeName.toLowerCase(),qt=e=>e.dom.nodeType,$t=e=>t=>qt(t)===e,Gt=e=>Kt(e)&&Ut(e.dom),Kt=$t(1),Yt=$t(3),Xt=$t(9),Jt=$t(11),Qt=e=>t=>Kt(t)&&Wt(t)===e,er=(e,t,r)=>{if(!(v(r)||x(r)||O(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")},tr=(e,t,r)=>{er(e.dom,t,r)},rr=(e,t)=>{var r=e.dom;be(t,((e,t)=>{er(r,t,e)}))},nr=(e,t)=>{var r=e.dom.getAttribute(t);return null===r?void 0:r},or=(e,t)=>V.from(nr(e,t)),ar=(e,t)=>{var r=e.dom;return!(!r||!r.hasAttribute)&&r.hasAttribute(t)},ir=(e,t)=>{e.dom.removeAttribute(t)},sr=e=>ee(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),lr=(e,t)=>{var r=nr(e,t);return void 0===r||""===r?[]:r.split(" ")},dr=e=>void 0!==e.dom.classList,cr=e=>lr(e,"class"),ur=(e,t)=>((e,t,r)=>{var n=lr(e,t).concat([r]);return tr(e,t,n.join(" ")),!0})(e,"class",t),mr=(e,t)=>((e,t,r)=>{var n=J(lr(e,t),(e=>e!==r));return n.length>0?tr(e,t,n.join(" ")):ir(e,t),!1})(e,"class",t),gr=(e,t)=>{dr(e)?e.dom.classList.add(t):ur(e,t)},hr=e=>{0===(dr(e)?e.dom.classList:cr(e)).length&&ir(e,"class")},pr=(e,t)=>{dr(e)?e.dom.classList.remove(t):mr(e,t),hr(e)},vr=(e,t)=>dr(e)&&e.dom.classList.contains(t),fr=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},br=(e,t)=>{var r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){var n="HTML does not have a single root node";throw console.error(n,e),new Error(n)}return fr(r.childNodes[0])},yr=(e,t)=>{var r=(t||document).createElement(e);return fr(r)},wr=(e,t)=>{var r=(t||document).createTextNode(e);return fr(r)},xr=fr,Cr=(e,t,r)=>V.from(e.dom.elementFromPoint(t,r)).map(fr),kr=(e,t)=>{var r=[],n=e=>(r.push(e),t(e)),o=t(e);do{o=o.bind(n)}while(o.isSome());return r},Sr=(e,t)=>{var r=e.dom;if(1!==r.nodeType)return!1;var n=r;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},_r=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,Or=(e,t)=>e.dom===t.dom,Er=(e,t)=>{var r=e.dom,n=t.dom;return r!==n&&r.contains(n)},Tr=e=>xr(e.dom.ownerDocument),Ar=e=>Xt(e)?e:Tr(e),Mr=e=>xr(Ar(e).dom.defaultView),Nr=e=>V.from(e.dom.parentNode).map(xr),Rr=e=>V.from(e.dom.parentElement).map(xr),Dr=(e,t)=>{for(var r=_(t)?t:F,n=e.dom,o=[];null!==n.parentNode&&void 0!==n.parentNode;){var a=n.parentNode,i=xr(a);if(o.push(i),!0===r(i))break;n=a}return o},Br=e=>V.from(e.dom.previousSibling).map(xr),Lr=e=>V.from(e.dom.nextSibling).map(xr),Hr=e=>se(kr(e,Br)),Pr=e=>kr(e,Lr),Ir=e=>G(e.dom.childNodes,xr),Fr=(e,t)=>{var r=e.dom.childNodes;return V.from(r[t]).map(xr)},zr=e=>Fr(e,0),Vr=e=>Fr(e,e.dom.childNodes.length-1),Zr=e=>e.dom.childNodes.length,jr=e=>Jt(e)&&S(e.dom.host),Ur=_(Element.prototype.attachShadow)&&_(Node.prototype.getRootNode),Wr=N(Ur),qr=Ur?e=>xr(e.dom.getRootNode()):Ar,$r=e=>jr(e)?e:(e=>{var t=e.dom.head;if(null==t)throw new Error("Head is not available yet");return xr(t)})(Ar(e)),Gr=e=>xr(e.dom.host),Kr=e=>{if(Wr()&&S(e.target)){var t=xr(e.target);if(Kt(t)&&Yr(t)&&e.composed&&e.composedPath){var r=e.composedPath();if(r)return me(r)}}return V.from(e.target)},Yr=e=>S(e.dom.shadowRoot),Xr=e=>{var t=Yt(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;var r=t.ownerDocument;return(e=>{var t=qr(e);return jr(t)?V.some(t):V.none()})(xr(t)).fold((()=>r.body.contains(t)),M(Xr,Gr))},Jr=(e,t,r,n,o)=>e(r,n)?V.some(r):_(o)&&o(r)?V.none():t(r,n,o),Qr=(e,t,r)=>{for(var n=e.dom,o=_(r)?r:F;n.parentNode;){n=n.parentNode;var a=xr(n);if(t(a))return V.some(a);if(o(a))break}return V.none()},en=(e,t,r)=>Jr(((e,t)=>t(e)),Qr,e,t,r),tn=(e,t,r)=>Qr(e,(e=>Sr(e,t)),r),rn=(e,t)=>((e,t)=>{var r=void 0===t?document:t.dom;return _r(r)?V.none():V.from(r.querySelector(e)).map(xr)})(t,e),nn=(e,t,r)=>Jr(((e,t)=>Sr(e,t)),tn,e,t,r),on=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Xr(e)?e.dom.isContentEditable:(t=e,nn(t,"[contenteditable]")).fold(N(r),(e=>"true"===an(e)))},an=e=>e.dom.contentEditable,sn=e=>void 0!==e.style&&_(e.style.getPropertyValue),ln=(e,t,r)=>{if(!v(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);sn(e)&&e.style.setProperty(t,r)},dn=(e,t,r)=>{var n=e.dom;ln(n,t,r)},cn=(e,t)=>{var r=e.dom;be(t,((e,t)=>{ln(r,t,e)}))},un=(e,t)=>{var r=e.dom,n=window.getComputedStyle(r).getPropertyValue(t);return""!==n||Xr(e)?n:mn(r,t)},mn=(e,t)=>sn(e)?e.style.getPropertyValue(t):"",gn=(e,t)=>{var r=e.dom,n=mn(r,t);return V.from(n).filter((e=>e.length>0))},hn=e=>{var t={},r=e.dom;if(sn(r))for(var n=0;n<r.style.length;n++){var o=r.style.item(n);t[o]=r.style[o]}return t},pn=(e,t)=>{((e,t)=>{sn(e)&&e.style.removeProperty(t)})(e.dom,t),Pt(or(e,"style").map(Ke),"")&&ir(e,"style")},vn=(e,t)=>{Nr(e).each((r=>{r.dom.insertBefore(t.dom,e.dom)}))},fn=(e,t)=>{Lr(e).fold((()=>{Nr(e).each((e=>{yn(e,t)}))}),(e=>{vn(e,t)}))},bn=(e,t)=>{zr(e).fold((()=>{yn(e,t)}),(r=>{e.dom.insertBefore(t.dom,r.dom)}))},yn=(e,t)=>{e.dom.appendChild(t.dom)},wn=(e,t)=>{vn(e,t),yn(t,e)},xn=(e,t)=>{K(t,(t=>{yn(e,t)}))},Cn=e=>{e.dom.textContent="",K(Ir(e),(e=>{kn(e)}))},kn=e=>{var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Sn=e=>{var t,r,n=Ir(e);n.length>0&&(t=e,K(r=n,((e,n)=>{var o=0===n?t:r[n-1];fn(o,e)}))),kn(e)},_n=e=>G(e,xr),On=e=>e.dom.innerHTML,En=(e,t)=>{var r=Tr(e).dom,n=xr(r.createDocumentFragment()),o=((e,t)=>{var r=(t||document).createElement("div");return r.innerHTML=e,Ir(xr(r))})(t,r);xn(n,o),Cn(e),yn(e,n)},Tn=(e,t,r,n)=>((e,t,r,n,o)=>{var a=((e,t)=>r=>{e(r)&&t((e=>{var t=xr(Kr(e).getOr(e.target)),r=()=>e.stopPropagation(),n=()=>e.preventDefault(),o=A(n,r);return((e,t,r,n,o,a,i)=>({target:e,x:t,y:r,stop:n,prevent:o,kill:a,raw:i}))(t,e.clientX,e.clientY,r,n,o,e)})(r))})(r,n);return e.dom.addEventListener(t,a,false),{unbind:B(An,e,t,a,false)}})(e,t,r,n),An=(e,t,r,n)=>{e.dom.removeEventListener(t,r,n)},Mn=(e,t)=>({left:e,top:t,translate:(r,n)=>Mn(e+r,t+n)}),Nn=Mn,Rn=(e,t)=>void 0!==e?e:void 0!==t?t:0,Dn=e=>{var t=e.dom,r=t.ownerDocument.body;return r===t?Nn(r.offsetLeft,r.offsetTop):Xr(e)?(e=>{var t=e.getBoundingClientRect();return Nn(t.left,t.top)})(t):Nn(0,0)},Bn=e=>{var t=void 0!==e?e.dom:document,r=t.body.scrollLeft||t.documentElement.scrollLeft,n=t.body.scrollTop||t.documentElement.scrollTop;return Nn(r,n)},Ln=(e,t,r)=>{var n=(void 0!==r?r.dom:document).defaultView;n&&n.scrollTo(e,t)},Hn=(e,t)=>{Ot().browser.isSafari()&&_(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},Pn=(e,t,r,n)=>({x:e,y:t,width:r,height:n,right:e+r,bottom:t+n}),In=e=>{var t=void 0===e?window:e,r=t.document,n=Bn(xr(r));return(e=>{var t=void 0===e?window:e;return Ot().browser.isFirefox()?V.none():V.from(t.visualViewport)})(t).fold((()=>{var e=t.document.documentElement,r=e.clientWidth,o=e.clientHeight;return Pn(n.left,n.top,r,o)}),(e=>Pn(Math.max(e.pageLeft,n.left),Math.max(e.pageTop,n.top),e.width,e.height)))},Fn=(e,t)=>{var r=[];return K(Ir(e),(e=>{t(e)&&(r=r.concat([e])),r=r.concat(Fn(e,t))})),r},zn=(e,t)=>((e,t)=>{var r=void 0===t?document:t.dom;return _r(r)?[]:G(r.querySelectorAll(e),xr)})(t,e),Vn=(e,t,r)=>tn(e,t,r).isSome();class Zn{constructor(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,t,r,n){if(e){if(!n&&e[t])return e[t];if(e!==this.rootNode){var o=e[r];if(o)return o;for(var a=e.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(o=a[r])return o}}}findPreviousNode(e,t){if(e){var r=e.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!t)for(var n=r.lastChild;n;n=n.lastChild)if(!n.lastChild)return n;return r}var o=e.parentNode;if(o&&o!==this.rootNode)return o}}}var jn,Un=e=>t=>!!t&&t.nodeType===e,Wn=e=>!!e&&!Object.getPrototypeOf(e),qn=Un(1),$n=e=>{var t=e.toLowerCase();return e=>S(e)&&e.nodeName.toLowerCase()===t},Gn=e=>{var t=e.map((e=>e.toLowerCase()));return e=>{if(e&&e.nodeName){var r=e.nodeName.toLowerCase();return q(t,r)}return!1}},Kn=(e,t)=>{var r=t.toLowerCase().split(" ");return t=>{if(qn(t)){var n=t.ownerDocument.defaultView;if(n)for(var o=0;o<r.length;o++){var a=n.getComputedStyle(t,null);if((a?a.getPropertyValue(e):null)===r[o])return!0}}return!1}},Yn=e=>t=>qn(t)&&t.hasAttribute(e),Xn=e=>qn(e)&&e.hasAttribute("data-mce-bogus"),Jn=e=>qn(e)&&"TABLE"===e.tagName,Qn=e=>t=>{if(qn(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1},eo=Gn(["textarea","input"]),to=Un(3),ro=Un(4),no=Un(7),oo=Un(8),ao=Un(9),io=Un(11),so=$n("br"),lo=$n("img"),co=Qn("true"),uo=Qn("false"),mo=Gn(["td","th"]),go=Gn(["td","th","caption"]),ho=Gn(["video","audio","object","embed"]),po=$n("li"),vo=$n("details"),fo=$n("summary"),bo="\ufeff",yo="",wo=e=>e===bo,xo=((e,t)=>{var r=t=>e(t)?V.from(t.dom.nodeValue):V.none();return{get:t=>{if(!e(t))throw new Error("Can only get text value of a text node");return r(t).getOr("")},getOption:r,set:(t,r)=>{if(!e(t))throw new Error("Can only set raw text value of a text node");t.dom.nodeValue=r}}})(Yt),Co=e=>xo.get(e),ko=e=>xo.getOption(e),So=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),_o=e=>{var t;return r=>(t=t||de(e,z),Ee(t,Wt(r)))},Oo=_o(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),Eo=e=>Kt(e)&&!Oo(e),To=e=>Kt(e)&&"br"===Wt(e),Ao=_o(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Mo=_o(["ul","ol","dl"]),No=_o(["li","dd","dt"]),Ro=_o(["thead","tbody","tfoot"]),Do=_o(["td","th"]),Bo=_o(["pre","script","textarea","style"]),Lo=_o(So),Ho=e=>Lo(e)||Eo(e),Po=()=>{var e=yr("br");return tr(e,"data-mce-bogus","1"),e},Io=e=>{Cn(e),yn(e,Po())},Fo=e=>{Vr(e).each((t=>{Br(t).each((r=>{Oo(e)&&To(t)&&Oo(r)&&kn(t)}))}))},zo=bo,Vo=wo,Zo=e=>e.replace(/\uFEFF/g,""),jo=qn,Uo=to,Wo=e=>(Uo(e)&&(e=e.parentNode),jo(e)&&e.hasAttribute("data-mce-caret")),qo=e=>Uo(e)&&Vo(e.data),$o=e=>Wo(e)||qo(e),Go=e=>e.firstChild!==e.lastChild||!so(e.firstChild),Ko=e=>{var t=e.container();return!!to(t)&&(t.data.charAt(e.offset())===zo||e.isAtStart()&&qo(t.previousSibling))},Yo=e=>{var t=e.container();return!!to(t)&&(t.data.charAt(e.offset()-1)===zo||e.isAtEnd()&&qo(t.nextSibling))},Xo=e=>Uo(e)&&e.data[0]===zo,Jo=e=>Uo(e)&&e.data[e.data.length-1]===zo,Qo=e=>{return e&&e.hasAttribute("data-mce-caret")?(n=(r=e.getElementsByTagName("br"))[r.length-1],Xn(n)&&(null===(t=n.parentNode)||void 0===t||t.removeChild(n)),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null;var t,r,n},ea=e=>Wo(e.startContainer),ta=co,ra=uo,na=so,oa=to,aa=Gn(["script","style","textarea"]),ia=Gn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),sa=Gn(["table"]),la=$o,da=e=>!la(e)&&(oa(e)?!aa(e.parentNode):ia(e)||na(e)||sa(e)||ca(e)),ca=e=>!(e=>qn(e)&&"true"===e.getAttribute("unselectable"))(e)&&ra(e),ua=(e,t)=>da(e)&&((e,t)=>{for(var r=e.parentNode;r&&r!==t;r=r.parentNode){if(ca(r))return!1;if(ta(r))return!0}return!0})(e,t),ma=/^[ \t\r\n]*$/,ga=e=>ma.test(e),ha=e=>{for(var t of e)if(!wo(t))return!1;return!0},pa=e=>"\n"===e||"\r"===e,va=function(e){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=((e,t)=>t<=0?"":new Array(t+1).join(" "))(0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:4),o=e.replace(/\t/g,n),a=ee(o,((e,n)=>(e=>-1!==" \f\t\v".indexOf(e))(n)||n===yo?e.pcIsSpace||""===e.str&&t||e.str.length===o.length-1&&r||((e,t)=>t<e.length&&t>=0&&pa(e[t]))(o,e.str.length+1)?{pcIsSpace:!1,str:e.str+yo}:{pcIsSpace:!0,str:e.str+" "}:{pcIsSpace:pa(n),str:e.str+n}),{pcIsSpace:!1,str:""});return a.str},fa=(e,t)=>da(e)&&!((e,t)=>to(e)&&ga(e.data)&&!((e,t)=>{var r=xr(t),n=xr(e);return Vn(n,"pre,code",B(Or,r))})(e,t))(e,t)||(e=>qn(e)&&"A"===e.nodeName&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")))(e)||ba(e),ba=Yn("data-mce-bookmark"),ya=Yn("data-mce-bogus"),wa=("data-mce-bogus","all",e=>qn(e)&&"all"===e.getAttribute("data-mce-bogus")),xa=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return((e,t)=>{var r=0;if(fa(e,e))return!1;var n=e.firstChild;if(!n)return!0;var o=new Zn(n,e);do{if(t){if(wa(n)){n=o.next(!0);continue}if(ya(n)){n=o.next();continue}}if(so(n))r++,n=o.next();else{if(fa(n,e))return!1;n=o.next()}}while(n);return r<=1})(e.dom,t)},Ca="data-mce-block",ka=e=>(e=>J(ve(e),(e=>!/[A-Z]/.test(e))))(e).join(","),Sa=(e,t)=>S(t.querySelector(e))?(t.setAttribute(Ca,"true"),"inline-boundary"===t.getAttribute("data-mce-selected")&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(Ca),!1),_a=(e,t)=>{var r=ka(e.getTransparentElements()),n=ka(e.getBlockElements());return J(t.querySelectorAll(r),(e=>Sa(n,e)))},Oa=(e,t)=>{for(var r,n=t?"lastChild":"firstChild",o=e[n];o;o=o[n])if(xa(xr(o)))return void(null===(r=o.parentNode)||void 0===r||r.removeChild(o))},Ea=(e,t,r)=>{var n=e.getBlockElements(),o=xr(t),a=e=>Wt(e)in n,i=e=>Or(e,o);K(_n(r),(t=>{Qr(t,a,i).each((r=>{var n=((t,n)=>J(Ir(t),(t=>a(t)&&!e.isValidChild(Wt(r),Wt(t)))))(t);if(n.length>0){var o=Rr(r);K(n,(e=>{Qr(e,a,i).each((t=>{((e,t)=>{var r=document.createRange(),n=e.parentNode;if(n){r.setStartBefore(e),r.setEndBefore(t);var o=r.extractContents();Oa(o,!0),r.setStartAfter(t),r.setEndAfter(e);var a=r.extractContents();Oa(a,!1),xa(xr(o))||n.insertBefore(o,e),xa(xr(t))||n.insertBefore(t,e),xa(xr(a))||n.insertBefore(a,e),n.removeChild(e)}})(t.dom,e.dom)}))})),o.each((t=>_a(e,t.dom)))}}))}))},Ta=(e,t)=>{var r=_a(e,t);Ea(e,t,r),((e,t,r)=>{K([...r,...Da(e,t)?[t]:[]],(t=>K(zn(xr(t),t.nodeName.toLowerCase()),(t=>{Ba(e,t.dom)&&Sn(t)}))))})(e,t,r)},Aa=(e,t)=>{if(Ra(e,t)){var r=ka(e.getBlockElements());Sa(r,t)}},Ma=e=>e.hasAttribute(Ca),Na=(e,t)=>Ee(e.getTransparentElements(),t),Ra=(e,t)=>qn(t)&&Na(e,t.nodeName),Da=(e,t)=>Ra(e,t)&&Ma(t),Ba=(e,t)=>Ra(e,t)&&!Ma(t),La=(e,t)=>1===t.type&&Na(e,t.name)&&v(t.attr(Ca)),Ha=Ot().browser,Pa=e=>re(e,Kt),Ia=(e,t)=>e.children&&q(e.children,t),Fa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=0,n={},o=xr(e),a=Ar(o),i=e=>new Promise(((i,s)=>{var l,d=Ht._addCacheSuffix(e),c=(e=>Oe(n,e).getOrThunk((()=>({id:"mce-u"+r++,passed:[],failed:[],count:0}))))(d);n[d]=c,c.count++;var u=(e,t)=>{K(e,I),c.status=t,c.passed=[],c.failed=[],l&&(l.onload=null,l.onerror=null,l=null)},m=()=>u(c.passed,2),g=()=>u(c.failed,3);if(i&&c.passed.push(i),s&&c.failed.push(s),1!==c.status)if(2!==c.status)if(3!==c.status){c.status=1;var h,p=yr("link",a.dom);rr(p,{rel:"stylesheet",type:"text/css",id:c.id}),t.contentCssCors&&tr(p,"crossOrigin","anonymous"),t.referrerPolicy&&tr(p,"referrerpolicy",t.referrerPolicy),(l=p.dom).onload=m,l.onerror=g,h=p,yn($r(o),h),tr(p,"href",d)}else g();else m()})),s=e=>{var t=Ht._addCacheSuffix(e);Oe(n,t).each((e=>{var r,a;0==--e.count&&(delete n[t],r=e.id,a=$r(o),rn(a,"#"+r).each(kn))}))};return{load:i,loadAll:e=>Promise.allSettled(G(e,(e=>i(e).then(N(e))))).then((e=>{var t=X(e,(e=>"fulfilled"===e.status));return t.fail.length>0?Promise.reject(G(t.fail,(e=>e.reason))):G(t.pass,(e=>e.value))})),unload:s,unloadAll:e=>{K(e,(e=>{s(e)}))},_setReferrerPolicy:e=>{t.referrerPolicy=e},_setContentCssCors:e=>{t.contentCssCors=e}}},za=(jn=new WeakMap,{forElement:(e,t)=>{var r=qr(e).dom;return V.from(jn.get(r)).getOrThunk((()=>{var e=Fa(r,t);return jn.set(r,e),e}))}}),Va=(e,t)=>S(e)&&(fa(e,t)||Eo(xr(e))),Za=e=>(e=>"span"===e.nodeName.toLowerCase())(e)&&"bookmark"===e.getAttribute("data-mce-type"),ja=(e,t,r)=>{var n,o=r||t;if(qn(t)&&Za(t))return t;for(var a=t.childNodes,i=a.length-1;i>=0;i--)ja(e,a[i],o);if(qn(t)){var s=t.childNodes;1===s.length&&Za(s[0])&&(null===(n=t.parentNode)||void 0===n||n.insertBefore(s[0],t))}return(e=>io(e)||ao(e))(t)||fa(t,o)||(e=>!!qn(e)&&e.childNodes.length>0)(t)||((e,t)=>to(e)&&e.data.length>0&&((e,t)=>{var r=new Zn(e,t).prev(!1),n=new Zn(e,t).next(!1),o=C(r)||Va(r,t),a=C(n)||Va(n,t);return o&&a})(e,t))(t,o)||e.remove(t),t},Ua=Ht.makeMap,Wa=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,qa=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$a=/[<>&\"\']/g,Ga=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Ka={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},Ya={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Xa={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Ja=(e,t)=>{var r={};if(e){var n=e.split(",");t=t||10;for(var o=0;o<n.length;o+=2){var a=String.fromCharCode(parseInt(n[o],t));if(!Ya[a]){var i="&"+n[o+1]+";";r[a]=i,r[i]=a}}return r}},Qa=Ja("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),ei=(e,t)=>e.replace(t?Wa:qa,(e=>Ya[e]||e)),ti=(e,t)=>e.replace(t?Wa:qa,(e=>e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":Ya[e]||"&#"+e.charCodeAt(0)+";")),ri=(e,t,r)=>{var n=r||Qa;return e.replace(t?Wa:qa,(e=>Ya[e]||n[e]||e))},ni={encodeRaw:ei,encodeAllRaw:e=>(""+e).replace($a,(e=>Ya[e]||e)),encodeNumeric:ti,encodeNamed:ri,getEncodeFunc:(e,t)=>{var r=Ja(t)||Qa,n=Ua(e.replace(/\+/g,","));return n.named&&n.numeric?(e,t)=>e.replace(t?Wa:qa,(e=>void 0!==Ya[e]?Ya[e]:void 0!==r[e]?r[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";")):n.named?t?(e,t)=>ri(e,t,r):ri:n.numeric?ti:ei},decode:e=>e.replace(Ga,((e,t)=>t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):Ka[t]||String.fromCharCode(t):Xa[e]||Qa[e]||(e=>{var t=yr("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e})(e)))},oi=(e,t)=>(e=Ht.trim(e))?e.split(t||" "):[],ai=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),ii={},si=Ht.makeMap,li=Ht.each,di=Ht.extend,ci=Ht.explode,ui=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=si(e," ",si(e.toUpperCase()," "));return di(r,t)},mi=e=>ui("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),gi=(e,t)=>{if(e){var r={};return v(e)&&(e={"*":e}),li(e,((e,n)=>{r[n]=r[n.toUpperCase()]="map"===t?si(e,/[, ]/):ci(e,/[, ]/)})),r}},hi=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={},n={},o=[],a={},i={},s=(e,r,n)=>{var o=t[e];if(o)return si(o,/[, ]/,si(o.toUpperCase(),/[, ]/));var a=ii[e];return a||(a=ui(r,n),ii[e]=a),a},l=null!==(e=t.schema)&&void 0!==e?e:"html5",d=(e=>{var{globalAttributes:t,phrasingContent:r,flowContent:n}=(e=>{var t,r,n,o;return t="id accesskey class dir lang style tabindex title role",r="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",r+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",n+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(t+=" xml:lang",n=[n,"acronym applet basefont big font strike tt"].join(" "),o=[r=[r,"center dir isindex noframes"].join(" "),n].join(" ")),o=o||[r,n].join(" "),{globalAttributes:t,blockContent:r,phrasingContent:n,flowContent:o}})(e),o={},a=function(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=oi(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""),a=oi(e),i=a.length;i--;){var s=oi([t,r].join(" "));o[a[i]]={attributes:de(s,N({})),attributesOrder:s,children:de(n,N({}))}}},i=(e,t)=>{for(var r=oi(e),n=oi(t),a=r.length;a--;)for(var i=o[r[a]],s=0,l=n.length;s<l;s++)i.attributes[n[s]]={},i.attributesOrder.push(n[s])};return"html5-strict"!==e&&(K(oi("acronym applet basefont big font strike tt"),(e=>{a(e,"",r)})),K(oi("center dir isindex noframes"),(e=>{a(e,"",n)}))),a("html","manifest","head body"),a("head","","base command link meta noscript script style title"),a("title hr noscript br"),a("base","href target"),a("link","href rel media hreflang type sizes hreflang"),a("meta","name http-equiv content charset"),a("style","media type scoped"),a("script","src async defer type charset"),a("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",n),a("dd div","",n),a("address dt caption","","html4"===e?r:n),a("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",r),a("blockquote","cite",n),a("ol","reversed start type","li"),a("ul","","li"),a("li","value",n),a("dl","","dt dd"),a("a","href target rel media hreflang type","html4"===e?r:n),a("q","cite",r),a("ins del","cite datetime",n),a("img","src sizes srcset alt usemap ismap width height"),a("iframe","src name width height",n),a("embed","src type width height"),a("object","data type typemustmatch name usemap form width height",[n,"param"].join(" ")),a("param","name value"),a("map","name",[n,"area"].join(" ")),a("area","alt coords shape href target rel media hreflang type"),a("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),a("colgroup","span","col"),a("col","span"),a("tbody thead tfoot","","tr"),a("tr","","td th"),a("td","colspan rowspan headers",n),a("th","colspan rowspan headers scope abbr",n),a("form","accept-charset action autocomplete enctype method name novalidate target",n),a("fieldset","disabled form name",[n,"legend"].join(" ")),a("label","form for",r),a("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),a("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?n:r),a("select","disabled form multiple name required size","option optgroup"),a("optgroup","disabled label","option"),a("option","disabled label selected value"),a("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),a("menu","type label",[n,"li"].join(" ")),a("noscript","",n),"html4"!==e&&(a("wbr"),a("ruby","",[r,"rt rp"].join(" ")),a("figcaption","",n),a("mark rt rp summary bdi","",r),a("canvas","width height",n),a("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[n,"track source"].join(" ")),a("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[n,"track source"].join(" ")),a("picture","","img source"),a("source","src srcset type media sizes"),a("track","kind src srclang label default"),a("datalist","",[r,"option"].join(" ")),a("article section nav aside main header footer","",n),a("hgroup","","h1 h2 h3 h4 h5 h6"),a("figure","",[n,"figcaption"].join(" ")),a("time","datetime",r),a("dialog","open",n),a("command","type label icon disabled checked radiogroup command"),a("output","for form name",r),a("progress","value max",r),a("meter","value min max low high optimum",r),a("details","open",[n,"summary"].join(" ")),a("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid code codebase codetype archive standby align border hspace vspace"),i("embed","align name hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),"html4"!==e&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("img","loading"),i("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==e&&K([o.video,o.audio],(e=>{delete e.children.audio,delete e.children.video})),K(oi("a form meter progress dfn"),(e=>{o[e]&&delete o[e].children[e]})),delete o.caption.children.table,delete o.script,o})(l);!1===t.verify_html&&(t.valid_elements="*[*]");var c=gi(t.valid_styles),u=gi(t.invalid_styles,"map"),m=gi(t.valid_classes,"map"),g=s("whitespace_elements","pre script noscript style textarea video audio iframe object code"),h=s("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),p=s("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),v=s("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),f="td th iframe video audio object script code",b=s("non_empty_elements",f+" pre",p),y=s("move_caret_before_on_enter_elements",f+" table",p),w=s("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),x=s("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",w),C=s("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),k=s("transparent_elements","a ins del canvas map");li("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),(e=>{i[e]=new RegExp("</"+e+"[^>]*>","gi")}));var S=e=>{var t=V.from(r["@"]),n=/[*?+]/;K(((e,t)=>{var r=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return ae(oi(t,","),(t=>{var n=r.exec(t);if(n){var o=n[1],a=n[2],i=n[3],s=n[4],l=n[5],d={attributes:{},attributesOrder:[]};if(e.each((e=>((e,t)=>{be(e.attributes,((e,r)=>{t.attributes[r]=e})),t.attributesOrder.push(...e.attributesOrder)})(e,d))),"#"===o?d.paddEmpty=!0:"-"===o&&(d.removeEmpty=!0),"!"===s&&(d.removeEmptyAttrs=!0),l&&((e,t)=>{var r=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,n=/[*?+]/,{attributes:o,attributesOrder:a}=t;K(oi(e,"|"),(e=>{var i=r.exec(e);if(i){var s={},l=i[1],d=i[2].replace(/[\\:]:/g,":"),c=i[3],u=i[4];if("!"===l&&(t.attributesRequired=t.attributesRequired||[],t.attributesRequired.push(d),s.required=!0),"-"===l)return delete o[d],void a.splice(Ht.inArray(a,d),1);if(c&&("="===c?(t.attributesDefault=t.attributesDefault||[],t.attributesDefault.push({name:d,value:u}),s.defaultValue=u):"~"===c?(t.attributesForced=t.attributesForced||[],t.attributesForced.push({name:d,value:u}),s.forcedValue=u):"<"===c&&(s.validValues=Ht.makeMap(u,"?"))),n.test(d)){var m=s;t.attributePatterns=t.attributePatterns||[],m.pattern=ai(d),t.attributePatterns.push(m)}else o[d]||a.push(d),o[d]=s}}))})(l,d),i&&(d.outputName=a),"@"===a){if(!e.isNone())return[];e=V.some(d)}return[i?{name:a,element:d,aliasName:i}:{name:a,element:d}]}return[]}))})(t,null!=e?e:""),(e=>{var{name:t,element:a,aliasName:i}=e;if(i&&(r[i]=a),n.test(t)){var s=a;s.pattern=ai(t),o.push(s)}else r[t]=a}))},_=e=>{o=[],K(ve(r),(e=>{delete r[e]})),S(e)},O=e=>{delete ii.text_block_elements,delete ii.block_elements,K((e=>{var t=/^(~)?(.+)$/;return ae(oi(e,","),(e=>{var r=t.exec(e);if(r){var n="~"===r[1];return[{inline:n,cloneName:n?"span":"div",name:r[2]}]}return[]}))})(null!=e?e:""),(e=>{var{inline:t,name:o,cloneName:i}=e;if(n[o]=n[i],a[o]=i,b[o.toUpperCase()]={},b[o]={},t||(x[o.toUpperCase()]={},x[o]={}),!r[o]){var s=r[i];delete(s=di({},s)).removeEmptyAttrs,delete s.removeEmpty,r[o]=s}be(n,((e,t)=>{e[i]&&(n[t]=e=di({},n[t]),e[o]=e[i])}))}))},E=e=>{K((e=>{var t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return ae(oi(e,","),(e=>{var r=t.exec(e);if(r){var n=r[1],o=n?(e=>"-"===e?"remove":"add")(n):"replace";return[{operation:o,name:r[2],validChildren:oi(r[3],"|")}]}return[]}))})(null!=e?e:""),(e=>{var{operation:t,name:r,validChildren:o}=e,a="replace"===t?{"#comment":{}}:n[r];K(o,(e=>{"remove"===t?delete a[e]:a[e]={}})),n[r]=a}))},T=e=>{var t=r[e];if(t)return t;for(var n=o.length;n--;){var a=o[n];if(a.pattern.test(e))return a}};t.valid_elements?(_(t.valid_elements),li(d,((e,t)=>{n[t]=e.children}))):(li(d,((e,t)=>{r[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},n[t]=e.children})),li(oi("strong/b em/i"),(e=>{var t=oi(e,"/");r[t[1]].outputName=t[0]})),li(C,((e,n)=>{r[n]&&(t.padd_empty_block_inline_children&&(r[n].paddInEmptyBlock=!0),r[n].removeEmpty=!0)})),li(oi("ol ul blockquote a table tbody"),(e=>{r[e]&&(r[e].removeEmpty=!0)})),li(oi("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),(e=>{r[e]&&(r[e].paddEmpty=!0)})),li(oi("span"),(e=>{r[e].removeEmptyAttrs=!0}))),O(t.custom_elements),E(t.valid_children),S(t.extended_valid_elements),E("+ol[ul|ol],+ul[ul|ol]"),li({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},((e,t)=>{r[t]&&(r[t].parentsRequired=oi(e))})),t.invalid_elements&&li(ci(t.invalid_elements),(e=>{r[e]&&delete r[e]})),T("span")||S("span[!data-mce-type|*]");var A=N(c),M=N(u),R=N(m),D=N(v),B=N(x),L=N(w),H=N(C),P=N(Object.seal(p)),I=N(h),F=N(b),z=N(y),Z=N(g),j=N(k),U=N(Object.seal(i)),W=N(a);return{type:l,children:n,elements:r,getValidStyles:A,getValidClasses:R,getBlockElements:B,getInvalidStyles:M,getVoidElements:P,getTextBlockElements:L,getTextInlineElements:H,getBoolAttrs:D,getElementRule:T,getSelfClosingElements:I,getNonEmptyElements:F,getMoveCaretBeforeOnEnterElements:z,getWhitespaceElements:Z,getTransparentElements:j,getSpecialElements:U,isValidChild:(e,t)=>{var r=n[e.toLowerCase()];return!(!r||!r[t.toLowerCase()])},isValid:(e,t)=>{var r=T(e);if(r){if(!t)return!0;if(r.attributes[t])return!0;var n=r.attributePatterns;if(n)for(var o=n.length;o--;)if(n[o].pattern.test(t))return!0}return!1},getCustomElements:W,addValidElements:S,setValidElements:_,addCustomElements:O,addValidChildren:E}},pi=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,a=/\s*([^:]+):\s*([^;]+);?/g,i=/\s+$/,s={},l=bo;n&&(e=n.getValidStyles(),t=n.getInvalidStyles());for(var d="\\\" \\' \\; \\: ; : \ufeff".split(" "),c=0;c<d.length;c++)s[d[c]]=l+c,s[l+c]=d[c];var u={parse:e=>{var t,n,d,c={},m=!1,g=r.url_converter,h=r.url_converter_scope||u,p=(e,t,r)=>{var n=c[e+"-top"+t];if(n){var o=c[e+"-right"+t];if(o){var a=c[e+"-bottom"+t];if(a){var i=c[e+"-left"+t];if(i){for(var s=[n,o,a,i],l=s.length-1;l--&&s[l]===s[l+1];);l>-1&&r||(c[e+t]=-1===l?s[0]:s.join(" "),delete c[e+"-top"+t],delete c[e+"-right"+t],delete c[e+"-bottom"+t],delete c[e+"-left"+t])}}}}},v=e=>{var t=c[e];if(t){for(var r=t.indexOf(",")>-1?[t]:t.split(" "),n=r.length;n--;)if(r[n]!==r[0])return!1;return c[e]=r[0],!0}},f=e=>(m=!0,s[e]),b=(e,t)=>(m&&(e=e.replace(/\uFEFF[0-9]/g,(e=>s[e]))),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e),y=e=>String.fromCharCode(parseInt(e.slice(1),16)),w=e=>e.replace(/\\[0-9a-f]+/gi,y),x=(e,t,n,o,a,i)=>{if(a=a||i)return"'"+(a=b(a)).replace(/\'/g,"\\'")+"'";if(t=b(t||n||o||""),!r.allow_script_urls){var s=t.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s))return"";if(!r.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return g&&(t=g.call(h,t,"style")),"url('"+t.replace(/\'/g,"\\'")+"')"};if(e){var C;for(e=(e=e.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,f).replace(/\"[^\"]+\"|\'[^\']+\'/g,(e=>e.replace(/[;:]/g,f)));C=a.exec(e);){a.lastIndex=C.index+C[0].length;var k=C[1].replace(i,"").toLowerCase(),S=C[2].replace(i,"");if(k&&S){if(k=w(k),S=w(S),-1!==k.indexOf(l)||-1!==k.indexOf('"'))continue;if(!r.allow_script_urls&&("behavior"===k||/expression\s*\(|\/\*|\*\//.test(S)))continue;"font-weight"===k&&"700"===S?S="bold":"color"!==k&&"background-color"!==k||(S=S.toLowerCase()),S=S.replace(o,x),c[k]=m?b(S,!0):S}}p("border","",!0),p("border","-width"),p("border","-color"),p("border","-style"),p("padding",""),p("margin",""),"border",n="border-style",d="border-color",v(t="border-width")&&v(n)&&v(d)&&(c.border=c[t]+" "+c[n]+" "+c[d],delete c[t],delete c[n],delete c[d]),"medium none"===c.border&&delete c.border,"none"===c["border-image"]&&delete c["border-image"]}return c},serialize:(r,n)=>{var o="",a=(e,t)=>{var n=t[e];if(n)for(var a=0,i=n.length;a<i;a++){var s=n[a],l=r[s];l&&(o+=(o.length>0?" ":"")+s+": "+l+";")}};return n&&e?(a("*",e),a(n,e)):be(r,((e,r)=>{e&&((e,r)=>{if(!t||!r)return!0;var n=t["*"];return!(n&&n[e]||(n=t[r])&&n[e])})(r,n)&&(o+=(o.length>0?" ":"")+r+": "+e+";")})),o}};return u},vi={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},fi=(e,t)=>{var r=null!=t?t:{};for(var n in e)Ee(vi,n)||(r[n]=e[n]);return S(e.composedPath)&&(r.composedPath=()=>e.composedPath()),r},bi=(e,t,r,n)=>{var o,a=fi(t,n);return a.type=e,k(a.target)&&(a.target=null!==(o=a.srcElement)&&void 0!==o?o:r),(e=>k(e.preventDefault)||(e=>e instanceof Event||_(e.initEvent))(e))(t)&&(a.preventDefault=()=>{a.defaultPrevented=!0,a.isDefaultPrevented=z,_(t.preventDefault)&&t.preventDefault()},a.stopPropagation=()=>{a.cancelBubble=!0,a.isPropagationStopped=z,_(t.stopPropagation)&&t.stopPropagation()},a.stopImmediatePropagation=()=>{a.isImmediatePropagationStopped=z,a.stopPropagation()},(e=>e.isDefaultPrevented===z||e.isDefaultPrevented===F)(a)||(a.isDefaultPrevented=!0===a.defaultPrevented?z:F,a.isPropagationStopped=!0===a.cancelBubble?z:F,a.isImmediatePropagationStopped=F)),a},yi=/^(?:mouse|contextmenu)|click/,wi=(e,t,r,n)=>{e.addEventListener(t,r,n||!1)},xi=(e,t,r,n)=>{e.removeEventListener(t,r,n||!1)},Ci=(e,t)=>{var r=bi(e.type,e,document,t);if((e=>S(e)&&yi.test(e.type))(e)&&C(e.pageX)&&!C(e.clientX)){var n=r.target.ownerDocument||document,o=n.documentElement,a=n.body,i=r;i.pageX=e.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),i.pageY=e.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}return r},ki=(e,t,r)=>{var n=e.document,o={type:"ready"};if(r.domLoaded)t(o);else{var a=()=>{xi(e,"DOMContentLoaded",a),xi(e,"load",a),r.domLoaded||(r.domLoaded=!0,t(o)),e=null};"complete"===n.readyState||"interactive"===n.readyState&&n.body?a():wi(e,"DOMContentLoaded",a),r.domLoaded||wi(e,"load",a)}};class Si{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,t,r,n){var o,a,i=this,s=window,l=e=>{i.executeHandlers(Ci(e||s.event),a)};if(!e||to(e)||oo(e))return r;e[i.expando]?a=e[i.expando]:(a=i.count++,e[i.expando]=a,i.events[a]={}),n=n||e;for(var d=t.split(" "),c=d.length;c--;){var u=d[c],m=l,g=!1,h=!1;"DOMContentLoaded"===u&&(u="ready"),i.domLoaded&&"ready"===u&&"complete"===e.readyState?r.call(n,Ci({type:u})):(i.hasFocusIn||"focusin"!==u&&"focusout"!==u||(g=!0,h="focusin"===u?"focus":"blur",m=e=>{var t=Ci(e||s.event);t.type="focus"===t.type?"focusin":"focusout",i.executeHandlers(t,a)}),(o=i.events[a][u])?"ready"===u&&i.domLoaded?r(Ci({type:u})):o.push({func:r,scope:n}):(i.events[a][u]=o=[{func:r,scope:n}],o.fakeName=h,o.capture=g,o.nativeHandler=m,"ready"===u?ki(e,m,i):wi(e,h||u,m,g)))}return e=o=null,r}unbind(e,t,r){if(!e||to(e)||oo(e))return this;var n=e[this.expando];if(n){var o=this.events[n];if(t)for(var a=t.split(" "),i=a.length;i--;){var s=a[i],l=o[s];if(l){if(r)for(var d=l.length;d--;)if(l[d].func===r){var c=l.nativeHandler,u=l.fakeName,m=l.capture,g=l.slice(0,d).concat(l.slice(d+1));g.nativeHandler=c,g.fakeName=u,g.capture=m,o[s]=g}r&&0!==l.length||(delete o[s],xi(e,l.fakeName||s,l.nativeHandler,l.capture))}}else be(o,((t,r)=>{xi(e,t.fakeName||r,t.nativeHandler,t.capture)})),o={};for(var h in o)if(Ee(o,h))return this;delete this.events[n];try{delete e[this.expando]}catch(t){e[this.expando]=null}}return this}fire(e,t,r){return this.dispatch(e,t,r)}dispatch(e,t,r){if(!e||to(e)||oo(e))return this;var n=Ci({type:t,target:e},r);do{var o=e[this.expando];o&&this.executeHandlers(n,o),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!n.isPropagationStopped());return this}clean(e){if(!e||to(e)||oo(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);for(var t=e.getElementsByTagName("*"),r=t.length;r--;)(e=t[r])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,t){var r=this.events[t],n=r&&r[e.type];if(n)for(var o=0,a=n.length;o<a;o++){var i=n[o];if(i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}Si.Event=new Si;var _i=Ht.each,Oi=Ht.grep,Ei="data-mce-style",Ti=Ht.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Ai=(e,t,r)=>{k(r)||""===r?ir(e,t):tr(e,t,r)},Mi=e=>e.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase())),Ni=(e,t)=>{var r=0;if(e)for(var n=e.nodeType,o=e.previousSibling;o;o=o.previousSibling){var a=o.nodeType;(!t||!to(o)||a!==n&&o.data.length)&&(r++,n=a)}return r},Ri=(e,t)=>{var r=nr(t,"style"),n=e.serialize(e.parse(r),Wt(t));Ai(t,Ei,n)},Di=(e,t,r)=>{var n=Mi(t);k(r)||""===r?pn(e,n):dn(e,n,((e,t)=>O(e)?Ee(Ti,t)?e+"":e+"px":e)(r,n))},Bi=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},o=window,a={},i=0,s=za.forElement(xr(t),{contentCssCors:r.contentCssCors,referrerPolicy:r.referrerPolicy}),l=[],d=r.schema?r.schema:hi({}),c=pi({url_converter:r.url_converter,url_converter_scope:r.url_converter_scope},r.schema),u=r.ownEvents?new Si:Si.Event,m=d.getBlockElements(),g=e=>e&&t&&v(e)?t.getElementById(e):e,h=e=>{var t=g(e);return S(t)?xr(t):null},p=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=h(e);if(S(o)&&Kt(o)){var a=Y[t];r=a&&a.get?a.get(o.dom,t):nr(o,t)}return S(r)?r:n},f=e=>{var t=g(e);return k(t)?[]:t.attributes},b=(e,t,n)=>{R(e,(e=>{if(qn(e)){var o=xr(e),a=""===n?null:n,i=nr(o,t),s=Y[t];s&&s.set?s.set(o.dom,a,t):Ai(o,t,a),i!==a&&r.onSetAttrib&&r.onSetAttrib({attrElm:o.dom,attrName:t,attrValue:a})}}))},w=()=>r.root_element||t.body,x=(e,r)=>((e,t,r)=>{var n=0,o=0,a=e.ownerDocument;if(r=r||e,t){if(r===e&&t.getBoundingClientRect&&"static"===un(xr(e),"position")){var i=t.getBoundingClientRect();return{x:n=i.left+(a.documentElement.scrollLeft||e.scrollLeft)-a.documentElement.clientLeft,y:o=i.top+(a.documentElement.scrollTop||e.scrollTop)-a.documentElement.clientTop}}for(var s=t;s&&s!==r&&s.nodeType&&!Ia(s,r);){var l=s;n+=l.offsetLeft||0,o+=l.offsetTop||0,s=l.offsetParent}for(s=t.parentNode;s&&s!==r&&s.nodeType&&!Ia(s,r);)n-=s.scrollLeft||0,o-=s.scrollTop||0,s=s.parentNode;o+=(e=>Ha.isFirefox()&&"table"===Wt(e)?Pa(Ir(e)).filter((e=>"caption"===Wt(e))).bind((e=>Pa(Pr(e)).map((t=>{var r=t.dom.offsetTop,n=e.dom.offsetTop,o=e.dom.offsetHeight;return r<=n?-o:0})))).getOr(0):0)(xr(t))}return{x:n,y:o}})(t.body,g(e),r),C=(e,t,r)=>{var n=g(e);if(!k(n)&&qn(n))return r?un(xr(n),Mi(t)):("float"===(t=t.replace(/-(\D)/g,((e,t)=>t.toUpperCase())))&&(t="cssFloat"),n.style?n.style[t]:void 0)},O=e=>{var t=g(e);if(!t)return{w:0,h:0};var r=C(t,"width"),n=C(t,"height");return r&&-1!==r.indexOf("px")||(r="0"),n&&-1!==n.indexOf("px")||(n="0"),{w:parseInt(r,10)||t.offsetWidth||t.clientWidth,h:parseInt(n,10)||t.offsetHeight||t.clientHeight}},E=(e,t)=>{if(!e)return!1;var r=y(e)?e:[e];return $(r,(e=>Sr(xr(e),t)))},A=(e,t,r,n)=>{var o=[],a=g(e);n=void 0===n;var i=r||("BODY"!==w().nodeName?w().parentNode:null);if(v(t))if("*"===t)t=qn;else{var s=t;t=e=>E(e,s)}for(;a&&!(a===i||k(a.nodeType)||ao(a)||io(a));){if(!t||t(a)){if(!n)return[a];o.push(a)}a=a.parentNode}return n?o:null},M=(e,t,r)=>{var n=t;if(e){v(t)&&(n=e=>E(e,t));for(var o=e[r];o;o=o[r])if(_(n)&&n(o))return o}return null},R=function(e,t,r){var n=null!=r?r:this;if(y(e)){var o=[];return _i(e,((e,r)=>{var a=g(e);a&&o.push(t.call(n,a,r))})),o}var a=g(e);return!!a&&t.call(n,a)},D=(e,t)=>{R(e,(e=>{be(t,((t,r)=>{b(e,r,t)}))}))},B=(e,t)=>{R(e,(e=>{var r=xr(e);En(r,t)}))},L=(e,r,n,o,a)=>R(e,(e=>{var i=v(r)?t.createElement(r):r;return S(n)&&D(i,n),o&&(!v(o)&&o.nodeType?i.appendChild(o):v(o)&&B(i,o)),a?i:e.appendChild(i)})),H=(e,r,n)=>L(t.createElement(e),e,r,n,!0),P=ni.encodeAllRaw,I=(e,t)=>R(e,(e=>{var r=xr(e);return t&&K(Ir(r),(e=>{Yt(e)&&0===e.dom.length?kn(e):vn(r,e)})),kn(r),r.dom})),F=(e,t,r)=>{R(e,(e=>{if(qn(e)){var n=xr(e),o=t.split(" ");K(o,(e=>{var t,o;S(r)?(r?gr:pr)(n,e):(o=e,dr(t=n)?t.dom.classList.toggle(o):((e,t)=>q(cr(e),t)?mr(e,t):ur(e,t))(t,o),hr(t))}))}}))},z=(e,t,r)=>R(t,(n=>{var o,a=y(t)?e.cloneNode(!0):e;return r&&_i(Oi(n.childNodes),(e=>{a.appendChild(e)})),null===(o=n.parentNode)||void 0===o||o.replaceChild(a,n),n})),V=e=>{if(qn(e)){var t="a"===e.nodeName.toLowerCase()&&!p(e,"href")&&p(e,"id");if(p(e,"name")||p(e,"data-mce-bookmark")||t)return!0}return!1},Z=()=>t.createRange(),j=(e,n,a,i)=>{if(y(e)){for(var s=e.length,d=[];s--;)d[s]=j(e[s],n,a,i);return d}return!r.collect||e!==t&&e!==o||l.push([e,n,a,i]),u.bind(e,n,a,i||G)},U=(e,r,n)=>{if(y(e)){for(var a=e.length,i=[];a--;)i[a]=U(e[a],r,n);return i}if(l.length>0&&(e===t||e===o))for(var s=l.length;s--;){var[d,c,m]=l[s];e!==d||r&&r!==c||n&&n!==m||u.unbind(d,c,m)}return u.unbind(e,r,n)},W=e=>{if(e&&qn(e)){var t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},G={doc:t,settings:r,win:o,files:a,stdMode:!0,boxModel:!0,styleSheetLoader:s,boundEvents:l,styles:c,schema:d,events:u,isBlock:e=>v(e)?Ee(m,e):qn(e)&&(Ee(m,e.nodeName)||Da(d,e)),root:null,clone:(e,t)=>e.cloneNode(t),getRoot:w,getViewPort:e=>{var t=In(e);return{x:t.x,y:t.y,w:t.width,h:t.height}},getRect:e=>{var t=g(e),r=x(t),n=O(t);return{x:r.x,y:r.y,w:n.w,h:n.h}},getSize:O,getParent:(e,t,r)=>{var n=A(e,t,r,!1);return n&&n.length>0?n[0]:null},getParents:A,get:g,getNext:(e,t)=>M(e,t,"nextSibling"),getPrev:(e,t)=>M(e,t,"previousSibling"),select:(e,n)=>{var o,a,i=null!==(a=null!==(o=g(n))&&void 0!==o?o:r.root_element)&&void 0!==a?a:t;return _(i.querySelectorAll)?he(i.querySelectorAll(e)):[]},is:E,add:L,create:H,createHTML:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n="<"+e;for(var o in t)Te(t,o)&&(n+=" "+o+'="'+P(t[o])+'"');return Qe(r)&&Ee(d.getVoidElements(),e)?n+" />":n+">"+r+"</"+e+">"},createFragment:e=>{var r,n=t.createElement("div"),o=t.createDocumentFragment();for(o.appendChild(n),e&&(n.innerHTML=e);r=n.firstChild;)o.appendChild(r);return o.removeChild(n),o},remove:I,setStyle:(e,t,n)=>{R(e,(e=>{var o=xr(e);Di(o,t,n),r.update_styles&&Ri(c,o)}))},getStyle:C,setStyles:(e,t)=>{R(e,(e=>{var n=xr(e);be(t,((e,t)=>{Di(n,t,e)})),r.update_styles&&Ri(c,n)}))},removeAllAttribs:e=>R(e,(e=>{for(var t=e.attributes,r=t.length-1;r>=0;r--)e.removeAttributeNode(t.item(r))})),setAttrib:b,setAttribs:D,getAttrib:p,getPos:x,parseStyle:e=>c.parse(e),serializeStyle:(e,t)=>c.serialize(e,t),addStyle:r=>{if(G!==e.DOM&&t===document){if(n[r])return;n[r]=!0}var o=t.getElementById("mceDefaultStyles");if(!o){(o=t.createElement("style")).id="mceDefaultStyles",o.type="text/css";var a=t.head;a.firstChild?a.insertBefore(o,a.firstChild):a.appendChild(o)}o.styleSheet?o.styleSheet.cssText+=r:o.appendChild(t.createTextNode(r))},loadCSS:e=>{e||(e=""),K(e.split(","),(e=>{a[e]=!0,s.load(e).catch(T)}))},addClass:(e,t)=>{F(e,t,!0)},removeClass:(e,t)=>{F(e,t,!1)},hasClass:(e,t)=>{var r=h(e),n=t.split(" ");return S(r)&&ie(n,(e=>vr(r,e)))},toggleClass:F,show:e=>{R(e,(e=>pn(xr(e),"display")))},hide:e=>{R(e,(e=>dn(xr(e),"display","none")))},isHidden:e=>{var t=h(e);return S(t)&&Pt(gn(t,"display"),"none")},uniqueId:e=>(e||"mce_")+i++,setHTML:B,getOuterHTML:e=>{var t=h(e);return S(t)?qn(t.dom)?t.dom.outerHTML:(e=>{var t=yr("div"),r=xr(e.dom.cloneNode(!0));return yn(t,r),On(t)})(t):""},setOuterHTML:(e,t)=>{R(e,(e=>{qn(e)&&(e.outerHTML=t)}))},decode:ni.decode,encode:P,insertAfter:(e,t)=>{var r=g(t);return R(e,(e=>{var t=null==r?void 0:r.parentNode,n=null==r?void 0:r.nextSibling;return t&&(n?t.insertBefore(e,n):t.appendChild(e)),e}))},replace:z,rename:(e,t)=>{if(e.nodeName!==t.toUpperCase()){var r=H(t);return _i(f(e),(t=>{b(r,t.nodeName,p(e,t.nodeName))})),z(r,e,!0),r}return e},findCommonAncestor:(e,t)=>{for(var r=e;r;){for(var n=t;n&&r!==n;)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},run:R,getAttribs:f,isEmpty:(e,t,r)=>{var n=0;if(V(e))return!1;var o=e.firstChild;if(o){var a=new Zn(o,e),i=d?d.getWhitespaceElements():{},s=t||(d?d.getNonEmptyElements():null),l=o;do{if(qn(l)){var c=l.getAttribute("data-mce-bogus");if(c){l=a.next("all"===c);continue}var u=l.nodeName.toLowerCase();if(s&&s[u]){if("br"===u){n++,l=a.next();continue}return!1}if(V(l))return!1}if(oo(l))return!1;if(to(l)&&!ga(l.data)&&(!(null==r?void 0:r.includeZwsp)||!ha(l.data)))return!1;if(to(l)&&l.parentNode&&i[l.parentNode.nodeName]&&ga(l.data))return!1;l=a.next()}while(l)}return n<=1},createRng:Z,nodeIndex:Ni,split:(e,t,r)=>{var n,o,a=Z();if(e&&t&&e.parentNode&&t.parentNode){var i=e.parentNode;return a.setStart(i,Ni(e)),a.setEnd(t.parentNode,Ni(t)),n=a.extractContents(),(a=Z()).setStart(t.parentNode,Ni(t)+1),a.setEnd(i,Ni(e)+1),o=a.extractContents(),i.insertBefore(ja(G,n),e),r?i.insertBefore(r,e):i.insertBefore(t,e),i.insertBefore(ja(G,o),e),I(e),r||t}},bind:j,unbind:U,fire:(e,t,r)=>u.dispatch(e,t,r),dispatch:(e,t,r)=>u.dispatch(e,t,r),getContentEditable:W,getContentEditableParent:e=>{for(var t=w(),r=null,n=e;n&&n!==t&&null===(r=W(n));n=n.parentNode);return r},isEditable:e=>{if(S(e)){var t=qn(e)?e:e.parentElement;return S(t)&&on(xr(t))}return!1},destroy:()=>{if(l.length>0)for(var e=l.length;e--;){var[t,r,n]=l[e];u.unbind(t,r,n)}be(a,((e,t)=>{s.unload(t),delete a[t]}))},isChildOf:(e,t)=>e===t||t.contains(e),dumpRng:e=>"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},Y=((e,t,r)=>{var n=t.keep_values,o={set:(e,n,o)=>{var a=xr(e);_(t.url_converter)&&S(n)&&(n=t.url_converter.call(t.url_converter_scope||r(),String(n),o,e)),Ai(a,"data-mce-"+o,n),Ai(a,o,n)},get:(e,t)=>{var r=xr(e);return nr(r,"data-mce-"+t)||nr(r,t)}},a={style:{set:(t,r)=>{var o=xr(t);n&&Ai(o,Ei,r),ir(o,"style"),v(r)&&cn(o,e.parse(r))},get:t=>{var r=xr(t),n=nr(r,Ei)||nr(r,"style");return e.serialize(e.parse(n),Wt(r))}}};return n&&(a.href=a.src=o),a})(c,r,N(G));return G};Bi.DOM=Bi(document),Bi.nodeIndex=Ni;var Li=Bi.DOM;class Hi{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise(((t,r)=>{var n,o=Li,a=()=>{o.remove(i),n&&(n.onerror=n.onload=n=null)},i=o.uniqueId();(n=document.createElement("script")).id=i,n.type="text/javascript",n.src=Ht._addCacheSuffix(e),this.settings.referrerPolicy&&o.setAttrib(n,"referrerpolicy",this.settings.referrerPolicy),n.onload=()=>{a(),t()},n.onerror=()=>{a(),r("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(n)}))}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){var t=this;return t.queue.push(e),void 0===t.states[e]&&(t.states[e]=0),new Promise(((r,n)=>{t.scriptLoadedCallbacks[e]||(t.scriptLoadedCallbacks[e]=[]),t.scriptLoadedCallbacks[e].push({resolve:r,reject:n})}))}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){var e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){var t=this,r=(e,r)=>{Oe(t.scriptLoadedCallbacks,r).each((t=>{K(t,(t=>t[e](r)))})),delete t.scriptLoadedCallbacks[r]},n=e=>{var t=J(e,(e=>"rejected"===e.status));return t.length>0?Promise.reject(ae(t,(e=>{var{reason:t}=e;return y(t)?t:[t]}))):Promise.resolve()},o=e=>Promise.allSettled(G(e,(e=>2===t.states[e]?(r("resolve",e),Promise.resolve()):3===t.states[e]?(r("reject",e),Promise.reject(e)):(t.states[e]=1,t.loadScript(e).then((()=>{t.states[e]=2,r("resolve",e);var a=t.queue;return a.length>0?(t.queue=[],o(a).then(n)):Promise.resolve()}),(()=>(t.states[e]=3,r("reject",e),Promise.reject(e)))))))),a=e=>(t.loading=!0,o(e).then((e=>{t.loading=!1;var r=t.queueLoadedCallbacks.shift();return V.from(r).each(I),n(e)}))),i=Ae(e);return t.loading?new Promise(((e,r)=>{t.queueLoadedCallbacks.push((()=>{a(i).then(e,r)}))})):a(i)}}Hi.ScriptLoader=new Hi;var Pi=e=>{var t=e;return{get:()=>t,set:e=>{t=e}}},Ii={},Fi=Pi("en"),zi=()=>Oe(Ii,Fi.get()),Vi={getData:()=>ye(Ii,(e=>o({},e))),setCode:e=>{e&&Fi.set(e)},getCode:()=>Fi.get(),add:(e,t)=>{var r=Ii[e];r||(Ii[e]=r={});var n=G(ve(t),(e=>e.toLowerCase()));be(t,((e,o)=>{var a=o.toLowerCase();a!==o&&((e,t)=>{var r=e.indexOf(t);return-1!==r&&e.indexOf(t,r+1)>r})(n,a)?(Ee(t,a)||(r[a]=e),r[o]=e):r[a]=e}))},translate:e=>{var t,r=zi().getOr({}),n=e=>_(e)?Object.prototype.toString.call(e):o(e)?"":""+e,o=e=>""===e||null==e,a=e=>{var t=n(e);return Ee(r,t)?n(r[t]):Oe(r,t.toLowerCase()).map(n).getOr(t)},i=e=>e.replace(/{context:\w+}$/,"");if(o(e))return"";if(f(t=e)&&Ee(t,"raw"))return n(e.raw);if((e=>y(e)&&e.length>1)(e)){var s=e.slice(1);return i(a(e[0]).replace(/\{([0-9]+)\}/g,((e,t)=>Ee(s,t)?n(s[t]):e)))}return i(a(e))},isRtl:()=>zi().bind((e=>Oe(e,"_dir"))).exists((e=>"rtl"===e)),hasCode:e=>Ee(Ii,e)},Zi=()=>{var e=[],t={},r={},n=[],o=(e,t)=>{var r=J(n,(r=>r.name===e&&r.state===t));K(r,(e=>e.resolve()))},a=e=>Ee(t,e),i=(e,r)=>{var n=Vi.getCode();!n||r&&-1===(","+(r||"")+",").indexOf(","+n+",")||Hi.ScriptLoader.add(t[e]+"/langs/"+n+".js")},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"added";return"added"===t&&(e=>Ee(r,e))(e)||"loaded"===t&&a(e)?Promise.resolve():new Promise((r=>{n.push({name:e,state:t,resolve:r})}))};return{items:e,urls:t,lookup:r,get:e=>{if(r[e])return r[e].instance},requireLangPack:(e,t)=>{!1!==Zi.languageLoad&&(a(e)?i(e,t):s(e,"loaded").then((()=>i(e,t))))},add:(t,n)=>(e.push(n),r[t]={instance:n},o(t,"added"),n),remove:e=>{delete t[e],delete r[e]},createUrl:(e,t)=>v(t)?v(e)?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}:t,load:(e,n)=>{if(t[e])return Promise.resolve();var a=v(n)?n:n.prefix+n.resource+n.suffix;0!==a.indexOf("/")&&-1===a.indexOf("://")&&(a=Zi.baseURL+"/"+a),t[e]=a.substring(0,a.lastIndexOf("/"));var i=()=>(o(e,"loaded"),Promise.resolve());return r[e]?i():Hi.ScriptLoader.add(a).then(i)},waitFor:s}};Zi.languageLoad=!0,Zi.baseURL="",Zi.PluginManager=Zi(),Zi.ThemeManager=Zi(),Zi.ModelManager=Zi();var ji=()=>{var e=(e=>{var t=Pi(V.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(V.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(V.some(e))}}})(T);return o(o({},e),{},{on:t=>e.get().each(t)})},Ui=(e,t)=>{var r=null;return{cancel:()=>{w(r)||(clearTimeout(r),r=null)},throttle:function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];w(r)&&(r=setTimeout((()=>{r=null,e.apply(null,o)}),t))}}},Wi=(e,t)=>{var r=null,n=()=>{w(r)||(clearTimeout(r),r=null)};return{cancel:n,throttle:function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];n(),r=setTimeout((()=>{r=null,e.apply(null,a)}),t)}}},qi=N("mce-annotation"),$i=N("data-mce-annotation"),Gi=N("data-mce-annotation-uid"),Ki=N("data-mce-annotation-active"),Yi=N("data-mce-annotation-classes"),Xi=N("data-mce-annotation-attrs"),Ji=e=>t=>Or(t,e),Qi=(e,t)=>{var r=e.selection.getRng(),n=xr(r.startContainer),o=xr(e.getBody()),a=t.fold((()=>"."+qi()),(e=>"[".concat($i(),'="').concat(e,'"]'))),i=Fr(n,r.startOffset).getOr(n);return nn(i,a,Ji(o)).bind((t=>or(t,"".concat(Gi())).bind((r=>or(t,"".concat($i())).map((t=>{var n=ts(e,r);return{uid:r,name:t,elements:n}}))))))},es=(e,t)=>ar(e,"data-mce-bogus")||Vn(e,'[data-mce-bogus="all"]',Ji(t)),ts=(e,t)=>{var r=xr(e.getBody()),n=zn(r,"[".concat(Gi(),'="').concat(t,'"]'));return J(n,(e=>!es(e,r)))},rs=(e,t)=>{var r=xr(e.getBody()),n=zn(r,"[".concat($i(),'="').concat(t,'"]')),o={};return K(n,(e=>{if(!es(e,r)){var t=nr(e,Gi()),n=Oe(o,t).getOr([]);o[t]=n.concat([e])}})),o},ns=0,os=e=>{var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++ns+String(t)},as=(e,t)=>xr(e.dom.cloneNode(t)),is=e=>as(e,!1),ss=e=>as(e,!0),ls=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F,n=new Zn(e,t),o=e=>{var t;do{t=n[e]()}while(t&&!to(t)&&!r(t));return V.from(t).filter(to)};return{current:()=>V.from(n.current()).filter(to),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},ds=(e,t)=>{var r=t||(t=>e.isBlock(t)||so(t)||uo(t)),n=(e,t,r,o)=>{if(to(e)){var a=o(e,t,e.data);if(-1!==a)return V.some({container:e,offset:a})}return r().bind((e=>n(e.container,e.offset,r,o)))};return{backwards:(t,o,a,i)=>{var s=ls(t,null!=i?i:e.getRoot(),r);return n(t,o,(()=>s.prev().map((e=>({container:e,offset:e.length})))),a).getOrNull()},forwards:(t,o,a,i)=>{var s=ls(t,null!=i?i:e.getRoot(),r);return n(t,o,(()=>s.next().map((e=>({container:e,offset:0})))),a).getOrNull()}}},cs=Math.round,us=e=>e?{left:cs(e.left),top:cs(e.top),bottom:cs(e.bottom),right:cs(e.right),width:cs(e.width),height:cs(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},ms=(e,t)=>(e=us(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),gs=(e,t,r)=>e>=0&&e<=Math.min(t.height,r.height)/2,hs=(e,t)=>{var r=Math.min(t.height/2,e.height/2);return e.bottom-r<t.top||!(e.top>t.bottom)&&gs(t.top-e.bottom,e,t)},ps=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&gs(t.bottom-e.top,e,t),vs=(e,t,r)=>{var n=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(r,e.top+e.height),e.top);return Math.sqrt((t-n)*(t-n)+(r-o)*(r-o))},fs=e=>{var t=e.startContainer,r=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===r+1?t.childNodes[r]:null},bs=(e,t)=>{if(qn(e)&&e.hasChildNodes()){var r=e.childNodes,n=((e,t,r)=>Math.min(Math.max(e,0),r))(t,0,r.length-1);return r[n]}return e},ys=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),ws=e=>v(e)&&e.charCodeAt(0)>=768&&ys.test(e),xs=qn,Cs=da,ks=Kn("display","block table"),Ss=Kn("float","left right"),_s=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{for(var r=0;r<t.length;r++)if(!t[r](e))return!1;return!0}}(xs,Cs,L(Ss)),Os=L(Kn("white-space","pre pre-line pre-wrap")),Es=to,Ts=so,As=Bi.nodeIndex,Ms=(e,t)=>t<0&&qn(e)&&e.hasChildNodes()?void 0:bs(e,t),Ns=e=>e?e.createRange():Bi.DOM.createRng(),Rs=e=>v(e)&&/[\r\n\t ]/.test(e),Ds=e=>!!e.setStart&&!!e.setEnd,Bs=e=>{var t=e.startContainer,r=e.startOffset;if(Rs(e.toString())&&Os(t.parentNode)&&to(t)){var n=t.data;if(Rs(n[r-1])||Rs(n[r+1]))return!0}return!1},Ls=e=>0===e.left&&0===e.right&&0===e.top&&0===e.bottom,Hs=e=>{var t,r,n=e.getClientRects();return r=n.length>0?us(n[0]):us(e.getBoundingClientRect()),!Ds(e)&&Ts(e)&&Ls(r)?(e=>{var t=e.ownerDocument,r=Ns(t),n=t.createTextNode(yo),o=e.parentNode;o.insertBefore(n,e),r.setStart(n,0),r.setEnd(n,1);var a=us(r.getBoundingClientRect());return o.removeChild(n),a})(e):Ls(r)&&Ds(e)&&null!==(t=(e=>{var t=e.startContainer,r=e.endContainer,n=e.startOffset,o=e.endOffset;if(t===r&&to(r)&&0===n&&1===o){var a=e.cloneRange();return a.setEndAfter(r),Hs(a)}return null})(e))&&void 0!==t?t:r},Ps=(e,t)=>{var r=ms(e,t);return r.width=1,r.right=r.left+1,r},Is=(e,t,r)=>{var n=()=>(r||(r=(e=>{var t=[],r=e=>{var r,n;0!==e.height&&(t.length>0&&(r=e,n=t[t.length-1],r.left===n.left&&r.top===n.top&&r.bottom===n.bottom&&r.right===n.right)||t.push(e))},n=(e,t)=>{var n=Ns(e.ownerDocument);if(t<e.data.length){if(ws(e.data[t]))return;if(ws(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!Bs(n)))return void r(Ps(Hs(n),!1))}t>0&&(n.setStart(e,t-1),n.setEnd(e,t),Bs(n)||r(Ps(Hs(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),Bs(n)||r(Ps(Hs(n),!0)))},o=e.container(),a=e.offset();if(Es(o))return n(o,a),t;if(xs(o))if(e.isAtEnd()){var i=Ms(o,a);Es(i)&&n(i,i.data.length),_s(i)&&!Ts(i)&&r(Ps(Hs(i),!1))}else{var s=Ms(o,a);if(Es(s)&&n(s,0),_s(s)&&e.isAtEnd())return r(Ps(Hs(s),!1)),t;var l=Ms(e.container(),e.offset()-1);_s(l)&&!Ts(l)&&(ks(l)||ks(s)||!_s(s))&&r(Ps(Hs(l),!1)),_s(s)&&r(Ps(Hs(s),!0))}return t})(Is(e,t))),r);return{container:N(e),offset:N(t),toRange:()=>{var r=Ns(e.ownerDocument);return r.setStart(e,t),r.setEnd(e,t),r},getClientRects:n,isVisible:()=>n().length>0,isAtStart:()=>(Es(e),0===t),isAtEnd:()=>Es(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:r=>r&&e===r.container()&&t===r.offset(),getNode:r=>Ms(e,r?t-1:t)}};Is.fromRangeStart=e=>Is(e.startContainer,e.startOffset),Is.fromRangeEnd=e=>Is(e.endContainer,e.endOffset),Is.after=e=>Is(e.parentNode,As(e)+1),Is.before=e=>Is(e.parentNode,As(e)),Is.isAbove=(e,t)=>Ft(me(t.getClientRects()),ge(e.getClientRects()),hs).getOr(!1),Is.isBelow=(e,t)=>Ft(ge(t.getClientRects()),me(e.getClientRects()),ps).getOr(!1),Is.isAtStart=e=>!!e&&e.isAtStart(),Is.isAtEnd=e=>!!e&&e.isAtEnd(),Is.isTextPosition=e=>!!e&&to(e.container()),Is.isElementPosition=e=>!Is.isTextPosition(e);var Fs=(e,t)=>{to(t)&&0===t.data.length&&e.remove(t)},zs=(e,t,r)=>{io(r)?((e,t,r)=>{var n=V.from(r.firstChild),o=V.from(r.lastChild);t.insertNode(r),n.each((t=>Fs(e,t.previousSibling))),o.each((t=>Fs(e,t.nextSibling)))})(e,t,r):((e,t,r)=>{t.insertNode(r),Fs(e,r.previousSibling),Fs(e,r.nextSibling)})(e,t,r)},Vs=to,Zs=Xn,js=Bi.nodeIndex,Us=e=>{var t=e.parentNode;return Zs(t)?Us(t):t},Ws=e=>e?Le(e.childNodes,((e,t)=>(Zs(t)&&"BR"!==t.nodeName?e=e.concat(Ws(t)):e.push(t),e)),[]):[],qs=e=>t=>e===t,$s=e=>(Vs(e)?"text()":e.nodeName.toLowerCase())+"["+(e=>{var t,r;t=Ws(Us(e)),r=He(t,qs(e),e),t=t.slice(0,r+1);var n=Le(t,((e,r,n)=>(Vs(r)&&Vs(t[n-1])&&e++,e)),0);return t=Be(t,Gn([e.nodeName])),(r=He(t,qs(e),e))-n})(e)+"]",Gs=(e,t)=>{var r,n=[],o=t.container(),a=t.offset();if(Vs(o))r=((e,t)=>{for(var r=e;(r=r.previousSibling)&&Vs(r);)t+=r.data.length;return t})(o,a);else{var i=o.childNodes;a>=i.length?(r="after",a=i.length-1):r="before",o=i[a]}n.push($s(o));var s=((e,t,r)=>{for(var n=[],o=t.parentNode;o&&o!==e;o=o.parentNode)n.push(o);return n})(e,o);return s=Be(s,L(Xn)),(n=n.concat(De(s,(e=>$s(e))))).reverse().join("/")+","+r},Ks=(e,t)=>{if(!t)return null;var r,n=t.split(","),o=n[0].split("/"),a=n.length>1?n[1]:"before",i=Le(o,((e,t)=>{var r=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);return r?("text()"===r[1]&&(r[1]="#text"),((e,t,r)=>{var n=Ws(e);return n=Be(n,((e,t)=>!Vs(e)||!Vs(n[t-1]))),(n=Be(n,Gn([t])))[r]})(e,r[1],parseInt(r[2],10))):null}),e);return i?!Vs(i)&&i.parentNode?(r="after"===a?js(i)+1:js(i),Is(i.parentNode,r)):((e,t)=>{for(var r=e,n=0;Vs(r);){var o=r.data.length;if(t>=n&&t<=n+o){e=r,t-=n;break}if(!Vs(r.nextSibling)){e=r,t=o;break}n+=o,r=r.nextSibling}return Vs(e)&&t>e.data.length&&(t=e.data.length),Is(e,t)})(i,parseInt(a,10)):null},Ys=uo,Xs=(e,t,r,n,o)=>{var a=o?n.startContainer:n.endContainer,i=o?n.startOffset:n.endOffset,s=[],l=e.getRoot();if(to(a))s.push(r?((e,t,r)=>{for(var n=e(t.data.slice(0,r)).length,o=t.previousSibling;o&&to(o);o=o.previousSibling)n+=e(o.data).length;return n})(t,a,i):i);else{var d=0,c=a.childNodes;i>=c.length&&c.length&&(d=1,i=Math.max(0,c.length-1)),s.push(e.nodeIndex(c[i],r)+d)}for(var u=a;u&&u!==l;u=u.parentNode)s.push(e.nodeIndex(u,r));return s},Js=(e,t,r)=>{var n=0;return Ht.each(e.select(t),(e=>"all"===e.getAttribute("data-mce-bogus")?void 0:e!==r&&void n++)),n},Qs=(e,t)=>{var r=t?e.startContainer:e.endContainer,n=t?e.startOffset:e.endOffset;if(qn(r)&&"TR"===r.nodeName){var o=r.childNodes;(r=o[Math.min(t?n:n-1,o.length-1)])&&(n=t?0:r.childNodes.length,t?e.setStart(r,n):e.setEnd(r,n))}},el=e=>(Qs(e,!0),Qs(e,!1),e),tl=(e,t)=>{if(qn(e)&&(e=bs(e,t),Ys(e)))return e;if($o(e)){to(e)&&Wo(e)&&(e=e.parentNode);var r=e.previousSibling;if(Ys(r))return r;if(r=e.nextSibling,Ys(r))return r}},rl=(e,t,r)=>{var n=r.getNode(),a=r.getRng();if("IMG"===n.nodeName||Ys(n)){var i=n.nodeName;return{name:i,index:Js(r.dom,i,n)}}var s=(e=>tl(e.startContainer,e.startOffset)||tl(e.endContainer,e.endOffset))(a);if(s){var l=s.tagName;return{name:l,index:Js(r.dom,l,s)}}return((e,t,r,n)=>{var a=t.dom,i=Xs(a,e,r,n,!0),s=t.isForward(),l=ea(n)?{isFakeCaret:!0}:{};return t.isCollapsed()?o({start:i,forward:s},l):o({start:i,end:Xs(a,e,r,n,!1),forward:s},l)})(e,r,t,a)},nl=(e,t,r)=>{var n={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return r?e.create("span",n,"&#xFEFF;"):e.create("span",n)},ol=(e,t)=>{var r=e.dom,n=e.getRng(),o=r.uniqueId(),a=e.isCollapsed(),i=e.getNode(),s=i.nodeName,l=e.isForward();if("IMG"===s)return{name:s,index:Js(r,s,i)};var d=el(n.cloneRange());if(!a){d.collapse(!1);var c=nl(r,o+"_end",t);zs(r,d,c)}(n=el(n)).collapse(!0);var u=nl(r,o+"_start",t);return zs(r,n,u),e.moveToBookmark({id:o,keep:!0,forward:l}),{id:o,forward:l}},al=B(rl,R,!0),il=e=>{var t=t=>t(e),r=N(e),n=()=>o,o={tag:!0,inner:e,fold:(t,r)=>r(e),isValue:z,isError:F,map:t=>ll.value(t(e)),mapError:n,bind:t,exists:t,forall:t,getOr:r,or:n,getOrThunk:r,orThunk:n,getOrDie:r,each:t=>{t(e)},toOptional:()=>V.some(e)};return o},sl=e=>{var t=()=>r,r={tag:!1,inner:e,fold:(t,r)=>t(e),isValue:F,isError:z,map:t,mapError:t=>ll.error(t(e)),bind:t,exists:F,forall:z,getOr:R,or:R,getOrThunk:P,orThunk:P,getOrDie:H(String(e)),each:T,toOptional:V.none};return r},ll={value:il,error:sl,fromOption:(e,t)=>e.fold((()=>sl(t)),il)},dl=e=>{if(!y(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],r={};return K(e,((n,o)=>{var a=ve(n);if(1!==a.length)throw new Error("one and only one name per case");var i=a[0],s=n[i];if(void 0!==r[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!y(s))throw new Error("case arguments must be an array");t.push(i),r[i]=function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var l=n.length;if(l!==s.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+s.length+" ("+s+"), got "+l);return{fold:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(r.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+r.length);return r[o].apply(null,n)},match:e=>{var r=ve(e);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!ie(t,(e=>q(r,e))))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return e[i].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:i,params:n})}}}})),r};dl([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var cl,ul=e=>"inline-command"===e.type||"inline-format"===e.type,ml=e=>"block-command"===e.type||"block-format"===e.type,gl=e=>{var t=t=>ll.error({message:t,pattern:e}),r=(r,n,o)=>{if(void 0!==e.format){var a;if(y(e.format)){if(!ie(e.format,v))return t(r+" pattern has non-string items in the `format` array");a=e.format}else{if(!v(e.format))return t(r+" pattern has non-string `format` parameter");a=[e.format]}return ll.value(n(a))}return void 0!==e.cmd?v(e.cmd)?ll.value(o(e.cmd,e.value)):t(r+" pattern has non-string `cmd` parameter"):t(r+" pattern is missing both `format` and `cmd` parameters")};if(!f(e))return t("Raw pattern is not an object");if(!v(e.start))return t("Raw pattern is missing `start` parameter");if(void 0!==e.end){if(!v(e.end))return t("Inline pattern has non-string `end` parameter");if(0===e.start.length&&0===e.end.length)return t("Inline pattern has empty `start` and `end` parameters");var n=e.start,o=e.end;return 0===o.length&&(o=n,n=""),r("Inline",(e=>({type:"inline-format",start:n,end:o,format:e})),((e,t)=>({type:"inline-command",start:n,end:o,cmd:e,value:t})))}return void 0!==e.replacement?v(e.replacement)?0===e.start.length?t("Replacement pattern has empty `start` parameter"):ll.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):0===e.start.length?t("Block pattern has empty `start` parameter"):r("Block",(t=>({type:"block-format",start:e.start,format:t[0]})),((t,r)=>({type:"block-command",start:e.start,cmd:t,value:r})))},hl=e=>J(e,ml),pl=e=>J(e,ul),vl=e=>{var t=(e=>{var t=[],r=[];return K(e,(e=>{e.fold((e=>{t.push(e)}),(e=>{r.push(e)}))})),{errors:t,values:r}})(G(e,gl));return K(t.errors,(e=>console.error(e.message,e.pattern))),t.values},fl=Ot().deviceType,bl=fl.isTouch(),yl=Bi.DOM,wl=e=>p(e,RegExp),xl=e=>t=>t.options.get(e),Cl=e=>v(e)||f(e),kl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return r=>{var n=v(r);if(n){if(-1!==r.indexOf("=")){var o=(e=>{var t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return ee(t,((e,t)=>{var r=t.split("="),n=r[0],o=r.length>1?r[1]:n;return e[Ke(n)]=Ke(o),e}),{})})(r);return{value:Oe(o,e.id).getOr(t),valid:n}}return{value:r,valid:n}}return{valid:!1,message:"Must be a string."}}},Sl=xl("iframe_attrs"),_l=xl("doctype"),Ol=xl("document_base_url"),El=xl("body_id"),Tl=xl("body_class"),Al=xl("content_security_policy"),Ml=xl("br_in_pre"),Nl=xl("forced_root_block"),Rl=xl("forced_root_block_attrs"),Dl=xl("newline_behavior"),Bl=xl("br_newline_selector"),Ll=xl("no_newline_selector"),Hl=xl("keep_styles"),Pl=xl("end_container_on_empty_block"),Il=xl("automatic_uploads"),Fl=xl("images_reuse_filename"),zl=xl("images_replace_blob_uris"),Vl=xl("icons"),Zl=xl("icons_url"),jl=xl("images_upload_url"),Ul=xl("images_upload_base_path"),Wl=xl("images_upload_credentials"),ql=xl("images_upload_handler"),$l=xl("content_css_cors"),Gl=xl("referrer_policy"),Kl=xl("language"),Yl=xl("language_url"),Xl=xl("indent_use_margin"),Jl=xl("indentation"),Ql=xl("content_css"),ed=xl("content_style"),td=xl("font_css"),rd=xl("directionality"),nd=xl("inline_boundaries_selector"),od=xl("object_resizing"),ad=xl("resize_img_proportional"),id=xl("placeholder"),sd=xl("event_root"),ld=xl("service_message"),dd=xl("theme"),cd=xl("theme_url"),ud=xl("model"),md=xl("model_url"),gd=xl("inline_boundaries"),hd=xl("formats"),pd=xl("preview_styles"),vd=xl("format_empty_lines"),fd=xl("format_noneditable_selector"),bd=xl("custom_ui_selector"),yd=xl("inline"),wd=xl("hidden_input"),xd=xl("submit_patch"),Cd=xl("add_form_submit_trigger"),kd=xl("add_unload_trigger"),Sd=xl("custom_undo_redo_levels"),_d=xl("disable_nodechange"),Od=xl("readonly"),Ed=xl("editable_root"),Td=xl("content_css_cors"),Ad=xl("plugins"),Md=xl("external_plugins"),Nd=xl("block_unsupported_drop"),Rd=xl("visual"),Dd=xl("visual_table_class"),Bd=xl("visual_anchor_class"),Ld=xl("iframe_aria_text"),Hd=xl("setup"),Pd=xl("init_instance_callback"),Id=xl("urlconverter_callback"),Fd=xl("auto_focus"),zd=xl("browser_spellcheck"),Vd=xl("protect"),Zd=xl("paste_block_drop"),jd=xl("paste_data_images"),Ud=xl("paste_preprocess"),Wd=xl("paste_postprocess"),qd=xl("newdocument_content"),$d=xl("paste_webkit_styles"),Gd=xl("paste_remove_styles_if_webkit"),Kd=xl("paste_merge_formats"),Yd=xl("smart_paste"),Xd=xl("paste_as_text"),Jd=xl("paste_tab_spaces"),Qd=xl("allow_html_data_urls"),ec=xl("text_patterns"),tc=xl("text_patterns_lookup"),rc=xl("noneditable_class"),nc=xl("editable_class"),oc=xl("noneditable_regexp"),ac=xl("preserve_cdata"),ic=xl("highlight_on_focus"),sc=xl("xss_sanitization"),lc=xl("init_content_sync"),dc=e=>Ht.explode(e.options.get("images_file_types")),cc=xl("table_tab_navigation"),uc=xl("details_initial_state"),mc=xl("details_serialized_state"),gc=qn,hc=to,pc=e=>{var t=e.parentNode;t&&t.removeChild(e)},vc=e=>{var t=Zo(e);return{count:e.length-t.length,text:t}},fc=e=>{for(var t;-1!==(t=e.data.lastIndexOf(zo));)e.deleteData(t,1)},bc=(e,t)=>(wc(e),t),yc=(e,t)=>Is.isTextPosition(t)?((e,t)=>hc(e)&&t.container()===e?((e,t)=>{var r=vc(e.data.substr(0,t.offset())),n=vc(e.data.substr(t.offset()));return(r.text+n.text).length>0?(fc(e),Is(e,t.offset()-r.count)):t})(e,t):bc(e,t))(e,t):((e,t)=>t.container()===e.parentNode?((e,t)=>{var r=t.container(),n=((e,t)=>{var r=W(e,t);return-1===r?V.none():V.some(r)})(he(r.childNodes),e).map((e=>e<t.offset()?Is(r,t.offset()-1):t)).getOr(t);return wc(e),n})(e,t):bc(e,t))(e,t),wc=e=>{gc(e)&&$o(e)&&(Go(e)?e.removeAttribute("data-mce-caret"):pc(e)),hc(e)&&(fc(e),0===e.data.length&&pc(e))},xc=uo,Cc=ho,kc=mo,Sc=(e,t,r)=>{var n,o,a=ms(t.getBoundingClientRect(),r);if("BODY"===e.tagName){var i=e.ownerDocument.documentElement;n=e.scrollLeft||i.scrollLeft,o=e.scrollTop||i.scrollTop}else{var s=e.getBoundingClientRect();n=e.scrollLeft-s.left,o=e.scrollTop-s.top}a.left+=n,a.right+=n,a.top+=o,a.bottom+=o,a.width=1;var l=t.offsetWidth-t.clientWidth;return l>0&&(r&&(l*=-1),a.left+=l,a.right+=l),a},_c=(e,t,r,n)=>{var a,i,s=ji(),l=Nl(e),d=e.dom,c=()=>{(e=>{for(var t,r,n=zn(xr(e),"*[contentEditable=false],video,audio,embed,object"),o=0;o<n.length;o++){var a=n[o].dom,i=a.previousSibling;if(Jo(i)){var s=i.data;1===s.length?null===(t=i.parentNode)||void 0===t||t.removeChild(i):i.deleteData(s.length-1,1)}i=a.nextSibling,Xo(i)&&(1===i.data.length?null===(r=i.parentNode)||void 0===r||r.removeChild(i):i.deleteData(0,1))}})(t),i&&(wc(i),i=null),s.on((e=>{d.remove(e.caret),s.clear()})),a&&(clearInterval(a),a=void 0)};return{show:(e,u)=>{var m;if(c(),kc(u))return null;if(!r(u))return i=((e,t)=>{var r,n=(null!==(r=e.ownerDocument)&&void 0!==r?r:document).createTextNode(zo),o=e.parentNode;if(t){var a=e.previousSibling;if(Uo(a)){if($o(a))return a;if(Jo(a))return a.splitText(a.data.length-1)}null==o||o.insertBefore(n,e)}else{var i=e.nextSibling;if(Uo(i)){if($o(i))return i;if(Xo(i))return i.splitText(1),i}e.nextSibling?null==o||o.insertBefore(n,e.nextSibling):null==o||o.appendChild(n)}return n})(u,e),m=u.ownerDocument.createRange(),Ec(i.nextSibling)?(m.setStart(i,0),m.setEnd(i,0)):(m.setStart(i,1),m.setEnd(i,1)),m;var g=((e,t,r)=>{var n,o=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createElement(e);o.setAttribute("data-mce-caret",r?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild(Po().dom);var a=t.parentNode;return r?null==a||a.insertBefore(o,t):t.nextSibling?null==a||a.insertBefore(o,t.nextSibling):null==a||a.appendChild(o),o})(l,u,e),h=Sc(t,u,e);d.setStyle(g,"top",h.top),i=g;var p=d.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});return d.setStyles(p,o({},h)),d.add(t,p),s.set({caret:p,element:u,before:e}),e&&d.addClass(p,"mce-visual-caret-before"),a=setInterval((()=>{s.on((e=>{n()?d.toggleClass(e.caret,"mce-visual-caret-hidden"):d.addClass(e.caret,"mce-visual-caret-hidden")}))}),500),(m=u.ownerDocument.createRange()).setStart(g,0),m.setEnd(g,0),m},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{s.on((e=>{var r=Sc(t,e.element,e.before);d.setStyles(e.caret,o({},r))}))},destroy:()=>clearInterval(a)}},Oc=()=>Dt.browser.isFirefox(),Ec=e=>xc(e)||Cc(e),Tc=e=>(Ec(e)||Jn(e)&&Oc())&&Rr(xr(e)).exists(on),Ac=co,Mc=uo,Nc=ho,Rc=Kn("display","block table table-cell table-caption list-item"),Dc=$o,Bc=Wo,Lc=qn,Hc=to,Pc=da,Ic=e=>e>0,Fc=e=>e<0,zc=(e,t)=>{for(var r;r=e(t);)if(!Bc(r))return r;return null},Vc=(e,t,r,n,o)=>{var a,i=new Zn(e,n),s=Mc(e)||Bc(e);if(Fc(t)){if(s&&r(a=zc(i.prev.bind(i),!0)))return a;for(;a=zc(i.prev.bind(i),o);)if(r(a))return a}if(Ic(t)){if(s&&r(a=zc(i.next.bind(i),!0)))return a;for(;a=zc(i.next.bind(i),o);)if(r(a))return a}return null},Zc=(e,t)=>{for(;e&&e!==t;){if(Rc(e))return e;e=e.parentNode}return null},jc=(e,t,r)=>Zc(e.container(),r)===Zc(t.container(),r),Uc=(e,t)=>{if(!t)return V.none();var r=t.container(),n=t.offset();return Lc(r)?V.from(r.childNodes[n+e]):V.none()},Wc=(e,t)=>{var r,n=(null!==(r=t.ownerDocument)&&void 0!==r?r:document).createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},qc=(e,t,r)=>Zc(t,e)===Zc(r,e),$c=(e,t,r)=>{for(var n=e?"previousSibling":"nextSibling",o=r;o&&o!==t;){var a=o[n];if(a&&Dc(a)&&(a=a[n]),Mc(a)||Nc(a)){if(qc(t,a,o))return a;break}if(Pc(a))break;o=o.parentNode}return null},Gc=B(Wc,!0),Kc=B(Wc,!1),Yc=(e,t,r)=>{var n,o=B($c,!0,t),a=B($c,!1,t),i=r.startContainer,s=r.startOffset;if(Wo(i)){var l=Hc(i)?i.parentNode:i,d=l.getAttribute("data-mce-caret");if("before"===d&&(n=l.nextSibling,Tc(n)))return Gc(n);if("after"===d&&(n=l.previousSibling,Tc(n)))return Kc(n)}if(!r.collapsed)return r;if(to(i)){if(Dc(i)){if(1===e){if(n=a(i))return Gc(n);if(n=o(i))return Kc(n)}if(-1===e){if(n=o(i))return Kc(n);if(n=a(i))return Gc(n)}return r}if(Jo(i)&&s>=i.data.length-1)return 1===e&&(n=a(i))?Gc(n):r;if(Xo(i)&&s<=1)return-1===e&&(n=o(i))?Kc(n):r;if(s===i.data.length)return(n=a(i))?Gc(n):r;if(0===s)return(n=o(i))?Kc(n):r}return r},Xc=(e,t)=>Uc(e?0:-1,t).filter(Mc),Jc=(e,t,r)=>{var n=Yc(e,t,r);return-1===e?Is.fromRangeStart(n):Is.fromRangeEnd(n)},Qc=e=>V.from(e.getNode()).map(xr),eu=(e,t)=>{for(var r=t;r=e(r);)if(r.isVisible())return r;return r},tu=(e,t)=>{var r=jc(e,t);return!(r||!so(e.getNode()))||r};!function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"}(cl||(cl={}));var ru,nu=uo,ou=to,au=qn,iu=so,su=da,lu=e=>ia(e)||(e=>!!ca(e)&&!ee(he(e.getElementsByTagName("*")),((e,t)=>e||ta(t)),!1))(e),du=ua,cu=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,uu=(e,t)=>{if(Ic(e)){if(su(t.previousSibling)&&!ou(t.previousSibling))return Is.before(t);if(ou(t))return Is(t,0)}if(Fc(e)){if(su(t.nextSibling)&&!ou(t.nextSibling))return Is.after(t);if(ou(t))return Is(t,t.data.length)}return Fc(e)?iu(t)?Is.before(t):Is.after(t):Is.before(t)},mu=(e,t,r)=>{var n,o,a,i;if(!au(r)||!t)return null;if(t.isEqual(Is.after(r))&&r.lastChild){if(i=Is.after(r.lastChild),Fc(e)&&su(r.lastChild)&&au(r.lastChild))return iu(r.lastChild)?Is.before(r.lastChild):i}else i=t;var s=i.container(),l=i.offset();if(ou(s)){if(Fc(e)&&l>0)return Is(s,--l);if(Ic(e)&&l<s.length)return Is(s,++l);n=s}else{if(Fc(e)&&l>0&&(o=cu(s,l-1),su(o)))return!lu(o)&&(a=Vc(o,e,du,o))?ou(a)?Is(a,a.data.length):Is.after(a):ou(o)?Is(o,o.data.length):Is.before(o);if(Ic(e)&&l<s.childNodes.length&&(o=cu(s,l),su(o)))return iu(o)?((e,t)=>{var r=t.nextSibling;return r&&su(r)?ou(r)?Is(r,0):Is.before(r):mu(cl.Forwards,Is.after(t),e)})(r,o):!lu(o)&&(a=Vc(o,e,du,o))?ou(a)?Is(a,0):Is.before(a):ou(o)?Is(o,0):Is.after(o);n=o||i.getNode()}if(n&&(Ic(e)&&i.isAtEnd()||Fc(e)&&i.isAtStart())&&(n=Vc(n,e,z,r,!0),du(n,r)))return uu(e,n);o=n?Vc(n,e,du,r):n;var d=Pe(J(((e,t)=>{for(var r=[],n=e;n&&n!==t;)r.push(n),n=n.parentNode;return r})(s,r),nu));return!d||o&&d.contains(o)?o?uu(e,o):null:i=Ic(e)?Is.after(d):Is.before(d)},gu=e=>({next:t=>mu(cl.Forwards,t,e),prev:t=>mu(cl.Backwards,t,e)}),hu=e=>Is.isTextPosition(e)?0===e.offset():da(e.getNode()),pu=e=>{if(Is.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return da(e.getNode(!0))},vu=(e,t)=>!Is.isTextPosition(e)&&!Is.isTextPosition(t)&&e.getNode()===t.getNode(!0),fu=(e,t,r)=>{var n=gu(t);return V.from(e?n.next(r):n.prev(r))},bu=(e,t,r)=>fu(e,t,r).bind((n=>jc(r,n,t)&&((e,t,r)=>{return e?!vu(t,r)&&(n=t,!(!Is.isTextPosition(n)&&so(n.getNode())))&&pu(t)&&hu(r):!vu(r,t)&&hu(t)&&pu(r);var n})(e,r,n)?fu(e,t,n):V.some(n))),yu=(e,t,r,n)=>bu(e,t,r).bind((r=>n(r)?yu(e,t,r,n):V.some(r))),wu=(e,t)=>{var r,n=e?t.firstChild:t.lastChild;return to(n)?V.some(Is(n,e?0:n.data.length)):n?da(n)?V.some(e?Is.before(n):so(r=n)?Is.before(r):Is.after(r)):((e,t,r)=>{var n=e?Is.before(r):Is.after(r);return fu(e,t,n)})(e,t,n):V.none()},xu=B(fu,!0),Cu=B(fu,!1),ku=B(wu,!0),Su=B(wu,!1),_u="_mce_caret",Ou=e=>qn(e)&&e.id===_u,Eu=(e,t)=>{for(var r=t;r&&r!==e;){if(Ou(r))return r;r=r.parentNode}return null},Tu=e=>Ee(e,"name"),Au=e=>Ht.isArray(e.start),Mu=e=>!(!Tu(e)&&x(e.forward))||e.forward,Nu=(e,t)=>(qn(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),Ru=(e,t)=>Su(e).fold(F,(e=>(t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0))),Du=(e,t,r)=>!(!(e=>!e.hasChildNodes())(t)||!Eu(e,t)||(((e,t)=>{var r,n=(null!==(r=e.ownerDocument)&&void 0!==r?r:document).createTextNode(zo);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)})(t,r),0)),Bu=(e,t,r,n)=>{var o=r[t?"start":"end"],a=e.getRoot();if(o){for(var i=a,s=o[0],l=o.length-1;i&&l>=1;l--){var d=i.childNodes;if(Du(a,i,n))return!0;if(o[l]>d.length-1)return!!Du(a,i,n)||Ru(i,n);i=d[o[l]]}to(i)&&(s=Math.min(o[0],i.data.length)),qn(i)&&(s=Math.min(o[0],i.childNodes.length)),t?n.setStart(i,s):n.setEnd(i,s)}return!0},Lu=e=>to(e)&&e.data.length>0,Hu=(e,t,r)=>{var n=e.get(r.id+"_"+t),o=null==n?void 0:n.parentNode,a=r.keep;if(n&&o){var i,s;if("start"===t?a?n.hasChildNodes()?(i=n.firstChild,s=1):Lu(n.nextSibling)?(i=n.nextSibling,s=0):Lu(n.previousSibling)?(i=n.previousSibling,s=n.previousSibling.data.length):(i=o,s=e.nodeIndex(n)+1):(i=o,s=e.nodeIndex(n)):a?n.hasChildNodes()?(i=n.firstChild,s=1):Lu(n.previousSibling)?(i=n.previousSibling,s=n.previousSibling.data.length):(i=o,s=e.nodeIndex(n)):(i=o,s=e.nodeIndex(n)),!a){var l,d=n.previousSibling,c=n.nextSibling;for(Ht.each(Ht.grep(n.childNodes),(e=>{to(e)&&(e.data=e.data.replace(/\uFEFF/g,""))}));l=e.get(r.id+"_"+t);)e.remove(l,!0);if(to(c)&&to(d)&&!Dt.browser.isOpera()){var u=d.data.length;d.appendData(c.data),e.remove(c),i=d,s=u}}return V.some(Is(i,s))}return V.none()},Pu=(e,t,r)=>function(e,t){return 2===t?rl(Zo,arguments.length>2&&void 0!==arguments[2]&&arguments[2],e):3===t?(e=>{var t=e.getRng();return{start:Gs(e.dom.getRoot(),Is.fromRangeStart(t)),end:Gs(e.dom.getRoot(),Is.fromRangeEnd(t)),forward:e.isForward()}})(e):t?(e=>({rng:e.getRng(),forward:e.isForward()}))(e):ol(e,!1)}(e,t,r),Iu=(e,t)=>{((e,t)=>{var r=e.dom;if(t){if(Au(t))return((e,t)=>{var r=e.createRng();return Bu(e,!0,t,r)&&Bu(e,!1,t,r)?V.some({range:r,forward:Mu(t)}):V.none()})(r,t);if((e=>v(e.start))(t))return((e,t)=>{var r=V.from(Ks(e.getRoot(),t.start)),n=V.from(Ks(e.getRoot(),t.end));return Ft(r,n,((r,n)=>{var o=e.createRng();return o.setStart(r.container(),r.offset()),o.setEnd(n.container(),n.offset()),{range:o,forward:Mu(t)}}))})(r,t);if((e=>Ee(e,"id"))(t))return((e,t)=>{var r=Hu(e,"start",t),n=Hu(e,"end",t);return Ft(r,n.or(r),((r,n)=>{var o=e.createRng();return o.setStart(Nu(e,r.container()),r.offset()),o.setEnd(Nu(e,n.container()),n.offset()),{range:o,forward:Mu(t)}}))})(r,t);if(Tu(t))return((e,t)=>V.from(e.select(t.name)[t.index]).map((t=>{var r=e.createRng();return r.selectNode(t),{range:r,forward:!0}})))(r,t);if((e=>Ee(e,"rng"))(t))return V.some({range:t.rng,forward:Mu(t)})}return V.none()})(e,t).each((t=>{var{range:r,forward:n}=t;e.setRng(r,n)}))},Fu=e=>qn(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type"),zu=(ru=yo,e=>ru===e),Vu=e=>""!==e&&-1!==" \f\n\r\t\v".indexOf(e),Zu=e=>!Vu(e)&&!zu(e)&&!wo(e),ju=e=>{var t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},Uu=e=>(e=>{return{value:(t=e,Ue(t,"#").toUpperCase())};var t})(ju(e.red)+ju(e.green)+ju(e.blue)),Wu=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,qu=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,$u=(e,t,r,n)=>({red:e,green:t,blue:r,alpha:n}),Gu=(e,t,r,n)=>{var o=parseInt(e,10),a=parseInt(t,10),i=parseInt(r,10),s=parseFloat(n);return $u(o,a,i,s)},Ku=e=>(e=>{if("transparent"===e)return V.some($u(0,0,0,0));var t=Wu.exec(e);if(null!==t)return V.some(Gu(t[1],t[2],t[3],"1"));var r=qu.exec(e);return null!==r?V.some(Gu(r[1],r[2],r[3],r[4])):V.none()})(e).map(Uu).map((e=>"#"+e.value)).getOr(e),Yu=e=>{var t=[];if(e)for(var r=0;r<e.rangeCount;r++)t.push(e.getRangeAt(r));return t},Xu=(e,t)=>{var r=zn(t,"td[data-mce-selected],th[data-mce-selected]");return r.length>0?r:(e=>J((e=>ae(e,(e=>{var t=fs(e);return t?[xr(t)]:[]})))(e),Do))(e)},Ju=e=>Xu(Yu(e.selection.getSel()),xr(e.getBody())),Qu=(e,t)=>tn(e,"table",t),em=e=>zr(e).fold(N([e]),(t=>[e].concat(em(t)))),tm=e=>Vr(e).fold(N([e]),(t=>"br"===Wt(t)?Br(t).map((t=>[e].concat(tm(t)))).getOr([]):[e].concat(tm(t)))),rm=(e,t)=>Ft((e=>{var t=e.startContainer,r=e.startOffset;return to(t)?0===r?V.some(xr(t)):V.none():V.from(t.childNodes[r]).map(xr)})(t),(e=>{var t=e.endContainer,r=e.endOffset;return to(t)?r===t.data.length?V.some(xr(t)):V.none():V.from(t.childNodes[r-1]).map(xr)})(t),((t,r)=>{var n=re(em(e),B(Or,t)),o=re(tm(e),B(Or,r));return n.isSome()&&o.isSome()})).getOr(!1),nm=(e,t,r,n)=>{var o=r,a=new Zn(r,o),i=ke(e.schema.getMoveCaretBeforeOnEnterElements(),((e,t)=>!q(["td","th","table"],t.toLowerCase()))),s=r;do{if(to(s)&&0!==Ht.trim(s.data).length)return void(n?t.setStart(s,0):t.setEnd(s,s.data.length));if(i[s.nodeName])return void(n?t.setStartBefore(s):"BR"===s.nodeName?t.setEndBefore(s):t.setEndAfter(s))}while(s=n?a.next():a.prev());"BODY"===o.nodeName&&(n?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},om=e=>{var t=e.selection.getSel();return S(t)&&t.rangeCount>0},am=(e,t)=>{var r=Ju(e);r.length>0?K(r,(r=>{var n=r.dom,o=e.dom.createRng();o.setStartBefore(n),o.setEndAfter(n),t(o,!0)})):t(e.selection.getRng(),!1)},im=(e,t,r)=>{var n=ol(e,t);r(n),e.moveToBookmark(n)},sm=e=>O(null==e?void 0:e.nodeType),lm=e=>qn(e)&&!Fu(e)&&!Ou(e)&&!Xn(e),dm=e=>!0===e.isContentEditable,cm=(e,t,r)=>{var{selection:n,dom:o}=e,a=n.getNode(),i=uo(a);im(n,!0,(()=>{t()})),i&&uo(a)&&o.isChildOf(a,e.getBody())?e.selection.select(a):r(n.getStart())&&um(o,n)},um=(e,t)=>{var r,n,o=t.getRng(),{startContainer:a,startOffset:i}=o;if(!((e,t)=>{if(lm(t)&&!/^(TD|TH)$/.test(t.nodeName)){var r=e.getAttrib(t,"data-mce-selected"),n=parseInt(r,10);return!isNaN(n)&&n>0}return!1})(e,t.getNode())&&qn(a)){var s,l=a.childNodes,d=e.getRoot();if(i<l.length){var c=l[i];s=new Zn(c,null!==(r=e.getParent(c,e.isBlock))&&void 0!==r?r:d)}else{var u=l[l.length-1];(s=new Zn(u,null!==(n=e.getParent(u,e.isBlock))&&void 0!==n?n:d)).next(!0)}for(var m=s.current();m;m=s.next()){if("false"===e.getContentEditable(m))return;if(to(m)&&!pm(m))return o.setStart(m,0),void t.setRng(o)}}},mm=(e,t,r)=>{if(e){var n=t?"nextSibling":"previousSibling";for(e=r?e:e[n];e;e=e[n])if(qn(e)||!pm(e))return e}},gm=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||Da(e,t),hm=(e,t,r)=>e.schema.isValidChild(t,r),pm=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(S(e)&&to(e)){var r=t?e.data.replace(/ /g,""):e.data;return ga(r)}return!1},vm=(e,t)=>{var r=e.dom;return lm(t)&&"false"===r.getContentEditable(t)&&((e,t)=>{var r="[data-mce-cef-wrappable]",n=fd(e),o=Qe(n)?r:"".concat(r,",").concat(n);return Sr(xr(t),o)})(e,t)&&0===r.select('[contenteditable="true"]',t).length},fm=(e,t)=>_(e)?e(t):(S(t)&&(e=e.replace(/%(\w+)/g,((e,r)=>t[r]||e))),e),bm=(e,t)=>(t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),ym=(e,t)=>{if(k(e))return null;var r=String(e);return"color"!==t&&"backgroundColor"!==t||(r=Ku(r)),"fontWeight"===t&&700===e&&(r="bold"),"fontFamily"===t&&(r=r.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),r},wm=(e,t,r)=>{var n=e.getStyle(t,r);return ym(n,r)},xm=(e,t)=>{var r;return e.getParent(t,(t=>!!qn(t)&&!!(r=e.getStyle(t,"text-decoration"))&&"none"!==r)),r},Cm=(e,t,r)=>e.getParents(t,r,e.getRoot()),km=(e,t,r)=>{var n=e.formatter.get(t);return S(n)&&$(n,r)},Sm=e=>Te(e,"block"),_m=e=>Te(e,"selector"),Om=e=>Te(e,"inline"),Em=e=>_m(e)&&!1!==e.expand&&!Om(e),Tm=Fu,Am=Cm,Mm=pm,Nm=gm,Rm=(e,t)=>{for(var r=t;r;){if(qn(r)&&e.getContentEditable(r))return"false"===e.getContentEditable(r)?r:t;r=r.parentNode}return t},Dm=(e,t,r,n)=>{var o=t.data;if(e){for(var a=r;a>0;a--)if(n(o.charAt(a-1)))return a}else for(var i=r;i<o.length;i++)if(n(o.charAt(i)))return i;return-1},Bm=(e,t,r)=>Dm(e,t,r,(e=>zu(e)||Vu(e))),Lm=(e,t,r)=>Dm(e,t,r,Zu),Hm=(e,t,r,n,o,a)=>{var i,s=e.getParent(r,e.isBlock)||t,l=(t,r,n)=>{var a=ds(e),l=o?a.backwards:a.forwards;return V.from(l(t,r,((e,t)=>Tm(e.parentNode)?-1:(i=e,n(o,e,t))),s))};return l(r,n,Bm).bind((e=>a?l(e.container,e.offset+(o?-1:0),Lm):V.some(e))).orThunk((()=>i?V.some({container:i,offset:o?0:i.length}):V.none()))},Pm=(e,t,r,n,o)=>{var a=n[o];to(n)&&Qe(n.data)&&a&&(n=a);for(var i=Am(e,n),s=0;s<i.length;s++)for(var l=0;l<t.length;l++){var d=t[l];if((!S(d.collapsed)||d.collapsed===r.collapsed)&&_m(d)&&e.is(i[s],d.selector))return i[s]}return n},Im=(e,t,r,n)=>{var o,a=r,i=e.getRoot(),s=t[0];if(Sm(s)&&(a=s.wrapper?null:e.getParent(r,s.block,i)),!a){var l=null!==(o=e.getParent(r,"LI,TD,TH"))&&void 0!==o?o:i;a=e.getParent(to(r)?r.parentNode:r,(t=>t!==i&&Nm(e.schema,t)),l)}if(a&&Sm(s)&&s.wrapper&&(a=Am(e,a,"ul,ol").reverse()[0]||a),!a)for(a=r;a&&a[n]&&!e.isBlock(a[n])&&(a=a[n],!bm(a,"br")););return a||r},Fm=(e,t,r,n)=>{var o=r.parentNode;return!S(r[n])&&(!(o!==t&&!k(o)&&!e.isBlock(o))||Fm(e,t,o,n))},zm=(e,t,r,n,o)=>{var a,i=r,s=o?"previousSibling":"nextSibling",l=e.getRoot();if(to(r)&&!Mm(r)&&(o?n>0:n<r.data.length))return r;for(;i;){if(!t[0].block_expand&&e.isBlock(i))return i;for(var d=i[s];d;d=d[s]){var c=to(d)&&!Fm(e,l,d,s);if(!Tm(d)&&(!so(a=d)||!a.getAttribute("data-mce-bogus")||a.nextSibling)&&!Mm(d,c))return i}if(i===l||i.parentNode===l){r=i;break}i=i.parentNode}return r},Vm=e=>Tm(e.parentNode)||Tm(e),Zm=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{startContainer:o,startOffset:a,endContainer:i,endOffset:s}=t,l=r[0];return qn(o)&&o.hasChildNodes()&&(o=bs(o,a),to(o)&&(a=0)),qn(i)&&i.hasChildNodes()&&(i=bs(i,t.collapsed?s:s-1),to(i)&&(s=i.data.length)),o=Rm(e,o),i=Rm(e,i),Vm(o)&&(o=Tm(o)?o:o.parentNode,o=t.collapsed?o.previousSibling||o:o.nextSibling||o,to(o)&&(a=t.collapsed?o.length:0)),Vm(i)&&(i=Tm(i)?i:i.parentNode,i=t.collapsed?i.nextSibling||i:i.previousSibling||i,to(i)&&(s=t.collapsed?0:i.length)),t.collapsed&&(Hm(e,e.getRoot(),o,a,!0,n).each((e=>{var{container:t,offset:r}=e;o=t,a=r})),Hm(e,e.getRoot(),i,s,!1,n).each((e=>{var{container:t,offset:r}=e;i=t,s=r}))),(Om(l)||l.block_expand)&&(Om(l)&&to(o)&&0!==a||(o=zm(e,r,o,a,!0)),Om(l)&&to(i)&&s!==i.data.length||(i=zm(e,r,i,s,!1))),Em(l)&&(o=Pm(e,r,t,o,"previousSibling"),i=Pm(e,r,t,i,"nextSibling")),(Sm(l)||_m(l))&&(o=Im(e,r,o,"previousSibling"),i=Im(e,r,i,"nextSibling"),Sm(l)&&(e.isBlock(o)||(o=zm(e,r,o,a,!0)),e.isBlock(i)||(i=zm(e,r,i,s,!1)))),qn(o)&&o.parentNode&&(a=e.nodeIndex(o),o=o.parentNode),qn(i)&&i.parentNode&&(s=e.nodeIndex(i)+1,i=i.parentNode),{startContainer:o,startOffset:a,endContainer:i,endOffset:s}},jm=(e,t,r)=>{var n,o=t.startOffset,a=bs(t.startContainer,o),i=t.endOffset,s=bs(t.endContainer,i-1),l=e=>{var t=e[0];to(t)&&t===a&&o>=t.data.length&&e.splice(0,1);var r=e[e.length-1];return 0===i&&e.length>0&&r===s&&to(r)&&e.splice(e.length-1,1),e},d=(e,t,r)=>{for(var n=[];e&&e!==r;e=e[t])n.push(e);return n},c=(t,r)=>e.getParent(t,(e=>e.parentNode===r),r),u=(e,t,n)=>{for(var o=n?"nextSibling":"previousSibling",a=e,i=a.parentNode;a&&a!==t;a=i){i=a.parentNode;var s=d(a===e?a:a[o],o);s.length&&(n||s.reverse(),r(l(s)))}};if(a===s)return r(l([a]));var m=null!==(n=e.findCommonAncestor(a,s))&&void 0!==n?n:e.getRoot();if(e.isChildOf(a,s))return u(a,m,!0);if(e.isChildOf(s,a))return u(s,m);var g=c(a,m)||a,h=c(s,m)||s;u(a,g,!0);var p=d(g===a?g:g.nextSibling,"nextSibling",h===s?h.nextSibling:h);p.length&&r(l(p)),u(s,h)},Um=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Wm=(e,r,n,o,a,i)=>{var{uid:s=r}=n,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(n,t);gr(e,qi()),tr(e,"".concat(Gi()),s),tr(e,"".concat($i()),o);var{attributes:d={},classes:c=[]}=a(s,l);if(rr(e,d),((e,t)=>{K(t,(t=>{gr(e,t)}))})(e,c),i){c.length>0&&tr(e,"".concat(Yi()),c.join(","));var u=ve(d);u.length>0&&tr(e,"".concat(Xi()),u.join(","))}},qm=(e,t,r,n,o)=>{var a=yr("span",e);return Wm(a,t,r,n,o,!1),a},$m=(e,t,r,n,o,a)=>{var i=[],s=qm(e.getDoc(),r,a,n,o),l=ji(),d=()=>{l.clear()},c=e=>{K(e,u)},u=t=>{switch(((e,t,r,n)=>Nr(t).fold((()=>"skipping"),(o=>"br"===n||(e=>Yt(e)&&Co(e)===zo)(t)?"valid":(e=>Kt(e)&&vr(e,qi()))(t)?"existing":Ou(t.dom)?"caret":$(Um,(e=>Sr(t,e)))?"valid-block":hm(e,r,n)&&hm(e,Wt(o),r)?"valid":"invalid-child")))(e,t,"span",Wt(t))){case"invalid-child":d();var u=Ir(t);c(u),d();break;case"valid-block":d(),Wm(t,r,a,n,o,!0);break;case"valid":var m=l.get().getOrThunk((()=>{var e=is(s);return i.push(e),l.set(e),e}));wn(t,m)}};return jm(e.dom,t,(e=>{d(),(e=>{var t=G(e,xr);c(t)})(e)})),i},Gm=e=>{var t,r=(t={},{register:(e,r)=>{t[e]={name:e,settings:r}},lookup:e=>Oe(t,e).map((e=>e.settings)),getNames:()=>ve(t)});((e,t)=>{var r=$i();e.serializer.addTempAttr(Ki()),e.serializer.addAttributeFilter(r,(e=>{var n=function(e){(e=>V.from(e.attr(r)).bind(t.lookup))(e).each((t=>{!1===t.persistent&&("span"===e.name?e.unwrap():(e=>{var t,r;e.attr(Gi(),null),e.attr($i(),null),e.attr(Ki(),null);var n=V.from(e.attr(Xi())).map((e=>e.split(","))).getOr([]),o=V.from(e.attr(Yi())).map((e=>e.split(","))).getOr([]);K(n,(t=>e.attr(t,null)));var a=null!==(r=null===(t=e.attr("class"))||void 0===t?void 0:t.split(" "))&&void 0!==r?r:[],i=le(a,[qi()].concat(o));e.attr("class",i.length>0?i.join(" "):null),e.attr(Yi(),null),e.attr(Xi(),null)})(e))}))};for(var o of e)n(o)}))})(e,r);var n=((e,t)=>{var r=Pi({}),n=()=>({listeners:[],previous:ji()}),o=(e,t)=>{a(e,(e=>(t(e),e)))},a=(e,t)=>{var o=r.get(),a=t(Oe(o,e).getOrThunk(n));o[e]=a,r.set(o)},i=(t,r)=>{K(ts(e,t),(e=>{r?tr(e,Ki(),"true"):ir(e,Ki())}))},s=Wi((()=>{var r=ce(t.getNames());K(r,(t=>{a(t,(r=>{var n=r.previous.get();return Qi(e,V.some(t)).fold((()=>{n.each((e=>{(e=>{o(e,(t=>{K(t.listeners,(t=>t(!1,e)))}))})(t),r.previous.clear(),i(e,!1)}))}),(e=>{var{uid:t,name:a,elements:s}=e;Pt(n,t)||(n.each((e=>i(e,!1))),((e,t,r)=>{o(e,(n=>{K(n.listeners,(n=>n(!0,e,{uid:t,nodes:G(r,(e=>e.dom))})))}))})(a,t,s),r.previous.set(t),i(t,!0))})),{previous:r.previous,listeners:r.listeners}}))}))}),30);return e.on("remove",(()=>{s.cancel()})),e.on("NodeChange",(()=>{s.throttle()})),{addListener:(e,t)=>{a(e,(e=>({previous:e.previous,listeners:e.listeners.concat([t])})))}}})(e,r),o=Qt("span"),a=e=>{K(e,(e=>{o(e)?Sn(e):(e=>{pr(e,qi()),ir(e,"".concat(Gi())),ir(e,"".concat($i())),ir(e,"".concat(Ki()));var t,r=or(e,"".concat(Xi())).map((e=>e.split(","))).getOr([]),n=or(e,"".concat(Yi())).map((e=>e.split(","))).getOr([]);K(r,(t=>ir(e,t))),t=e,K(n,(e=>{pr(t,e)})),ir(e,"".concat(Yi())),ir(e,"".concat(Xi()))})(e)}))};return{register:(e,t)=>{r.register(e,t)},annotate:(t,n)=>{r.lookup(t).each((r=>{((e,t,r,n)=>{e.undoManager.transact((()=>{var o=e.selection,a=o.getRng(),i=Ju(e).length>0,s=os("mce-annotation");if(a.collapsed&&!i&&((e,t)=>{var r=Zm(e.dom,t,[{inline:"span"}]);t.setStart(r.startContainer,r.startOffset),t.setEnd(r.endContainer,r.endOffset),e.selection.setRng(t)})(e,a),o.getRng().collapsed&&!i){var l=qm(e.getDoc(),s,n,t,r.decorate);En(l,yo),o.getRng().insertNode(l.dom),o.select(l.dom)}else im(o,!1,(()=>{am(e,(o=>{$m(e,o,s,t,r.decorate,n)}))}))}))})(e,t,r,n)}))},annotationChanged:(e,t)=>{n.addListener(e,t)},remove:t=>{Qi(e,V.some(t)).each((t=>{var{elements:r}=t,n=e.selection.getBookmark();a(r),e.selection.moveToBookmark(n)}))},removeAll:t=>{var r=e.selection.getBookmark();be(rs(e,t),((e,t)=>{a(e)})),e.selection.moveToBookmark(r)},getAll:t=>{var r=rs(e,t);return ye(r,(e=>G(e,(e=>e.dom))))}}},Km=e=>({getBookmark:B(Pu,e),moveToBookmark:B(Iu,e)});Km.isBookmarkNode=Fu;var Ym=(e,t,r)=>!r.collapsed&&$(r.getClientRects(),(r=>((e,t,r)=>t>=e.left&&t<=e.right&&r>=e.top&&r<=e.bottom)(r,e,t))),Xm=(e,t,r)=>{e.dispatch(t,r)},Jm=(e,t,r,n)=>{e.dispatch("FormatApply",{format:t,node:r,vars:n})},Qm=(e,t,r,n)=>{e.dispatch("FormatRemove",{format:t,node:r,vars:n})},eg=(e,t)=>e.dispatch("SetContent",t),tg=(e,t)=>e.dispatch("GetContent",t),rg=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),ng={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||ng.metaKeyPressed(e),metaKeyPressed:e=>Dt.os.isMacOS()||Dt.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},og="data-mce-selected",ag=Math.abs,ig=Math.round,sg={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},lg=(e,t)=>{var r,n,o,a,i,s,l,d,c,u,m,g,h,p,v,f=t.dom,b=t.getDoc(),y=document,w=t.getBody(),x=e=>S(e)&&(lo(e)||f.is(e,"figure.image")),C=e=>ho(e)||f.hasClass(e,"mce-preview-object"),k=e=>{var r=e.target;((e,t)=>{if((e=>"longpress"===e.type||0===e.type.indexOf("touch"))(e)){var r=e.touches[0];return x(e.target)&&!Ym(r.clientX,r.clientY,t)}return x(e.target)&&!Ym(e.clientX,e.clientY,t)})(e,t.selection.getRng())&&!e.isDefaultPrevented()&&t.selection.select(r)},_=e=>f.hasClass(e,"mce-preview-object")&&S(e.firstElementChild)?[e,e.firstElementChild]:f.is(e,"figure.image")?[e.querySelector("img")]:[e],O=e=>{var r=od(t);return!!r&&"false"!==e.getAttribute("data-mce-resize")&&e!==t.getBody()&&(f.hasClass(e,"mce-preview-object")&&S(e.firstElementChild)?Sr(xr(e.firstElementChild),r):Sr(xr(e),r))},E=(e,r,n)=>{if(S(n)){var o=_(e);K(o,(e=>{e.style[r]||!t.schema.isValid(e.nodeName.toLowerCase(),r)?f.setStyle(e,r,n):f.setAttrib(e,r,""+n)}))}},T=(e,t,r)=>{E(e,"width",t),E(e,"height",r)},A=e=>{var i,b,y,k;i=e.screenX-s,b=e.screenY-l,g=i*a[2]+d,h=b*a[3]+c,g=g<5?5:g,h=h<5?5:h,((x(r)||C(r))&&!1!==ad(t)?!ng.modifierPressed(e):ng.modifierPressed(e))&&(ag(i)>ag(b)?(h=ig(g*u),g=ig(h/u)):(g=ig(h/u),h=ig(g*u))),T(n,g,h),y=(y=a.startPos.x+i)>0?y:0,k=(k=a.startPos.y+b)>0?k:0,f.setStyles(o,{left:y,top:k,display:"block"}),o.innerHTML=g+" &times; "+h,a[2]<0&&n.clientWidth<=g&&f.setStyle(n,"left",void 0+(d-g)),a[3]<0&&n.clientHeight<=h&&f.setStyle(n,"top",void 0+(c-h)),(i=w.scrollWidth-p)+(b=w.scrollHeight-v)!=0&&f.setStyles(o,{left:y-i,top:k-b}),m||(((e,t,r,n,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:r,height:n,origin:o})})(t,r,d,c,"corner-"+a.name),m=!0)},M=()=>{var e=m;m=!1,e&&(E(r,"width",g),E(r,"height",h)),f.unbind(b,"mousemove",A),f.unbind(b,"mouseup",M),y!==b&&(f.unbind(y,"mousemove",A),f.unbind(y,"mouseup",M)),f.remove(n),f.remove(o),f.remove(i),N(r),e&&(((e,t,r,n,o)=>{e.dispatch("ObjectResized",{target:t,width:r,height:n,origin:o})})(t,r,g,h,"corner-"+a.name),f.setAttrib(r,"style",f.getAttrib(r,"style"))),t.nodeChanged()},N=e=>{H();var m=f.getPos(e,w),x=m.x,k=m.y,S=e.getBoundingClientRect(),E=S.width||S.right-S.left,N=S.height||S.bottom-S.top;r!==e&&(D(),r=e,g=h=0);var R=t.dispatch("ObjectSelected",{target:e});O(e)&&!R.isDefaultPrevented()?be(sg,((e,t)=>{var m=f.get("mceResizeHandle"+t);m&&f.remove(m),m=f.add(w,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),f.bind(m,"mousedown",(m=>{m.stopImmediatePropagation(),m.preventDefault(),(m=>{var g,h=_(r)[0];s=m.screenX,l=m.screenY,d=h.clientWidth,c=h.clientHeight,u=c/d,(a=e).name=t,a.startPos={x:E*e[0]+x,y:N*e[1]+k},p=w.scrollWidth,v=w.scrollHeight,i=f.add(w,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),f.setStyles(i,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),n=C(g=r)?f.create("img",{src:Dt.transparentSrc}):g.cloneNode(!0),f.addClass(n,"mce-clonedresizable"),f.setAttrib(n,"data-mce-bogus","all"),n.contentEditable="false",f.setStyles(n,{left:x,top:k,margin:0}),T(n,E,N),n.removeAttribute(og),w.appendChild(n),f.bind(b,"mousemove",A),f.bind(b,"mouseup",M),y!==b&&(f.bind(y,"mousemove",A),f.bind(y,"mouseup",M)),o=f.add(w,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},d+" &times; "+c)})(m)})),e.elm=m,f.setStyles(m,{left:E*e[0]+x-m.offsetWidth/2,top:N*e[1]+k-m.offsetHeight/2})})):D(!1)},R=Ui(N,0),D=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];R.cancel(),H(),r&&e&&r.removeAttribute(og),be(sg,((e,t)=>{var r=f.get("mceResizeHandle"+t);r&&(f.unbind(r),f.remove(r))}))},B=(e,t)=>f.isChildOf(e,t),L=r=>{if(!(m||t.removed||t.composing)){var n="mousedown"===r.type?r.target:e.getNode(),o=nn(xr(n),"table,img,figure.image,hr,video,span.mce-preview-object,details").map((e=>e.dom)).filter((e=>f.isEditable(e.parentElement))).getOrUndefined(),a=S(o)?f.getAttrib(o,og,"1"):"1";if(K(f.select("img[".concat(og,"],hr[").concat(og,"]")),(e=>{e.removeAttribute(og)})),S(o)&&B(o,w)&&t.hasFocus()){P();var i=e.getStart(!0);if(B(i,o)&&B(e.getEnd(!0),o))return f.setAttrib(o,og,a),void R.throttle(o)}D()}},H=()=>{be(sg,(e=>{e.elm&&(f.unbind(e.elm),delete e.elm)}))},P=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(e){}};return t.on("init",(()=>{P(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",L),t.on("keyup compositionend",(e=>{r&&"TABLE"===r.nodeName&&L(e)})),t.on("hide blur",D),t.on("contextmenu longpress",k,!0)})),t.on("remove",H),{isResizable:O,showResizeRect:N,hideResizeRect:D,updateResizeRect:L,destroy:()=>{R.cancel(),r=n=i=null}}},dg=(e,t,r)=>{var n,o=e.document.createRange();return n=o,t.fold((e=>{n.setStartBefore(e.dom)}),((e,t)=>{n.setStart(e.dom,t)}),(e=>{n.setStartAfter(e.dom)})),((e,t)=>{t.fold((t=>{e.setEndBefore(t.dom)}),((t,r)=>{e.setEnd(t.dom,r)}),(t=>{e.setEndAfter(t.dom)}))})(o,r),o},cg=(e,t,r,n,o)=>{var a=e.document.createRange();return a.setStart(t.dom,r),a.setEnd(n.dom,o),a},ug=dl([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),mg=(e,t,r)=>t(xr(r.startContainer),r.startOffset,xr(r.endContainer),r.endOffset);ug.ltr,ug.rtl;var gg=(e,t,r,n)=>({start:e,soffset:t,finish:r,foffset:n}),hg=document.caretPositionFromPoint?(e,t,r)=>{var n,o;return V.from(null===(o=(n=e.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(n,t,r)).bind((t=>{if(null===t.offsetNode)return V.none();var r=e.dom.createRange();return r.setStart(t.offsetNode,t.offset),r.collapse(),V.some(r)}))}:document.caretRangeFromPoint?(e,t,r)=>{var n,o;return V.from(null===(o=(n=e.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(n,t,r))}:V.none,pg=dl([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),vg={before:pg.before,on:pg.on,after:pg.after,cata:(e,t,r,n)=>e.fold(t,r,n),getStart:e=>e.fold(R,R,R)},fg=dl([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),bg={domRange:fg.domRange,relative:fg.relative,exact:fg.exact,exactFromRange:e=>fg.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{var t=(e=>e.match({domRange:e=>xr(e.startContainer),relative:(e,t)=>vg.getStart(e),exact:(e,t,r,n)=>e}))(e);return Mr(t)},range:gg},yg=(e,t)=>{var r=Wt(e);return"input"===r?vg.after(e):q(["br","img"],r)?0===t?vg.before(e):vg.after(e):vg.on(e,t)},wg=(e,t)=>{var r=e.fold(vg.before,yg,vg.after),n=t.fold(vg.before,yg,vg.after);return bg.relative(r,n)},xg=(e,t,r,n)=>{var o=yg(e,t),a=yg(r,n);return bg.relative(o,a)},Cg=(e,t)=>{var r=(t||document).createDocumentFragment();return K(e,(e=>{r.appendChild(e.dom)})),xr(r)},kg=e=>{var t=bg.getWin(e).dom,r=(e,r,n,o)=>cg(t,e,r,n,o),n=(e=>e.match({domRange:e=>{var t=xr(e.startContainer),r=xr(e.endContainer);return xg(t,e.startOffset,r,e.endOffset)},relative:wg,exact:xg}))(e);return((e,t)=>{var r=((e,t)=>t.match({domRange:e=>({ltr:N(e),rtl:V.none}),relative:(t,r)=>({ltr:Ie((()=>dg(e,t,r))),rtl:Ie((()=>V.some(dg(e,r,t))))}),exact:(t,r,n,o)=>({ltr:Ie((()=>cg(e,t,r,n,o))),rtl:Ie((()=>V.some(cg(e,n,o,t,r))))})}))(e,t);return((e,t)=>{var r=t.ltr();return r.collapsed?t.rtl().filter((e=>!1===e.collapsed)).map((e=>ug.rtl(xr(e.endContainer),e.endOffset,xr(e.startContainer),e.startOffset))).getOrThunk((()=>mg(0,ug.ltr,r))):mg(0,ug.ltr,r)})(0,r)})(t,n).match({ltr:r,rtl:r})},Sg=(e,t,r)=>((e,t,r)=>((e,t,r)=>{var n=xr(e.document);return hg(n,t,r).map((e=>gg(xr(e.startContainer),e.startOffset,xr(e.endContainer),e.endOffset)))})(e,t,r))(Mr(xr(r)).dom,e,t).map((e=>{var t=r.createRange();return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),t})).getOrUndefined(),_g=(e,t)=>S(e)&&S(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,Og=(e,t,r)=>null!==((e,t,r)=>{for(var n=e;n&&n!==t;){if(r(n))return n;n=n.parentNode}return null})(e,t,r),Eg=(e,t,r)=>Og(e,t,(e=>e.nodeName===r)),Tg=(e,t)=>$o(e)&&!Og(e,t,Ou),Ag=(e,t,r)=>{var n=t.parentNode;if(n)for(var o,a=new Zn(t,e.getParent(n,e.isBlock)||e.getRoot());o=a[r?"prev":"next"]();)if(so(o))return!0;return!1},Mg=(e,t,r,n,o)=>{var a,i,s=e.getRoot(),l=e.schema.getNonEmptyElements(),d=o.parentNode;if(!d)return V.none();var c=e.getParent(d,e.isBlock)||s;if(n&&so(o)&&t&&e.isEmpty(c))return V.some(Is(d,e.nodeIndex(o)));for(var u=new Zn(o,c);i=u[n?"prev":"next"]();){if("false"===e.getContentEditableParent(i)||Tg(i,s))return V.none();if(to(i)&&i.data.length>0)return Eg(i,s,"A")?V.none():V.some(Is(i,n?i.data.length:0));if(e.isBlock(i)||l[i.nodeName.toLowerCase()])return V.none();a=i}return oo(a)?V.none():r&&a?V.some(Is(a,0)):V.none()},Ng=(e,t,r,n)=>{var o,a=e.getRoot(),i=!1,s=r?n.startContainer:n.endContainer,l=r?n.startOffset:n.endOffset,d=qn(s)&&l===s.childNodes.length,c=e.schema.getNonEmptyElements(),u=r;if($o(s))return V.none();if(qn(s)&&l>s.childNodes.length-1&&(u=!1),ao(s)&&(s=a,l=0),s===a){if(u&&(o=s.childNodes[l>0?l-1:0])){if($o(o))return V.none();if(c[o.nodeName]||Jn(o))return V.none()}if(s.hasChildNodes()){if(l=Math.min(!u&&l>0?l-1:l,s.childNodes.length-1),s=s.childNodes[l],l=to(s)&&d?s.data.length:0,!t&&s===a.lastChild&&Jn(s))return V.none();if(((e,t)=>{for(var r=t;r&&r!==e;){if(uo(r))return!0;r=r.parentNode}return!1})(a,s)||$o(s))return V.none();if(s.hasChildNodes()&&!Jn(s)){o=s;var m=new Zn(s,a);do{if(uo(o)||$o(o)){i=!1;break}if(to(o)&&o.data.length>0){l=u?0:o.data.length,s=o,i=!0;break}if(c[o.nodeName.toLowerCase()]&&!go(o)){l=e.nodeIndex(o),s=o.parentNode,u||l++,i=!0;break}}while(o=u?m.next():m.prev())}}}return t&&(to(s)&&0===l&&Mg(e,d,t,!0,s).each((e=>{s=e.container(),l=e.offset(),i=!0})),qn(s)&&((o=s.childNodes[l])||(o=s.childNodes[l-1]),!o||!so(o)||((e,t)=>{var r;return"A"===(null===(r=e.previousSibling)||void 0===r?void 0:r.nodeName)})(o)||Ag(e,o,!1)||Ag(e,o,!0)||Mg(e,d,t,!0,o).each((e=>{s=e.container(),l=e.offset(),i=!0})))),u&&!t&&to(s)&&l===s.data.length&&Mg(e,d,t,!1,s).each((e=>{s=e.container(),l=e.offset(),i=!0})),i&&s?V.some(Is(s,l)):V.none()},Rg=(e,t)=>{var r=t.collapsed,n=t.cloneRange(),o=Is.fromRangeStart(t);return Ng(e,r,!0,n).each((e=>{r&&Is.isAbove(o,e)||n.setStart(e.container(),e.offset())})),r||Ng(e,r,!1,n).each((e=>{n.setEnd(e.container(),e.offset())})),r&&n.collapse(!0),_g(t,n)?V.none():V.some(n)},Dg=(e,t)=>e.splitText(t),Bg=e=>{var t=e.startContainer,r=e.startOffset,n=e.endContainer,o=e.endOffset;if(t===n&&to(t)){if(r>0&&r<t.data.length)if(t=(n=Dg(t,r)).previousSibling,o>r){var a=Dg(n,o-=r).previousSibling;t=n=a,o=a.data.length,r=0}else o=0}else if(to(t)&&r>0&&r<t.data.length&&(t=Dg(t,r),r=0),to(n)&&o>0&&o<n.data.length){var i=Dg(n,o).previousSibling;n=i,o=i.data.length}return{startContainer:t,startOffset:r,endContainer:n,endOffset:o}},Lg=e=>({walk:(t,r)=>jm(e,t,r),split:Bg,expand:function(t){if("word"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"word"}).type){var r=Zm(e,t,[{inline:"span"}]),n=e.createRng();return n.setStart(r.startContainer,r.startOffset),n.setEnd(r.endContainer,r.endOffset),n}return t},normalize:t=>Rg(e,t).fold(F,(e=>(t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0)))});Lg.compareRanges=_g,Lg.getCaretRangeFromPoint=Sg,Lg.getSelectedNode=fs,Lg.getNode=bs;var Hg,Pg=((e,t)=>{var r=t=>{var r=(e=>{var t=e.dom;return Xr(e)?t.getBoundingClientRect().height:t.offsetHeight})(t);if(r<=0||null===r){var n=un(t,e);return parseFloat(n)||0}return r},n=(e,t)=>ee(t,((t,r)=>{var n=un(e,r),o=void 0===n?0:parseInt(n,10);return isNaN(o)?t:t+o}),0);return{set:(t,r)=>{if(!O(r)&&!r.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+r);var n=t.dom;sn(n)&&(n.style[e]=r+"px")},get:r,getOuter:r,aggregate:n,max:(e,t,r)=>{var o=n(e,r);return t>o?t-o:0}}})("height"),Ig=()=>xr(document),Fg=(e,t)=>e.view(t).fold(N([]),(t=>{var r=e.owner(t),n=Fg(e,r);return[t].concat(n)})),zg=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?V.none():V.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(xr)},owner:e=>Ar(e)}),Vg=e=>"textarea"===Wt(e),Zg=(e,t)=>{var r=(e=>{var t=e.dom.ownerDocument,r=t.body,n=t.defaultView,o=t.documentElement;if(r===e.dom)return Nn(r.offsetLeft,r.offsetTop);var a=Rn(null==n?void 0:n.pageYOffset,o.scrollTop),i=Rn(null==n?void 0:n.pageXOffset,o.scrollLeft),s=Rn(o.clientTop,r.clientTop),l=Rn(o.clientLeft,r.clientLeft);return Dn(e).translate(i-l,a-s)})(e),n=(e=>Pg.get(e))(e);return{element:e,bottom:r.top+n,height:n,pos:r,cleanup:t}},jg=(e,t,r,n)=>{$g(e,((o,a)=>Wg(e,t,r,n)),r)},Ug=(e,t,r,n,o)=>{var a={elm:n.element.dom,alignToTop:o};((e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented())(e,a)||(r(e,t,Bn(t).top,n,o),((e,t)=>{e.dispatch("AfterScrollIntoView",t)})(e,a))},Wg=(e,t,r,n)=>{var o=xr(e.getBody()),a=xr(e.getDoc());o.dom.offsetWidth;var i,s,l,d,c=(i=xr(r.startContainer),s=r.startOffset,l=((e,t)=>{var r=Ir(e);if(0===r.length||Vg(e))return{element:e,offset:t};if(t<r.length&&!Vg(r[t]))return{element:r[t],offset:0};var n=r[r.length-1];return Vg(n)?{element:e,offset:t}:"img"===Wt(n)?{element:n,offset:1}:Yt(n)?{element:n,offset:Co(n).length}:{element:n,offset:Ir(n).length}})(i,s),d=br('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>'),vn(l.element,d),Zg(d,(()=>kn(d))));Ug(e,a,t,c,n),c.cleanup()},qg=(e,t,r,n)=>{var o=xr(e.getDoc());Ug(e,o,r,(e=>Zg(xr(e),T))(t),n)},$g=(e,t,r)=>{var n=r.startContainer,o=r.startOffset,a=r.endContainer,i=r.endOffset;t(xr(n),xr(a));var s=e.dom.createRng();s.setStart(n,o),s.setEnd(a,i),e.selection.setRng(r)},Gg=(e,t,r,n,o)=>{var a=t.pos;if(n)Ln(a.left,a.top,o);else{var i=a.top-r+t.height;Ln(-e.getBody().getBoundingClientRect().left,i,o)}},Kg=(e,t,r,n,o,a)=>{var i=n+r,s=o.pos.top,l=o.bottom,d=l-s>=n;s<r?Gg(e,o,n,!1!==a,t):s>i?Gg(e,o,n,d?!1!==a:!0===a,t):l>i&&!d&&Gg(e,o,n,!0===a,t)},Yg=(e,t,r,n,o)=>{var a=Mr(t).dom.innerHeight;Kg(e,t,r,a,n,o)},Xg=(e,t,r,n,o)=>{var a=Mr(t).dom.innerHeight;Kg(e,t,r,a,n,o);var i=(e=>{var t=Ig(),r=Bn(t),n=((e,t)=>{var r=t.owner(e);return Fg(t,r)})(e,zg),o=Dn(e),a=Q(n,((e,t)=>{var r=Dn(t);return{left:e.left+r.left,top:e.top+r.top}}),{left:0,top:0});return Nn(a.left+o.left+r.left,a.top+o.top+r.top)})(n.element),s=In(window);i.top<s.y?Hn(n.element,!1!==o):i.top>s.bottom&&Hn(n.element,!0===o)},Jg=(e,t,r)=>jg(e,Yg,t,r),Qg=(e,t,r)=>qg(e,t,Yg,r),eh=(e,t,r)=>jg(e,Xg,t,r),th=(e,t,r)=>qg(e,t,Xg,r),rh=(e,t,r)=>{(e.inline?Jg:eh)(e,t,r)},nh=e=>e.dom.focus(),oh=e=>{var t=qr(e).dom;return e.dom===t.activeElement},ah=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ig();return V.from(e.dom.activeElement).map(xr)},ih=(e,t)=>{var r=Yt(t)?Co(t).length:Ir(t).length+1;return e>r?r:e<0?0:e},sh=e=>bg.range(e.start,ih(e.soffset,e.start),e.finish,ih(e.foffset,e.finish)),lh=(e,t)=>!Wn(t.dom)&&(Er(e,t)||Or(e,t)),dh=e=>t=>lh(e,t.start)&&lh(e,t.finish),ch=e=>bg.range(xr(e.startContainer),e.startOffset,xr(e.endContainer),e.endOffset),uh=e=>{var t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),V.some(t)}catch(e){return V.none()}},mh=e=>{var t,r,n,o=(e=>e.inline||Dt.browser.isFirefox())(e)?(t=xr(e.getBody()),(r=Mr(t).dom,n=r.getSelection(),(n&&0!==n.rangeCount?V.from(n.getRangeAt(0)):V.none()).map(ch)).filter(dh(t))):V.none();e.bookmark=o.isSome()?o:e.bookmark},gh=e=>(e.bookmark?e.bookmark:V.none()).bind((t=>{return r=xr(e.getBody()),n=t,V.from(n).filter(dh(r)).map(sh);var r,n})).bind(uh),hh={isEditorUIElement:e=>{var t=e.className.toString();return-1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},ph={setEditorTimeout:(e,t,r)=>((e,t)=>(O(t)||(t=0),setTimeout(e,t)))((()=>{e.removed||t()}),r),setEditorInterval:(e,t,r)=>{var n=((e,t)=>(O(t)||(t=0),setInterval(e,t)))((()=>{e.removed?clearInterval(n):t()}),r);return n}},vh=Bi.DOM,fh=e=>{var t=e.classList;return void 0!==t&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},bh=(e,t)=>{var r=bd(e),n=vh.getParent(t,(t=>(e=>qn(e)&&hh.isEditorUIElement(e))(t)||!!r&&e.dom.is(t,r)));return null!==n},yh=e=>{try{var t=qr(xr(e.getElement()));return ah(t).fold((()=>document.body),(e=>e.dom))}catch(e){return document.body}},wh=(e,t)=>{var r=t.editor;(e=>{var t=Ui((()=>{mh(e)}),0);e.on("init",(()=>{e.inline&&((e,t)=>{var r=()=>{t.throttle()};Bi.DOM.bind(document,"mouseup",r),e.on("remove",(()=>{Bi.DOM.unbind(document,"mouseup",r)}))})(e,t),((e,t)=>{((e,t)=>{e.on("mouseup touchend",(e=>{t.throttle()}))})(e,t),e.on("keyup NodeChange AfterSetSelectionRange",(t=>{(e=>"nodechange"===e.type&&e.selectionChange)(t)||mh(e)}))})(e,t)})),e.on("remove",(()=>{t.cancel()}))})(r);var n=(e,t)=>{ic(e)&&!0!==e.inline&&t(xr(e.getContainer()),"tox-edit-focus")};r.on("focusin",(()=>{var t=e.focusedEditor;fh(yh(r))&&n(r,gr),t!==r&&(t&&t.dispatch("blur",{focusedEditor:r}),e.setActive(r),e.focusedEditor=r,r.dispatch("focus",{blurredEditor:t}),r.focus(!0))})),r.on("focusout",(()=>{ph.setEditorTimeout(r,(()=>{var t=e.focusedEditor;fh(yh(r))&&t===r||n(r,pr),bh(r,yh(r))||t!==r||(r.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)}))})),Hg||(Hg=t=>{var r=e.activeEditor;r&&Kr(t).each((t=>{var n=t;n.ownerDocument===document&&(n===document.body||bh(r,n)||e.focusedEditor!==r||(r.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null))}))},vh.bind(document,"focusin",Hg))},xh=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&Hg&&(vh.unbind(document,"focusin",Hg),Hg=null)},Ch=(e,t)=>{((e,t)=>(e=>e.collapsed?V.from(bs(e.startContainer,e.startOffset)).map(xr):V.none())(t).bind((t=>Ro(t)?V.some(t):Er(e,t)?V.none():V.some(e))))(xr(e.getBody()),t).bind((e=>ku(e.dom))).fold((()=>{e.selection.normalize()}),(t=>e.selection.setRng(t.toRange())))},kh=e=>{if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},Sh=e=>e.inline?(e=>{var t,r,n=e.getBody();return n&&(t=xr(n),oh(t)||(r=t,ah(qr(r)).filter((e=>r.dom.contains(e.dom)))).isSome())})(e):(e=>S(e.iframeElement)&&oh(xr(e.iframeElement)))(e),_h=e=>e.editorManager.setActive(e),Oh=(e,t,r,n,o)=>{var a=r?t.startContainer:t.endContainer,i=r?t.startOffset:t.endOffset;return V.from(a).map(xr).map((e=>n&&t.collapsed?e:Fr(e,o(e,i)).getOr(e))).bind((e=>Kt(e)?V.some(e):Nr(e).filter(Kt))).map((e=>e.dom)).getOr(e)},Eh=function(e,t){return Oh(e,t,!0,arguments.length>2&&void 0!==arguments[2]&&arguments[2],((e,t)=>Math.min(Zr(e),t)))},Th=function(e,t){return Oh(e,t,!1,arguments.length>2&&void 0!==arguments[2]&&arguments[2],((e,t)=>t>0?t-1:t))},Ah=(e,t)=>{for(var r=e;e&&to(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||r},Mh=(e,t)=>G(t,(t=>{var r=e.dispatch("GetSelectionRange",{range:t});return r.range!==t?r.range:t})),Nh=["img","br"],Rh=e=>{var t=ko(e).filter((e=>0!==e.trim().length||e.indexOf(yo)>-1)).isSome();return t||q(Nh,Wt(e))||(e=>Gt(e)&&"false"===nr(e,"contenteditable"))(e)},Dh="[data-mce-autocompleter]",Bh=(e,t)=>{if(Lh(xr(e.getBody())).isNone()){var r=br('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());yn(r,xr(t.extractContents())),t.insertNode(r.dom),Nr(r).each((e=>e.dom.normalize())),(i=r,n=i,o=Rh,a=e=>{for(var t=Ir(e),r=t.length-1;r>=0;r--){var n=t[r];if(o(n))return V.some(n);var i=a(n);if(i.isSome())return i}return V.none()},a(n)).map((t=>{e.selection.setCursorLocation(t.dom,(e=>"img"===Wt(e)?1:ko(e).fold((()=>Ir(e).length),(e=>e.length)))(t))}))}var n,o,a,i},Lh=e=>rn(e,Dh),Hh={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Ph=(e,t,r)=>{var n=r?"lastChild":"firstChild",o=r?"prev":"next";if(e[n])return e[n];if(e!==t){var a=e[o];if(a)return a;for(var i=e.parent;i&&i!==t;i=i.parent)if(a=i[o])return a}},Ih=e=>{var t,r=null!==(t=e.value)&&void 0!==t?t:"";if(!ga(r))return!1;var n=e.parent;return!n||"span"===n.name&&!n.attr("style")||!/^[ ]+$/.test(r)},Fh=e=>{var t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class zh{static create(e,t){var r=new zh(e,Hh[e]||1);return t&&be(t,((e,t)=>{r.attr(t,e)})),r}constructor(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}replace(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t}attr(e,t){var r=this;if(!v(e))return S(e)&&be(e,((e,t)=>{r.attr(t,e)})),r;var n=r.attributes;if(n){if(void 0!==t){if(null===t){if(e in n.map){delete n.map[e];for(var o=n.length;o--;)if(n[o].name===e)return n.splice(o,1),r}return r}if(e in n.map){for(var a=n.length;a--;)if(n[a].name===e){n[a].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,r}return n.map[e]}}clone(){var e=this,t=new zh(e.name,e.type),r=e.attributes;if(r){var n=[];n.map={};for(var o=0,a=r.length;o<a;o++){var i=r[o];"id"!==i.name&&(n[n.length]={name:i.name,value:i.value},n.map[i.name]=i.value)}t.attributes=n}return t.value=e.value,t}wrap(e){var t=this;return t.parent&&(t.parent.insert(e,t),e.append(t)),t}unwrap(){for(var e=this,t=e.firstChild;t;){var r=t.next;e.insert(t,e,!0),t=r}e.remove()}remove(){var e=this,t=e.parent,r=e.next,n=e.prev;return t&&(t.firstChild===e?(t.firstChild=r,r&&(r.prev=null)):n&&(n.next=r),t.lastChild===e?(t.lastChild=n,n&&(n.next=null)):r&&(r.prev=n),e.parent=e.next=e.prev=null),e}append(e){var t=this;e.parent&&e.remove();var r=t.lastChild;return r?(r.next=e,e.prev=r,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e}insert(e,t,r){e.parent&&e.remove();var n=t.parent||this;return r?(t===n.firstChild?n.firstChild=e:t.prev&&(t.prev.next=e),e.prev=t.prev,e.next=t,t.prev=e):(t===n.lastChild?n.lastChild=e:t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e),e.parent=n,e}getAll(e){for(var t=[],r=this.firstChild;r;r=Ph(r,this))r.name===e&&t.push(r);return t}children(){for(var e=[],t=this.firstChild;t;t=t.next)e.push(t);return e}empty(){var e=this;if(e.firstChild){for(var t=[],r=e.firstChild;r;r=Ph(r,e))t.push(r);for(var n=t.length;n--;){var o=t[n];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,o=this,a=o.firstChild;if(Fh(o))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(e[a.name])return!1;if(Fh(a))return!1}if(8===a.type)return!1;if(3===a.type&&!Ih(a))return!1;if(3===a.type&&a.parent&&r[a.parent.name]&&ga(null!==(t=a.value)&&void 0!==t?t:""))return!1;if(n&&n(a))return!1}while(a=Ph(a,o));return!0}walk(e){return Ph(this,null,e)}}var Vh=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=e.toLowerCase();if(-1!==n.indexOf("[if ",r)&&((e,t)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(t)))(n,r)){var o=n.indexOf("[endif]",r);return n.indexOf(">",o)}if(t){var a=n.indexOf(">",r);return-1!==a?a:n.length}var i=/--!?>/g;i.lastIndex=r;var s=i.exec(e);return s?s.index+s[0].length:n.length},Zh=(e,t,r)=>{for(var n=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,o=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,a=e.getVoidElements(),i=1,s=r;0!==i;)for(n.lastIndex=s;;){var l=n.exec(t);if(null===l)return s;if("!"===l[1]){s=qe(l[2],"--")?Vh(t,!1,l.index+3):Vh(t,!0,l.index+1);break}o.lastIndex=n.lastIndex;var d=o.exec(t);if(!w(d)&&d.index===n.lastIndex){"/"===l[1]?i-=1:Ee(a,l[2])||(i+=1),s=n.lastIndex+d[0].length;break}}return s},jh=(e,t)=>{for(var r,n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,o=e.schema,a=((e,t)=>{var r=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(r,"")})(e.getTempAttrs(),t),i=o.getVoidElements();r=n.exec(a);){var s,l=n.lastIndex,d=r[0].length;s=i[r[1]]?l:Zh(o,a,l),a=a.substring(0,l-d)+a.substring(s),n.lastIndex=l-d}return Zo(a)},Uh=jh,Wh=e=>{var t=zn(e,"[data-mce-bogus]");K(t,(e=>{"all"===nr(e,"data-mce-bogus")?kn(e):To(e)?(vn(e,wr(bo)),kn(e)):Sn(e)}))},qh=e=>{var t=zn(e,"input");K(t,(e=>{ir(e,"name")}))},$h=(e,t,r)=>{var n;return n="raw"===t.format?Ht.trim(Uh(e.serializer,r.innerHTML)):"text"===t.format?((e,t)=>{var r=e.getDoc(),n=qr(xr(e.getBody())),o=yr("div",r);tr(o,"data-mce-bogus","all"),cn(o,{position:"fixed",left:"-9999999px",top:"0"}),En(o,t.innerHTML),Wh(o),qh(o);var a=(e=>jr(e)?e:xr(Ar(e).dom.body))(n);yn(a,o);var i=Zo(o.dom.innerText);return kn(o),i})(e,r):"tree"===t.format?e.serializer.serialize(r,t):((e,t)=>{var r=Nl(e),n=new RegExp("^(<".concat(r,"[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/").concat(r,">[\r\n]*|<br \\/>[\r\n]*)$"));return t.replace(n,"")})(e,e.serializer.serialize(r,t)),"text"!==t.format&&!Bo(xr(r))&&v(n)?Ht.trim(n):n},Gh=Ht.makeMap,Kh=e=>{var t=[],r=(e=e||{}).indent,n=Gh(e.indent_before||""),o=Gh(e.indent_after||""),a=ni.getEncodeFunc(e.entity_encoding||"raw",e.entities),i="xhtml"!==e.element_format;return{start:(e,s,l)=>{if(r&&n[e]&&t.length>0){var d=t[t.length-1];d.length>0&&"\n"!==d&&t.push("\n")}if(t.push("<",e),s)for(var c=0,u=s.length;c<u;c++){var m=s[c];t.push(" ",m.name,'="',a(m.value,!0),'"')}if(t[t.length]=!l||i?">":" />",l&&r&&o[e]&&t.length>0){var g=t[t.length-1];g.length>0&&"\n"!==g&&t.push("\n")}},end:e=>{var n;t.push("</",e,">"),r&&o[e]&&t.length>0&&(n=t[t.length-1]).length>0&&"\n"!==n&&t.push("\n")},text:(e,r)=>{e.length>0&&(t[t.length]=r?e:a(e))},cdata:e=>{t.push("<![CDATA[",e,"]]>")},comment:e=>{t.push("\x3c!--",e,"--\x3e")},pi:(e,n)=>{n?t.push("<?",e," ",a(n),"?>"):t.push("<?",e,"?>"),r&&t.push("\n")},doctype:e=>{t.push("<!DOCTYPE",e,">",r?"\n":"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},Yh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hi(),r=Kh(e);return e.validate=!("validate"in e)||e.validate,{serialize:n=>{var o=e.validate,a={3:e=>{var t;r.text(null!==(t=e.value)&&void 0!==t?t:"",e.raw)},8:e=>{var t;r.comment(null!==(t=e.value)&&void 0!==t?t:"")},7:e=>{r.pi(e.name,e.value)},10:e=>{var t;r.doctype(null!==(t=e.value)&&void 0!==t?t:"")},4:e=>{var t;r.cdata(null!==(t=e.value)&&void 0!==t?t:"")},11:e=>{var t=e;if(t=t.firstChild)do{i(t)}while(t=t.next)}};r.reset();var i=e=>{var n,s=a[e.type];if(s)s(e);else{var l=e.name,d=l in t.getVoidElements(),c=e.attributes;if(o&&c&&c.length>1){var u=[];u.map={};var m=t.getElementRule(e.name);if(m){for(var g=0,h=m.attributesOrder.length;g<h;g++){var p=m.attributesOrder[g];if(p in c.map){var v=c.map[p];u.map[p]=v,u.push({name:p,value:v})}}for(var f=0,b=c.length;f<b;f++){var y=c[f].name;if(!(y in u.map)){var w=c.map[y];u.map[y]=w,u.push({name:y,value:w})}}c=u}}if(r.start(l,c,d),!d){var x=e.firstChild;if(x){"pre"!==l&&"textarea"!==l||3!==x.type||"\n"!==(null===(n=x.value)||void 0===n?void 0:n[0])||r.text("\n",!0);do{i(x)}while(x=x.next)}r.end(l)}}};return 1!==n.type||e.inner?3===n.type?a[3](n):a[11](n):i(n),r.getContent()}}},Xh=new Set;K(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],(e=>{Xh.add(e)}));var Jh=["font","text-decoration","text-emphasis"],Qh=(e,t)=>ve(e.parseStyle(e.getAttrib(t,"style"))),ep=(e,t,r)=>{var n=Qh(e,t),o=Qh(e,r),a=n=>{var o,a,i=null!==(o=e.getStyle(t,n))&&void 0!==o?o:"",s=null!==(a=e.getStyle(r,n))&&void 0!==a?a:"";return Je(i)&&Je(s)&&i!==s};return $(n,(e=>{var t=t=>$(t,(t=>t===e));if(!t(o)&&t(Jh)){var r=J(o,(e=>$(Jh,(t=>qe(e,t)))));return $(r,a)}return a(e)}))},tp=(e,t,r)=>V.from(r.container()).filter(to).exists((n=>{var o=e?0:-1;return t(n.data.charAt(r.offset()+o))})),rp=B(tp,!0,Vu),np=B(tp,!1,Vu),op=e=>{var t=e.container();return to(t)&&(0===t.data.length||Vo(t.data)&&Km.isBookmarkNode(t.parentNode))},ap=(e,t)=>r=>Uc(e?0:-1,r).filter(t).isSome(),ip=e=>lo(e)&&"block"===un(xr(e),"display"),sp=e=>uo(e)&&!(e=>qn(e)&&"all"===e.getAttribute("data-mce-bogus"))(e),lp=ap(!0,ip),dp=ap(!1,ip),cp=ap(!0,ho),up=ap(!1,ho),mp=ap(!0,Jn),gp=ap(!1,Jn),hp=ap(!0,sp),pp=ap(!1,sp),vp=(e,t)=>((e,t,r)=>Er(t,e)?Dr(e,(e=>r(e)||Or(e,t))).slice(0,-1):[])(e,t,F),fp=(e,t)=>[e].concat(vp(e,t)),bp=(e,t,r)=>yu(e,t,r,op),yp=(e,t)=>re(fp(xr(t.container()),e),Oo),wp=(e,t,r)=>bp(e,t.dom,r).forall((e=>yp(t,r).fold((()=>!jc(e,r,t.dom)),(n=>!jc(e,r,t.dom)&&Er(n,xr(e.container())))))),xp=(e,t,r)=>yp(t,r).fold((()=>bp(e,t.dom,r).forall((e=>!jc(e,r,t.dom)))),(t=>bp(e,t.dom,r).isNone())),Cp=B(xp,!1),kp=B(xp,!0),Sp=B(wp,!1),_p=B(wp,!0),Op=e=>Qc(e).exists(To),Ep=(e,t,r)=>{var n=J(fp(xr(r.container()),t),Oo),o=me(n).getOr(t);return fu(e,o.dom,r).filter(Op)},Tp=(e,t)=>Qc(t).exists(To)||Ep(!0,e,t).isSome(),Ap=(e,t)=>(e=>V.from(e.getNode(!0)).map(xr))(t).exists(To)||Ep(!1,e,t).isSome(),Mp=B(Ep,!1),Np=B(Ep,!0),Rp=e=>Is.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),Dp=(e,t)=>{var r=J(fp(xr(t.container()),e),Oo);return me(r).getOr(e)},Bp=(e,t)=>Rp(t)?np(t):np(t)||Cu(Dp(e,t).dom,t).exists(np),Lp=(e,t)=>Rp(t)?rp(t):rp(t)||xu(Dp(e,t).dom,t).exists(rp),Hp=e=>Qc(e).bind((e=>en(e,Kt))).exists((e=>(e=>q(["pre","pre-wrap"],e))(un(e,"white-space")))),Pp=(e,t)=>r=>{return n=new Zn(r,e)[t](),S(n)&&uo(n)&&Rc(n);var n},Ip=(e,t)=>!Hp(t)&&(((e,t)=>((e,t)=>Cu(e.dom,t).isNone())(e,t)||((e,t)=>xu(e.dom,t).isNone())(e,t)||Cp(e,t)||kp(e,t)||Ap(e,t)||Tp(e,t))(e,t)||Bp(e,t)||Lp(e,t)),Fp=(e,t)=>!Hp(t)&&(Cp(e,t)||Sp(e,t)||Ap(e,t)||Bp(e,t)||((e,t)=>{var r=Cu(e.dom,t).getOr(t),n=Pp(e.dom,"prev");return t.isAtStart()&&(n(t.container())||n(r.container()))})(e,t)),zp=(e,t)=>!Hp(t)&&(kp(e,t)||_p(e,t)||Tp(e,t)||Lp(e,t)||((e,t)=>{var r=xu(e.dom,t).getOr(t),n=Pp(e.dom,"next");return t.isAtEnd()&&(n(t.container())||n(r.container()))})(e,t)),Vp=(e,t)=>Fp(e,t)||zp(e,(e=>{var t=e.container(),r=e.offset();return to(t)&&r<t.data.length?Is(t,r+1):e})(t)),Zp=(e,t)=>zu(e.charAt(t)),jp=(e,t)=>Vu(e.charAt(t)),Up=(e,t,r)=>{var n=t.data,o=Is(t,0);return r||!Zp(n,0)||Vp(e,o)?!!(r&&jp(n,0)&&Fp(e,o))&&(t.data=yo+n.slice(1),!0):(t.data=" "+n.slice(1),!0)},Wp=(e,t,r)=>{var n=t.data,o=Is(t,n.length-1);return r||!Zp(n,n.length-1)||Vp(e,o)?!!(r&&jp(n,n.length-1)&&zp(e,o))&&(t.data=n.slice(0,-1)+yo,!0):(t.data=n.slice(0,-1)+" ",!0)},qp=(e,t)=>{var r=t.container();if(!to(r))return V.none();if((e=>{var t=e.container();return to(t)&&We(t.data,yo)})(t)){var n=Up(e,r,!1)||(e=>{var t=e.data,r=(e=>{var t=e.split("");return G(t,((e,r)=>zu(e)&&r>0&&r<t.length-1&&Zu(t[r-1])&&Zu(t[r+1])?" ":e)).join("")})(t);return r!==t&&(e.data=r,!0)})(r)||Wp(e,r,!1);return zt(n,t)}if(Vp(e,t)){var o=Up(e,r,!0)||Wp(e,r,!0);return zt(o,t)}return V.none()},$p=(e,t,r)=>{if(0!==r){var n=xr(e),o=Qr(n,Oo).getOr(n),a=e.data.slice(t,t+r),i=t+r>=e.data.length&&zp(o,Is(e,e.data.length)),s=0===t&&Fp(o,Is(e,0));e.replaceData(t,r,va(a,4,s,i))}},Gp=(e,t)=>{var r=e.data.slice(t),n=r.length-Ye(r).length;$p(e,t,n)},Kp=(e,t)=>{var r=e.data.slice(0,t),n=r.length-Xe(r).length;$p(e,t-n,n)},Yp=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=Xe(e.data).length,a=n?e:t,i=n?t:e;return n?a.appendData(i.data):a.insertData(0,i.data),kn(xr(i)),r&&Gp(a,o),a},Xp=(e,t)=>((e,t)=>{var r=e.container(),n=e.offset();return!Is.isTextPosition(e)&&r===t.parentNode&&n>Is.before(t).offset()})(t,e)?Is(t.container(),t.offset()-1):t,Jp=e=>{return da(e.previousSibling)?V.some((t=e.previousSibling,to(t)?Is(t,t.data.length):Is.after(t))):e.previousSibling?Su(e.previousSibling):V.none();var t},Qp=e=>{return da(e.nextSibling)?V.some((t=e.nextSibling,to(t)?Is(t,0):Is.before(t))):e.nextSibling?ku(e.nextSibling):V.none();var t},ev=(e,t,r)=>((e,t,r)=>e?((e,t)=>Qp(t).orThunk((()=>Jp(t))).orThunk((()=>((e,t)=>xu(e,Is.after(t)).orThunk((()=>Cu(e,Is.before(t)))))(e,t))))(t,r):((e,t)=>Jp(t).orThunk((()=>Qp(t))).orThunk((()=>((e,t)=>V.from(t.previousSibling?t.previousSibling:t.parentNode).bind((t=>Cu(e,Is.before(t)))).orThunk((()=>xu(e,Is.after(t)))))(e,t))))(t,r))(e,t,r).map(B(Xp,r)),tv=(e,t,r)=>{r.fold((()=>{e.focus()}),(r=>{e.selection.setRng(r.toRange(),t)}))},rv=(e,t)=>t&&Ee(e.schema.getBlockElements(),Wt(t)),nv=e=>{if(xa(e)){var t=br('<br data-mce-bogus="1">');return Cn(e),yn(e,t),V.some(Is.before(t.dom))}return V.none()},ov=function(e,t,r){var n,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=ev(t,e.getBody(),r.dom),i=Qr(r,B(rv,e),(n=e.getBody(),e=>e.dom===n)),s=((e,t,r)=>{var n,o,a,i,s=Br(e).filter(Yt),l=Lr(e).filter(Yt);return kn(e),(n=s,o=l,a=t,i=(e,t,n)=>{var o=e.dom,a=t.dom,i=o.data.length;return Yp(o,a,r),n.container()===a?Is(o,i):n},n.isSome()&&o.isSome()&&a.isSome()?V.some(i(n.getOrDie(),o.getOrDie(),a.getOrDie())):V.none()).orThunk((()=>(r&&(s.each((e=>Kp(e.dom,e.dom.length))),l.each((e=>Gp(e.dom,0)))),t)))})(r,a,((e,t)=>Ee(e.schema.getTextInlineElements(),Wt(t)))(e,r));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):i.bind(nv).fold((()=>{o&&tv(e,t,s)}),(r=>{o&&tv(e,t,V.some(r))}))},av=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,iv=(e,t)=>Sr(xr(t),nd(e))&&!Da(e.schema,t)&&e.dom.isEditable(t),sv=e=>{var t;return"rtl"===Bi.DOM.getStyle(e,"direction",!0)||(e=>av.test(e))(null!==(t=e.textContent)&&void 0!==t?t:"")},lv=(e,t,r)=>{var n=((e,t,r)=>J(Bi.DOM.getParents(r.container(),"*",t),e))(e,t,r);return V.from(n[n.length-1])},dv=(e,t)=>{var r=t.container(),n=t.offset();return e?qo(r)?to(r.nextSibling)?Is(r.nextSibling,0):Is.after(r):Ko(t)?Is(r,n+1):t:qo(r)?to(r.previousSibling)?Is(r.previousSibling,r.previousSibling.data.length):Is.before(r):Yo(t)?Is(r,n-1):t},cv=B(dv,!0),uv=B(dv,!1),mv=(e,t)=>{var r=e=>e.stopImmediatePropagation();e.on("beforeinput input",r,!0),e.getDoc().execCommand(t),e.off("beforeinput input",r)},gv=e=>mv(e,"Delete"),hv=e=>Ao(e)||No(e),pv=(e,t)=>Er(e,t)?en(t,hv,(e=>t=>Pt(Nr(t),e,Or))(e)):V.none(),vv=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},fv=(e,t,r)=>Ft(ku(r),Su(r),((n,o)=>{var a=dv(!0,n),i=dv(!1,o),s=dv(!1,t);return e?xu(r,s).exists((e=>e.isEqual(i)&&t.isEqual(a))):Cu(r,s).exists((e=>e.isEqual(a)&&t.isEqual(i)))})).getOr(!0),bv=e=>{var t;return(8===qt(t=e)||"#comment"===Wt(t)?Br(e):Vr(e)).bind(bv).orThunk((()=>V.some(e)))},yv=function(e,t,r){var n,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.deleteContents();var a,i=bv(r).getOr(r),s=xr(null!==(n=e.dom.getParent(i.dom,e.dom.isBlock))&&void 0!==n?n:r.dom);if(s.dom===e.getBody()?vv(e,o):xa(s)&&(Io(s),o&&e.selection.setCursorLocation(s.dom,0)),!Or(r,s)){var l=Pt(Nr(s),r)?[]:Nr(a=s).map(Ir).map((e=>J(e,(e=>!Or(a,e))))).getOr([]);K(l.concat(Ir(r)),(e=>{Or(e,s)||Er(e,s)||!xa(e)||kn(e)}))}},wv=e=>zn(e,"td,th"),xv=(e,t)=>({start:e,end:t}),Cv=dl([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),kv=(e,t)=>nn(xr(e),"td,th",t),Sv=e=>!Or(e.start,e.end),_v=(e,t)=>Qu(e.start,t).bind((r=>Qu(e.end,t).bind((e=>zt(Or(r,e),r))))),Ov=e=>t=>_v(t,e).map((e=>((e,t,r)=>({rng:e,table:t,cells:r}))(t,e,wv(e)))),Ev=(e,t,r,n)=>{if(r.collapsed||!e.forall(Sv))return V.none();if(t.isSameTable){var o=e.bind(Ov(n));return V.some({start:o,end:o})}var a=kv(r.startContainer,n),i=kv(r.endContainer,n),s=a.bind((e=>t=>Qu(t,e).bind((e=>ge(wv(e)).map((e=>xv(t,e))))))(n)).bind(Ov(n)),l=i.bind((e=>t=>Qu(t,e).bind((e=>me(wv(e)).map((e=>xv(e,t))))))(n)).bind(Ov(n));return V.some({start:s,end:l})},Tv=(e,t)=>ne(e,(e=>Or(e,t))),Av=e=>Ft(Tv(e.cells,e.rng.start),Tv(e.cells,e.rng.end),((t,r)=>e.cells.slice(t,r+1))),Mv=(e,t)=>{var{startTable:r,endTable:n}=t,o=e.cloneRange();return r.each((e=>o.setStartAfter(e.dom))),n.each((e=>o.setEndBefore(e.dom))),o},Nv=(e,t)=>{var r=(e=>t=>Or(e,t))(e),n=((e,t)=>{var r=kv(e.startContainer,t),n=kv(e.endContainer,t);return Ft(r,n,xv)})(t,r),a=((e,t)=>{var r=e=>Qu(xr(e),t),n=r(e.startContainer),o=r(e.endContainer),a=n.isSome(),i=o.isSome(),s=Ft(n,o,Or).getOr(!1);return{startTable:n,endTable:o,isStartInTable:a,isEndInTable:i,isSameTable:s,isMultiTable:!s&&a&&i}})(t,r);return((e,t,r)=>e.exists((e=>((e,t)=>!Sv(e)&&_v(e,t).exists((e=>{var t=e.dom.rows;return 1===t.length&&1===t[0].cells.length})))(e,r)&&rm(e.start,t))))(n,t,r)?n.map((e=>Cv.singleCellTable(t,e.start))):a.isMultiTable?((e,t,r,n)=>Ev(e,t,r,n).bind((e=>{var{start:n,end:o}=e,a=n.bind(Av).getOr([]),i=o.bind(Av).getOr([]);if(a.length>0&&i.length>0){var s=Mv(r,t);return V.some(Cv.multiTable(a,i,s))}return V.none()})))(n,a,t,r):((e,t,r,n)=>Ev(e,t,r,n).bind((e=>{var{start:t,end:r}=e;return t.or(r)})).bind((e=>{var{isSameTable:n}=t,a=Av(e).getOr([]);if(n&&e.cells.length===a.length)return V.some(Cv.fullTable(e.table));if(a.length>0){if(n)return V.some(Cv.partialTable(a,V.none()));var i=Mv(r,t);return V.some(Cv.partialTable(a,V.some(o(o({},t),{},{rng:i}))))}return V.none()})))(n,a,t,r)},Rv=e=>K(e,(e=>{ir(e,"contenteditable"),Io(e)})),Dv=(e,t,r,n)=>{var o=r.cloneRange();n?(o.setStart(r.startContainer,r.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(r.endContainer,r.endOffset)),Pv(e,o,t,!1).each((e=>e()))},Bv=e=>{var t=Ju(e),r=xr(e.selection.getNode());mo(r.dom)&&xa(r)?e.selection.setCursorLocation(r.dom,0):e.selection.collapse(!0),t.length>1&&$(t,(e=>Or(e,r)))&&tr(r,"data-mce-selected","1")},Lv=(e,t,r)=>V.some((()=>{var n=e.selection.getRng(),o=r.bind((r=>{var{rng:o,isStartInTable:a}=r,i=((e,t)=>V.from(e.dom.getParent(t,e.dom.isBlock)).map(xr))(e,a?o.endContainer:o.startContainer);o.deleteContents(),((e,t,r)=>{r.each((r=>{t?kn(r):(Io(r),e.selection.setCursorLocation(r.dom,0))}))})(e,a,i.filter(xa));var s=a?t[0]:t[t.length-1];return Dv(e,s,n,a),xa(s)?V.none():V.some(a?t.slice(1):t.slice(0,-1))})).getOr(t);Rv(o),Bv(e)})),Hv=(e,t,r,n)=>V.some((()=>{var o=e.selection.getRng(),a=t[0],i=r[r.length-1];Dv(e,a,o,!0),Dv(e,i,o,!1);var s=xa(a)?t:t.slice(1),l=xa(i)?r:r.slice(0,-1);Rv(s.concat(l)),n.deleteContents(),Bv(e)})),Pv=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return V.some((()=>{yv(e,t,r,n)}))},Iv=(e,t)=>V.some((()=>ov(e,!1,t))),Fv=(e,t)=>re(fp(t,e),Do),zv=(e,t)=>re(fp(t,e),Qt("caption")),Vv=(e,t)=>V.some((()=>{Io(t),e.selection.setCursorLocation(t.dom,0)})),Zv=(e,t)=>e?mp(t):gp(t),jv=(e,t,r)=>{var n=xr(e.getBody());return zv(n,r).fold((()=>((e,t,r,n)=>{var o=Is.fromRangeStart(e.selection.getRng());return Fv(r,n).bind((n=>xa(n)?Vv(e,n):((e,t,r,n,o)=>bu(r,e.getBody(),o).bind((e=>Fv(t,xr(e.getNode())).bind((e=>Or(e,n)?V.none():V.some(T))))))(e,r,t,n,o)))})(e,t,n,r).orThunk((()=>zt(((e,t)=>{var r=Is.fromRangeStart(e.selection.getRng());return Zv(t,r)||fu(t,e.getBody(),r).exists((e=>Zv(t,e)))})(e,t),T)))),(r=>((e,t,r,n)=>{var o=Is.fromRangeStart(e.selection.getRng());return xa(n)?Vv(e,n):((e,t,r,n,o)=>bu(r,e.getBody(),o).fold((()=>V.some(T)),(a=>((e,t,r,n)=>ku(e.dom).bind((o=>Su(e.dom).map((e=>t?r.isEqual(o)&&n.isEqual(e):r.isEqual(e)&&n.isEqual(o))))).getOr(!0))(n,r,o,a)?((e,t)=>Vv(e,t))(e,n):((e,t,r)=>zv(e,xr(r.getNode())).fold((()=>V.some(T)),(e=>zt(!Or(e,t),T))))(t,n,a))))(e,r,t,n,o)})(e,t,n,r)))},Uv=(e,t)=>{var r=xr(e.selection.getStart(!0)),n=Ju(e);return e.selection.isCollapsed()&&0===n.length?jv(e,t,r):((e,t,r)=>{var n=xr(e.getBody()),o=e.selection.getRng();return 0!==r.length?Lv(e,r,V.none()):((e,t,r,n)=>zv(t,n).fold((()=>((e,t,r)=>Nv(t,r).bind((t=>t.fold(B(Pv,e),B(Iv,e),B(Lv,e),B(Hv,e)))))(e,t,r)),(t=>((e,t)=>Vv(e,t))(e,t))))(e,n,o,t)})(e,r,n)},Wv=(e,t)=>{for(var r=t;r&&r!==e;){if(co(r)||uo(r))return r;r=r.parentNode}return null},qv=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],$v=Ht.each,Gv=e=>{var t=e.dom,r=new Set(e.serializer.getTempAttrs()),n=e=>$(qv,(t=>qe(e,t)))||r.has(e);return{compare:(e,r)=>{if(e.nodeName!==r.nodeName||e.nodeType!==r.nodeType)return!1;var o=e=>{var r={};return $v(t.getAttribs(e),(o=>{var a=o.nodeName.toLowerCase();"style"===a||n(a)||(r[a]=t.getAttrib(e,a))})),r},a=(e,t)=>{for(var r in e)if(Ee(e,r)){var n=t[r];if(C(n))return!1;if(e[r]!==n)return!1;delete t[r]}for(var o in t)if(Ee(t,o))return!1;return!0};if(qn(e)&&qn(r)){if(!a(o(e),o(r)))return!1;if(!a(t.parseStyle(t.getAttrib(e,"style")),t.parseStyle(t.getAttrib(r,"style"))))return!1}return!Fu(e)&&!Fu(r)},isAttributeInternal:n}},Kv=(e,t,r,n)=>{for(var o=r.name,a=0,i=e.length;a<i;a++){var s=e[a];if(s.name===o){var l=n.nodes[o];l?l.nodes.push(r):n.nodes[o]={filter:s,nodes:[r]}}}if(r.attributes)for(var d=0,c=t.length;d<c;d++){var u=t[d],m=u.name;if(m in r.attributes.map){var g=n.attributes[m];g?g.nodes.push(r):n.attributes[m]={filter:u,nodes:[r]}}}},Yv=(e,t)=>{var r=(e,r)=>{be(e,(e=>{var n=he(e.nodes);K(e.filter.callbacks,(o=>{for(var a=n.length-1;a>=0;a--){var i=n[a];(r?void 0!==i.attr(e.filter.name):i.name===e.filter.name)&&!k(i.parent)||n.splice(a,1)}n.length>0&&o(n,e.filter.name,t)}))}))};r(e.nodes,!1),r(e.attributes,!0)},Xv=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=((e,t,r)=>{var n={nodes:{},attributes:{}};return r.firstChild&&((r,o)=>{for(var a=r;a=a.walk();)Kv(e,t,a,n)})(r),n})(e,t,r);Yv(o,n)},Jv=(e,t,r,n)=>{if((e.pad_empty_with_br||t.insert)&&r(n)){var o=new zh("br",1);t.insert&&o.attr("data-mce-bogus","1"),n.empty().append(o)}else n.empty().append(new zh("#text",3)).value=yo},Qv=(e,t)=>{var r=null==e?void 0:e.firstChild;return S(r)&&r===e.lastChild&&r.name===t},ef=(e,t,r,n)=>n.isEmpty(t,r,(t=>((e,t)=>{var r=e.getElementRule(t.name);return!0===(null==r?void 0:r.paddEmpty)})(e,t))),tf=e=>{for(var t,r=e;r;r=r.parent){var n=r.attr("contenteditable");if("false"===n)break;"true"===n&&(t=r)}return V.from(t)},rf=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.parent;if(r.getSpecialElements()[t.name])t.empty().remove();else{var o=t.children();for(var a of o)n&&!r.isValidChild(n.name,a.name)&&e(a,r,n);t.unwrap()}},nf=function(e,t,r){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:T,o=t.getTextBlockElements(),a=t.getNonEmptyElements(),i=t.getWhitespaceElements(),s=Ht.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,d=e=>e!==r&&!s[e.name],c=0;c<e.length;c++){var u=e[c],m=void 0,g=void 0,h=void 0;if(u.parent&&!l.has(u))if(o[u.name]&&"li"===u.parent.name){for(var p=u.next;p&&o[p.name];)p.name="li",l.add(p),u.parent.insert(p,u.parent),p=p.next;u.unwrap()}else{var v=[u];for(m=u.parent;m&&!t.isValidChild(m.name,u.name)&&d(m);m=m.parent)v.push(m);if(m&&v.length>1)if(t.isValidChild(m.name,u.name)){v.reverse(),n(g=v[0].clone());for(var f=g,b=0;b<v.length-1;b++){t.isValidChild(f.name,v[b].name)&&b>0?(n(h=v[b].clone()),f.append(h)):h=f;for(var y=v[b].firstChild;y&&y!==v[b+1];){var w=y.next;h.append(y),y=w}f=h}ef(t,a,i,g)?m.insert(u,v[0],!0):(m.insert(g,v[0],!0),m.insert(u,g)),m=v[0],(ef(t,a,i,m)||Qv(m,"br"))&&m.empty().remove()}else rf(u,t);else if(u.parent){if("li"===u.name){var x=u.prev;if(x&&("ul"===x.name||"ol"===x.name)){x.append(u);continue}if((x=u.next)&&("ul"===x.name||"ol"===x.name)&&x.firstChild){x.insert(u,x.firstChild,!0);continue}var C=new zh("ul",1);n(C),u.wrap(C);continue}if(t.isValidChild(u.parent.name,"div")&&t.isValidChild("div",u.name)){var k=new zh("div",1);n(k),u.wrap(k)}else rf(u,t)}}}},of=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.parent;return!(!r||!e.children[t.name]||e.isValidChild(r.name,t.name))||!(!r||"a"!==t.name||!((e,t)=>{for(var r=e;r;){if("a"===r.name)return!0;r=r.parent}return!1})(r))},af=e=>e.collapsed?e:(e=>{var t=Is.fromRangeStart(e),r=Is.fromRangeEnd(e),n=e.commonAncestorContainer;return fu(!1,n,r).map((o=>!jc(t,r,n)&&jc(t,o,n)?((e,t,r,n)=>{var o=document.createRange();return o.setStart(e,t),o.setEnd(r,n),o})(t.container(),t.offset(),o.container(),o.offset()):e)).getOr(e)})(e),sf=(e,t)=>{var r=t.firstChild,n=t.lastChild;return r&&"meta"===r.name&&(r=r.next),n&&"mce_marker"===n.attr("id")&&(n=n.prev),((e,t)=>{var r=e.getNonEmptyElements();return S(t)&&(t.isEmpty(r)||((e,t)=>e.getBlockElements()[t.name]&&(e=>S(e.firstChild)&&e.firstChild===e.lastChild)(t)&&(e=>"br"===e.name||e.value===yo)(t.firstChild))(e,t))})(e,n)&&(n=null==n?void 0:n.prev),!(!r||r!==n||"ul"!==r.name&&"ol"!==r.name)},lf=e=>{return e.length>0&&(!(r=e[e.length-1]).firstChild||S(null==(t=r)?void 0:t.firstChild)&&t.firstChild===t.lastChild&&(e=>e.data===yo||so(e))(t.firstChild))?e.slice(0,-1):e;var t,r},df=(e,t)=>{var r=e.getParent(t,e.isBlock);return r&&"LI"===r.nodeName?r:null},cf=(e,t)=>{var r=Is.after(e),n=gu(t).prev(r);return n?n.toRange():null},uf=(e,t,r,n)=>{var o,a,i=((e,t,r)=>{var n=t.serialize(r);return(e=>{var t,r,n=e.firstChild,o=e.lastChild;return n&&"META"===n.nodeName&&(null===(t=n.parentNode)||void 0===t||t.removeChild(n)),o&&"mce_marker"===o.id&&(null===(r=o.parentNode)||void 0===r||r.removeChild(o)),e})(e.createFragment(n))})(t,e,n),s=df(t,r.startContainer),l=lf((o=i.firstChild,J(null!==(a=null==o?void 0:o.childNodes)&&void 0!==a?a:[],(e=>"LI"===e.nodeName)))),d=t.getRoot(),c=e=>{var n=Is.fromRangeStart(r),o=gu(t.getRoot()),a=1===e?o.prev(n):o.next(n),i=null==a?void 0:a.getNode();return!i||df(t,i)!==s};return s?c(1)?((e,t,r)=>{var n=e.parentNode;return n&&Ht.each(t,(t=>{n.insertBefore(t,e)})),((e,t)=>{var r=Is.before(e),n=gu(t).next(r);return n?n.toRange():null})(e,r)})(s,l,d):c(2)?((e,t,r,n)=>(n.insertAfter(t.reverse(),e),cf(t[0],r)))(s,l,d,t):((e,t,r,n)=>{var o=((e,t)=>{var r=t.cloneRange(),n=t.cloneRange();return r.setStartBefore(e),n.setEndAfter(e),[r.cloneContents(),n.cloneContents()]})(e,n),a=e.parentNode;return a&&(a.insertBefore(o[0],e),Ht.each(t,(t=>{a.insertBefore(t,e)})),a.insertBefore(o[1],e),a.removeChild(e)),cf(t[t.length-1],r)})(s,l,d,r):null},mf=["pre"],gf=mo,hf=(e,t,r)=>{var n,o,a=e.selection,i=e.dom,s=e.parser,l=r.merge,d=Yh({validate:!0},e.schema),c='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===t.indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,c);var u=a.getRng(),m=u.startContainer,g=e.getBody();m===g&&a.isCollapsed()&&i.isBlock(g.firstChild)&&((e,t)=>S(t)&&!e.schema.getVoidElements()[t.nodeName])(e,g.firstChild)&&i.isEmpty(g.firstChild)&&((u=i.createRng()).setStart(g.firstChild,0),u.setEnd(g.firstChild,0),a.setRng(u)),a.isCollapsed()||(e=>{var t=e.dom,r=af(e.selection.getRng());e.selection.setRng(r);var n=t.getParent(r.startContainer,gf);((e,t,r)=>!!S(r)&&r===e.getParent(t.endContainer,gf)&&rm(xr(r),t))(t,r,n)?Pv(e,r,xr(n)):r.startContainer===r.endContainer&&r.endOffset-r.startOffset==1&&to(r.startContainer.childNodes[r.startOffset])?r.deleteContents():e.getDoc().execCommand("Delete",!1)})(e);var h=a.getNode(),p={context:h.nodeName.toLowerCase(),data:r.data,insert:!0},v=s.parse(t,p);if(!0===r.paste&&sf(e.schema,v)&&((e,t)=>!!df(e,t))(i,h))return(u=uf(d,i,a.getRng(),v))&&a.setRng(u),t;!0===r.paste&&((e,t,r,n)=>{var o,a=t.firstChild,i=t.lastChild,s=a===("bookmark"===i.attr("data-mce-type")?i.prev:i),l=q(mf,a.name);if(s&&l){var d="false"!==a.attr("contenteditable"),c=(null===(o=e.getParent(r,e.isBlock))||void 0===o?void 0:o.nodeName.toLowerCase())===a.name,u=V.from(Wv(n,r)).forall(co);return d&&c&&u}return!1})(i,v,h,e.getBody())&&(null===(n=v.firstChild)||void 0===n||n.unwrap()),(e=>{for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")})(v);var f,b=v.lastChild;if(b&&"mce_marker"===b.attr("id")){var y=b;for(b=b.prev;b;b=b.walk(!0))if(3===b.type||!i.isBlock(b.name)){b.parent&&e.schema.isValidChild(b.parent.name,"span")&&b.parent.insert(y,b,"br"===b.name);break}}if(e._selectionOverrides.showBlockCaretContainer(h),p.invalid){e.selection.setContent(c);var w,x=a.getNode(),C=e.getBody();for(ao(x)?x=w=C:w=x;w&&w!==C;)x=w,w=w.parentNode;t=x===C?C.innerHTML:i.getOuterHTML(x);var k=s.parse(t),_=(e=>{for(var t=e;t;t=t.walk())if("mce_marker"===t.attr("id"))return V.some(t);return V.none()})(k),O=_.bind(tf).getOr(k);_.each((e=>e.replace(v)));var E=v.children(),T=null!==(o=v.parent)&&void 0!==o?o:k;v.unwrap();var A=J(E,(t=>of(e.schema,t,T)));nf(A,e.schema,O),Xv(s.getNodeFilters(),s.getAttributeFilters(),k),t=d.serialize(k),x===C?i.setHTML(C,t):i.setOuterHTML(x,t)}else t=d.serialize(v),((e,t,r)=>{var n;if("all"===r.getAttribute("data-mce-bogus"))null===(n=r.parentNode)||void 0===n||n.insertBefore(e.dom.createFragment(t),r);else{var o=r.firstChild,a=r.lastChild;!o||o===a&&"BR"===o.nodeName?e.dom.setHTML(r,t):e.selection.setContent(t,{no_events:!0})}})(e,t,h);return((e,t)=>{var r=e.schema.getTextInlineElements(),n=e.dom;if(t){var o=e.getBody(),a=Gv(e);Ht.each(n.select("*[data-mce-fragment]"),(e=>{if(S(r[e.nodeName.toLowerCase()])&&((e,t)=>ie(Qh(e,t),(e=>!(e=>Xh.has(e))(e))))(n,e))for(var t=e.parentElement;S(t)&&t!==o&&!ep(n,e,t);t=t.parentElement)if(a.compare(t,e)){n.remove(e,!0);break}}))}})(e,l),((e,t)=>{var r,n,o,a,i=e.dom,s=e.selection;if(t){s.scrollIntoView(t);var l=Wv(e.getBody(),t);if(l&&"false"===i.getContentEditable(l))return i.remove(t),void s.select(l);var d=i.createRng(),c=t.previousSibling;if(to(c)){d.setStart(c,null!==(n=null===(r=c.nodeValue)||void 0===r?void 0:r.length)&&void 0!==n?n:0);var u=t.nextSibling;to(u)&&(c.appendData(u.data),null===(o=u.parentNode)||void 0===o||o.removeChild(u))}else d.setStartBefore(t),d.setEndBefore(t);var m=i.getParent(t,i.isBlock);if(i.remove(t),m&&i.isEmpty(m)){var g=gf(m);Cn(xr(m)),d.setStart(m,0),d.setEnd(m,0),g||(e=>!!e.getAttribute("data-mce-fragment"))(m)||!(a=(t=>{var r=Is.fromRangeStart(t);return null==(r=gu(e.getBody()).next(r))?void 0:r.toRange()})(d))?i.add(m,i.create("br",g?{}:{"data-mce-bogus":"1"})):(d=a,i.remove(m))}s.setRng(d)}})(e,i.get("mce_marker")),f=e.getBody(),Ht.each(f.getElementsByTagName("*"),(e=>{e.removeAttribute("data-mce-fragment")})),((e,t)=>{V.from(e.getParent(t,"td,th")).map(xr).each(Fo)})(i,a.getStart()),((e,t,r)=>{var n=Dr(xr(r),(e=>Or(e,xr(t))));ue(n,n.length-2).filter(Kt).fold((()=>Ta(e,t)),(t=>Ta(e,t.dom)))})(e.schema,e.getBody(),a.getStart()),t},pf=e=>e instanceof zh,vf=(e,t,r)=>{e.dom.setHTML(e.getBody(),t),!0!==r&&(e=>{Sh(e)&&ku(e.getBody()).each((t=>{var r=t.getNode(),n=Jn(r)?ku(r).getOr(t):t;e.selection.setRng(n.toRange())}))})(e)},ff=(e,t)=>((e,t)=>{var r=e.dom;return r.parentNode?((e,t)=>re(e.dom.childNodes,(e=>t(xr(e)))).map(xr))(xr(r.parentNode),(r=>!Or(e,r)&&t(r))):V.none()})(e,t).isSome(),bf=e=>_(e)?e:F,yf=(e,t,r)=>{var n=t(e),o=bf(r);return n.orThunk((()=>o(e)?V.none():((e,t,r)=>{for(var n=e.dom,o=bf(r);n.parentNode;){n=n.parentNode;var a=xr(n),i=t(a);if(i.isSome())return i;if(o(a))break}return V.none()})(e,t,o)))},wf=bm,xf=(e,t,r)=>{var n=e.formatter.get(r);if(n)for(var o=0;o<n.length;o++){var a=n[o];if(_m(a)&&!1===a.inherit&&e.dom.is(t,a.selector))return!0}return!1},Cf=(e,t,r,n,o)=>{var a=e.dom.getRoot();if(t===a)return!1;var i=e.dom.getParent(t,(t=>!!xf(e,t,r)||t.parentNode===a||!!_f(e,t,r,n,!0)));return!!_f(e,i,r,n,o)},kf=(e,t,r)=>!(!Om(r)||!wf(t,r.inline))||!(!Sm(r)||!wf(t,r.block))||!!_m(r)&&qn(t)&&e.is(t,r.selector),Sf=(e,t,r,n,o,a)=>{var i=r[n],s="attributes"===n;if(_(r.onmatch))return r.onmatch(t,r,n);if(i)if(Me(i)){for(var l=0;l<i.length;l++)if(s?e.getAttrib(t,i[l]):wm(e,t,i[l]))return!0}else for(var d in i)if(Ee(i,d)){var c=s?e.getAttrib(t,d):wm(e,t,d),u=fm(i[d],a),m=k(c)||Qe(c);if(m&&k(u))continue;if(o&&m&&!r.exact)return!1;if((!o||r.exact)&&!wf(c,ym(u,d)))return!1}return!0},_f=(e,t,r,n,o)=>{var a=e.formatter.get(r),i=e.dom;if(a&&qn(t))for(var s=0;s<a.length;s++){var l=a[s];if(kf(e.dom,t,l)&&Sf(i,t,l,"attributes",o,n)&&Sf(i,t,l,"styles",o,n)){var d=l.classes;if(d)for(var c=0;c<d.length;c++)if(!e.dom.hasClass(t,fm(d[c],n)))return;return l}}},Of=(e,t,r,n,o)=>{if(n)return Cf(e,n,t,r,o);if(n=e.selection.getNode(),Cf(e,n,t,r,o))return!0;var a=e.selection.getStart();return!(a===n||!Cf(e,a,t,r,o))},Ef=zo,Tf=e=>(e=>{for(var t=[],r=e;r;){if(to(r)&&r.data!==Ef||r.childNodes.length>1)return[];qn(r)&&t.push(r),r=r.firstChild}return t})(e).length>0,Af=e=>{if(e)for(var t=new Zn(e,e),r=t.current();r;r=t.next())if(to(r))return r;return null},Mf=e=>{var t=yr("span");return rr(t,{id:_u,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&yn(t,wr(Ef)),t},Nf=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=e.dom,o=e.selection;if(Tf(t))ov(e,!1,xr(t),r);else{var a=o.getRng(),i=n.getParent(t,n.isBlock),s=a.startContainer,l=a.startOffset,d=a.endContainer,c=a.endOffset,u=(e=>{var t=Af(e);return t&&t.data.charAt(0)===Ef&&t.deleteData(0,1),t})(t);n.remove(t,!0),s===u&&l>0&&a.setStart(u,l-1),d===u&&c>0&&a.setEnd(u,c-1),i&&n.isEmpty(i)&&Io(xr(i)),o.setRng(a)}},Rf=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=e.dom,o=e.selection;if(t)Nf(e,t,r);else if(!(t=Eu(e.getBody(),o.getStart())))for(;t=n.get(_u);)Nf(e,t,r)},Df=(e,t)=>(e.appendChild(t),t),Bf=(e,t)=>{var r,n=Q(e,((e,t)=>Df(e,t.cloneNode(!1))),t),o=null!==(r=n.ownerDocument)&&void 0!==r?r:document;return Df(n,o.createTextNode(Ef))},Lf=(e,t,r,n)=>{var o=e.dom,a=e.selection,i=!1,s=e.formatter.get(t);if(s){var c=a.getRng(),u=c.startContainer,m=c.startOffset,g=u;to(u)&&(m!==u.data.length&&(i=!0),g=g.parentNode);for(var h,p=[];g;){if(_f(e,g,t,r,n)){h=g;break}g.nextSibling&&(i=!0),p.push(g),g=g.parentNode}if(h)if(i){var v=a.getBookmark();c.collapse(!0);var f=Zm(o,c,s,!0);f=Bg(f),e.formatter.remove(t,r,f,n),a.moveToBookmark(v)}else{var b=Eu(e.getBody(),h),w=Mf(!1).dom;((e,t,r)=>{var n,o,a,i,s,l=e.dom,d=l.getParent(r,B(gm,e.schema));d&&l.isEmpty(d)?null===(n=r.parentNode)||void 0===n||n.replaceChild(t,r):(a=xr(r),i=zn(a,"br"),s=J((e=>{for(var t=[],r=e.dom;r;)t.push(xr(r)),r=r.lastChild;return t})(a).slice(-1),To),i.length===s.length&&K(s,kn),l.isEmpty(r)?null===(o=r.parentNode)||void 0===o||o.replaceChild(t,r):l.insertAfter(t,r))})(e,w,null!=b?b:h);var x=((e,t,r,n,o,a)=>{var i=e.formatter,s=e.dom,c=J(ve(i.get()),(e=>e!==n&&!We(e,"removeformat"))),u=((e,t,r)=>ee(r,((r,n)=>{var o=((e,t)=>km(e,t,(e=>{var t=e=>_(e)||e.length>1&&"%"===e.charAt(0);return $(["styles","attributes"],(r=>Oe(e,r).exists((e=>{var r=y(e)?e:_e(e);return $(r,t)}))))})))(e,n);return e.formatter.matchNode(t,n,{},o)?r.concat([n]):r}),[]))(e,r,c);if(J(u,(t=>!((e,t,r)=>{var n=["inline","block","selector","attributes","styles","classes"],o=e=>ke(e,((e,t)=>$(n,(e=>e===t))));return km(e,t,(t=>{var n=o(t);return km(e,r,(e=>{var t=o(e);return function(e,t){return l(arguments.length>2&&void 0!==arguments[2]?arguments[2]:d).eq(e,t)}(n,t)}))}))})(e,t,n))).length>0){var m=r.cloneNode(!1);return s.add(t,m),i.remove(n,o,m,a),s.remove(m),V.some(m)}return V.none()})(e,w,h,t,r,n),C=Bf(p.concat(x.toArray()),w);b&&Nf(e,b,!1),a.setCursorLocation(C,1),o.isEmpty(h)&&o.remove(h)}}},Hf=e=>{var t=Mf(!1),r=Bf(e,t.dom);return{caretContainer:t,caretPosition:Is(r,0)}},Pf=(e,t)=>{var{caretContainer:r,caretPosition:n}=Hf(t);return vn(xr(e),r),kn(xr(e)),n},If=(e,t)=>{var r=e.schema.getTextInlineElements();return Ee(r,Wt(t))&&!Ou(t.dom)&&!Xn(t.dom)},Ff=e=>Ou(e.dom)&&Tf(e.dom),zf={},Vf=Gn(["pre"]);((e,t)=>{zf[e]||(zf[e]=[]),zf[e].push((e=>{if(!e.selection.getRng().collapsed){var t=e.selection.getSelectedBlocks(),r=J(J(t,Vf),(n=t,e=>{var t=e.previousSibling;return Vf(t)&&q(n,t)}));K(r,(e=>{var t,r,n;t=e.previousSibling,r=xr(e),n=Ar(r).dom,kn(r),xn(xr(t),[yr("br",n),yr("br",n),...Ir(r)])}))}var n}))})("pre");var Zf=["fontWeight","fontStyle","color","fontSize","fontFamily"],jf=(e,t)=>{var r=e.get(t);return y(r)?re(r,(e=>Om(e)&&"span"===e.inline&&(e=>f(e.styles)&&$(ve(e.styles),(e=>q(Zf,e))))(e))):V.none()},Uf=(e,t)=>Cu(t,Is.fromRangeStart(e)).isNone(),Wf=(e,t)=>!1===xu(t,Is.fromRangeEnd(e)).exists((e=>!so(e.getNode())||xu(t,e).isSome())),qf=e=>t=>po(t)&&e.isEditable(t),$f=e=>J(e.getSelectedBlocks(),qf(e.dom)),Gf=Ht.each,Kf=e=>qn(e)&&!Fu(e)&&!Ou(e)&&!Xn(e),Yf=(e,t)=>{for(var r=e;r;r=r[t]){if(to(r)&&Je(r.data))return e;if(qn(r)&&!Fu(r))return r}return e},Xf=(e,t,r)=>{var n=Gv(e),o=qn(t)&&dm(t),a=qn(r)&&dm(r);if(o&&a){var i=Yf(t,"previousSibling"),s=Yf(r,"nextSibling");if(n.compare(i,s)){for(var l=i.nextSibling;l&&l!==s;){var d=l;l=l.nextSibling,i.appendChild(d)}return e.dom.remove(s),Ht.each(Ht.grep(s.childNodes),(e=>{i.appendChild(e)})),i}}return r},Jf=(e,t,r,n)=>{var o;if(n&&!1!==t.merge_siblings){var a=null!==(o=Xf(e,mm(n),n))&&void 0!==o?o:n;Xf(e,a,mm(a,!0))}},Qf=(e,t,r)=>{Gf(e.childNodes,(e=>{Kf(e)&&(t(e)&&r(e),e.hasChildNodes()&&Qf(e,t,r))}))},eb=(e,t)=>r=>!(!r||!wm(e,r,t)),tb=(e,t,r)=>n=>{e.setStyle(n,t,r),""===n.getAttribute("style")&&n.removeAttribute("style"),((e,t)=>{"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)})(e,n)},rb=dl([{keep:[]},{rename:["name"]},{removed:[]}]),nb=/^(src|href|style)$/,ob=Ht.each,ab=bm,ib=(e,t,r)=>e.isChildOf(t,r)&&t!==r&&!e.isBlock(r),sb=(e,t,r)=>{var n=t[r?"startContainer":"endContainer"],o=t[r?"startOffset":"endOffset"];if(qn(n)){var a=n.childNodes.length-1;!r&&o&&o--,n=n.childNodes[o>a?a:o]}return to(n)&&r&&o>=n.data.length&&(n=new Zn(n,e.getBody()).next()||n),to(n)&&!r&&0===o&&(n=new Zn(n,e.getBody()).prev()||n),n},lb=(e,t)=>{var r=t?"firstChild":"lastChild",n=e[r];return(e=>/^(TR|TH|TD)$/.test(e.nodeName))(e)&&n?"TR"===e.nodeName&&n[r]||n:e},db=(e,t,r,n)=>{var o,a=e.create(r,n);return null===(o=t.parentNode)||void 0===o||o.insertBefore(a,t),a.appendChild(t),a},cb=(e,t,r,n,o)=>{var a=xr(t),i=xr(e.create(n,o)),s=r?Pr(a):Hr(a);return xn(i,s),r?(vn(a,i),bn(i,a)):(fn(a,i),yn(i,a)),i.dom},ub=(e,t,r)=>{var n,o=t.parentNode,a=e.dom,i=Nl(e);Sm(r)&&o===a.getRoot()&&(r.list_block&&ab(t,r.list_block)||K(he(t.childNodes),(t=>{hm(e,i,t.nodeName.toLowerCase())?n?n.appendChild(t):(n=db(a,t,i),a.setAttribs(n,Rl(e))):n=null}))),(e=>_m(e)&&Om(e)&&Pt(Oe(e,"mixed"),!0))(r)&&!ab(r.inline,t)||a.remove(t,!0)},mb=(e,t,r)=>O(e)?{name:t,value:null}:{name:e,value:fm(t,r)},gb=(e,t)=>{""===e.getAttrib(t,"style")&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},hb=(e,t,r,n,o)=>{var a=!1;ob(r.styles,((i,s)=>{var{name:l,value:d}=mb(s,i,n),c=ym(d,l);(r.remove_similar||w(d)||!qn(o)||ab(wm(e,o,l),c))&&e.setStyle(t,l,""),a=!0})),a&&gb(e,t)},pb=(e,t,r,n,o)=>{var a=e.dom,i=Gv(e),s=e.schema;if(Om(t)&&Na(s,t.inline)&&Da(s,n)&&n.parentElement===e.getBody())return ub(e,n,t),rb.removed();if(!t.ceFalseOverride&&n&&"false"===a.getContentEditableParent(n))return rb.keep();if(n&&!kf(a,n,t)&&!((e,t)=>t.links&&"A"===e.nodeName)(n,t))return rb.keep();var l=n,d=t.preserve_attributes;if(Om(t)&&"all"===t.remove&&y(d)){var c=J(a.getAttribs(l),(e=>q(d,e.name.toLowerCase())));if(a.removeAllAttribs(l),K(c,(e=>a.setAttrib(l,e.name,e.value))),c.length>0)return rb.rename("span")}if("all"!==t.remove){hb(a,l,t,r,o),ob(t.attributes,((e,n)=>{var{name:i,value:s}=mb(n,e,r);if(t.remove_similar||w(s)||!qn(o)||ab(a.getAttrib(o,i),s)){if("class"===i){var d=a.getAttrib(l,i);if(d){var c="";if(K(d.split(/\s+/),(e=>{/mce\-\w+/.test(e)&&(c+=(c?" ":"")+e)})),c)return void a.setAttrib(l,i,c)}}if(nb.test(i)&&l.removeAttribute("data-mce-"+i),"style"===i&&Gn(["li"])(l)&&"none"===a.getStyle(l,"list-style-type"))return l.removeAttribute(i),void a.setStyle(l,"list-style-type","none");"class"===i&&l.removeAttribute("className"),l.removeAttribute(i)}})),ob(t.classes,(e=>{e=fm(e,r),qn(o)&&!a.hasClass(o,e)||a.removeClass(l,e)}));for(var u=a.getAttribs(l),m=0;m<u.length;m++){var g=u[m].nodeName;if(!i.isAttributeInternal(g))return rb.keep()}}return"none"!==t.remove?(ub(e,l,t),rb.removed()):rb.keep()},vb=(e,t,r,n)=>pb(e,t,r,n,n).fold(N(n),(t=>(e.dom.createFragment().appendChild(n),e.dom.rename(n,t))),N(null)),fb=(e,t,r,n,o)=>{(n||e.selection.isEditable())&&((e,t,r,n,o)=>{var a=e.formatter.get(t),i=a[0],s=e.dom,l=e.selection,d=n=>{var s=((e,t,r,n,o)=>{var a;return t.parentNode&&K(Cm(e.dom,t.parentNode).reverse(),(t=>{if(!a&&qn(t)&&"_start"!==t.id&&"_end"!==t.id){var i=_f(e,t,r,n,o);i&&!1!==i.split&&(a=t)}})),a})(e,n,t,r,o);return((e,t,r,n,o,a,i,s)=>{var l,d,c,u,m=e.dom;if(r){for(var g=r.parentNode,h=n.parentNode;h&&h!==g;h=h.parentNode){for(var p=m.clone(h,!1),v=0;v<t.length&&null!==(p=vb(e,t[v],s,p));v++);p&&(c&&p.appendChild(c),u||(u=p),c=p)}i.mixed&&m.isBlock(r)||(n=null!==(l=m.split(r,n))&&void 0!==l?l:n),c&&u&&(null===(d=o.parentNode)||void 0===d||d.insertBefore(c,o),u.appendChild(o),Om(i)&&Jf(e,i,0,c))}return n})(e,a,s,n,n,0,i,r)},c=t=>$(a,(n=>bb(e,n,r,t,t))),u=t=>{var r=he(t.childNodes),n=c(t)||$(a,(e=>kf(s,t,e))),o=t.parentNode;if(!n&&S(o)&&Em(i)&&c(o),i.deep&&r.length)for(var l=0;l<r.length;l++)u(r[l]);K(["underline","line-through","overline"],(r=>{qn(t)&&e.dom.getStyle(t,"text-decoration")===r&&t.parentNode&&xm(s,t.parentNode)===r&&bb(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:r}},void 0,t)}))},m=e=>{var t=s.get(e?"_start":"_end");if(t){var r=t[e?"firstChild":"lastChild"];return(e=>Fu(e)&&qn(e)&&("_start"===e.id||"_end"===e.id))(r)&&(r=r[e?"firstChild":"lastChild"]),to(r)&&0===r.data.length&&(r=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),s.remove(t,!0),r}return null},g=t=>{var r,n,o=Zm(s,t,a,t.collapsed);if(i.split){if(o=Bg(o),(r=sb(e,o,!0))!==(n=sb(e,o))){if(r=lb(r,!0),n=lb(n,!1),ib(s,r,n)){var l=V.from(r.firstChild).getOr(r);return d(cb(s,l,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void m(!0)}if(ib(s,n,r)){var c=V.from(n.lastChild).getOr(n);return d(cb(s,c,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void m(!1)}r=db(s,r,"span",{id:"_start","data-mce-type":"bookmark"}),n=db(s,n,"span",{id:"_end","data-mce-type":"bookmark"});var g=s.createRng();g.setStartAfter(r),g.setEndBefore(n),jm(s,g,(e=>{K(e,(e=>{Fu(e)||Fu(e.parentNode)||d(e)}))})),d(r),d(n),r=m(!0),n=m()}else r=n=d(r);o.startContainer=r.parentNode?r.parentNode:r,o.startOffset=s.nodeIndex(r),o.endContainer=n.parentNode?n.parentNode:n,o.endOffset=s.nodeIndex(n)+1}jm(s,o,(e=>{K(e,u)}))};if(n){if(sm(n)){var h=s.createRng();h.setStartBefore(n),h.setEndAfter(n),g(h)}else g(n);Qm(e,t,n,r)}else l.isCollapsed()&&Om(i)&&!Ju(e).length?Lf(e,t,r,o):(cm(e,(()=>am(e,g)),(n=>Om(i)&&Of(e,t,r,n))),e.nodeChanged()),((e,t,r)=>{"removeformat"===t?K($f(e.selection),(t=>{K(Zf,(r=>e.dom.setStyle(t,r,""))),gb(e.dom,t)})):jf(e.formatter,t).each((t=>{K($f(e.selection),(n=>hb(e.dom,n,t,r,null)))}))})(e,t,r),Qm(e,t,n,r)})(e,t,r,n,o)},bb=(e,t,r,n,o)=>pb(e,t,r,n,o).fold(F,(t=>(e.dom.rename(n,t),!0)),z),yb=Ht.each,wb=Ht.each,xb=(e,t,r,n)=>{if(wb(r.styles,((r,o)=>{e.setStyle(t,o,fm(r,n))})),r.styles){var o=e.getAttrib(t,"style");o&&e.setAttrib(t,"data-mce-style",o)}},Cb=(e,t,r,n)=>{var o=e.formatter.get(t),a=o[0],i=!n&&e.selection.isCollapsed(),s=e.dom,l=e.selection,d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;_(t.onformat)&&t.onformat(e,t,r,n),xb(s,e,t,r),wb(t.attributes,((t,n)=>{s.setAttrib(e,n,fm(t,r))})),wb(t.classes,(t=>{var n=fm(t,r);s.hasClass(e,n)||s.addClass(e,n)}))},c=(e,t)=>{var r=!1;return wb(e,(e=>!(!_m(e)||("false"!==s.getContentEditable(t)||e.ceFalseOverride)&&(!S(e.collapsed)||e.collapsed===i)&&s.is(t,e.selector)&&!Ou(t)&&(d(t,e),r=!0,1)))),r},u=e=>{if(v(e)){var t=s.create(e);return d(t),t}return null},m=(n,i,s)=>{var l=[],m=!0,g=a.inline||a.block,h=u(g);jm(n,i,(i=>{var u,p=i=>{var v=!1,f=m,b=!1,y=i.parentNode,w=y.nodeName.toLowerCase(),x=n.getContentEditable(i);S(x)&&(f=m,m="true"===x,v=!0,b=vm(e,i));var C=m&&!v;if(so(i)&&!((e,t,r,n)=>{if(vd(e)&&Om(t)&&r.parentNode){var o=mi(e.schema),a=ff(xr(r),(e=>Ou(e.dom)));return Te(o,n)&&xa(xr(r.parentNode),!1)&&!a}return!1})(e,a,i,w))return u=null,void(Sm(a)&&n.remove(i));if((n=>(e=>Sm(e)&&!0===e.wrapper)(a)&&_f(e,n,t,r))(i))u=null;else{if(((t,r,n)=>{var o=(e=>Sm(e)&&!0!==e.wrapper)(a)&&gm(e.schema,t)&&hm(e,r,g);return n&&o})(i,w,C)){var k=n.rename(i,g);return d(k),l.push(k),void(u=null)}if(_m(a)){var _=c(o,i);if(!_&&S(y)&&Em(a)&&(_=c(o,y)),!Om(a)||_)return void(u=null)}S(h)&&((t,r,o,i)=>{var l=t.nodeName.toLowerCase(),d=hm(e,g,l)&&hm(e,r,g),c=!s&&to(t)&&Vo(t.data),u=Ou(t),m=!Om(a)||!n.isBlock(t);return(o||i)&&d&&!c&&!u&&m})(i,w,C,b)?(u||(u=n.clone(h,!1),y.insertBefore(u,i),l.push(u)),b&&v&&(m=f),u.appendChild(i)):(u=null,K(he(i.childNodes),p),v&&(m=f),u=null)}};K(i,p)})),!0===a.links&&K(l,(e=>{var t=e=>{"A"===e.nodeName&&d(e,a),K(he(e.childNodes),t)};t(e)})),K(l,(i=>{var s=(e=>{var t=0;return K(e.childNodes,(e=>{(e=>S(e)&&to(e)&&0===e.length)(e)||Fu(e)||t++})),t})(i);!(l.length>1)&&n.isBlock(i)||0!==s?(Om(a)||Sm(a)&&a.wrapper)&&(a.exact||1!==s||(i=(e=>{var t=re(e.childNodes,lm).filter((e=>"false"!==n.getContentEditable(e)&&kf(n,e,a)));return t.map((t=>{var r=n.clone(t,!1);return d(r),n.replace(r,e,!0),n.remove(t,!0),r})).getOr(e)})(i)),((e,t,r,n)=>{yb(t,(t=>{Om(t)&&yb(e.dom.select(t.inline,n),(n=>{Kf(n)&&bb(e,t,r,n,t.exact?n:null)})),((e,t,r)=>{if(t.clear_child_styles){var n=t.links?"*:not(a)":"*";Gf(e.select(n,r),(r=>{Kf(r)&&dm(r)&&Gf(t.styles,((t,n)=>{e.setStyle(r,n,"")}))}))}})(e.dom,t,n)}))})(e,o,r,i),((e,t,r,n,o)=>{var a=o.parentNode;_f(e,a,r,n)&&bb(e,t,n,o)||t.merge_with_parents&&a&&e.dom.getParent(a,(a=>!!_f(e,a,r,n)&&(bb(e,t,n,o),!0)))})(e,a,t,r,i),((e,t,r,n)=>{if(t.styles&&t.styles.backgroundColor){var o=eb(e,"fontSize");Qf(n,(e=>o(e)&&dm(e)),tb(e,"backgroundColor",fm(t.styles.backgroundColor,r)))}})(n,a,r,i),((e,t,r,n)=>{var o=t=>{if(qn(t)&&qn(t.parentNode)&&dm(t)){var r=xm(e,t.parentNode);e.getStyle(t,"color")&&r?e.setStyle(t,"text-decoration",r):e.getStyle(t,"text-decoration")===r&&e.setStyle(t,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(Ht.walk(n,o,"childNodes"),o(n))})(n,a,0,i),((e,t,r,n)=>{if(Om(t)&&("sub"===t.inline||"sup"===t.inline)){var o=eb(e,"fontSize");Qf(n,(e=>o(e)&&dm(e)),tb(e,"fontSize",""));var a=J(e.select("sup"===t.inline?"sub":"sup",n),dm);e.remove(a,!0)}})(n,a,0,i),Jf(e,a,0,i)):n.remove(i,!0)}))},g=sm(n)?n:l.getNode();if("false"===s.getContentEditable(g)&&!vm(e,g))return c(o,n=g),void Jm(e,t,n,r);if(a){if(n)if(sm(n)){if(!c(o,n)){var h=s.createRng();h.setStartBefore(n),h.setEndAfter(n),m(s,Zm(s,h,o),!0)}}else m(s,n,!0);else i&&Om(a)&&!Ju(e).length?((e,t,r)=>{var n,o=e.selection,a=e.formatter.get(t);if(a){var i=o.getRng(),s=i.startOffset,l=i.startContainer.nodeValue;n=Eu(e.getBody(),o.getStart());var d,c,u=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(l&&s>0&&s<l.length&&u.test(l.charAt(s))&&u.test(l.charAt(s-1))){var m=o.getBookmark();i.collapse(!0);var g=Zm(e.dom,i,a);g=Bg(g),e.formatter.apply(t,r,g),o.moveToBookmark(m)}else{var h=n?Af(n):null;n&&(null==h?void 0:h.data)===Ef||(d=e.getDoc(),c=Mf(!0).dom,h=(n=d.importNode(c,!0)).firstChild,i.insertNode(n),s=1),e.formatter.apply(t,r,n),o.setCursorLocation(h,s)}}})(e,t,r):(l.setRng(af(l.getRng())),cm(e,(()=>{am(e,((e,t)=>{var r=t?e:Zm(s,e,o);m(s,r,!1)}))}),z),e.nodeChanged()),jf(e.formatter,t).each((t=>{K((e=>J((e=>{var t=e.getSelectedBlocks(),r=e.getRng();if(e.isCollapsed())return[];if(1===t.length)return Uf(r,t[0])&&Wf(r,t[0])?t:[];var n=me(t).filter((e=>Uf(r,e))).toArray(),o=ge(t).filter((e=>Wf(r,e))).toArray(),a=t.slice(1,-1);return n.concat(a).concat(o)})(e),qf(e.dom)))(e.selection),(e=>xb(s,e,t,r)))}));((e,t)=>{Ee(zf,e)&&K(zf[e],(e=>{e(t)}))})(t,e)}Jm(e,t,n,r)},kb=(e,t,r,n)=>{(n||e.selection.isEditable())&&Cb(e,t,r,n)},Sb=e=>Ee(e,"vars"),_b=e=>e.selection.getStart(),Ob=(e,t,r,n,o)=>te(t,(t=>{var a=e.formatter.matchNode(t,r,null!=o?o:{},n);return!C(a)}),(t=>!!xf(e,t,r)||!n&&S(e.formatter.matchNode(t,r,o,!0)))),Eb=(e,t)=>{var r=null!=t?t:_b(e);return J(Cm(e.dom,r),(e=>qn(e)&&!Xn(e)))},Tb=(e,t,r)=>{var n=Eb(e,t);be(r,((r,o)=>{var a=r=>{var a=Ob(e,n,o,r.similar,Sb(r)?r.vars:void 0),i=a.isSome();if(r.state.get()!==i){r.state.set(i);var s=a.getOr(t);Sb(r)?r.callback(i,{node:s,format:o,parents:n}):K(r.callbacks,(e=>e(i,{node:s,format:o,parents:n})))}};K([r.withSimilar,r.withoutSimilar],a),K(r.withVars,a)}))},Ab=Ht.explode,Mb=()=>{var e={};return{addFilter:(t,r)=>{K(Ab(t),(t=>{Ee(e,t)||(e[t]={name:t,callbacks:[]}),e[t].callbacks.push(r)}))},getFilters:()=>_e(e),removeFilter:(t,r)=>{K(Ab(t),(t=>{if(Ee(e,t))if(S(r)){var n=e[t],o=J(n.callbacks,(e=>e!==r));o.length>0?n.callbacks=o:delete e[t]}else delete e[t]}))}}},Nb=(e,t,r)=>{var n,o=pi();t.convert_fonts_to_spans&&((e,t,r)=>{e.addNodeFilter("font",(e=>{K(e,(e=>{var n=t.parse(e.attr("style")),o=e.attr("color"),a=e.attr("face"),i=e.attr("size");o&&(n.color=o),a&&(n["font-family"]=a),i&&et(i).each((e=>{n["font-size"]=r[e-1]})),e.name="span",e.attr("style",t.serialize(n)),((e,t)=>{K(["color","face","size"],(t=>{e.attr(t,null)}))})(e)}))}))})(e,o,Ht.explode(null!==(n=t.font_size_legacy_values)&&void 0!==n?n:"")),((e,t,r)=>{e.addNodeFilter("strike",(e=>{var n="html4"!==t.type;K(e,(e=>{if(n)e.name="s";else{var t=r.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",r.serialize(t))}}))}))})(e,r,o)},Rb=(e,t,r)=>{t.addNodeFilter("br",((t,n,o)=>{var a=Ht.extend({},r.getBlockElements()),i=r.getNonEmptyElements(),s=r.getWhitespaceElements();a.body=1;for(var l=(e=>e.name in a||La(r,e)),d=0,c=t.length;d<c;d++){var u=t[d],m=u.parent;if(m&&l(m)&&u===m.lastChild){for(var g=u.prev;g;){var h=g.name;if("span"!==h||"bookmark"!==g.attr("data-mce-type")){"br"===h&&(u=null);break}g=g.prev}if(u&&(u.remove(),ef(r,i,s,m))){var p=r.getElementRule(m.name);p&&(p.removeEmpty?m.remove():p.paddEmpty&&Jv(e,o,l,m))}}else{for(var v=u;m&&m.firstChild===v&&m.lastChild===v&&(v=m,!a[m.name]);)m=m.parent;if(v===m){var f=new zh("#text",3);f.value=yo,u.replace(f)}}}}))},Db=e=>{var[t,...r]=e.split(","),n=r.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(o){var a=";base64"===o[2],i=a?(e=>{var t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""})(n):decodeURIComponent(n);return V.some({type:o[1],data:i,base64Encoded:a})}return V.none()},Bb=function(e,t){var r=t;if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])try{r=atob(t)}catch(e){return V.none()}for(var n=new Uint8Array(r.length),o=0;o<n.length;o++)n[o]=r.charCodeAt(o);return V.some(new Blob([n],{type:e}))},Lb=e=>new Promise(((t,r)=>{var n=new FileReader;n.onloadend=()=>{t(n.result)},n.onerror=()=>{var e;r(null===(e=n.error)||void 0===e?void 0:e.message)},n.readAsDataURL(e)})),Hb=0,Pb=(e,t,r)=>Db(e).bind((e=>{var{data:n,type:o,base64Encoded:a}=e;if(t&&!a)return V.none();var i=a?n:btoa(n);return r(i,o)})),Ib=(e,t,r)=>{var n=e.create("blobid"+Hb++,t,r);return e.add(n),n},Fb=function(e,t){return Pb(t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],((t,r)=>V.from(e.getByData(t,r)).orThunk((()=>Bb(r,t).map((r=>Ib(e,r,t)))))))},zb=(e,t)=>{var r=e.schema;t.remove_trailing_brs&&Rb(t,e,r),e.addAttributeFilter("href",(e=>{var r,n,o=e.length;if(!t.allow_unsafe_link_target)for(;o--;){var a=e[o];"a"===a.name&&"_blank"===a.attr("target")&&a.attr("rel",(void 0,n=(r=a.attr("rel"))?Ht.trim(r):"",/\b(noopener)\b/g.test(n)?n:(e=>e.split(" ").filter((e=>e.length>0)).concat(["noopener"]).sort().join(" "))(n)))}})),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",(e=>{for(var t,r,n,o,a=e.length;a--;)if("a"===(o=e[a]).name&&o.firstChild&&!o.attr("href"))for(n=o.parent,t=o.lastChild;t&&n;)r=t.prev,n.insert(t,o),t=r})),t.fix_list_elements&&e.addNodeFilter("ul,ol",(e=>{for(var t,r,n=e.length;n--;)if((r=(t=e[n]).parent)&&("ul"===r.name||"ol"===r.name))if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{var o=new zh("li",1);o.attr("style","list-style-type: none"),t.wrap(o)}}));var n=r.getValidClasses();t.validate&&n&&e.addAttributeFilter("class",(e=>{for(var t,r=e.length;r--;){for(var o=e[r],a=null!==(t=o.attr("class"))&&void 0!==t?t:"",i=Ht.explode(a," "),s="",l=0;l<i.length;l++){var d=i[l],c=!1,u=n["*"];u&&u[d]&&(c=!0),u=n[o.name],!c&&u&&u[d]&&(c=!0),c&&(s&&(s+=" "),s+=d)}s.length||(s=null),o.attr("class",s)}})),((e,t)=>{var{blob_cache:r}=t;if(r){var n=e=>{var t=e.attr("src");(e=>e.attr("src")===Dt.transparentSrc||S(e.attr("data-mce-placeholder")))(e)||(e=>S(e.attr("data-mce-bogus")))(e)||k(t)||Fb(r,t,!0).each((t=>{e.attr("src",t.blobUri())}))};e.addAttributeFilter("src",(e=>K(e,n)))}})(e,t)};function Vb(e){return Vb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vb(e)}function Zb(e,t){return Zb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Zb(e,t)}function jb(e,t,r){return jb=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&Zb(o,r.prototype),o},jb.apply(null,arguments)}function Ub(e){return function(e){if(Array.isArray(e))return Wb(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Wb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wb(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var qb=Object.hasOwnProperty,$b=Object.setPrototypeOf,Gb=Object.isFrozen,Kb=Object.getPrototypeOf,Yb=Object.getOwnPropertyDescriptor,Xb=Object.freeze,Jb=Object.seal,Qb=Object.create,ey="undefined"!=typeof Reflect&&Reflect,ty=ey.apply,ry=ey.construct;ty||(ty=function(e,t,r){return e.apply(t,r)}),Xb||(Xb=function(e){return e}),Jb||(Jb=function(e){return e}),ry||(ry=function(e,t){return jb(e,Ub(t))});var ny,oy=hy(Array.prototype.forEach),ay=hy(Array.prototype.pop),iy=hy(Array.prototype.push),sy=hy(String.prototype.toLowerCase),ly=hy(String.prototype.match),dy=hy(String.prototype.replace),cy=hy(String.prototype.indexOf),uy=hy(String.prototype.trim),my=hy(RegExp.prototype.test),gy=(ny=TypeError,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return ry(ny,t)});function hy(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return ty(e,t,n)}}function py(e,t){$b&&$b(e,null);for(var r=t.length;r--;){var n=t[r];if("string"==typeof n){var o=sy(n);o!==n&&(Gb(t)||(t[r]=o),n=o)}e[n]=!0}return e}function vy(e){var t,r=Qb(null);for(t in e)ty(qb,e,[t])&&(r[t]=e[t]);return r}function fy(e,t){for(;null!==e;){var r=Yb(e,t);if(r){if(r.get)return hy(r.get);if("function"==typeof r.value)return hy(r.value)}e=Kb(e)}return function(e){return console.warn("fallback value for",e),null}}var by=Xb(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),yy=Xb(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),wy=Xb(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),xy=Xb(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Cy=Xb(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),ky=Xb(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Sy=Xb(["#text"]),_y=Xb(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Oy=Xb(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ey=Xb(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ty=Xb(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ay=Jb(/\{\{[\w\W]*|[\w\W]*\}\}/gm),My=Jb(/<%[\w\W]*|[\w\W]*%>/gm),Ny=Jb(/^data-[\-\w.\u00B7-\uFFFF]/),Ry=Jb(/^aria-[\-\w]+$/),Dy=Jb(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),By=Jb(/^(?:\w+script|data):/i),Ly=Jb(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Hy=Jb(/^html$/i),Py=function(){return"undefined"==typeof window?null:window},Iy=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Py(),r=function(t){return e(t)};if(r.version="2.3.8",r.removed=[],!t||!t.document||9!==t.document.nodeType)return r.isSupported=!1,r;var n=t.document,o=t.document,a=t.DocumentFragment,i=t.HTMLTemplateElement,s=t.Node,l=t.Element,d=t.NodeFilter,c=t.NamedNodeMap,u=void 0===c?t.NamedNodeMap||t.MozNamedAttrMap:c,m=t.HTMLFormElement,g=t.DOMParser,h=t.trustedTypes,p=l.prototype,v=fy(p,"cloneNode"),f=fy(p,"nextSibling"),b=fy(p,"childNodes"),y=fy(p,"parentNode");if("function"==typeof i){var w=o.createElement("template");w.content&&w.content.ownerDocument&&(o=w.content.ownerDocument)}var x=function(e,t){if("object"!==Vb(e)||"function"!=typeof e.createPolicy)return null;var r=null,n="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(n)&&(r=t.currentScript.getAttribute(n));var o="dompurify"+(r?"#"+r:"");try{return e.createPolicy(o,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}}(h,n),C=x?x.createHTML(""):"",k=o,S=k.implementation,_=k.createNodeIterator,O=k.createDocumentFragment,E=k.getElementsByTagName,T=n.importNode,A={};try{A=vy(o).documentMode?o.documentMode:{}}catch(e){}var M={};r.isSupported="function"==typeof y&&S&&void 0!==S.createHTMLDocument&&9!==A;var N,R,D=Ay,B=My,L=Ny,H=Ry,P=By,I=Ly,F=Dy,z=null,V=py({},[].concat(Ub(by),Ub(yy),Ub(wy),Ub(Cy),Ub(Sy))),Z=null,j=py({},[].concat(Ub(_y),Ub(Oy),Ub(Ey),Ub(Ty))),U=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),W=null,q=null,$=!0,G=!0,K=!1,Y=!1,X=!1,J=!1,Q=!1,ee=!1,te=!1,re=!1,ne=!0,oe=!0,ae=!1,ie={},se=null,le=py({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),de=null,ce=py({},["audio","video","img","source","image","track"]),ue=null,me=py({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ge="http://www.w3.org/1998/Math/MathML",he="http://www.w3.org/2000/svg",pe="http://www.w3.org/1999/xhtml",ve=pe,fe=!1,be=["application/xhtml+xml","text/html"],ye=null,we=o.createElement("form"),xe=function(e){return e instanceof RegExp||e instanceof Function},Ce=function(e){ye&&ye===e||(e&&"object"===Vb(e)||(e={}),e=vy(e),z="ALLOWED_TAGS"in e?py({},e.ALLOWED_TAGS):V,Z="ALLOWED_ATTR"in e?py({},e.ALLOWED_ATTR):j,ue="ADD_URI_SAFE_ATTR"in e?py(vy(me),e.ADD_URI_SAFE_ATTR):me,de="ADD_DATA_URI_TAGS"in e?py(vy(ce),e.ADD_DATA_URI_TAGS):ce,se="FORBID_CONTENTS"in e?py({},e.FORBID_CONTENTS):le,W="FORBID_TAGS"in e?py({},e.FORBID_TAGS):{},q="FORBID_ATTR"in e?py({},e.FORBID_ATTR):{},ie="USE_PROFILES"in e&&e.USE_PROFILES,$=!1!==e.ALLOW_ARIA_ATTR,G=!1!==e.ALLOW_DATA_ATTR,K=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Y=e.SAFE_FOR_TEMPLATES||!1,X=e.WHOLE_DOCUMENT||!1,ee=e.RETURN_DOM||!1,te=e.RETURN_DOM_FRAGMENT||!1,re=e.RETURN_TRUSTED_TYPE||!1,Q=e.FORCE_BODY||!1,ne=!1!==e.SANITIZE_DOM,oe=!1!==e.KEEP_CONTENT,ae=e.IN_PLACE||!1,F=e.ALLOWED_URI_REGEXP||F,ve=e.NAMESPACE||pe,e.CUSTOM_ELEMENT_HANDLING&&xe(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(U.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&xe(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(U.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(U.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),N=N=-1===be.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,R="application/xhtml+xml"===N?function(e){return e}:sy,Y&&(G=!1),te&&(ee=!0),ie&&(z=py({},Ub(Sy)),Z=[],!0===ie.html&&(py(z,by),py(Z,_y)),!0===ie.svg&&(py(z,yy),py(Z,Oy),py(Z,Ty)),!0===ie.svgFilters&&(py(z,wy),py(Z,Oy),py(Z,Ty)),!0===ie.mathMl&&(py(z,Cy),py(Z,Ey),py(Z,Ty))),e.ADD_TAGS&&(z===V&&(z=vy(z)),py(z,e.ADD_TAGS)),e.ADD_ATTR&&(Z===j&&(Z=vy(Z)),py(Z,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&py(ue,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(se===le&&(se=vy(se)),py(se,e.FORBID_CONTENTS)),oe&&(z["#text"]=!0),X&&py(z,["html","head","body"]),z.table&&(py(z,["tbody"]),delete W.tbody),Xb&&Xb(e),ye=e)},ke=py({},["mi","mo","mn","ms","mtext"]),Se=py({},["foreignobject","desc","title","annotation-xml"]),_e=py({},["title","style","font","a","script"]),Oe=py({},yy);py(Oe,wy),py(Oe,xy);var Ee=py({},Cy);py(Ee,ky);var Te=function(e){iy(r.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=C}catch(t){e.remove()}}},Ae=function(e,t){try{iy(r.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){iy(r.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!Z[e])if(ee||te)try{Te(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Me=function(e){var t,r;if(Q)e="<remove></remove>"+e;else{var n=ly(e,/^[\r\n\t ]+/);r=n&&n[0]}"application/xhtml+xml"===N&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var a=x?x.createHTML(e):e;if(ve===pe)try{t=(new g).parseFromString(a,N)}catch(e){}if(!t||!t.documentElement){t=S.createDocument(ve,"template",null);try{t.documentElement.innerHTML=fe?"":a}catch(e){}}var i=t.body||t.documentElement;return e&&r&&i.insertBefore(o.createTextNode(r),i.childNodes[0]||null),ve===pe?E.call(t,X?"html":"body")[0]:X?t.documentElement:i},Ne=function(e){return _.call(e.ownerDocument||e,e,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},Re=function(e){return"object"===Vb(s)?e instanceof s:e&&"object"===Vb(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},De=function(e,t,n){M[e]&&oy(M[e],(function(e){e.call(r,t,n,ye)}))},Be=function(e){var t,n;if(De("beforeSanitizeElements",e,null),(n=e)instanceof m&&("string"!=typeof n.nodeName||"string"!=typeof n.textContent||"function"!=typeof n.removeChild||!(n.attributes instanceof u)||"function"!=typeof n.removeAttribute||"function"!=typeof n.setAttribute||"string"!=typeof n.namespaceURI||"function"!=typeof n.insertBefore))return Te(e),!0;if(my(/[\u0080-\uFFFF]/,e.nodeName))return Te(e),!0;var o=R(e.nodeName);if(De("uponSanitizeElement",e,{tagName:o,allowedTags:z}),e.hasChildNodes()&&!Re(e.firstElementChild)&&(!Re(e.content)||!Re(e.content.firstElementChild))&&my(/<[/\w]/g,e.innerHTML)&&my(/<[/\w]/g,e.textContent))return Te(e),!0;if("select"===o&&my(/<template/i,e.innerHTML))return Te(e),!0;if(!z[o]||W[o]){if(!W[o]&&He(o)){if(U.tagNameCheck instanceof RegExp&&my(U.tagNameCheck,o))return!1;if(U.tagNameCheck instanceof Function&&U.tagNameCheck(o))return!1}if(oe&&!se[o]){var a=y(e)||e.parentNode,i=b(e)||e.childNodes;if(i&&a)for(var s=i.length-1;s>=0;--s)a.insertBefore(v(i[s],!0),f(e))}return Te(e),!0}return e instanceof l&&!function(e){var t=y(e);t&&t.tagName||(t={namespaceURI:pe,tagName:"template"});var r=sy(e.tagName),n=sy(t.tagName);return e.namespaceURI===he?t.namespaceURI===pe?"svg"===r:t.namespaceURI===ge?"svg"===r&&("annotation-xml"===n||ke[n]):Boolean(Oe[r]):e.namespaceURI===ge?t.namespaceURI===pe?"math"===r:t.namespaceURI===he?"math"===r&&Se[n]:Boolean(Ee[r]):e.namespaceURI===pe&&!(t.namespaceURI===he&&!Se[n])&&!(t.namespaceURI===ge&&!ke[n])&&!Ee[r]&&(_e[r]||!Oe[r])}(e)?(Te(e),!0):"noscript"!==o&&"noembed"!==o||!my(/<\/no(script|embed)/i,e.innerHTML)?(Y&&3===e.nodeType&&(t=e.textContent,t=dy(t,D," "),t=dy(t,B," "),e.textContent!==t&&(iy(r.removed,{element:e.cloneNode()}),e.textContent=t)),De("afterSanitizeElements",e,null),!1):(Te(e),!0)},Le=function(e,t,r){if(ne&&("id"===t||"name"===t)&&(r in o||r in we))return!1;if(G&&!q[t]&&my(L,t));else if($&&my(H,t));else if(!Z[t]||q[t]){if(!(He(e)&&(U.tagNameCheck instanceof RegExp&&my(U.tagNameCheck,e)||U.tagNameCheck instanceof Function&&U.tagNameCheck(e))&&(U.attributeNameCheck instanceof RegExp&&my(U.attributeNameCheck,t)||U.attributeNameCheck instanceof Function&&U.attributeNameCheck(t))||"is"===t&&U.allowCustomizedBuiltInElements&&(U.tagNameCheck instanceof RegExp&&my(U.tagNameCheck,r)||U.tagNameCheck instanceof Function&&U.tagNameCheck(r))))return!1}else if(ue[t]);else if(my(F,dy(r,I,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==cy(r,"data:")||!de[e])if(K&&!my(P,dy(r,I,"")));else if(r)return!1;return!0},He=function(e){return e.indexOf("-")>0},Pe=function(e){var t,r,n,o;De("beforeSanitizeAttributes",e,null);var a=e.attributes;if(a){var i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Z};for(o=a.length;o--;){var s=t=a[o],l=s.name,d=s.namespaceURI;r="value"===l?t.value:uy(t.value),n=R(l);var c=r;if(i.attrName=n,i.attrValue=r,i.keepAttr=!0,i.forceKeepAttr=void 0,De("uponSanitizeAttribute",e,i),r=i.attrValue,!i.forceKeepAttr)if(i.keepAttr)if(my(/\/>/i,r))Ae(l,e);else{Y&&(r=dy(r,D," "),r=dy(r,B," "));var u=R(e.nodeName);if(Le(u,n,r)){if(r!==c)try{d?e.setAttributeNS(d,l,r):e.setAttribute(l,r)}catch(t){Ae(l,e)}}else Ae(l,e)}else Ae(l,e)}De("afterSanitizeAttributes",e,null)}},Ie=function e(t){var r,n=Ne(t);for(De("beforeSanitizeShadowDOM",t,null);r=n.nextNode();)De("uponSanitizeShadowNode",r,null),Be(r)||(r.content instanceof a&&e(r.content),Pe(r));De("afterSanitizeShadowDOM",t,null)};return r.sanitize=function(e,o){var i,l,d,c,u;if((fe=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Re(e)){if("function"!=typeof e.toString)throw gy("toString is not a function");if("string"!=typeof(e=e.toString()))throw gy("dirty is not a string, aborting")}if(!r.isSupported){if("object"===Vb(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(Re(e))return t.toStaticHTML(e.outerHTML)}return e}if(J||Ce(o),r.removed=[],"string"==typeof e&&(ae=!1),ae){if(e.nodeName){var m=R(e.nodeName);if(!z[m]||W[m])throw gy("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof s)1===(l=(i=Me("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===l.nodeName||"HTML"===l.nodeName?i=l:i.appendChild(l);else{if(!ee&&!Y&&!X&&-1===e.indexOf("<"))return x&&re?x.createHTML(e):e;if(!(i=Me(e)))return ee?null:re?C:""}i&&Q&&Te(i.firstChild);for(var g=Ne(ae?e:i);d=g.nextNode();)3===d.nodeType&&d===c||Be(d)||(d.content instanceof a&&Ie(d.content),Pe(d),c=d);if(c=null,ae)return e;if(ee){if(te)for(u=O.call(i.ownerDocument);i.firstChild;)u.appendChild(i.firstChild);else u=i;return Z.shadowroot&&(u=T.call(n,u,!0)),u}var h=X?i.outerHTML:i.innerHTML;return X&&z["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&my(Hy,i.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+h),Y&&(h=dy(h,D," "),h=dy(h,B," ")),x&&re?x.createHTML(h):h},r.setConfig=function(e){Ce(e),J=!0},r.clearConfig=function(){ye=null,J=!1},r.isValidAttribute=function(e,t,r){ye||Ce({});var n=R(e),o=R(t);return Le(n,o,r)},r.addHook=function(e,t){"function"==typeof t&&(M[e]=M[e]||[],iy(M[e],t))},r.removeHook=function(e){if(M[e])return ay(M[e])},r.removeHooks=function(e){M[e]&&(M[e]=[])},r.removeAllHooks=function(){M={}},r}(),Fy=Ht.each,zy=Ht.trim,Vy=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Zy={ftp:21,http:80,https:443,mailto:25},jy=["img","video"],Uy=(e,t,r)=>{var n=(e=>{try{return decodeURIComponent(e)}catch(t){return unescape(e)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(n)||!e.allow_html_data_urls&&(/^data:image\//i.test(n)?((e,t)=>S(e)?!e:!S(t)||!q(jy,t))(e.allow_svg_data_urls,r)&&/^data:image\/svg\+xml/i.test(n):/^data:/i.test(n)))};class Wy{static parseDataUri(e){var t,r=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(r[0]);return n&&(t=n[1]),{type:t,data:r[1]}}static isDomSafe(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.allow_script_urls)return!0;var n=ni.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!Uy(r,n,t)}static getDocumentBaseUrl(e){var t,r;return r=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(t=e.href)&&void 0!==t?t:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.path="",this.directory="",e=zy(e),this.settings=t;var r=t.base_uri,n=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))n.source=e;else{var o=0===e.indexOf("//");if(0!==e.indexOf("/")||o||(e=(r&&r.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){var a=r?r.path:new Wy(document.location.href).directory;if(""===(null==r?void 0:r.protocol))e="//mce_host"+n.toAbsPath(a,e);else{var i=/([^#?]*)([#?]?.*)/.exec(e);i&&(e=(r&&r.protocol||"http")+"://mce_host"+n.toAbsPath(a,i[1])+i[2])}}e=e.replace(/@@/g,"(mce_at)");var s=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);s&&Fy(Vy,((e,t)=>{var r=s[t];r&&(r=r.replace(/\(mce_at\)/g,"@@")),n[e]=r})),r&&(n.protocol||(n.protocol=r.protocol),n.userInfo||(n.userInfo=r.userInfo),n.port||"mce_host"!==n.host||(n.port=r.port),n.host&&"mce_host"!==n.host||(n.host=r.host),n.source=""),o&&(n.protocol="")}}setPath(e){var t=/^(.*?)\/?(\w+)?$/.exec(e);t&&(this.path=t[0],this.directory=t[1],this.file=t[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;var t=new Wy(e,{base_uri:this});if("mce_host"!==t.host&&this.host!==t.host&&t.host||this.port!==t.port||this.protocol!==t.protocol&&""!==t.protocol)return t.getURI();var r=this.getURI(),n=t.getURI();if(r===n||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===n)return r;var o=this.toRelPath(this.path,t.path);return t.query&&(o+="?"+t.query),t.anchor&&(o+="#"+t.anchor),o}toAbsolute(e,t){var r=new Wy(e,{base_uri:this});return r.getURI(t&&this.isSameOrigin(r))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=this.protocol?Zy[this.protocol]:null;if(t&&(this.port||t)==(e.port||t))return!0}return!1}toRelPath(e,t){var r,n,o=0,a="",i=e.substring(0,e.lastIndexOf("/")).split("/"),s=t.split("/");if(i.length>=s.length)for(r=0,n=i.length;r<n;r++)if(r>=s.length||i[r]!==s[r]){o=r+1;break}if(i.length<s.length)for(r=0,n=s.length;r<n;r++)if(r>=i.length||i[r]!==s[r]){o=r+1;break}if(1===o)return t;for(r=0,n=i.length-(o-1);r<n;r++)a+="../";for(r=o-1,n=s.length;r<n;r++)a+=r!==o-1?"/"+s[r]:s[r];return a}toAbsPath(e,t){var r=0,n=/\/$/.test(t)?"/":"",o=e.split("/"),a=t.split("/"),i=[];Fy(o,(e=>{e&&i.push(e)}));for(var s=[],l=a.length-1;l>=0;l--)0!==a[l].length&&"."!==a[l]&&(".."!==a[l]?r>0?r--:s.push(a[l]):r++);var d,c=i.length-r;return 0!==(d=c<=0?se(s).join("/"):i.slice(0,c).join("/")+"/"+se(s).join("/")).indexOf("/")&&(d="/"+d),n&&d.lastIndexOf("/")!==d.length-1&&(d+=n),d}getURI(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.source&&!t||(e="",t||(this.protocol?e+=this.protocol+"://":e+="//",this.userInfo&&(e+=this.userInfo+"@"),this.host&&(e+=this.host),this.port&&(e+=":"+this.port)),this.path&&(e+=this.path),this.query&&(e+="?"+this.query),this.anchor&&(e+="#"+this.anchor),this.source=e),this.source}}var qy,$y=Ht.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Gy="data-mce-type",Ky=0,Yy=(e,t,r,n)=>{var o,a,i,s,l=t.validate,d=r.getSpecialElements();8===e.nodeType&&!t.allow_conditional_comments&&/^\[if/i.test(null!==(o=e.nodeValue)&&void 0!==o?o:"")&&(e.nodeValue=" "+e.nodeValue);var c=null!==(a=null==n?void 0:n.tagName)&&void 0!==a?a:e.nodeName.toLowerCase();if(1===e.nodeType&&"body"!==c){var u=xr(e),m=ar(u,Gy),g=nr(u,"data-mce-bogus");if(m||!v(g)){var h=r.getElementRule(c);if(!l||h){if(S(n)&&(n.allowedTags[c]=!0),l&&h&&!m){if(K(null!==(i=h.attributesForced)&&void 0!==i?i:[],(e=>{tr(u,e.name,"{$uid}"===e.value?"mce_".concat(Ky++):e.value)})),K(null!==(s=h.attributesDefault)&&void 0!==s?s:[],(e=>{ar(u,e.name)||tr(u,e.name,"{$uid}"===e.value?"mce_".concat(Ky++):e.value)})),h.attributesRequired&&!$(h.attributesRequired,(e=>ar(u,e))))return void Sn(u);if(h.removeEmptyAttrs&&(e=>{var t=e.dom.attributes;return null==t||0===t.length})(u))return void Sn(u);h.outputName&&h.outputName!==c&&((e,t)=>{var r=((e,t)=>{var r=yr(t),n=sr(e);return rr(r,n),r})(e,t);fn(e,r);var n=Ir(e);xn(r,n),kn(e)})(u,h.outputName)}}else Ee(d,c)?kn(u):Sn(u)}else"all"===g?kn(u):Sn(u)}},Xy=(e,t,r,n,o)=>!(n in $y&&Uy(e,o,r))&&(!e.validate||t.isValid(r,n)||qe(n,"data-")||qe(n,"aria-")),Jy=(e,t)=>e.hasAttribute(Gy)&&("id"===t||"class"===t||"style"===t),Qy=(e,t)=>e in t.getBoolAttrs(),ew=(e,t,r)=>{for(var{attributes:n}=e,o=n.length-1;o>=0;o--){var a=n[o],i=a.name,s=a.value;Xy(t,r,e.tagName.toLowerCase(),i,s)||Jy(e,i)?Qy(i,r)&&e.setAttribute(i,i):e.removeAttribute(i)}},tw=Ht.makeMap,rw=Ht.extend,nw=(e,t,r)=>{for(var n=e.name,o=(n in r&&"title"!==n&&"textarea"!==n),a=t.childNodes,i=0,s=a.length;i<s;i++){var l=a[i],d=new zh(l.nodeName.toLowerCase(),l.nodeType);if(qn(l))for(var c=l.attributes,u=0,m=c.length;u<m;u++){var g=c[u];d.attr(g.name,g.value)}else to(l)?(d.value=l.data,o&&(d.raw=!0)):(oo(l)||ro(l)||no(l))&&(d.value=l.data);nw(d,l,r),e.append(d)}},ow=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hi(),r=Mb(),n=Mb(),a=o({validate:!0,root_name:"body",sanitize:!0},e),i=new DOMParser,s=((e,t)=>{if(e.sanitize){var r=((e,t)=>{var r=Iy();return r.addHook("uponSanitizeElement",((r,n)=>{Yy(r,e,t,n)})),r.addHook("uponSanitizeAttribute",((r,n)=>{var o=r.tagName.toLowerCase(),{attrName:a,attrValue:i}=n;n.keepAttr=Xy(e,t,o,a,i),n.keepAttr?(n.allowedAttributes[a]=!0,Qy(a,t)&&(n.attrValue=a),e.allow_svg_data_urls&&qe(i,"data:image/svg+xml")&&(n.forceKeepAttr=!0)):Jy(r,a)&&(n.forceKeepAttr=!0)})),r})(e,t);return(t,n)=>{r.sanitize(t,((e,t)=>{var r=o({},{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]});return r.PARSER_MEDIA_TYPE=t,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r})(e,n)),r.removed=[]}}return(r,n)=>{for(var o,a=document.createNodeIterator(r,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);o=a.nextNode();)Yy(o,e,t),qn(o)&&ew(o,e,t)}})(a,t),l=r.addFilter,d=r.getFilters,c=r.removeFilter,u=n.addFilter,m=n.getFilters,g=n.removeFilter,h=(e,r)=>{var n=v(r.attr(Gy)),o=1===r.type&&!Ee(e,r.name)&&!La(t,r);return 3===r.type||o&&!n},p={schema:t,addAttributeFilter:u,getAttributeFilters:m,removeAttributeFilter:g,addNodeFilter:l,getNodeFilters:d,removeNodeFilter:c,parse:function(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=a.validate,l=null!==(r=n.context)&&void 0!==r?r:a.root_name,c=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"html",o="xhtml"===n?"application/xhtml+xml":"text/html",a=Ee(t.getSpecialElements(),r.toLowerCase()),l=a?"<".concat(r,">").concat(e,"</").concat(r,">"):e,d="xhtml"===n?'<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'.concat(l,"</body></html>"):"<body>".concat(l,"</body>"),c=i.parseFromString(d,o).body;return s(c,o),a?c.firstChild:c}(e,l,n.format);Ta(t,c);var u=new zh(l,11);nw(u,c,t.getSpecialElements()),c.innerHTML="";var[g,p]=((e,t,r,n)=>{var o=r.validate,a=t.getNonEmptyElements(),i=t.getWhitespaceElements(),s=rw(tw("script,style,head,html,body,title,meta,param"),t.getBlockElements()),l=mi(t),d=/[ \t\r\n]+/g,c=/^[ \t\r\n]+/,u=/[ \t\r\n]+$/,m=e=>{for(var t=e.parent;S(t);){if(t.name in i)return!0;t=t.parent}return!1},g=e=>e.name in s||La(t,e),h=(t,r)=>{var o=r?t.prev:t.next;return!S(o)&&!k(t.parent)&&g(t.parent)&&(t.parent!==e||!0===n.isRootContent)};return[e=>{var t;if(3===e.type&&!m(e)){var r=null!==(t=e.value)&&void 0!==t?t:"";r=r.replace(d," "),(((e,t)=>S(e)&&(t(e)||"br"===e.name))(e.prev,g)||h(e,!0))&&(r=r.replace(c,"")),0===r.length?e.remove():e.value=r}},e=>{var s;if(1===e.type){var d=t.getElementRule(e.name);if(o&&d){var c=ef(t,a,i,e);d.paddInEmptyBlock&&c&&(e=>{for(var r=e;S(r);){if(r.name in l)return ef(t,a,i,r);r=r.parent}return!1})(e)?Jv(r,n,g,e):d.removeEmpty&&c?g(e)?e.remove():e.unwrap():d.paddEmpty&&(c||(e=>{var t;return Qv(e,"#text")&&(null===(t=null==e?void 0:e.firstChild)||void 0===t?void 0:t.value)===yo})(e))&&Jv(r,n,g,e)}}else if(3===e.type&&!m(e)){var p=null!==(s=e.value)&&void 0!==s?s:"";(e.next&&g(e.next)||h(e,!1))&&(p=p.replace(u,"")),0===p.length?e.remove():e.value=p}}]})(u,t,a,n),v=[],f=o?e=>((e,r)=>{of(t,e)&&r.push(e)})(e,v):T,b={nodes:{},attributes:{}},y=e=>Kv(d(),m(),e,b);if(((e,t,r)=>{for(var n=[],o=function(r){var o=r;K(t,(e=>e(o))),k(o.parent)&&o!==e?r=i:n.push(o),a=r},a=e,i=a;a;i=a,a=a.walk())o(a);for(var s=function(){var e=n[l];K(r,(t=>t(e)))},l=n.length-1;l>=0;l--)s()})(u,[g,y],[p,f]),v.reverse(),o&&v.length>0)if(n.context){var{pass:w,fail:x}=X(v,(e=>e.parent===u));nf(x,t,u,y),n.invalid=w.length>0}else nf(v,t,u,y);var C=((e,t)=>{var r,n=null!==(r=t.forced_root_block)&&void 0!==r?r:e.forced_root_block;return!1===n?"":!0===n?"p":n})(a,n);return C&&("body"===u.name||n.isRootContent)&&((e,r)=>{var n=rw(tw("script,style,head,html,body,title,meta,param"),t.getBlockElements()),o=/^[ \t\r\n]+/,i=/[ \t\r\n]+$/,s=e.firstChild,l=null,d=e=>{var t,r;e&&((s=e.firstChild)&&3===s.type&&(s.value=null===(t=s.value)||void 0===t?void 0:t.replace(o,"")),(s=e.lastChild)&&3===s.type&&(s.value=null===(r=s.value)||void 0===r?void 0:r.replace(i,"")))};if(t.isValidChild(e.name,r.toLowerCase())){for(;s;){var c=s.next;h(n,s)?(l||((l=new zh(r,1)).attr(a.forced_root_block_attrs),e.insert(l,s)),l.append(s)):(d(l),l=null),s=c}d(l)}})(u,C),n.invalid||Yv(b,n),u}};return zb(p,a),((e,t,r)=>{t.inline_styles&&Nb(e,t,r)})(p,a,t),p},aw=(e,t,r)=>{var n=(e=>pf(e)?Yh({validate:!1}).serialize(e):e)(e),a=t(n);if(a.isDefaultPrevented())return a;if(pf(e)){if(a.content!==n){var i=ow({validate:!1,forced_root_block:!1,sanitize:r}).parse(a.content,{context:e.name});return o(o({},a),{},{content:i})}return o(o({},a),{},{content:e})}return a},iw=(e,t)=>{if(t.no_events)return ll.value(t);var r=((e,t)=>e.dispatch("BeforeGetContent",t))(e,t);return r.isDefaultPrevented()?ll.error(tg(e,o({content:""},r)).content):ll.value(r)},sw=(e,t,r)=>{if(r.no_events)return t;var n=aw(t,(t=>tg(e,o(o({},r),{},{content:t}))),sc(e));return n.content},lw=(e,t)=>{if(t.no_events)return ll.value(t);var r=aw(t.content,(r=>((e,t)=>e.dispatch("BeforeSetContent",t))(e,o(o({},t),{},{content:r}))),sc(e));return r.isDefaultPrevented()?(eg(e,r),ll.error(void 0)):ll.value(r)},dw=(e,t,r)=>{r.no_events||eg(e,o(o({},r),{},{content:t}))},cw=(e,t,r)=>({element:e,width:t,rows:r}),uw=(e,t)=>({element:e,cells:t}),mw=(e,t)=>({x:e,y:t}),gw=(e,t)=>or(e,t).bind(et).getOr(1),hw=(e,t,r)=>{var n=e.rows;return!!(n[r]?n[r].cells:[])[t]},pw=e=>ee(e,((e,t)=>t.cells.length>e?t.cells.length:e),0),vw=(e,t)=>{for(var r=e.rows,n=0;n<r.length;n++)for(var o=r[n].cells,a=0;a<o.length;a++)if(Or(o[a],t))return V.some(mw(a,n));return V.none()},fw=(e,t,r,n,o)=>{for(var a=[],i=e.rows,s=r;s<=o;s++){var l=i[s].cells,d=t<n?l.slice(t,n+1):l.slice(n,t+1);a.push(uw(i[s].element,d))}return a},bw=e=>((e,t)=>{var r=is(e.element),n=yr("tbody");return xn(n,t),yn(r,n),r})(e,(e=>G(e.rows,(e=>{var t=G(e.cells,(e=>{var t=ss(e);return ir(t,"colspan"),ir(t,"rowspan"),t})),r=is(e.element);return xn(r,t),r})))(e)),yw=(e,t)=>{var r=xr(t.commonAncestorContainer),n=fp(r,e),o=J(n,Ho),a=((e,t)=>re(e,(e=>"li"===Wt(e)&&rm(e,t))).fold(N([]),(t=>(e=>re(e,(e=>"ul"===Wt(e)||"ol"===Wt(e))))(e).map((e=>{var t=yr(Wt(e)),r=ke(hn(e),((e,t)=>qe(t,"list-style")));return cn(t,r),[yr("li"),t]})).getOr([]))))(n,t),i=o.concat(a.length?a:(e=>No(e)?Nr(e).filter(Mo).fold(N([]),(t=>[e,t])):Mo(e)?[e]:[])(r));return G(i,is)},ww=()=>Cg([]),xw=(e,t)=>((e,t)=>tn(t,"table",B(Or,e)))(e,t[0]).bind((e=>{var r=t[0],n=t[t.length-1],o=(e=>{var t=cw(is(e),0,[]);return K(zn(e,"tr"),((e,r)=>{K(zn(e,"td,th"),((n,o)=>{((e,t,r,n,o)=>{for(var a=gw(o,"rowspan"),i=gw(o,"colspan"),s=e.rows,l=r;l<r+a;l++){s[l]||(s[l]=uw(ss(n),[]));for(var d=t;d<t+i;d++)s[l].cells[d]=l===r&&d===t?o:is(o)}})(t,((e,t,r)=>{for(;hw(e,t,r);)t++;return t})(t,o,r),r,e,n)}))})),cw(t.element,pw(t.rows),t.rows)})(e);return((e,t,r)=>vw(e,t).bind((t=>vw(e,r).map((r=>((e,t,r)=>{var n=t.x,o=t.y,a=r.x,i=r.y,s=o<i?fw(e,n,o,a,i):fw(e,n,i,a,o);return cw(e.element,pw(s),s)})(e,t,r))))))(o,r,n).map((e=>Cg([bw(e)])))})).getOrThunk(ww),Cw=(e,t)=>{var r=Xu(t,e);return r.length>0?xw(e,r):((e,t)=>t.length>0&&t[0].collapsed?ww():((e,t)=>{return r=xr(t.cloneContents()),n=yw(e,t),o=ee(n,((e,t)=>(yn(t,e),t)),r),n.length>0?Cg([o]):o;var r,n,o})(e,t[0]))(e,t)},kw=(e,t)=>t>=0&&t<e.length&&Vu(e.charAt(t)),Sw=e=>Zo(e.innerText),_w=function(e,t){var r=((e,t)=>o(o({},e),{},{format:t,get:!0,selection:!0,getInner:!0}))(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t);return iw(e,r).fold(R,(t=>{var r=((e,t)=>{if("text"===t.format)return(e=>V.from(e.selection.getRng()).map((t=>{var r,n=V.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),o=e.getBody(),a=(e=>e.map((e=>e.nodeName)).getOr("div").toLowerCase())(n),i=xr(t.cloneContents());Wh(i),qh(i);var s=e.dom.add(o,a,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},i.dom),l=Sw(s),d=Zo(null!==(r=s.textContent)&&void 0!==r?r:"");if(e.dom.remove(s),kw(d,0)||kw(d,d.length-1)){var c=n.getOr(o),u=Sw(c),m=u.indexOf(l);return-1===m?l:(kw(u,m-1)?" ":"")+l+(kw(u,m+l.length)?" ":"")}return l})).getOr(""))(e);var r=((e,t)=>{var r=e.selection.getRng(),n=e.dom.create("body"),o=e.selection.getSel(),a=Mh(e,Yu(o)),i=t.contextual?Cw(xr(e.getBody()),a).dom:r.cloneContents();return i&&n.appendChild(i),e.selection.serializer.serialize(n,t)})(e,t);return"tree"===t.format?r:e.selection.isCollapsed()?"":r})(e,t);return sw(e,r,t)}))},Ow=e=>qn(e)?e.outerHTML:to(e)?ni.encodeRaw(e.data,!1):oo(e)?"\x3c!--"+e.data+"--\x3e":"",Ew=(e,t)=>{var r,n,o,a,i,s,l,d,c,u=G(he(t.childNodes),Ow);return((e,t)=>{var r=0;K(e,(e=>{0===e[0]?r++:1===e[0]?(((e,t,r)=>{var n=(e=>{var t,r=document.createElement("div"),n=document.createDocumentFragment();for(e&&(r.innerHTML=e);t=r.firstChild;)n.appendChild(t);return n})(t);if(e.hasChildNodes()&&r<e.childNodes.length){var o=e.childNodes[r];e.insertBefore(n,o)}else e.appendChild(n)})(t,e[1],r),r++):2===e[0]&&((e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){var r=e.childNodes[t];e.removeChild(r)}})(t,r)}))})((n=e,o=(r=u).length+n.length+2,a=new Array(o),i=new Array(o),s=(e,t,o,a,i)=>{var l=d(e,t,o,a);if(null===l||l.start===t&&l.diag===t-a||l.end===e&&l.diag===e-o)for(var c=e,u=o;c<t||u<a;)c<t&&u<a&&r[c]===n[u]?(i.push([0,r[c]]),++c,++u):t-e>a-o?(i.push([2,r[c]]),++c):(i.push([1,n[u]]),++u);else{s(e,l.start,o,l.start-l.diag,i);for(var m=l.start;m<l.end;++m)i.push([0,r[m]]);s(l.end,t,l.end-l.diag,a,i)}},l=(e,t,o,a)=>{for(var i=e;i-t<a&&i<o&&r[i]===n[i-t];)++i;return((e,t,r)=>({start:e,end:t,diag:r}))(e,i,t)},d=(e,t,o,s)=>{var d=t-e,c=s-o;if(0===d||0===c)return null;var u,m,g,h,p,v=d-c,f=c+d,b=(f%2==0?f:f+1)/2;for(a[1+b]=e,i[1+b]=t+1,u=0;u<=b;++u){for(m=-u;m<=u;m+=2){for(g=m+b,m===-u||m!==u&&a[g-1]<a[g+1]?a[g]=a[g+1]:a[g]=a[g-1]+1,p=(h=a[g])-e+o-m;h<t&&p<s&&r[h]===n[p];)a[g]=++h,++p;if(v%2!=0&&v-u<=m&&m<=v+u&&i[g-v]<=a[g])return l(i[g-v],m+e-o,t,s)}for(m=v-u;m<=v+u;m+=2){for(g=m+b-v,m===v-u||m!==v+u&&i[g+1]<=i[g-1]?i[g]=i[g+1]-1:i[g]=i[g-1],p=(h=i[g]-1)-e+o-m;h>=e&&p>=o&&r[h]===n[p];)i[g]=h--,p--;if(v%2==0&&-u<=m&&m<=u&&i[g]<=a[g+v])return l(i[g],m+e-o,t,s)}}return null},c=[],s(0,r.length,0,n.length,c),c),t),t},Tw=Ie((()=>document.implementation.createHTMLDocument("undo"))),Aw=e=>{var t,r=(t=e.getBody(),J(G(he(t.childNodes),Ow),(e=>e.length>0))),n=ae(r,(t=>{var r=jh(e.serializer,t);return r.length>0?[r]:[]})),o=n.join("");return(e=>-1!==e.indexOf("</iframe>"))(o)?(e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}))(n):(e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}))(o)},Mw=(e,t,r)=>{var n=r?t.beforeBookmark:t.bookmark;"fragmented"===t.type?Ew(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!S(n)||!Au(n)||!n.isFakeCaret}),n&&(e.selection.moveToBookmark(n),e.selection.scrollIntoView())},Nw=e=>"fragmented"===e.type?e.fragments.join(""):e.content,Rw=e=>{var t=yr("body",Tw());return En(t,Nw(e)),K(zn(t,"*[data-mce-bogus]"),Sn),On(t)},Dw=(e,t)=>!(!e||!t)&&(!!((e,t)=>Nw(e)===Nw(t))(e,t)||((e,t)=>Rw(e)===Rw(t))(e,t)),Bw=e=>0===e.get(),Lw=(e,t,r)=>{Bw(r)&&(e.typing=t)},Hw=(e,t)=>{e.typing&&(Lw(e,!1,t),e.add())},Pw=e=>({init:{bindEvents:T},undoManager:{beforeChange:(t,r)=>((e,t,r)=>{Bw(t)&&r.set(al(e.selection))})(e,t,r),add:(t,r,n,o,a,i)=>((e,t,r,n,o,a,i)=>{var s=Aw(e),l=Ht.extend(a||{},s);if(!Bw(n)||e.removed)return null;var d=t.data[r.get()];if(e.dispatch("BeforeAddUndo",{level:l,lastLevel:d,originalEvent:i}).isDefaultPrevented())return null;if(d&&Dw(d,l))return null;t.data[r.get()]&&o.get().each((e=>{t.data[r.get()].beforeBookmark=e}));var c=Sd(e);if(c&&t.data.length>c){for(var u=0;u<t.data.length-1;u++)t.data[u]=t.data[u+1];t.data.length--,r.set(t.data.length)}l.bookmark=al(e.selection),r.get()<t.data.length-1&&(t.data.length=r.get()+1),t.data.push(l),r.set(t.data.length-1);var m={level:l,lastLevel:d,originalEvent:i};return r.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",m),e.dispatch("change",m)):e.dispatch("AddUndo",m),l})(e,t,r,n,o,a,i),undo:(t,r,n)=>((e,t,r,n)=>{var o;return t.typing&&(t.add(),t.typing=!1,Lw(t,!1,r)),n.get()>0&&(n.set(n.get()-1),o=t.data[n.get()],Mw(e,o,!0),e.setDirty(!0),e.dispatch("Undo",{level:o})),o})(e,t,r,n),redo:(t,r)=>((e,t,r)=>{var n;return t.get()<r.length-1&&(t.set(t.get()+1),n=r[t.get()],Mw(e,n,!1),e.setDirty(!0),e.dispatch("Redo",{level:n})),n})(e,t,r),clear:(t,r)=>((e,t,r)=>{t.data=[],r.set(0),t.typing=!1,e.dispatch("ClearUndos")})(e,t,r),reset:e=>(e=>{e.clear(),e.add()})(e),hasUndo:(t,r)=>((e,t,r)=>r.get()>0||t.typing&&t.data[0]&&!Dw(Aw(e),t.data[0]))(e,t,r),hasRedo:(e,t)=>((e,t)=>t.get()<e.data.length-1&&!e.typing)(e,t),transact:(e,t,r)=>((e,t,r)=>(Hw(e,t),e.beforeChange(),e.ignore(r),e.add()))(e,t,r),ignore:(e,t)=>((e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}})(e,t),extra:(t,r,n,o)=>((e,t,r,n,o)=>{if(t.transact(n)){var a=t.data[r.get()].bookmark,i=t.data[r.get()-1];Mw(e,i,!0),t.transact(o)&&(t.data[r.get()-1].beforeBookmark=a)}})(e,t,r,n,o)},formatter:{match:(t,r,n,o)=>Of(e,t,r,n,o),matchAll:(t,r)=>((e,t,r)=>{var n=[],o={},a=e.selection.getStart();return e.dom.getParent(a,(a=>{for(var i=0;i<t.length;i++){var s=t[i];!o[s]&&_f(e,a,s,r)&&(o[s]=!0,n.push(s))}}),e.dom.getRoot()),n})(e,t,r),matchNode:(t,r,n,o)=>_f(e,t,r,n,o),canApply:t=>((e,t)=>{var r=e.formatter.get(t),n=e.dom;if(r&&e.selection.isEditable())for(var o=e.selection.getStart(),a=Cm(n,o),i=r.length-1;i>=0;i--){var s=r[i];if(!_m(s))return!0;for(var l=a.length-1;l>=0;l--)if(n.is(a[l],s.selector))return!0}return!1})(e,t),closest:t=>((e,t)=>{var r=t=>Or(t,xr(e.getBody()));return V.from(e.selection.getStart(!0)).bind((n=>yf(xr(n),(r=>pe(t,(t=>((t,r)=>_f(e,t.dom,r)?V.some(r):V.none())(r,t)))),r))).getOrNull()})(e,t),apply:(t,r,n)=>kb(e,t,r,n),remove:(t,r,n,o)=>fb(e,t,r,n,o),toggle:(t,r,n)=>((e,t,r,n)=>{var o=e.formatter.get(t);o&&(!Of(e,t,r,n)||"toggle"in o[0]&&!o[0].toggle?kb(e,t,r,n):fb(e,t,r,n))})(e,t,r,n),formatChanged:(t,r,n,a,i)=>((e,t,r,n,a,i)=>(((e,t,r,n,o,a)=>{var i=t.get();K(r.split(","),(t=>{var r=Oe(i,t).getOrThunk((()=>{var e={withSimilar:{state:Pi(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Pi(!1),similar:!1,callbacks:[]},withVars:[]};return i[t]=e,e})),s=()=>{var r=Eb(e);return Ob(e,r,t,o,a).isSome()};if(C(a)){var l=o?r.withSimilar:r.withoutSimilar;l.callbacks.push(n),1===l.callbacks.length&&l.state.set(s())}else r.withVars.push({state:Pi(s()),similar:o,vars:a,callback:n})})),t.set(i)})(e,t,r,n,a,i),{unbind:()=>((e,t,r)=>{var n=e.get();K(t.split(","),(e=>Oe(n,e).each((t=>{n[e]={withSimilar:o(o({},t.withSimilar),{},{callbacks:J(t.withSimilar.callbacks,(e=>e!==r))}),withoutSimilar:o(o({},t.withoutSimilar),{},{callbacks:J(t.withoutSimilar.callbacks,(e=>e!==r))}),withVars:J(t.withVars,(e=>e.callback!==r))}})))),e.set(n)})(t,r,n)}))(e,t,r,n,a,i)},editor:{getContent:t=>((e,t)=>V.from(e.getBody()).fold(N("tree"===t.format?new zh("body",11):""),(r=>$h(e,t,r))))(e,t),setContent:(t,r)=>((e,t,r)=>V.from(e.getBody()).map((n=>pf(t)?((e,t,r,n)=>{Xv(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),r);var o=Yh({validate:!1},e.schema).serialize(r),a=Bo(xr(t))?o:Ht.trim(o);return vf(e,a,n.no_selection),{content:r,html:a}})(e,n,t,r):((e,t,r,n)=>{if(0===r.length||/^\s+$/.test(r)){var o='<br data-mce-bogus="1">';"TABLE"===t.nodeName?r="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(r="<li>"+o+"</li>");var a=Nl(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),a.toLowerCase())?(r=o,r=e.dom.createHTML(a,Rl(e),r)):r||(r=o),vf(e,r,n.no_selection),{content:r,html:r}}"raw"!==n.format&&(r=Yh({validate:!1},e.schema).serialize(e.parser.parse(r,{isRootContent:!0,insert:!0})));var i=Bo(xr(t))?r:Ht.trim(r);return vf(e,i,n.no_selection),{content:i,html:i}})(e,n,t,r))).getOr({content:t,html:pf(r.content)?"":r.content}))(e,t,r),insertContent:(t,r)=>hf(e,t,r),addVisual:t=>((e,t)=>{var r=e.dom,n=S(t)?t:e.getBody();K(r.select("table,a",n),(t=>{switch(t.nodeName){case"TABLE":var n=Dd(e),o=r.getAttrib(t,"border");o&&"0"!==o||!e.hasVisual?r.removeClass(t,n):r.addClass(t,n);break;case"A":if(!r.getAttrib(t,"href")){var a=r.getAttrib(t,"name")||t.id,i=Bd(e);a&&e.hasVisual?r.addClass(t,i):r.removeClass(t,i)}}})),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})})(e,t)},selection:{getContent:(t,r)=>_w(e,t,r)},autocompleter:{addDecoration:t=>Bh(e,t),removeDecoration:()=>((e,t)=>Lh(t).each((t=>{var r=e.selection.getBookmark();Sn(t),e.selection.moveToBookmark(r)})))(e,xr(e.getBody()))},raw:{getModel:()=>V.none()}}),Iw=e=>Ee(e.plugins,"rtc"),Fw=e=>e.rtcInstance?e.rtcInstance:Pw(e),zw=e=>{var t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},Vw=e=>zw(e).init.bindEvents(),Zw=e=>0===e.dom.length?(kn(e),V.none()):V.some(e),jw=(e,t,r,n)=>{e.bind((e=>((n?Kp:Gp)(e.dom,n?e.dom.length:0),t.filter(Yt).map((t=>((e,t,r,n)=>{var o=e.dom,a=t.dom,i=n?o.length:a.length;n?(Yp(o,a,!1,!n),r.setStart(a,i)):(Yp(a,o,!1,!n),r.setEnd(a,i))})(e,t,r,n)))))).orThunk((()=>{var e=((e,t)=>e.filter((e=>Km.isBookmarkNode(e.dom))).bind(t?Lr:Br))(t,n).or(t).filter(Yt);return e.map((e=>((e,t)=>{Nr(e).each((r=>{var n=e.dom;t&&Fp(r,Is(n,0))?Gp(n,0):!t&&zp(r,Is(n,n.length))&&Kp(n,n.length)}))})(e,n)))}))},Uw=(e,t,r)=>{if(Ee(e,t)){var n=J(e[t],(e=>e!==r));0===n.length?delete e[t]:e[t]=n}},Ww=e=>!(!e||!e.ownerDocument)&&Er(xr(e.ownerDocument),xr(e)),qw=(e,t,r,n)=>{var a,i,{selectorChangedWithUnbind:s}=((e,t)=>{var r,n,o=(t,r)=>re(r,(r=>e.is(r,t))),a=t=>e.getParents(t,void 0,e.getRoot());return{selectorChangedWithUnbind:(e,i)=>(r||(r={},n={},t.on("NodeChange",(e=>{var t=e.element,i=a(t),s={};be(r,((e,t)=>{o(t,i).each((r=>{n[t]||(K(e,(e=>{e(!0,{node:r,selector:t,parents:i})})),n[t]=e),s[t]=e}))})),be(n,((e,r)=>{s[r]||(delete n[r],K(e,(e=>{e(!1,{node:t,selector:r,parents:i})})))}))}))),r[e]||(r[e]=[]),r[e].push(i),o(e,a(t.selection.getStart())).each((()=>{n[e]=r[e]})),{unbind:()=>{Uw(r,e,i),Uw(n,e,i)}})}})(e,n),l=(e,t)=>function(e,t){var r=((e,t)=>o(o({format:"html"},e),{},{set:!0,selection:!0,content:t}))(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t);lw(e,r).each((t=>{var r=((e,t)=>{if("raw"!==t.format){var r=e.selection.getRng(),n=e.dom.getParent(r.commonAncestorContainer,e.dom.isBlock),a=n?{context:n.nodeName.toLowerCase()}:{},i=e.parser.parse(t.content,o(o({forced_root_block:!1},a),t));return Yh({validate:!1},e.schema).serialize(i)}return t.content})(e,t),n=e.selection.getRng();((e,t)=>{var r=V.from(t.firstChild).map(xr),n=V.from(t.lastChild).map(xr);e.deleteContents(),e.insertNode(t);var o=r.bind(Br).filter(Yt).bind(Zw),a=n.bind(Lr).filter(Yt).bind(Zw);jw(o,r,e,!0),jw(a,n,e,!1),e.collapse(!1)})(n,n.createContextualFragment(r)),e.selection.setRng(n),rh(e,n),dw(e,r,t)}))}(n,e,t),d=e=>{var t=u();t.collapse(!!e),m(t)},c=()=>t.getSelection?t.getSelection():t.document.selection,u=()=>{var r,o=(e,t,r)=>{try{return t.compareBoundaryPoints(e,r)}catch(e){return-1}},s=t.document;if(S(n.bookmark)&&!Sh(n)){var l=gh(n);if(l.isSome())return l.map((e=>Mh(n,[e])[0])).getOr(s.createRange())}try{var d=c();d&&!Wn(d.anchorNode)&&(r=d.rangeCount>0?d.getRangeAt(0):s.createRange(),r=Mh(n,[r])[0])}catch(e){}if(r||(r=s.createRange()),ao(r.startContainer)&&r.collapsed){var u=e.getRoot();r.setStart(u,0),r.setEnd(u,0)}return a&&i&&(0===o(r.START_TO_START,r,a)&&0===o(r.END_TO_END,r,a)?r=i:(a=null,i=null)),r},m=(e,t)=>{if((e=>!!e&&Ww(e.startContainer)&&Ww(e.endContainer))(e)){var r=c();if(e=n.dispatch("SetSelectionRange",{range:e,forward:t}).range,r){i=e;try{r.removeAllRanges(),r.addRange(e)}catch(e){}!1===t&&r.extend&&(r.collapse(e.endContainer,e.endOffset),r.extend(e.startContainer,e.startOffset)),a=r.rangeCount>0?r.getRangeAt(0):null}if(!e.collapsed&&e.startContainer===e.endContainer&&(null==r?void 0:r.setBaseAndExtent)&&e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()){var o=e.startContainer.childNodes[e.startOffset];o&&"IMG"===o.nodeName&&(r.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),r.anchorNode===e.startContainer&&r.focusNode===e.endContainer||r.setBaseAndExtent(o,0,o,1))}n.dispatch("AfterSetSelectionRange",{range:e,forward:t})}},g=()=>{var t=c(),r=null==t?void 0:t.anchorNode,n=null==t?void 0:t.focusNode;if(!t||!r||!n||Wn(r)||Wn(n))return!0;var o=e.createRng(),a=e.createRng();try{o.setStart(r,t.anchorOffset),o.collapse(!0),a.setStart(n,t.focusOffset),a.collapse(!0)}catch(e){return!0}return o.compareBoundaryPoints(o.START_TO_START,a)<=0},h={dom:e,win:t,serializer:r,editor:n,expand:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"word"};return m(Lg(e).expand(u(),t))},collapse:d,setCursorLocation:(t,r)=>{var o=e.createRng();S(t)&&S(r)?(o.setStart(t,r),o.setEnd(t,r),m(o),d(!1)):(nm(e,o,n.getBody(),!0),m(o))},getContent:e=>function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((e,t,r)=>zw(e).selection.getContent(t,r))(e,t.format?t.format:"html",t)}(n,e),setContent:l,getBookmark:(e,t)=>p.getBookmark(e,t),moveToBookmark:e=>p.moveToBookmark(e),select:(t,r)=>(((e,t,r)=>V.from(t).bind((t=>V.from(t.parentNode).map((n=>{var o=e.nodeIndex(t),a=e.createRng();return a.setStart(n,o),a.setEnd(n,o+1),r&&(nm(e,a,t,!0),nm(e,a,t,!1)),a})))))(e,t,r).each(m),t),isCollapsed:()=>{var e=u(),t=c();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isEditable:()=>{var t=u(),r=n.getBody().querySelectorAll('[data-mce-selected="1"]');return r.length>0?ie(r,(t=>e.isEditable(t.parentElement))):t.startContainer===t.endContainer?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer)},isForward:g,setNode:t=>(l(e.getOuterHTML(t)),t),getNode:()=>((e,t)=>{if(!t)return e;var r=t.startContainer,n=t.endContainer,o=t.startOffset,a=t.endOffset,i=t.commonAncestorContainer;t.collapsed||(r===n&&a-o<2&&r.hasChildNodes()&&(i=r.childNodes[o]),to(r)&&to(n)&&(r=r.length===o?Ah(r.nextSibling,!0):r.parentNode,n=0===a?Ah(n.previousSibling,!1):n.parentNode,r&&r===n&&(i=r)));var s=to(i)?i.parentNode:i;return qn(s)?s:e})(n.getBody(),u()),getSel:c,setRng:m,getRng:u,getStart:e=>Eh(n.getBody(),u(),e),getEnd:e=>Th(n.getBody(),u(),e),getSelectedBlocks:(t,r)=>((e,t,r,n)=>{var o=[],a=e.getRoot(),i=e.getParent(r||Eh(a,t,t.collapsed),e.isBlock),s=e.getParent(n||Th(a,t,t.collapsed),e.isBlock);if(i&&i!==a&&o.push(i),i&&s&&i!==s)for(var l,d=new Zn(i,a);(l=d.next())&&l!==s;)e.isBlock(l)&&o.push(l);return s&&i!==s&&s!==a&&o.push(s),o})(e,u(),t,r),normalize:()=>{var t=u(),r=c();if(!(Yu(r).length>1)&&om(n)){var o=Rg(e,t);return o.each((e=>{m(e,g())})),o.getOr(t)}return t},selectorChanged:(e,t)=>(s(e,t),h),selectorChangedWithUnbind:s,getScrollContainer:()=>{for(var t,r=e.getRoot();r&&"BODY"!==r.nodeName;){if(r.scrollHeight>r.clientHeight){t=r;break}r=r.parentNode}return t},scrollIntoView:(e,t)=>{S(e)?((e,t,r)=>{(e.inline?Qg:th)(e,t,r)})(n,e,t):rh(n,u(),t)},placeCaretAt:(e,t)=>m(Sg(e,t,n.getDoc())),getBoundingClientRect:()=>{var e=u();return e.collapsed?Is.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:()=>{t=a=i=null,v.destroy()}},p=Km(h),v=lg(h,n);return h.bookmarkManager=p,h.controlSelection=v,h},$w=(e,t,r)=>{-1===Ht.inArray(t,r)&&(e.addAttributeFilter(r,((e,t)=>{for(var r=e.length;r--;)e[r].attr(t,null)})),t.push(r))},Gw=(e,t)=>{var r=["data-mce-selected"],n=o({entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1},e),a=t&&t.dom?t.dom:Bi.DOM,i=t&&t.schema?t.schema:hi(n),s=ow(n,i);return((e,t,r)=>{e.addAttributeFilter("data-mce-tabindex",((e,t)=>{for(var r=e.length;r--;){var n=e[r];n.attr("tabindex",n.attr("data-mce-tabindex")),n.attr(t,null)}})),e.addAttributeFilter("src,href,style",((e,n)=>{for(var o="data-mce-"+n,a=t.url_converter,i=t.url_converter_scope,s=e.length;s--;){var l=e[s],d=l.attr(o);void 0!==d?(l.attr(n,d.length>0?d:null),l.attr(o,null)):(d=l.attr(n),"style"===n?d=r.serializeStyle(r.parseStyle(d),l.name):a&&(d=a.call(i,d,n,l.name)),l.attr(n,d.length>0?d:null))}})),e.addAttributeFilter("class",(e=>{for(var t=e.length;t--;){var r=e[t],n=r.attr("class");n&&(n=n.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),r.attr("class",n.length>0?n:null))}})),e.addAttributeFilter("data-mce-type",((e,t,r)=>{for(var n=e.length;n--;){var o=e[n];if("bookmark"===o.attr("data-mce-type")&&!r.cleanup){var a=V.from(o.firstChild).exists((e=>{var t;return!Vo(null!==(t=e.value)&&void 0!==t?t:"")}));a?o.unwrap():o.remove()}}})),e.addNodeFilter("noscript",(e=>{for(var t,r=e.length;r--;){var n=e[r].firstChild;n&&(n.value=ni.decode(null!==(t=n.value)&&void 0!==t?t:""))}})),e.addNodeFilter("script,style",((e,r)=>{for(var n,o=e=>e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,""),a=e.length;a--;){var i=e[a],s=i.firstChild,l=null!==(n=null==s?void 0:s.value)&&void 0!==n?n:"";if("script"===r){var d=i.attr("type");d&&i.attr("type","mce-no/type"===d?null:d.replace(/^mce\-/,"")),"xhtml"===t.element_format&&s&&l.length>0&&(s.value="// <![CDATA[\n"+o(l)+"\n// ]]>")}else"xhtml"===t.element_format&&s&&l.length>0&&(s.value="\x3c!--\n"+o(l)+"\n--\x3e")}})),e.addNodeFilter("#comment",(e=>{for(var n=e.length;n--;){var o=e[n],a=o.value;t.preserve_cdata&&0===(null==a?void 0:a.indexOf("[CDATA["))?(o.name="#cdata",o.type=4,o.value=r.decode(a.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==a?void 0:a.indexOf("mce:protected "))&&(o.name="#text",o.type=3,o.raw=!0,o.value=unescape(a).substr(14))}})),e.addNodeFilter("xml:namespace,input",((e,t)=>{for(var r=e.length;r--;){var n=e[r];7===n.type?n.remove():1===n.type&&("input"!==t||n.attr("type")||n.attr("type","text"))}})),e.addAttributeFilter("data-mce-type",(t=>{K(t,(t=>{"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())}))})),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",((e,t)=>{for(var r=e.length;r--;)e[r].attr(t,null)})),t.remove_trailing_brs&&Rb(t,e,e.schema)})(s,n,a),{schema:i,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:function(e){var r=o({format:"html"},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),l=((e,t,r)=>((e,t)=>S(e)&&e.hasEventListeners("PreProcess")&&!t.no_events)(e,r)?((e,t,r)=>{var n,a=e.dom,i=t.cloneNode(!0),s=document.implementation;if(s.createHTMLDocument){var l=s.createHTMLDocument("");Ht.each("BODY"===i.nodeName?i.childNodes:[i],(e=>{l.body.appendChild(l.importNode(e,!0))})),i="BODY"!==i.nodeName?l.body.firstChild:l.body,n=a.doc,a.doc=l}return((e,t)=>{e.dispatch("PreProcess",t)})(e,o(o({},r),{},{node:i})),n&&(a.doc=n),i})(e,t,r):t)(t,e,r),d=((e,t,r)=>{var n=Zo(r.getInner?t.innerHTML:e.getOuterHTML(t));return r.selection||Bo(xr(t))?n:Ht.trim(n)})(a,l,r),c=((e,t,r)=>{var n=r.selection?o({forced_root_block:!1},r):r,a=e.parse(t,n);return(e=>{var t=e=>"br"===(null==e?void 0:e.name),r=e.lastChild;if(t(r)){var n=r.prev;t(n)&&(r.remove(),n.remove())}})(a),a})(s,d,r);return"tree"===r.format?c:((e,t,r,n,a)=>{var i=((e,t,r)=>Yh(e,t).serialize(r))(t,r,n);return((e,t,r)=>{if(!t.no_events&&e){var n=((e,t)=>e.dispatch("PostProcess",t))(e,o(o({},t),{},{content:r}));return n.content}return r})(e,a,i)})(t,n,i,c,r)},addRules:i.addValidElements,setRules:i.setValidElements,addTempAttr:B($w,s,r),getTempAttrs:N(r),getNodeFilters:s.getNodeFilters,getAttributeFilters:s.getAttributeFilters,removeNodeFilter:s.removeNodeFilter,removeAttributeFilter:s.removeAttributeFilter}},Kw=(e,t)=>{var r=Gw(e,t);return{schema:r.schema,addNodeFilter:r.addNodeFilter,addAttributeFilter:r.addAttributeFilter,serialize:r.serialize,addRules:r.addRules,setRules:r.setRules,addTempAttr:r.addTempAttr,getTempAttrs:r.getTempAttrs,getNodeFilters:r.getNodeFilters,getAttributeFilters:r.getAttributeFilters,removeNodeFilter:r.removeNodeFilter,removeAttributeFilter:r.removeAttributeFilter}},Yw=function(e,t){var r=((e,t)=>o(o({format:"html"},e),{},{set:!0,content:t}))(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t);return lw(e,r).map((t=>{var r=((e,t,r)=>Fw(e).editor.setContent(t,r))(e,t.content,t);return dw(e,r.html,t),r.content})).getOr(t)},Xw="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),Jw="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),Qw="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),ex=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],tx=(e,t)=>{var r=J(t,(t=>Ee(e,t)));return ce(r)},rx=e=>{var t=tx(e,Xw),r=e.forced_root_block;return!1!==r&&""!==r||t.push("forced_root_block (false only)"),ce(t)},nx=e=>tx(e,Jw),ox=(e,t)=>{var r=Ht.makeMap(e.plugins," "),n=J(t,(e=>Ee(r,e)));return ce(n)},ax=e=>ox(e,Qw),ix=e=>ox(e,ex.map((e=>e.name))),sx=e=>re(ex,(t=>t.name===e)).fold((()=>e),(t=>t.replacedWith?"".concat(e,", replaced by ").concat(t.replacedWith):e)),lx=Bi.DOM,dx=e=>V.from(e).each((e=>e.destroy())),cx=(()=>{var e={};return{add:(t,r)=>{e[t]=r},get:t=>e[t]?e[t]:{icons:{}},has:t=>Ee(e,t)}})(),ux=Zi.ModelManager,mx=(e,t)=>t.dom[e],gx=(e,t)=>parseInt(un(t,e),10),hx=B(mx,"clientWidth"),px=B(mx,"clientHeight"),vx=B(gx,"margin-top"),fx=B(gx,"margin-left"),bx=e=>{var t=[],r=()=>{var t,r=e.theme;return r&&r.getNotificationManagerImpl?r.getNotificationManagerImpl():{open:t=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")},close:t,getArgs:t}},n=()=>V.from(t[0]),a=()=>{K(t,(e=>{e.reposition()}))},i=e=>{ne(t,(t=>t===e)).each((e=>{t.splice(e,1)}))},s=function(s){var l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.removed||!(e=>{var t;return(t=e.inline?e.getBody():e.getContentAreaContainer(),V.from(t).map(xr)).map(Xr).getOr(!1)})(e)?{}:(l&&e.dispatch("BeforeOpenNotification",{notification:s}),re(t,(e=>{return t=r().getArgs(e),n=s,!(t.type!==n.type||t.text!==n.text||t.progressBar||t.timeout||n.progressBar||n.timeout);var t,n})).getOrThunk((()=>{e.editorManager.setActive(e);var l=r().open(s,(()=>{i(l),a(),n().fold((()=>e.focus()),(e=>nh(xr(e.getEl()))))}));return(e=>{t.push(e)})(l),a(),e.dispatch("OpenNotification",{notification:o({},l)}),l})))},l=N(t);return(e=>{e.on("SkinLoaded",(()=>{var t=ld(e);t&&s({text:t,type:"warning",timeout:0},!1),a()})),e.on("show ResizeEditor ResizeWindow NodeChange",(()=>{requestAnimationFrame(a)})),e.on("remove",(()=>{K(t.slice(),(e=>{r().close(e)}))}))})(e),{open:s,close:()=>{n().each((e=>{r().close(e),i(e),a()}))},getNotifications:l}},yx=Zi.PluginManager,wx=Zi.ThemeManager,xx=e=>{var t=[],r=()=>{var t,r=e.theme;return r&&r.getWindowManagerImpl?r.getWindowManagerImpl():{open:t=()=>{throw new Error("Theme did not provide a WindowManager implementation.")},openUrl:t,alert:t,confirm:t,close:t}},n=(e,t)=>function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t?t.apply(e,n):void 0},o=r=>{(t=>{e.dispatch("CloseWindow",{dialog:t})})(r),0===(t=J(t,(e=>e!==r))).length&&e.focus()},a=r=>{e.editorManager.setActive(e),mh(e),e.ui.show();var n=r();return(r=>{t.push(r),(t=>{e.dispatch("OpenWindow",{dialog:t})})(r)})(n),n};return e.on("remove",(()=>{K(t,(e=>{r().close(e)}))})),{open:(e,t)=>a((()=>r().open(e,t,o))),openUrl:e=>a((()=>r().openUrl(e,o))),alert:(e,t,o)=>{var a=r();a.alert(e,n(o||a,t))},confirm:(e,t,o)=>{var a=r();a.confirm(e,n(o||a,t))},close:()=>{V.from(t[t.length-1]).each((e=>{r().close(e),o(e)}))}}},Cx=(e,t)=>{e.notificationManager.open({type:"error",text:t})},kx=(e,t)=>{e._skinLoaded?Cx(e,t):e.on("SkinLoaded",(()=>{Cx(e,t)}))},Sx=(e,t,r)=>{Xm(e,t,{message:r}),console.error(r)},_x=(e,t,r)=>r?"Failed to load ".concat(e,": ").concat(r," from url ").concat(t):"Failed to load ".concat(e," url: ").concat(t),Ox=function(e){var t=window.console;if(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];t.error?t.error(e,...n):t.log(e,...n)}},Ex=(e,t)=>{var r=e.editorManager.baseURL+"/skins/content",n=e.editorManager.suffix,o="content".concat(n,".css");return G(t,(t=>(e=>/^[a-z0-9\-]+$/i.test(e))(t)&&!e.inline?"".concat(r,"/").concat(t,"/").concat(o):e.documentBaseURI.toAbsolute(t)))},Tx=(e,t)=>{var r={};return{findAll:function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z,a=J((e=>e?he(e.getElementsByTagName("img")):[])(n),(t=>{var r=t.src;return!t.hasAttribute("data-mce-bogus")&&!t.hasAttribute("data-mce-placeholder")&&!(!r||r===Dt.transparentSrc)&&(qe(r,"blob:")?!e.isUploaded(r)&&o(t):!!qe(r,"data:")&&o(t))})),i=G(a,(e=>{var n=e.src;if(Ee(r,n))return r[n].then((t=>v(t)?t:{image:e,blobInfo:t.blobInfo}));var o=((e,t)=>{var r,n,o=()=>Promise.reject("Invalid data URI");if(qe(t,"blob:")){var a=e.getByUri(t);return S(a)?Promise.resolve(a):(r=t,qe(r,"blob:")?(e=>fetch(e).then((e=>e.ok?e.blob():Promise.reject())).catch((()=>Promise.reject({message:"Cannot convert ".concat(e," to Blob. Resource might not exist or is inaccessible."),uriType:"blob"}))))(r):qe(r,"data:")?(n=r,new Promise(((e,t)=>{Db(n).bind((e=>{var{type:t,data:r,base64Encoded:n}=e;return Bb(t,r,n)})).fold((()=>t("Invalid data URI")),e)}))):Promise.reject("Unknown URI format")).then((t=>Lb(t).then((r=>Pb(r,!1,(r=>V.some(Ib(e,t,r)))).getOrThunk(o)))))}return qe(t,"data:")?Fb(e,t).fold(o,(e=>Promise.resolve(e))):Promise.reject("Unknown image data format")})(t,n).then((t=>(delete r[n],{image:e,blobInfo:t}))).catch((e=>(delete r[n],e)));return r[n]=o,o}));return Promise.all(i)}}},Ax=()=>{var e={},t=(e,t)=>({status:e,resultUri:t}),r=t=>t in e;return{hasBlobUri:r,getResultUri:t=>{var r=e[t];return r?r.resultUri:null},isPending:t=>!!r(t)&&1===e[t].status,isUploaded:t=>!!r(t)&&2===e[t].status,markPending:r=>{e[r]=t(1,null)},markUploaded:(r,n)=>{e[r]=t(2,n)},removeFailed:t=>{delete e[t]},destroy:()=>{e={}}}},Mx=0,Nx=(e,t)=>{var r={},n=(e,r)=>new Promise(((n,o)=>{var a=new XMLHttpRequest;a.open("POST",t.url),a.withCredentials=t.credentials,a.upload.onprogress=e=>{r(e.loaded/e.total*100)},a.onerror=()=>{o("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=()=>{if(a.status<200||a.status>=300)o("HTTP Error: "+a.status);else{var e,r,i=JSON.parse(a.responseText);i&&v(i.location)?n((e=t.basePath,r=i.location,e?e.replace(/\/$/,"")+"/"+r.replace(/^\//,""):r)):o("Invalid JSON: "+a.responseText)}};var i=new FormData;i.append("file",e.blob(),e.filename()),a.send(i)})),o=_(t.handler)?t.handler:n,a=(e,t)=>({url:t,blobInfo:e,status:!0}),i=(e,t)=>({url:"",blobInfo:e,status:!1,error:t}),s=(e,t)=>{Ht.each(r[e],(e=>{e(t)})),delete r[e]},l=(t,n)=>(t=Ht.grep(t,(t=>!e.isUploaded(t.blobUri()))),Promise.all(Ht.map(t,(t=>e.isPending(t.blobUri())?(e=>{var t=e.blobUri();return new Promise((e=>{r[t]=r[t]||[],r[t].push(e)}))})(t):((t,r,n)=>(e.markPending(t.blobUri()),new Promise((o=>{var l;try{var d=()=>{l&&l.close()};r(t,(e=>{e<0||e>100||V.from(l).orThunk((()=>V.from(n).map(P))).each((t=>{l=t,t.progressBar.value(e)}))})).then((r=>{d(),e.markUploaded(t.blobUri(),r),s(t.blobUri(),a(t,r)),o(a(t,r))}),(r=>{(r=>{d(),e.removeFailed(t.blobUri()),s(t.blobUri(),i(t,r)),o(i(t,r))})(v(r)?{message:r}:r)}))}catch(e){o(i(t,e))}}))))(t,o,n)))));return{upload:(e,r)=>t.url||o!==n?l(e,r):new Promise((e=>{e([])}))}},Rx=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Dx=(e,t)=>Nx(t,{url:jl(e),basePath:Ul(e),credentials:Wl(e),handler:ql(e)}),Bx=e=>{var t,r,n=(()=>{var e=[],t=e=>{if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");var t,r,n=e.id||"blobid"+Mx+++(r=()=>Math.round(4294967295*Math.random()).toString(36),"s"+(new Date).getTime().toString(36)+r()+r()+r()),o=e.name||n,a=e.blob;return{id:N(n),name:N(o),filename:N(e.filename||o+"."+(t=a.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[t.toLowerCase()]||"dat")),blob:N(a),base64:N(e.base64),blobUri:N(e.blobUri||URL.createObjectURL(a)),uri:N(e.uri)}},r=t=>re(e,t).getOrUndefined(),n=e=>r((t=>t.id()===e));return{create:(e,r,n,o,a)=>{if(v(e))return t({id:e,name:o,filename:a,blob:r,base64:n});if(f(e))return t(e);throw new Error("Unknown input type")},add:t=>{n(t.id())||e.push(t)},get:n,getByUri:e=>r((t=>t.blobUri()===e)),getByData:(e,t)=>r((r=>r.base64()===e&&r.blob().type===t)),findFirst:r,removeByUri:t=>{e=J(e,(e=>e.blobUri()!==t||(URL.revokeObjectURL(e.blobUri()),!1)))},destroy:()=>{K(e,(e=>{URL.revokeObjectURL(e.blobUri())})),e=[]}}})(),o=Ax(),a=[],i=t=>r=>e.selection?t(r):[],s=(e,t,r)=>{var n=0;do{-1!==(n=e.indexOf(t,n))&&(e=e.substring(0,n)+r+e.substr(n+t.length),n+=r.length-t.length+1)}while(-1!==n);return e},l=(e,t,r)=>{var n='src="'.concat(r,'"').concat(r===Dt.transparentSrc?' data-mce-placeholder="1"':"");return e=s(e,'src="'.concat(t,'"'),n),s(e,'data-mce-src="'+t+'"','data-mce-src="'+r+'"')},d=(t,r)=>{K(e.undoManager.data,(e=>{"fragmented"===e.type?e.fragments=G(e.fragments,(e=>l(e,t,r))):e.content=l(e.content,t,r)}))},c=()=>(t||(t=Dx(e,o)),g().then(i((r=>{var o=G(r,(e=>e.blobInfo));return t.upload(o,Rx(e)).then(i((t=>{var o=[],a=!1,i=G(t,((t,i)=>{var{blobInfo:s,image:l}=r[i],c=!1;return t.status&&zl(e)?(t.url&&!We(l.src,t.url)&&(a=!0),n.removeByUri(l.src),Iw(e)||((t,r)=>{var n,o=e.convertURL(r,"src");d(t.src,r),rr(xr(t),{src:Fl(e)?(n=r,n+(-1===n.indexOf("?")?"?":"&")+(new Date).getTime()):r,"data-mce-src":o})})(l,t.url)):t.error&&(t.error.remove&&(d(l.src,Dt.transparentSrc),o.push(l),c=!0),((e,t)=>{kx(e,Vi.translate(["Failed to upload image: {0}",t]))})(e,t.error.message)),{element:l,status:t.status,uploadUri:t.url,blobInfo:s,removed:c}}));return o.length>0&&!Iw(e)?e.undoManager.transact((()=>{K(_n(o),(t=>{var r=Nr(t);kn(t),r.each((e=>t=>{((e,t)=>e.dom.isEmpty(t.dom)&&S(e.schema.getTextBlockElements()[Wt(t)]))(e,t)&&yn(t,br('<br data-mce-bogus="1" />'))})(e)),n.removeByUri(t.dom.src)}))})):a&&e.undoManager.dispatchChange(),i})))})))),u=()=>Il(e)?c():Promise.resolve([]),m=e=>ie(a,(t=>t(e))),g=()=>(r||(r=Tx(o,n)),r.findAll(e.getBody(),m).then(i((t=>{var r=J(t,(t=>v(t)?(kx(e,t),!1):"blob"!==t.uriType));return Iw(e)||K(r,(e=>{d(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")})),r})))),h=t=>t.replace(/src="(blob:[^"]+)"/g,((t,r)=>{var a=o.getResultUri(r);if(a)return'src="'+a+'"';var i=n.getByUri(r);return i||(i=ee(e.editorManager.get(),((e,t)=>e||t.editorUpload&&t.editorUpload.blobCache.getByUri(r)),void 0)),i?'src="data:'+i.blob().type+";base64,"+i.base64()+'"':t}));return e.on("SetContent",(()=>{Il(e)?u():g()})),e.on("RawSaveContent",(e=>{e.content=h(e.content)})),e.on("GetContent",(e=>{e.source_view||"raw"===e.format||"tree"===e.format||(e.content=h(e.content))})),e.on("PostRender",(()=>{e.parser.addNodeFilter("img",(e=>{K(e,(e=>{var t=e.attr("src");if(t&&!n.getByUri(t)){var r=o.getResultUri(t);r&&e.attr("src",r)}}))}))})),{blobCache:n,addFilter:e=>{a.push(e)},uploadImages:c,uploadImagesAuto:u,scanForImages:g,destroy:()=>{n.destroy(),o.destroy(),r=t=null}}},Lx={remove_similar:!0,inherit:!1},Hx=o({selector:"td,th"},Lx),Px={tablecellbackgroundcolor:o({styles:{backgroundColor:"%value"}},Hx),tablecellverticalalign:o({styles:{"vertical-align":"%value"}},Hx),tablecellbordercolor:o({styles:{borderColor:"%value"}},Hx),tablecellclass:o({classes:["%value"]},Hx),tableclass:o({selector:"table",classes:["%value"]},Lx),tablecellborderstyle:o({styles:{borderStyle:"%value"}},Hx),tablecellborderwidth:o({styles:{borderWidth:"%value"}},Hx)},Ix=N(Px),Fx=Ht.each,zx=Bi.DOM,Vx=e=>S(e)&&f(e),Zx=(e,t)=>{var r=t&&t.schema||hi({}),n=e=>{var t=v(e)?{name:e,classes:[],attrs:{}}:e,r=zx.create(t.name);return((e,t)=>{t.classes.length>0&&zx.addClass(e,t.classes.join(" ")),zx.setAttribs(e,t.attrs)})(r,t),r},o=(e,t,a)=>{var i,s=t[0],l=Vx(s)?s.name:void 0,d=((e,t)=>{var n=r.getElementRule(e.nodeName.toLowerCase()),o=null==n?void 0:n.parentsRequired;return!(!o||!o.length)&&(t&&q(o,t)?t:o[0])})(e,l);if(d)l===d?(i=s,t=t.slice(1)):i=d;else if(s)i=s,t=t.slice(1);else if(!a)return e;var c=i?n(i):zx.create("div");c.appendChild(e),a&&Ht.each(a,(t=>{var r=n(t);c.insertBefore(r,e)}));var u=Vx(i)?i.siblings:void 0;return o(c,t,u)},a=zx.create("div");if(e.length>0){var i=e[0],s=n(i),l=Vx(i)?i.siblings:void 0;a.appendChild(o(s,e.slice(1),l))}return a},jx=e=>{var t="div",r={name:t,classes:[],attrs:{},selector:e=Ht.trim(e)};return"*"!==e&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,((e,t,n,o,a)=>{switch(t){case"#":r.attrs.id=n;break;case".":r.classes.push(n);break;case":":-1!==Ht.inArray("checked disabled enabled read-only required".split(" "),n)&&(r.attrs[n]=n)}if("["===o){var i=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);i&&(r.attrs[i[1]]=i[2])}return""}))),r.name=t||"div",r},Ux=(e,t)=>{var r="",n=pd(e);if(""===n)return"";var o=e=>v(e)?e.replace(/%(\w+)/g,""):"",a=(t,r)=>zx.getStyle(null!=r?r:e.getBody(),t,!0);if(v(t)){var i=e.formatter.get(t);if(!i)return"";t=i[0]}if("preview"in t){var s=t.preview;if(!1===s)return"";n=s||n}var l,d,c=t.block||t.inline||"span",u=(d=t.selector,v(d)?(d=(d=d.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Ht.map(d.split(/(?:>|\s+(?![^\[\]]+\]))/),(e=>{var t=Ht.map(e.split(/(?:~\+|~|\+)/),jx),r=t.pop();return t.length&&(r.siblings=t),r})).reverse()):[]);u.length>0?(u[0].name||(u[0].name=c),c=t.selector,l=Zx(u,e)):l=Zx([c],e);var m=zx.select(c,l)[0]||l.firstChild;Fx(t.styles,((e,t)=>{var r=o(e);r&&zx.setStyle(m,t,r)})),Fx(t.attributes,((e,t)=>{var r=o(e);r&&zx.setAttrib(m,t,r)})),Fx(t.classes,(e=>{var t=o(e);zx.hasClass(m,t)||zx.addClass(m,t)})),e.dispatch("PreviewFormats"),zx.setStyles(l,{position:"absolute",left:-65535}),e.getBody().appendChild(l);var g=a("fontSize"),h=/px$/.test(g)?parseInt(g,10):0;return Fx(n.split(" "),(e=>{var t=a(e,m);if(!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=a(e),"#ffffff"===Ku(t).toLowerCase())||"color"===e&&"#000000"===Ku(t).toLowerCase())){if("font-size"===e&&/em|%$/.test(t)){if(0===h)return;t=parseFloat(t)/(/%$/.test(t)?100:1)*h+"px"}"border"===e&&t&&(r+="padding:0 2px;"),r+=e+":"+t+";"}})),e.dispatch("AfterPreviewFormats"),zx.remove(l),r},Wx=e=>{var t=(e=>{var t={},r=(e,n)=>{e&&(v(e)?(y(n)||(n=[n]),K(n,(e=>{C(e.deep)&&(e.deep=!_m(e)),C(e.split)&&(e.split=!_m(e)||Om(e)),C(e.remove)&&_m(e)&&!Om(e)&&(e.remove="none"),_m(e)&&Om(e)&&(e.mixed=!0,e.block_expand=!0),v(e.classes)&&(e.classes=e.classes.split(/\s+/))})),t[e]=n):be(e,((e,t)=>{r(t,e)})))};return r((e=>{var t,r,n,o=e.dom,a={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:e=>{o.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:e=>{o.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(t={inline:"span",styles:{textDecoration:"line-through"},exact:!0},r={inline:"strike",remove:"all",preserve_attributes:["class","style"]},n={inline:"s",remove:"all",preserve_attributes:["class","style"]},"html4"!==e.schema.type?[n,t,r]:[t,n,r]),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(e,t,r)=>qn(e)&&e.hasAttribute("href"),onformat:(e,t,r)=>{Ht.each(r,((t,r)=>{o.setAttrib(e,r,t)}))}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":e=>{var t;return null!==(t=null==e?void 0:e.customValue)&&void 0!==t?t:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Ht.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),(e=>{a[e]={block:e,remove:"all"}})),a})(e)),r(Ix()),r(hd(e)),{get:e=>S(e)?t[e]:t,has:e=>Ee(t,e),register:r,unregister:e=>(e&&t[e]&&delete t[e],t)}})(e),r=Pi({});return(e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])})(e),(e=>{e.on("mouseup keydown",(t=>{var r;((e,t,r)=>{var n=e.selection,o=e.getBody();Rf(e,null,r),8!==t&&46!==t||!n.isCollapsed()||n.getStart().innerHTML!==Ef||Rf(e,Eu(o,n.getStart())),37!==t&&39!==t||Rf(e,Eu(o,n.getStart()))})(e,t.keyCode,(r=e.selection.getRng().endContainer,to(r)&&$e(r.data,yo)))}))})(e),Iw(e)||((e,t)=>{e.set({}),t.on("NodeChange",(r=>{Tb(t,r.element,e.get())})),t.on("FormatApply FormatRemove",(r=>{var n=V.from(r.node).map((e=>sm(e)?e:e.startContainer)).bind((e=>qn(e)?V.some(e):V.from(e.parentElement))).getOrThunk((()=>_b(t)));Tb(t,n,e.get())}))})(r,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(t,r,n)=>{((e,t,r,n)=>{zw(e).formatter.apply(t,r,n)})(e,t,r,n)},remove:(t,r,n,o)=>{((e,t,r,n,o)=>{zw(e).formatter.remove(t,r,n,o)})(e,t,r,n,o)},toggle:(t,r,n)=>{((e,t,r,n)=>{zw(e).formatter.toggle(t,r,n)})(e,t,r,n)},match:(t,r,n,o)=>((e,t,r,n,o)=>zw(e).formatter.match(t,r,n,o))(e,t,r,n,o),closest:t=>((e,t)=>zw(e).formatter.closest(t))(e,t),matchAll:(t,r)=>((e,t,r)=>zw(e).formatter.matchAll(t,r))(e,t,r),matchNode:(t,r,n,o)=>((e,t,r,n,o)=>zw(e).formatter.matchNode(t,r,n,o))(e,t,r,n,o),canApply:t=>((e,t)=>zw(e).formatter.canApply(t))(e,t),formatChanged:(t,n,o,a)=>((e,t,r,n,o,a)=>zw(e).formatter.formatChanged(t,r,n,o,a))(e,r,t,n,o,a),getCssText:B(Ux,e)}},qx=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},$x=e=>{var t=ji(),r=Pi(0),n=Pi(0),o={data:[],typing:!1,beforeChange:()=>{((e,t,r)=>{zw(e).undoManager.beforeChange(t,r)})(e,r,t)},add:(a,i)=>((e,t,r,n,o,a,i)=>zw(e).undoManager.add(t,r,n,o,a,i))(e,o,n,r,t,a,i),dispatchChange:()=>{e.setDirty(!0);var t=Aw(e);t.bookmark=al(e.selection),e.dispatch("change",{level:t,lastLevel:ue(o.data,n.get()).getOrUndefined()})},undo:()=>((e,t,r,n)=>zw(e).undoManager.undo(t,r,n))(e,o,r,n),redo:()=>((e,t,r)=>zw(e).undoManager.redo(t,r))(e,n,o.data),clear:()=>{((e,t,r)=>{zw(e).undoManager.clear(t,r)})(e,o,n)},reset:()=>{((e,t)=>{zw(e).undoManager.reset(t)})(e,o)},hasUndo:()=>((e,t,r)=>zw(e).undoManager.hasUndo(t,r))(e,o,n),hasRedo:()=>((e,t,r)=>zw(e).undoManager.hasRedo(t,r))(e,o,n),transact:t=>((e,t,r,n)=>zw(e).undoManager.transact(t,r,n))(e,o,r,t),ignore:t=>{((e,t,r)=>{zw(e).undoManager.ignore(t,r)})(e,r,t)},extra:(t,r)=>{((e,t,r,n,o)=>{zw(e).undoManager.extra(t,r,n,o)})(e,o,n,t,r)}};return Iw(e)||((e,t,r)=>{var n=Pi(!1),o=e=>{Lw(t,!1,r),t.add({},e)};e.on("init",(()=>{t.add()})),e.on("BeforeExecCommand",(e=>{var n=e.command;qx(n)||(Hw(t,r),t.beforeChange())})),e.on("ExecCommand",(e=>{var t=e.command;qx(t)||o(e)})),e.on("ObjectResizeStart cut",(()=>{t.beforeChange()})),e.on("SaveContent ObjectResized blur",o),e.on("dragend",o),e.on("keyup",(r=>{var a=r.keyCode;if(!r.isDefaultPrevented()){var i=Dt.os.isMacOS()&&"Meta"===r.key;(a>=33&&a<=36||a>=37&&a<=40||45===a||r.ctrlKey||i)&&(o(),e.nodeChanged()),46!==a&&8!==a||e.nodeChanged(),n.get()&&t.typing&&!Dw(Aw(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),n.set(!1),e.nodeChanged())}})),e.on("keydown",(e=>{var a=e.keyCode;if(!e.isDefaultPrevented())if(a>=33&&a<=36||a>=37&&a<=40||45===a)t.typing&&o(e);else{var i=e.ctrlKey&&!e.altKey||e.metaKey;if((a<16||a>20)&&224!==a&&91!==a&&!t.typing&&!i)return t.beforeChange(),Lw(t,!0,r),t.add({},e),void n.set(!0);(Dt.os.isMacOS()?e.metaKey:e.ctrlKey&&!e.altKey)&&t.beforeChange()}})),e.on("mousedown",(e=>{t.typing&&o(e)})),e.on("input",(e=>{var t;e.inputType&&("insertReplacementText"===e.inputType||"insertText"===(t=e).inputType&&null===t.data||(e=>"insertFromPaste"===e.inputType||"insertFromDrop"===e.inputType)(e))&&o(e)})),e.on("AddUndo Undo Redo ClearUndos",(t=>{t.isDefaultPrevented()||e.nodeChanged()}))})(e,o,r),(e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")})(e),o},Gx=[9,27,ng.HOME,ng.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ng.DOWN,ng.UP,ng.LEFT,ng.RIGHT].concat(Dt.browser.isFirefox()?[224]:[]),Kx="data-mce-placeholder",Yx=e=>"keydown"===e.type||"keyup"===e.type,Xx=e=>{var t=e.keyCode;return t===ng.BACKSPACE||t===ng.DELETE},Jx=(e,t)=>({from:e,to:t}),Qx=(e,t)=>{var r=xr(e),n=xr(t.container());return pv(r,n).map((e=>((e,t)=>({block:e,position:t}))(e,t)))},eC=(e,t)=>en(t,(e=>Do(e)||co(e.dom)),(t=>Or(t,e))).filter(Kt).getOr(e),tC=e=>{var t=(e=>{var t=Ir(e);return ne(t,Oo).fold(N(t),(e=>t.slice(0,e)))})(e);return K(t,kn),t},rC=(e,t)=>{var r=fp(t,e);return re(r.reverse(),(e=>xa(e))).each(kn)},nC=(e,t,r,n)=>{if(xa(r))return Io(r),ku(r.dom);0===J(Hr(n),(e=>!xa(e))).length&&xa(t)&&vn(n,yr("br"));var o=Cu(r.dom,Is.before(n.dom));return K(tC(t),(e=>{vn(n,e)})),rC(e,t),o},oC=(e,t,r)=>{if(xa(r)){if(xa(t)){var n=Q((o=(e,t)=>zr(e).fold((()=>t),(e=>Eo(e)?o(e,t.concat(is(e))):t)),o(r,[])),((e,t)=>(wn(e,t),t)),Po());Cn(t),yn(t,n)}return kn(r),ku(t.dom)}var o,a=Su(r.dom);return K(tC(t),(e=>{yn(r,e)})),rC(e,t),a},aC=(e,t)=>{wu(e,t.dom).bind((e=>V.from(e.getNode()))).map(xr).filter(To).each(kn)},iC=(e,t,r)=>(aC(!0,t),aC(!1,r),((e,t)=>Er(t,e)?((e,t)=>{var r=fp(t,e);return V.from(r[r.length-1])})(t,e):V.none())(t,r).fold(B(oC,e,t,r),B(nC,e,t,r))),sC=(e,t,r,n)=>t?iC(e,n,r):iC(e,r,n),lC=(e,t)=>{var r=xr(e.getBody()),n=((e,t,r)=>r.collapsed?((e,t,r)=>{var n=Qx(e,Is.fromRangeStart(r)),o=n.bind((r=>fu(t,e,r.position).bind((r=>Qx(e,r).map((r=>((e,t,r)=>so(r.position.getNode())&&!xa(r.block)?wu(!1,r.block.dom).bind((n=>n.isEqual(r.position)?fu(t,e,n).bind((t=>Qx(e,t))):V.some(r))).getOr(r):r)(e,t,r)))))));return Ft(n,o,Jx).filter((t=>(e=>!Or(e.from.block,e.to.block))(t)&&((e,t)=>{var r=xr(e);return Or(eC(r,t.from.block),eC(r,t.to.block))})(e,t)&&(e=>!1===uo(e.from.block.dom)&&!1===uo(e.to.block.dom))(t)&&(e=>{var t=e=>Ao(e)||Ma(e.dom);return t(e.from.block)&&t(e.to.block)})(t)))})(e,t,r):V.none())(r.dom,t,e.selection.getRng()).map((n=>()=>{sC(r,t,n.from.block,n.to.block).each((t=>{e.selection.setRng(t.toRange())}))}));return n},dC=(e,t)=>{var r=xr(t),n=B(Or,e);return Qr(r,Do,n).isSome()},cC=e=>{var t=xr(e.getBody());return((e,t)=>{var r=Cu(e.dom,Is.fromRangeStart(t)).isNone(),n=xu(e.dom,Is.fromRangeEnd(t)).isNone();return!((e,t)=>dC(e,t.startContainer)||dC(e,t.endContainer))(e,t)&&r&&n})(t,e.selection.getRng())?(e=>V.some((()=>{e.setContent(""),e.selection.setCursorLocation()})))(e):((e,t)=>{var r=t.getRng();return Ft(pv(e,xr(r.startContainer)),pv(e,xr(r.endContainer)),((n,o)=>Or(n,o)?V.none():V.some((()=>{r.deleteContents(),sC(e,!0,n,o).each((e=>{t.setRng(e.toRange())}))})))).getOr(V.none())})(t,e.selection)},uC=(e,t)=>e.selection.isCollapsed()?V.none():cC(e),mC=(e,t,r,n,o)=>V.from(t._selectionOverrides.showCaret(e,r,n,o)),gC=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?V.none():V.some((e=>{var t=e.ownerDocument.createRange();return t.selectNode(e),t})(t)),hC=(e,t,r)=>t.collapsed?((e,t,r)=>{var n=Yc(1,e.getBody(),t),o=Is.fromRangeStart(n),a=o.getNode();if(Ec(a))return mC(1,e,a,!o.isAtEnd(),!1);var i=o.getNode(!0);if(Ec(i))return mC(1,e,i,!1,!1);var s=Wv(e.dom.getRoot(),o.getNode());return Ec(s)?mC(1,e,s,!1,r):V.none()})(e,t,r).getOr(t):t,pC=e=>hp(e)||cp(e),vC=e=>pp(e)||up(e),fC=(e,t,r,n,o,a)=>{mC(n,e,a.getNode(!o),o,!0).each((r=>{if(t.collapsed){var n=t.cloneRange();o?n.setEnd(r.startContainer,r.startOffset):n.setStart(r.endContainer,r.endOffset),n.deleteContents()}else t.deleteContents();e.selection.setRng(r)})),((e,t)=>{to(t)&&0===t.data.length&&e.remove(t)})(e.dom,r)},bC=(e,t)=>((e,t)=>{var r=e.selection.getRng();if(!to(r.commonAncestorContainer))return V.none();var n=t?cl.Forwards:cl.Backwards,o=gu(e.getBody()),a=B(eu,t?o.next:o.prev),i=t?pC:vC,s=Jc(n,e.getBody(),r),l=a(s),d=l?dv(t,l):l;if(!d||!tu(s,d))return V.none();if(i(d))return V.some((()=>fC(e,r,s.getNode(),n,t,d)));var c=a(d);return c&&i(c)&&tu(d,c)?V.some((()=>fC(e,r,s.getNode(),n,t,c))):V.none()})(e,t),yC=(e,t)=>{var r=e.getBody();return t?ku(r).filter(hp):Su(r).filter(pp)},wC=e=>{var t=e.selection.getRng();return!t.collapsed&&(yC(e,!0).exists((e=>e.isEqual(Is.fromRangeStart(t))))||yC(e,!1).exists((e=>e.isEqual(Is.fromRangeEnd(t)))))},xC=dl([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),CC=(e,t,r)=>fu(t,e,r).bind((n=>{return o=n.getNode(),S(o)&&(Do(xr(o))||No(xr(o)))||((e,t,r,n)=>{var o=t=>Eo(xr(t))&&!jc(r,n,e);return Xc(!t,r).fold((()=>Xc(t,n).fold(F,o)),o)})(e,t,r,n)?V.none():t&&uo(n.getNode())||!t&&uo(n.getNode(!0))?((e,t,r,n)=>{var o=n.getNode(!t);return pv(xr(e),xr(r.getNode())).map((e=>xa(e)?xC.remove(e.dom):xC.moveToElement(o))).orThunk((()=>V.some(xC.moveToElement(o))))})(e,t,r,n):t&&pp(r)||!t&&hp(r)?V.some(xC.moveToPosition(n)):V.none();var o})),kC=(e,t)=>V.from(Wv(e.getBody(),t)),SC=(e,t)=>{var r=e.selection.getNode();return kC(e,r).filter(uo).fold((()=>((e,t,r)=>{var n=Yc(t?1:-1,e,r),o=Is.fromRangeStart(n),a=xr(e);return!t&&pp(o)?V.some(xC.remove(o.getNode(!0))):t&&hp(o)?V.some(xC.remove(o.getNode())):!t&&hp(o)&&Ap(a,o)?Mp(a,o).map((e=>xC.remove(e.getNode()))):t&&pp(o)&&Tp(a,o)?Np(a,o).map((e=>xC.remove(e.getNode()))):((e,t,r)=>((e,t)=>{var r=t.getNode(!e),n=e?"after":"before";return qn(r)&&r.getAttribute("data-mce-caret")===n})(t,r)?((e,t)=>k(t)?V.none():e&&uo(t.nextSibling)?V.some(xC.moveToElement(t.nextSibling)):!e&&uo(t.previousSibling)?V.some(xC.moveToElement(t.previousSibling)):V.none())(t,r.getNode(!t)).orThunk((()=>CC(e,t,r))):CC(e,t,r).bind((t=>((e,t,r)=>r.fold((e=>V.some(xC.remove(e))),(e=>V.some(xC.moveToElement(e))),(r=>jc(t,r,e)?V.none():V.some(xC.moveToPosition(r)))))(e,r,t))))(e,t,o)})(e.getBody(),t,e.selection.getRng()).map((r=>()=>r.fold(((e,t)=>r=>(e._selectionOverrides.hideFakeCaret(),ov(e,t,xr(r)),!0))(e,t),((e,t)=>r=>{var n=t?Is.before(r):Is.after(r);return e.selection.setRng(n.toRange()),!0})(e,t),(e=>t=>(e.selection.setRng(t.toRange()),!0))(e))))),(()=>V.some(T)))},_C=e=>{var t=e.dom,r=e.selection,n=Wv(e.getBody(),r.getNode());if(co(n)&&t.isBlock(n)&&t.isEmpty(n)){var o=t.create("br",{"data-mce-bogus":"1"});t.setHTML(n,""),n.appendChild(o),r.setRng(Is.before(o).toRange())}return!0},OC=(e,t)=>e.selection.isCollapsed()?SC(e,t):((e,t)=>{var r=e.selection.getNode();return uo(r)&&!mo(r)?kC(e,r.parentNode).filter(uo).fold((()=>V.some((()=>{var r;r=xr(e.getBody()),K(zn(r,".mce-offscreen-selection"),kn),ov(e,t,xr(e.selection.getNode())),vv(e)}))),(()=>V.some(T))):wC(e)?V.some((()=>{yv(e,e.selection.getRng(),xr(e.getBody()))})):V.none()})(e,t),EC=(e,t)=>e.selection.isCollapsed()?((e,t)=>{var r=Is.fromRangeStart(e.selection.getRng());return fu(t,e.getBody(),r).filter((e=>t?lp(e):dp(e))).bind((e=>Uc(t?0:-1,e))).map((t=>()=>e.selection.select(t)))})(e,t):V.none(),TC=to,AC=e=>TC(e)&&e.data[0]===zo,MC=e=>TC(e)&&e.data[e.data.length-1]===zo,NC=e=>{var t;return(null!==(t=e.ownerDocument)&&void 0!==t?t:document).createTextNode(zo)},RC=(e,t)=>e?(e=>{var t;if(TC(e.previousSibling))return MC(e.previousSibling)||e.previousSibling.appendData(zo),e.previousSibling;if(TC(e))return AC(e)||e.insertData(0,zo),e;var r=NC(e);return null===(t=e.parentNode)||void 0===t||t.insertBefore(r,e),r})(t):(e=>{var t,r;if(TC(e.nextSibling))return AC(e.nextSibling)||e.nextSibling.insertData(0,zo),e.nextSibling;if(TC(e))return MC(e)||e.appendData(zo),e;var n=NC(e);return e.nextSibling?null===(t=e.parentNode)||void 0===t||t.insertBefore(n,e.nextSibling):null===(r=e.parentNode)||void 0===r||r.appendChild(n),n})(t),DC=B(RC,!0),BC=B(RC,!1),LC=(e,t)=>to(e.container())?RC(t,e.container()):RC(t,e.getNode()),HC=(e,t)=>{var r=t.get();return r&&e.container()===r&&qo(r)},PC=(e,t)=>t.fold((t=>{wc(e.get());var r=DC(t);return e.set(r),V.some(Is(r,r.length-1))}),(t=>ku(t).map((t=>{if(HC(t,e)){var r=e.get();return Is(r,1)}wc(e.get());var n=LC(t,!0);return e.set(n),Is(n,1)}))),(t=>Su(t).map((t=>{if(HC(t,e)){var r=e.get();return Is(r,r.length-1)}wc(e.get());var n=LC(t,!1);return e.set(n),Is(n,n.length-1)}))),(t=>{wc(e.get());var r=BC(t);return e.set(r),V.some(Is(r,1))})),IC=(e,t)=>{for(var r=0;r<e.length;r++){var n=e[r].apply(null,t);if(n.isSome())return n}return V.none()},FC=dl([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),zC=(e,t)=>Zc(t,e)||e,VC=(e,t,r)=>{var n=cv(r),o=zC(t,n.container());return lv(e,o,n).fold((()=>xu(o,n).bind(B(lv,e,o)).map((e=>FC.before(e)))),V.none)},ZC=(e,t)=>null===Eu(e,t),jC=(e,t,r)=>lv(e,t,r).filter(B(ZC,t)),UC=(e,t,r)=>{var n=uv(r);return jC(e,t,n).bind((e=>Cu(e,n).isNone()?V.some(FC.start(e)):V.none()))},WC=(e,t,r)=>{var n=cv(r);return jC(e,t,n).bind((e=>xu(e,n).isNone()?V.some(FC.end(e)):V.none()))},qC=(e,t,r)=>{var n=uv(r),o=zC(t,n.container());return lv(e,o,n).fold((()=>Cu(o,n).bind(B(lv,e,o)).map((e=>FC.after(e)))),V.none)},$C=e=>!sv(KC(e)),GC=(e,t,r)=>IC([VC,UC,WC,qC],[e,t,r]).filter($C),KC=e=>e.fold(R,R,R,R),YC=e=>e.fold(N("before"),N("start"),N("end"),N("after")),XC=e=>e.fold(FC.before,FC.before,FC.after,FC.after),JC=e=>e.fold(FC.start,FC.start,FC.end,FC.end),QC=(e,t,r,n,o,a)=>Ft(lv(t,r,n),lv(t,r,o),((t,n)=>t!==n&&((e,t,r)=>{var n=Zc(t,e),o=Zc(r,e);return S(n)&&n===o})(r,t,n)?FC.after(e?t:n):a)).getOr(a),ek=(e,t)=>e.fold(z,(e=>{return n=t,!(YC(r=e)===YC(n)&&KC(r)===KC(n));var r,n})),tk=(e,t)=>e?t.fold(A(V.some,FC.start),V.none,A(V.some,FC.after),V.none):t.fold(V.none,A(V.some,FC.before),V.none,A(V.some,FC.end)),rk=(e,t,r)=>{var n=e?1:-1;return t.setRng(Is(r.container(),r.offset()+n).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0};!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}(qy||(qy={}));var nk,ok=(e,t)=>e===cl.Backwards?se(t):t,ak=(e,t,r)=>e===cl.Forwards?t.next(r):t.prev(r),ik=(e,t,r,n)=>so(n.getNode(t===cl.Forwards))?qy.Br:!1===jc(r,n)?qy.Block:qy.Wrap,sk=(e,t,r,n)=>{for(var o=gu(r),a=n,i=[];a;){var s=ak(t,o,a);if(!s)break;if(so(s.getNode(!1)))return t===cl.Forwards?{positions:ok(t,i).concat([s]),breakType:qy.Br,breakAt:V.some(s)}:{positions:ok(t,i),breakType:qy.Br,breakAt:V.some(s)};if(s.isVisible()){if(e(a,s)){var l=ik(0,t,a,s);return{positions:ok(t,i),breakType:l,breakAt:V.some(s)}}i.push(s),a=s}else a=s}return{positions:ok(t,i),breakType:qy.Eol,breakAt:V.none()}},lk=(e,t,r,n)=>t(r,n).breakAt.map((n=>{var o=t(r,n).positions;return e===cl.Backwards?o.concat(n):[n].concat(o)})).getOr([]),dk=(e,t)=>ee(e,((e,r)=>e.fold((()=>V.some(r)),(n=>Ft(me(n.getClientRects()),me(r.getClientRects()),((e,o)=>{var a=Math.abs(t-e.left);return Math.abs(t-o.left)<=a?r:n})).or(e)))),V.none()),ck=(e,t)=>me(t.getClientRects()).bind((t=>dk(e,t.left))),uk=B(sk,Is.isAbove,-1),mk=B(sk,Is.isBelow,1),gk=B(lk,-1,uk),hk=B(lk,1,mk),pk=(e,t)=>uk(e,t).breakAt.isNone(),vk=(e,t)=>mk(e,t).breakAt.isNone(),fk=(e,t)=>ck(gk(e,t),t),bk=(e,t)=>ck(hk(e,t),t),yk=uo,wk=(e,t)=>Math.abs(e.left-t),xk=(e,t)=>Math.abs(e.right-t),Ck=(e,t)=>Le(e,((e,r)=>{var n=Math.min(wk(e,t),xk(e,t)),o=Math.min(wk(r,t),xk(r,t));return o===n&&Te(r,"node")&&yk(r.node)||o<n?r:e})),kk=e=>{var t=t=>G(t,(t=>{var r=us(t);return r.node=e,r}));if(qn(e))return t(e.getClientRects());if(to(e)){var r=e.ownerDocument.createRange();return r.setStart(e,0),r.setEnd(e,e.data.length),t(r.getClientRects())}return[]},Sk=e=>ae(e,kk);!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(nk||(nk={}));var _k,Ok=(e,t,r,n,o,a)=>{var i=0,s=[],l=n=>{var a=Sk([n]);-1===e&&(a=a.reverse());for(var l=0;l<a.length;l++){var c=a[l];if(!r(c,d)){if(s.length>0&&t(c,Pe(s))&&i++,c.line=i,o(c))return!0;s.push(c)}}return!1},d=Pe(a.getClientRects());if(!d)return s;var c=a.getNode();return c&&(l(c),((e,t,r,n)=>{for(var o=n;o=Vc(o,e,ua,t);)if(r(o))return})(e,n,l,c)),s},Ek=B(Ok,nk.Up,hs,ps),Tk=B(Ok,nk.Down,ps,hs),Ak=e=>Pe(e.getClientRects()),Mk=e=>t=>((e,t)=>t.line>e)(e,t),Nk=e=>t=>((e,t)=>t.line===e)(e,t),Rk=(e,t)=>{e.selection.setRng(t),rh(e,e.selection.getRng())},Dk=(e,t,r)=>V.some(hC(e,t,r)),Bk=(e,t,r,n,o,a)=>{var i=t===cl.Forwards,s=gu(e.getBody()),l=B(eu,i?s.next:s.prev),d=i?n:o;if(!r.collapsed){var c=fs(r);if(a(c))return mC(t,e,c,t===cl.Backwards,!1);if(wC(e)){var u=r.cloneRange();return u.collapse(t===cl.Backwards),V.from(u)}}var m=Jc(t,e.getBody(),r);if(d(m))return gC(e,m.getNode(!i));var g=l(m),h=ea(r);if(!g)return h?V.some(r):V.none();if(d(g=dv(i,g)))return mC(t,e,g.getNode(!i),i,!1);var p=l(g);return p&&d(p)&&tu(g,p)?mC(t,e,p.getNode(!i),i,!1):h?Dk(e,g.toRange(),!1):V.none()},Lk=(e,t,r,n,o,a)=>{var i=Jc(t,e.getBody(),r),s=Pe(i.getClientRects()),l=t===nk.Down,d=e.getBody();if(!s)return V.none();if(wC(e)){var c=l?Is.fromRangeEnd(r):Is.fromRangeStart(r);return(l?bk:fk)(d,c).orThunk((()=>V.from(c))).map((e=>e.toRange()))}var u,m=(l?Tk:Ek)(d,Mk(1),i),g=J(m,Nk(1)),h=s.left,p=Ck(g,h);if(p&&a(p.node)){var v=Math.abs(h-p.left),f=Math.abs(h-p.right);return mC(t,e,p.node,v<f,!1)}if(u=n(i)?i.getNode():o(i)?i.getNode(!0):fs(r)){var b=((e,t,r,n)=>{var o,a,i,s,l=gu(t),d=[],c=0;1===e?(o=l.next,a=ps,i=hs,s=Is.after(n)):(o=l.prev,a=hs,i=ps,s=Is.before(n));var u=Ak(s);do{if(s.isVisible()){var m=Ak(s);if(!i(m,u)){d.length>0&&a(m,Pe(d))&&c++;var g=us(m);if(g.position=s,g.line=c,r(g))return d;d.push(g)}}}while(s=o(s));return d})(t,d,Mk(1),u),y=Ck(J(b,Nk(1)),h);if(y)return Dk(e,y.position.toRange(),!1);if(y=Pe(J(b,Nk(0))))return Dk(e,y.position.toRange(),!1)}return 0===g.length?Hk(e,l).filter(l?o:n).map((t=>hC(e,t.toRange(),!1))):V.none()},Hk=(e,t)=>{var r,n,o=e.selection.getRng(),a=t?Is.fromRangeEnd(o):Is.fromRangeStart(o),i=(r=a.container(),n=e.getBody(),Qr(xr(r),(e=>Ac(e.dom)),(e=>e.dom===n)).map((e=>e.dom)).getOr(n));if(t){var s=mk(i,a);return ge(s.positions)}var l=uk(i,a);return me(l.positions)},Pk=(e,t,r)=>Hk(e,t).filter(r).exists((t=>(e.selection.setRng(t.toRange()),!0))),Ik=(e,t)=>{var r=e.dom.createRng();r.setStart(t.container(),t.offset()),r.setEnd(t.container(),t.offset()),e.selection.setRng(r)},Fk=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},zk=(e,t,r)=>PC(t,r).map((t=>(Ik(e,t),r))),Vk=(e,t,r)=>{var n=e.getBody(),o=((e,t,r)=>{var n=Is.fromRangeStart(e);if(e.collapsed)return n;var o=Is.fromRangeEnd(e);return r?Cu(t,o).getOr(o):xu(t,n).getOr(n)})(e.selection.getRng(),n,r);return((e,t,r,n)=>{var o=dv(e,n),a=GC(t,r,o);return GC(t,r,o).bind(B(tk,e)).orThunk((()=>((e,t,r,n,o)=>{var a=dv(e,o);return fu(e,r,a).map(B(dv,e)).fold((()=>n.map(XC)),(o=>GC(t,r,o).map(B(QC,e,t,r,a,o)).filter(B(ek,n)))).filter($C)})(e,t,r,a,n)))})(r,B(iv,e),n,o).bind((r=>zk(e,t,r)))},Zk=(e,t,r)=>!!gd(e)&&Vk(e,t,r).isSome(),jk=(e,t,r)=>!!gd(t)&&((e,t)=>{var r=t.selection.getRng(),n=e?Is.fromRangeEnd(r):Is.fromRangeStart(r);return!!(e=>_(e.selection.getSel().modify))(t)&&(e&&Ko(n)?rk(!0,t.selection,n):!(e||!Yo(n))&&rk(!1,t.selection,n))})(e,t),Uk=e=>{var t=Pi(null),r=B(iv,e);return e.on("NodeChange",(n=>{gd(e)&&(((e,t,r)=>{var n=G(zn(xr(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),(e=>e.dom)),o=J(n,e),a=J(r,e);K(le(o,a),B(Fk,!1)),K(le(a,o),B(Fk,!0))})(r,e.dom,n.parents),((e,t)=>{var r=t.get();if(e.selection.isCollapsed()&&!e.composing&&r){var n=Is.fromRangeStart(e.selection.getRng());Is.isTextPosition(n)&&!(e=>Ko(e)||Yo(e))(n)&&(Ik(e,yc(r,n)),t.set(null))}})(e,t),((e,t,r,n)=>{if(t.selection.isCollapsed()){var o=J(n,e);K(o,(n=>{var o=Is.fromRangeStart(t.selection.getRng());GC(e,t.getBody(),o).bind((e=>zk(t,r,e)))}))}})(r,e,t,n.parents))})),t},Wk=B(jk,!0),qk=B(jk,!1),$k=(e,t,r)=>{if(gd(e)){var n=Hk(e,t).getOrThunk((()=>{var r=e.selection.getRng();return t?Is.fromRangeEnd(r):Is.fromRangeStart(r)}));return GC(B(iv,e),e.getBody(),n).exists((t=>{var n=XC(t);return PC(r,n).exists((t=>(Ik(e,t),!0)))}))}return!1},Gk=(e,t)=>r=>PC(t,r).map((t=>()=>Ik(e,t))),Kk=(e,t,r,n)=>{var o=e.getBody(),a=B(iv,e);e.undoManager.ignore((()=>{e.selection.setRng(((e,t)=>{var r=document.createRange();return r.setStart(e.container(),e.offset()),r.setEnd(t.container(),t.offset()),r})(r,n)),gv(e),GC(a,o,Is.fromRangeStart(e.selection.getRng())).map(JC).bind(Gk(e,t)).each(I)})),e.nodeChanged()},Yk=(e,t,r)=>{if(e.selection.isCollapsed()&&gd(e)){var n=Is.fromRangeStart(e.selection.getRng());return((e,t,r,n)=>{var o=((e,t)=>Zc(t,e)||e)(e.getBody(),n.container()),a=B(iv,e),i=GC(a,o,n);return i.bind((e=>r?e.fold(N(V.some(JC(e))),V.none,N(V.some(XC(e))),V.none):e.fold(V.none,N(V.some(XC(e))),V.none,N(V.some(JC(e)))))).map(Gk(e,t)).getOrThunk((()=>{var s=bu(r,o,n),l=s.bind((e=>GC(a,o,e)));return Ft(i,l,(()=>lv(a,o,n).bind((t=>(e=>Ft(ku(e),Su(e),((t,r)=>{var n=dv(!0,t),o=dv(!1,r);return xu(e,n).forall((e=>e.isEqual(o)))})).getOr(!0))(t)?V.some((()=>{ov(e,r,xr(t))})):V.none())))).getOrThunk((()=>l.bind((()=>s.map((o=>()=>{r?Kk(e,t,n,o):Kk(e,t,o,n)}))))))}))})(e,t,r,n)}return V.none()},Xk=(e,t)=>{var r=xr(e.getBody()),n=xr(e.selection.getStart()),o=fp(n,r);return ne(o,t).fold(N(o),(e=>o.slice(0,e)))},Jk=e=>1===Zr(e),Qk=(e,t)=>{var r=B(If,e);return ae(t,(e=>r(e)?[e.dom]:[]))},eS=e=>{var t=(e=>Xk(e,Oo))(e);return Qk(e,t)},tS=(e,t)=>{var r=J((e=>Xk(e,(e=>Oo(e)||(e=>Zr(e)>1)(e))))(e),Jk);return ge(r).bind((n=>{var o=Is.fromRangeStart(e.selection.getRng());return fv(t,o,n.dom)&&!Ff(n)?V.some((()=>((e,t,r,n)=>{var o=Qk(t,n);if(0===o.length)ov(t,e,r);else{var a=Pf(r.dom,o);t.selection.setRng(a.toRange())}})(t,e,n,r))):V.none()}))},rS=(e,t)=>{var r=e.selection.getStart(),n=((e,t)=>{var r=t.parentElement;return so(t)&&!w(r)&&e.dom.isEmpty(r)})(e,r)||Ff(xr(r))?Pf(r,t):((e,t)=>{var{caretContainer:r,caretPosition:n}=Hf(t);return e.insertNode(r.dom),n})(e.selection.getRng(),t);e.selection.setRng(n.toRange())},nS=e=>to(e.startContainer),oS=e=>{var t=e.selection.getRng();return(e=>0===e.startOffset&&nS(e))(t)&&((e,t)=>{var r=t.startContainer.parentElement;return!w(r)&&If(e,xr(r))})(e,t)&&(e=>(e=>(e=>{var t=e.startContainer.parentNode,r=e.endContainer.parentNode;return!w(t)&&!w(r)&&t.isEqualNode(r)})(e)&&(e=>{var t=e.endContainer;return e.endOffset===(to(t)?t.length:t.childNodes.length)})(e))(e)||(e=>!e.endContainer.isEqualNode(e.commonAncestorContainer))(e))(t)},aS=(e,t)=>e.selection.isCollapsed()?tS(e,t):(e=>{if(oS(e)){var t=eS(e);return V.some((()=>{gv(e),((e,t)=>{var r=le(t,eS(e));r.length>0&&rS(e,r)})(e,t)}))}return V.none()})(e),iS=e=>((e,t,r)=>Qr(e,(e=>Ou(e.dom)),r).isSome())(e,0,Oo),sS=e=>((e=>{var t=e.selection.getRng();return t.collapsed&&(nS(t)||e.dom.isEmpty(t.startContainer))&&!(e=>iS(xr(e.selection.getStart())))(e)})(e)&&rS(e,[]),!0),lS=(e,t,r)=>S(r)?V.some((()=>{e._selectionOverrides.hideFakeCaret(),ov(e,t,xr(r))})):V.none(),dS=(e,t)=>e.selection.isCollapsed()?((e,t)=>{var r=t?cp:up,n=t?cl.Forwards:cl.Backwards,o=Jc(n,e.getBody(),e.selection.getRng());return r(o)?lS(e,t,o.getNode(!t)):V.from(dv(t,o)).filter((e=>r(e)&&tu(o,e))).bind((r=>lS(e,t,r.getNode(!t))))})(e,t):((e,t)=>{var r=e.selection.getNode();return ho(r)?lS(e,t,r):V.none()})(e,t),cS=e=>et(null!=e?e:"").getOr(0),uS=(e,t)=>(e||"table"===Wt(t)?"margin":"padding")+("rtl"===un(t,"direction")?"-right":"-left"),mS=e=>{var t=hS(e);return!e.mode.isReadOnly()&&(t.length>1||((e,t)=>ie(t,(t=>{var r=uS(Xl(e),t),n=gn(t,r).map(cS).getOr(0);return"false"!==e.dom.getContentEditable(t.dom)&&n>0})))(e,t))},gS=e=>Mo(e)||No(e),hS=e=>J(_n(e.selection.getSelectedBlocks()),(e=>!gS(e)&&!(e=>Nr(e).exists(gS))(e)&&en(e,(e=>co(e.dom)||uo(e.dom))).exists((e=>co(e.dom))))),pS=(e,t)=>{var r,n,{dom:o}=e,a=Jl(e),i=null!==(n=null===(r=/[a-z%]+$/i.exec(a))||void 0===r?void 0:r[0])&&void 0!==n?n:"px",s=cS(a),l=Xl(e);K(hS(e),(e=>{((e,t,r,n,o,a)=>{var i=uS(r,xr(a)),s=cS(e.getStyle(a,i));if("outdent"===t){var l=Math.max(0,s-n);e.setStyle(a,i,l?l+o:"")}else{var d=s+n+o;e.setStyle(a,i,d)}})(o,t,l,s,i,e.dom)}))},vS=e=>pS(e,"outdent"),fS=e=>{if(e.selection.isCollapsed()&&mS(e)){var t=e.dom,r=e.selection.getRng(),n=Is.fromRangeStart(r),o=t.getParent(r.startContainer,t.isBlock);if(null!==o&&Cp(xr(o),n))return V.some((()=>vS(e)))}return V.none()},bS=(e,t,r)=>pe([fS,OC,bC,(e,r)=>Yk(e,t,r),lC,Uv,EC,dS,uC,aS],(t=>t(e,r))).filter((t=>e.selection.isEditable())),yS=(e,t)=>{e.addCommand("delete",(()=>{((e,t)=>{bS(e,t,!1).fold((()=>{gv(e),vv(e)}),I)})(e,t)})),e.addCommand("forwardDelete",(()=>{((e,t)=>{bS(e,t,!0).fold((()=>(e=>mv(e,"ForwardDelete"))(e)),I)})(e,t)}))},wS=e=>void 0===e.touches||1!==e.touches.length?V.none():V.some(e.touches[0]),xS=(e,t)=>Ee(e,t.nodeName),CS=(e,t)=>!!to(t)||!!qn(t)&&!xS(e.getBlockElements(),t)&&!Fu(t)&&!Da(e,t),kS=(e,t)=>{if(to(t)){if(0===t.data.length)return!0;if(/^\s+$/.test(t.data)&&(!t.nextSibling||xS(e,t.nextSibling)))return!0}return!1},SS=e=>e.dom.create(Nl(e),Rl(e)),_S=e=>{var t,r,n=e.dom,o=e.selection,a=e.schema,i=a.getBlockElements(),s=o.getStart(),l=e.getBody(),d=!1,c=Nl(e);if(s&&qn(s)){var u=l.nodeName.toLowerCase();if(a.isValidChild(u,c.toLowerCase())&&!((e,t,r)=>$(vp(xr(r),xr(t)),(t=>xS(e,t.dom))))(i,l,s)){for(var m=o.getRng(),{startContainer:g,startOffset:h,endContainer:p,endOffset:v}=m,f=Sh(e),b=l.firstChild;b;)if(qn(b)&&Aa(a,b),CS(a,b)){if(kS(i,b)){r=b,b=b.nextSibling,n.remove(r);continue}t||(t=SS(e),l.insertBefore(t,b),d=!0),r=b,b=b.nextSibling,t.appendChild(r)}else t=null,b=b.nextSibling;d&&f&&(m.setStart(g,h),m.setEnd(p,v),o.setRng(m),e.nodeChanged())}}},OS=(e,t,r)=>{var n=xr(SS(e)),o=Po();yn(n,o),r(t,n);var a=document.createRange();return a.setStartBefore(o.dom),a.setEndBefore(o.dom),a},ES=e=>t=>-1!==(" "+t.attr("class")+" ").indexOf(e),TS=(e,t,r)=>function(n){var o=arguments,a=o[o.length-2],i=a>0?t.charAt(a-1):"";if('"'===i)return n;if(">"===i){var s=t.lastIndexOf("<",a);if(-1!==s&&-1!==t.substring(s,a).indexOf('contenteditable="false"'))return n}return'<span class="'+r+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"},AS=(e,t)=>{t.hasAttribute("data-mce-caret")&&(Qo(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},MS=(e,t)=>{var r=(e=>rn(xr(e.getBody()),"*[data-mce-caret]").map((e=>e.dom)).getOrNull())(e);if(r)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void AS(e,r)):void(Go(r)&&(AS(e,r),e.undoManager.add()))},NS=uo,RS=(e,t,r)=>{var n=gu(e.getBody()),o=B(eu,1===t?n.next:n.prev);if(r.collapsed){var a=e.dom.getParent(r.startContainer,"PRE");if(!a)return;if(!o(Is.fromRangeStart(r))){var i=xr((e=>{var t=e.dom.create(Nl(e));return t.innerHTML='<br data-mce-bogus="1">',t})(e));1===t?fn(xr(a),i):vn(xr(a),i),e.selection.select(i.dom,!0),e.selection.collapse()}}},DS=(e,t)=>((e,t)=>{var r=t?cl.Forwards:cl.Backwards,n=e.selection.getRng();return((e,t,r)=>Bk(t,e,r,hp,pp,NS))(r,e,n).orThunk((()=>(RS(e,r,n),V.none())))})(e,((e,t)=>{var r=t?e.getEnd(!0):e.getStart(!0);return sv(r)?!t:t})(e.selection,t)).exists((t=>(Rk(e,t),!0))),BS=(e,t)=>((e,t)=>{var r=t?1:-1,n=e.selection.getRng();return((e,t,r)=>Lk(t,e,r,(e=>hp(e)||mp(e)),(e=>pp(e)||gp(e)),NS))(r,e,n).orThunk((()=>(RS(e,r,n),V.none())))})(e,t).exists((t=>(Rk(e,t),!0))),LS=(e,t)=>Pk(e,t,t?pp:hp),HS=(e,t)=>yC(e,!t).map((r=>{var n=r.toRange(),o=e.selection.getRng();return t?n.setStart(o.startContainer,o.startOffset):n.setEnd(o.endContainer,o.endOffset),n})).exists((t=>(Rk(e,t),!0))),PS=e=>q(["figcaption"],Wt(e)),IS=(e,t)=>!!e.selection.isCollapsed()&&((e,t)=>{var r=xr(e.getBody()),n=Is.fromRangeStart(e.selection.getRng());return((e,t)=>{var r=B(Or,t);return en(xr(e.container()),Oo,r).filter(PS)})(n,r).exists((()=>{if(((e,t,r)=>t?vk(e.dom,r):pk(e.dom,r))(r,t,n)){var o=OS(e,r,t?yn:bn);return e.selection.setRng(o),!0}return!1}))})(e,t),FS=(e,t)=>((e,t)=>t?V.from(e.dom.getParent(e.selection.getNode(),"details")).map((t=>((e,t)=>{var r=e.selection.getRng(),n=Is.fromRangeStart(r);return!(e.getBody().lastChild!==t||!vk(t,n)||(e.execCommand("InsertNewBlockAfter"),0))})(e,t))).getOr(!1):V.from(e.dom.getParent(e.selection.getNode(),"summary")).bind((t=>V.from(e.dom.getParent(t,"details")).map((r=>((e,t,r)=>{var n=e.selection.getRng(),o=Is.fromRangeStart(n);return!(e.getBody().firstChild!==t||!pk(r,o)||(e.execCommand("InsertNewBlockBefore"),0))})(e,r,t))))).getOr(!1))(e,t),zS={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},VS=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,ZS=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return()=>e.apply(null,r)},jS=(e,t)=>re(((e,t)=>ae((e=>G(e,(e=>o(o({},zS),e))))(e),(e=>VS(e,t)?[e]:[])))(e,t),(e=>e.action())),US=(e,t)=>pe(((e,t)=>ae((e=>G(e,(e=>o(o({},zS),e))))(e),(e=>VS(e,t)?[e]:[])))(e,t),(e=>e.action())),WS=(e,t)=>{var r=t?cl.Forwards:cl.Backwards,n=e.selection.getRng();return Bk(e,r,n,cp,up,ho).exists((t=>(Rk(e,t),!0)))},qS=(e,t)=>{var r=t?1:-1,n=e.selection.getRng();return Lk(e,r,n,cp,up,ho).exists((t=>(Rk(e,t),!0)))},$S=(e,t)=>Pk(e,t,t?up:cp),GS=dl([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),KS=o(o({},GS),{},{none:e=>GS.none(e)}),YS=(e,t,r)=>ae(Ir(e),(e=>Sr(e,t)?r(e)?[e]:[]:YS(e,t,r))),XS=(e,t)=>nn(e,"table",t),JS=function e(t,r,n,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:z,i=1===o;if(!i&&n<=0)return KS.first(t[0]);if(i&&n>=t.length-1)return KS.last(t[t.length-1]);var s=n+o,l=t[s];return a(l)?KS.middle(r,l):e(t,r,s,o,a)},QS=(e,t)=>XS(e,t).bind((t=>{var r=YS(t,"th,td",z);return ne(r,(t=>Or(e,t))).map((e=>({index:e,all:r})))})),e_=(e,t,r,n,o)=>{var a=zn(xr(r),"td,th,caption").map((e=>e.dom)),i=J(((e,t)=>ae(t,(t=>{var r=((e,t)=>({left:e.left-t,top:e.top-t,right:e.right+-2,bottom:e.bottom+-2,width:e.width+t,height:e.height+t}))(us(t.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:t},{x:r.right,y:e(r),cell:t}]})))(e,a),(e=>t(e,o)));return((e,t,r)=>ee(e,((e,n)=>e.fold((()=>V.some(n)),(e=>{var o=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-r)),a=Math.sqrt(Math.abs(n.x-t)+Math.abs(n.y-r));return V.some(a<o?n:e)}))),V.none()))(i,n,o).map((e=>e.cell))},t_=B(e_,(e=>e.bottom),((e,t)=>e.y<t)),r_=B(e_,(e=>e.top),((e,t)=>e.y>t)),n_=(e,t,r)=>{var n=e(t,r);return(e=>e.breakType===qy.Wrap&&0===e.positions.length)(n)||!so(r.getNode())&&(e=>e.breakType===qy.Br&&1===e.positions.length)(n)?!((e,t,r)=>r.breakAt.exists((r=>e(t,r).breakAt.isSome())))(e,t,n):n.breakAt.isNone()},o_=B(n_,uk),a_=B(n_,mk),i_=(e,t,r,n)=>{var o=e.selection.getRng(),a=t?1:-1;return!(!Oc()||!((e,t,r)=>{var n=Is.fromRangeStart(t);return wu(!e,r).exists((e=>e.isEqual(n)))})(t,o,r)||(mC(a,e,r,!t,!1).each((t=>{Rk(e,t)})),0))},s_=(e,t,r)=>{var n=((e,t)=>{var r=t.getNode(e);return Jn(r)?V.some(r):V.none()})(!!t,r),o=!1===t;n.fold((()=>Rk(e,r.toRange())),(n=>wu(o,e.getBody()).filter((e=>e.isEqual(r))).fold((()=>Rk(e,r.toRange())),(r=>((e,t,r)=>{t.undoManager.transact((()=>{var n=e?fn:vn,o=OS(t,xr(r),n);Rk(t,o)}))})(t,e,n)))))},l_=(e,t,r,n)=>{var o=e.selection.getRng(),a=Is.fromRangeStart(o),i=e.getBody();if(!t&&o_(n,a)){var s=((e,t,r)=>((e,t)=>me(t.getClientRects()).bind((t=>t_(e,t.left,t.top))).bind((e=>{return ck(Su(r=e).map((e=>uk(r,e).positions.concat(e))).getOr([]),t);var r})))(t,r).orThunk((()=>me(r.getClientRects()).bind((r=>dk(gk(e,Is.before(t)),r.left))))).getOr(Is.before(t)))(i,r,a);return s_(e,t,s),!0}if(t&&a_(n,a)){var l=((e,t,r)=>((e,t)=>ge(t.getClientRects()).bind((t=>r_(e,t.left,t.top))).bind((e=>{return ck(ku(r=e).map((e=>[e].concat(mk(r,e).positions))).getOr([]),t);var r})))(t,r).orThunk((()=>me(r.getClientRects()).bind((r=>dk(hk(e,Is.after(t)),r.left))))).getOr(Is.after(t)))(i,r,a);return s_(e,t,l),!0}return!1},d_=(e,t,r)=>V.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind((n=>V.from(e.dom.getParent(n,"table")).map((o=>r(e,t,o,n))))).getOr(!1),c_=(e,t)=>d_(e,t,i_),u_=(e,t)=>d_(e,t,l_),m_=(e,t,r)=>r.fold(V.none,V.none,((e,t)=>{return(r=t,n=Rh,(o=e=>{for(var t=0;t<e.childNodes.length;t++){var r=xr(e.childNodes[t]);if(n(r))return V.some(r);var a=o(e.childNodes[t]);if(a.isSome())return a}return V.none()})(r.dom)).map((e=>(e=>{var t=bg.exact(e,0,e,0);return kg(t)})(e)));var r,n,o}),(r=>(e.execCommand("mceTableInsertRowAfter"),g_(e,t,r)))),g_=(e,t,r)=>{return m_(e,t,(o=on,QS(n=r,void 0).fold((()=>KS.none(n)),(e=>JS(e.all,n,e.index,1,o)))));var n,o},h_=(e,t,r)=>{return m_(e,t,(o=on,QS(n=r,void 0).fold((()=>KS.none()),(e=>JS(e.all,n,e.index,-1,o)))));var n,o},p_=(e,t)=>{var r=["table","li","dl"],n=xr(e.getBody()),o=e=>{var t=Wt(e);return Or(e,n)||q(r,t)},a=e.selection.getRng();return((e,t)=>function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F;return r(t)?V.none():q(e,Wt(t))?V.some(t):tn(t,e.join(","),(e=>Sr(e,"table")||r(e)))}(["td","th"],e,t))(xr(t?a.endContainer:a.startContainer),o).map((r=>(XS(r,o).each((t=>{e.model.table.clearSelectedCells(t.dom)})),e.selection.collapse(!t),(t?g_:h_)(e,o,r).each((t=>{e.selection.setRng(t)})),!0))).getOr(!1)},v_=(e,t)=>({container:e,offset:t}),f_=Bi.DOM,b_=e=>t=>e===t?-1:0,y_=(e,t,r)=>{if(to(e)&&t>=0)return V.some(v_(e,t));var n=ds(f_);return V.from(n.backwards(e,t,b_(e),r)).map((e=>v_(e.container,e.container.data.length)))},w_=(e,t,r)=>{if(!to(e))return V.none();var n=e.data;if(t>=0&&t<=n.length)return V.some(v_(e,t));var o=ds(f_);return V.from(o.backwards(e,t,b_(e),r)).bind((e=>{var n=e.container.data;return w_(e.container,t+n.length,r)}))},x_=(e,t,r)=>{if(!to(e))return V.none();var n=e.data;if(t<=n.length)return V.some(v_(e,t));var o=ds(f_);return V.from(o.forwards(e,t,b_(e),r)).bind((e=>x_(e.container,t-n.length,r)))},C_=(e,t,r,n,o)=>{var a=ds(e,(e=>t=>e.isBlock(t)||q(["BR","IMG","HR","INPUT"],t.nodeName)||"false"===e.getContentEditable(t))(e));return V.from(a.backwards(t,r,n,o))},k_=e=>Zo(e.toString().replace(/\u00A0/g," ")),S_=e=>""!==e&&-1!==" \f\n\r\t\v".indexOf(e),__=(e,t)=>e.substring(t.length),O_=function(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return(n=xr(t.startContainer),nn(n,Dh)).fold((()=>function(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!(n=t).collapsed||!to(n.startContainer))return V.none();var a={text:"",offset:0},i=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return C_(e,t.startContainer,t.startOffset,((e,t,n)=>(a.text=n+a.text,a.offset+=t,((e,t,r)=>{var n,o=r.charAt(0);for(n=t-1;n>=0;n--){var a=e.charAt(n);if(S_(a))return V.none();if(o===a&&We(e,r,n,t))break}return V.some(n)})(a.text,a.offset,r).getOr(t))),i).bind((e=>{var n=t.cloneRange();if(n.setStart(e.container,e.offset),n.setEnd(t.endContainer,t.endOffset),n.collapsed)return V.none();var a=k_(n);return 0!==a.lastIndexOf(r)||__(a,r).length<o?V.none():V.some({text:__(a,r),range:n,trigger:r})}))}(e,t,r,o)),(t=>{var n=e.createRng();n.selectNode(t.dom);var o=k_(n);return V.some({range:n,text:__(o,r),trigger:r})}))},E_=e=>{if((e=>3===e.nodeType)(e))return v_(e,e.data.length);var t=e.childNodes;return t.length>0?E_(t[t.length-1]):v_(e,t.length)},T_=(e,t)=>{var r=e.childNodes;return r.length>0&&t<r.length?T_(r[t],0):r.length>0&&(e=>1===e.nodeType)(e)&&r.length===t?E_(r[r.length-1]):v_(e,t)},A_=function(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=t(),i=null!==(n=e.selection.getRng().startContainer.nodeValue)&&void 0!==n?n:"",s=J(a.lookupByTrigger(r.trigger),(t=>r.text.length>=t.minChars&&t.matches.getOrThunk((()=>(e=>t=>{var r=T_(t.startContainer,t.startOffset);return!((e,t)=>{var r,n=null!==(r=e.getParent(t.container,e.isBlock))&&void 0!==r?r:e.getRoot();return C_(e,t.container,t.offset,((e,t)=>0===t?-1:t),n).filter((e=>{var t=e.container.data.charAt(e.offset-1);return!S_(t)})).isSome()})(e,r)})(e.dom)))(r.range,i,r.text)));if(0===s.length)return V.none();var l=Promise.all(G(s,(e=>e.fetch(r.text,e.maxResults,o).then((t=>({matchText:r.text,items:t,columns:e.columns,onAction:e.onAction,highlightOn:e.highlightOn}))))));return V.some({lookupData:l,context:r})};!function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"}(_k||(_k={}));var M_,N_=(e,t,r)=>e.stype===_k.Error?t(e.serror):r(e.svalue),R_=e=>({stype:_k.Value,svalue:e}),D_=e=>({stype:_k.Error,serror:e}),B_=N_,L_=e=>f(e)&&ve(e).length>100?" removed due to size":JSON.stringify(e,null,2),H_=(e,t)=>D_([{path:e,getErrorInfo:t}]),P_=(e,t)=>({extract:(r,n)=>Oe(n,e).fold((()=>((e,t)=>H_(e,(()=>'Choice schema did not contain choice key: "'+t+'"')))(r,e)),(e=>((e,t,r,n)=>Oe(r,n).fold((()=>((e,t,r)=>H_(e,(()=>'The chosen schema: "'+r+'" did not exist in branches: '+L_(t))))(e,r,n)),(r=>r.extract(e.concat(["branch: "+n]),t))))(r,n,t,e))),toString:()=>"chooseOn("+e+"). Possible values: "+ve(t)}),I_=e=>function(){if(0===arguments.length)throw new Error("Can't merge zero objects");for(var t={},r=0;r<arguments.length;r++){var n=r<0||arguments.length<=r?void 0:arguments[r];for(var o in n)Ee(n,o)&&(t[o]=e(t[o],n[o]))}return t},F_=I_(((e,t)=>b(e)&&b(t)?F_(e,t):t)),z_=(I_(((e,t)=>t)),e=>({tag:"defaultedThunk",process:N(e)})),V_=e=>{var t,r=(e=>{var t=[],r=[];return K(e,(e=>{N_(e,(e=>r.push(e)),(e=>t.push(e)))})),{values:t,errors:r}})(e);return r.errors.length>0?(t=r.errors,A(D_,oe)(t)):R_(r.values)},Z_=(e,t,r)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return r(e.newKey,e.instantiator)}},j_=e=>({extract:(t,r)=>{return n=e(r),o=e=>((e,t)=>H_(e,N(t)))(t,e),n.stype===_k.Error?o(n.serror):n;var n,o},toString:N("val")}),U_=j_(R_),W_=(e,t,r,n)=>n(Oe(e,t).getOrThunk((()=>r(e)))),q_=(e,t,r,n,o)=>{var a=e=>o.extract(t.concat([n]),e),i=e=>e.fold((()=>R_(V.none())),(e=>{var r,a,i=o.extract(t.concat([n]),e);return r=i,a=V.some,r.stype===_k.Value?{stype:_k.Value,svalue:a(r.svalue)}:r}));switch(e.tag){case"required":return((e,t,r,n)=>Oe(t,r).fold((()=>((e,t,r)=>H_(e,(()=>'Could not find valid *required* value for "'+t+'" in '+L_(r))))(e,r,t)),n))(t,r,n,a);case"defaultedThunk":return W_(r,n,e.process,a);case"option":return((e,t,r)=>r(Oe(e,t)))(r,n,i);case"defaultedOptionThunk":return((e,t,r,n)=>n(Oe(e,t).map((t=>!0===t?r(e):t))))(r,n,e.process,i);case"mergeWithThunk":return W_(r,n,N({}),(t=>{var n=F_(e.process(r),t);return a(n)}))}},$_=e=>({extract:(t,r)=>((e,t,r)=>{var n={},o=[];for(var a of r)Z_(a,((r,a,i,s)=>{var l=q_(i,e,t,r,s);B_(l,(e=>{o.push(...e)}),(e=>{n[a]=e}))}),((e,r)=>{n[e]=r(t)}));return o.length>0?D_(o):R_(n)})(t,r,e),toString:()=>{var t=G(e,(e=>Z_(e,((e,t,r,n)=>e+" -> "+n.toString()),((e,t)=>"state("+e+")"))));return"obj{\n"+t.join("\n")+"}"}}),G_=e=>({extract:(t,r)=>{var n=G(r,((r,n)=>e.extract(t.concat(["["+n+"]"]),r)));return V_(n)},toString:()=>"array("+e.toString()+")"}),K_=(e,t,r)=>{return n=((e,t,r)=>((e,t)=>e.stype===_k.Error?{stype:_k.Error,serror:t(e.serror)}:e)(t.extract([e],r),(e=>({input:r,errors:e}))))(e,t,r),N_(n,ll.error,ll.value);var n},Y_=(e,t)=>P_(e,ye(t,$_)),X_=N(U_),J_=(e,t)=>j_((r=>{var n=typeof r;return e(r)?R_(r):D_("Expected type: ".concat(t," but got: ").concat(n))})),Q_=J_(O,"number"),eO=J_(v,"string"),tO=J_(x,"boolean"),rO=J_(_,"function"),nO=(e,t,r,n)=>({tag:"field",key:e,newKey:t,presence:r,prop:n}),oO=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),aO=(e,t)=>nO(e,e,{tag:"required",process:{}},t),iO=e=>aO(e,eO),sO=e=>aO(e,rO),lO=(e,t)=>nO(e,e,{tag:"option",process:{}},t),dO=e=>lO(e,eO),cO=(e,t,r)=>nO(e,e,z_(t),r),uO=(e,t)=>cO(e,t,Q_),mO=(e,t,r)=>cO(e,t,(e=>{return t=t=>q(e,t)?ll.value(t):ll.error('Unsupported value: "'.concat(t,'", choose one of "').concat(e.join(", "),'".')),j_((e=>t(e).fold(D_,R_)));var t})(r)),gO=(e,t)=>cO(e,t,tO),hO=(e,t)=>cO(e,t,rO),pO=iO("type"),vO=sO("fetch"),fO=sO("onAction"),bO=hO("onSetup",(()=>T)),yO=dO("text"),wO=dO("icon"),xO=dO("tooltip"),CO=dO("label"),kO=gO("active",!1),SO=gO("enabled",!0),_O=gO("primary",!1),OO=e=>((e,t)=>cO("type",t,eO))(0,e),EO=$_([pO,iO("trigger"),uO("minChars",1),(1,((e,t)=>nO(e,e,z_(1),X_()))("columns")),uO("maxResults",10),("matches",lO("matches",rO)),vO,fO,(M_=eO,cO("highlightOn",[],G_(M_)))]),TO=[SO,xO,wO,yO,bO],AO=[kO].concat(TO),MO=[hO("predicate",F),mO("scope","node",["node","editor"]),mO("position","selection",["node","selection","line"])],NO=TO.concat([OO("contextformbutton"),_O,fO,oO("original",R)]),RO=AO.concat([OO("contextformbutton"),_O,fO,oO("original",R)]),DO=TO.concat([OO("contextformbutton")]),BO=AO.concat([OO("contextformtogglebutton")]),LO=Y_("type",{contextformbutton:NO,contextformtogglebutton:RO});$_([OO("contextform"),hO("initValue",N("")),CO,((e,t)=>nO(e,e,{tag:"required",process:{}},G_(t)))("commands",LO),lO("launch",Y_("type",{contextformbutton:DO,contextformtogglebutton:BO}))].concat(MO));var HO=e=>{var t=e.ui.registry.getAll().popups,r=ye(t,(e=>{return(t=e,K_("Autocompleter",EO,o({trigger:t.ch},t))).fold((e=>{throw new Error("Errors: \n"+(r=(t=e).errors,n=r.length>10?r.slice(0,10).concat([{path:[],getErrorInfo:N("... (only showing first ten failures)")}]):r,G(n,(e=>"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo()))).join("\n")+"\n\nInput object: "+L_(t.input));var t,r,n}),R);var t})),n=Ae(Se(r,(e=>e.trigger))),a=_e(r);return{dataset:r,triggers:n,lookupByTrigger:e=>J(a,(t=>t.trigger===e))}},PO=e=>{var t=ji(),r=Pi(!1),n=t.isSet,a=()=>{n()&&((e=>{zw(e).autocompleter.removeDecoration()})(e),(e=>{e.dispatch("AutocompleterEnd")})(e),r.set(!1),t.clear())},i=Ie((()=>HO(e))),s=s=>{(r=>t.get().map((t=>O_(e.dom,e.selection.getRng(),t.trigger).bind((t=>A_(e,i,t,r))))).getOrThunk((()=>((e,t)=>{var r=t(),n=e.selection.getRng();return((e,t,r)=>pe(r.triggers,(r=>O_(e,t,r))))(e.dom,n,r).bind((r=>A_(e,t,r)))})(e,i))))(s).fold(a,(i=>{(r=>{n()||(((e,t)=>{zw(e).autocompleter.addDecoration(t)})(e,r.range),t.set({trigger:r.trigger,matchLength:r.text.length}))})(i.context),i.lookupData.then((n=>{t.get().map((s=>{var l=i.context;s.trigger===l.trigger&&(l.text.length-s.matchLength>=10?a():(t.set(o(o({},s),{},{matchLength:l.text.length})),r.get()?((e,t)=>{e.dispatch("AutocompleterUpdate",t)})(e,{lookupData:n}):(r.set(!0),((e,t)=>{e.dispatch("AutocompleterStart",t)})(e,{lookupData:n}))))}))}))}))};e.addCommand("mceAutocompleterReload",((e,t)=>{var r=f(t)?t.fetchOptions:{};s(r)})),e.addCommand("mceAutocompleterClose",a),((e,t)=>{var r=Wi(t.load,50);e.on("keypress compositionend",(e=>{27!==e.which&&r.throttle()})),e.on("keydown",(e=>{var n=e.which;8===n?r.throttle():27===n&&t.cancelIfNecessary()})),e.on("remove",r.cancel)})(e,{cancelIfNecessary:a,load:s})},IO=Ot().browser.isSafari(),FO=e=>Io(xr(e)),zO=(e,t)=>{var r;return 0===e.startOffset&&e.endOffset===(null===(r=t.textContent)||void 0===r?void 0:r.length)},VO=(e,t)=>V.from(e.getParent(t.container(),"details")),ZO=(e,t)=>VO(e,t).isSome(),jO=(e,t)=>{var r=t.getNode();C(r)||e.selection.setCursorLocation(r,t.offset())},UO=(e,t,r)=>{var n=e.dom.getParent(t.container(),"details");if(n&&!n.open){var o=e.dom.select("summary",n)[0];o&&(r?ku(o):Su(o)).each((t=>jO(e,t)))}else jO(e,t)},WO=(e,t,r)=>{var{dom:n,selection:o}=e,a=e.getBody();if("character"===r){var i=Is.fromRangeStart(o.getRng()),s=n.getParent(i.container(),n.isBlock),l=VO(n,i),d=s&&n.isEmpty(s),c=w(null==s?void 0:s.previousSibling),u=w(null==s?void 0:s.nextSibling);return!!(d&&(t?u:c)&&bu(!t,a,i).exists((e=>ZO(n,e)&&!It(l,VO(n,e)))))||bu(t,a,i).fold(F,(r=>{var o=VO(n,r);if(ZO(n,r)&&!It(l,o)){if(t||UO(e,r,!1),s&&d){if(t&&c)return!0;if(!t&&u)return!0;UO(e,r,t),e.dom.remove(s)}return!0}return!1}))}return!1},qO=(e,t,r,n)=>{var o=e.selection.getRng(),a=Is.fromRangeStart(o),i=e.getBody();return"selection"===n?((e,t)=>{var r=t.startSummary.exists((t=>t.contains(e.startContainer))),n=t.startSummary.exists((t=>t.contains(e.endContainer))),o=t.startDetails.forall((e=>t.endDetails.forall((t=>e!==t))));return(r||n)&&!(r&&n)||o})(o,t):r?((e,t)=>t.startSummary.exists((t=>((e,t)=>Su(t).exists((r=>so(r.getNode())&&Cu(t,r).exists((t=>t.isEqual(e)))||r.isEqual(e))))(e,t))))(a,t)||((e,t,r)=>r.startDetails.exists((r=>xu(e,t).forall((e=>!r.contains(e.container()))))))(i,a,t):((e,t)=>t.startSummary.exists((t=>((e,t)=>ku(t).exists((t=>t.isEqual(e))))(e,t))))(a,t)||((e,t)=>t.startDetails.exists((r=>Cu(r,e).forall((r=>t.startSummary.exists((t=>!t.contains(e.container())&&t.contains(r.container()))))))))(a,t)},$O=(e,t,r)=>((e,t,r)=>((e,t)=>{var r=V.from(e.getParent(t.startContainer,"details")),n=V.from(e.getParent(t.endContainer,"details"));if(r.isSome()||n.isSome()){var o=r.bind((t=>V.from(e.select("summary",t)[0])));return V.some({startSummary:o,startDetails:r,endDetails:n})}return V.none()})(e.dom,e.selection.getRng()).fold((()=>WO(e,t,r)),(n=>qO(e,n,t,r)||WO(e,t,r))))(e,t,r)||IO&&((e,t,r)=>{var n=e.selection,o=n.getNode(),a=n.getRng(),i=Is.fromRangeStart(a);return!!fo(o)&&("selection"===r&&zO(a,o)||fv(t,i,o)?FO(o):e.undoManager.transact((()=>{var a=n.getSel(),{anchorNode:i,anchorOffset:s,focusNode:l,focusOffset:d}=null!=a?a:{},c=()=>{S(i)&&S(s)&&S(l)&&S(d)&&(null==a||a.setBaseAndExtent(i,s,l,d))},u=(e,t)=>{K(e.childNodes,(e=>{sm(e)&&t.appendChild(e)}))},m=e.dom.create("span",{"data-mce-bogus":"1"});u(o,m),o.appendChild(m),c(),"word"!==r&&"line"!==r||null==a||a.modify("extend",t?"right":"left",r),!n.isCollapsed()&&zO(n.getRng(),m)?FO(o):(e.execCommand(t?"ForwardDelete":"Delete"),i=null==a?void 0:a.anchorNode,s=null==a?void 0:a.anchorOffset,l=null==a?void 0:a.focusNode,d=null==a?void 0:a.focusOffset,u(m,o),c()),e.dom.remove(m)})),!0)})(e,t,r)?V.some(T):V.none(),GO=e=>function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=t.getBody(),i={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:a,currentTarget:a,eventPhase:Event.AT_TARGET,originalTarget:a,explicitOriginalTarget:a,isTrusted:!1,srcElement:a,cancelable:!1,preventDefault:T,inputType:r},s=fi(new InputEvent(e));return t.dispatch(e,o(o(o({},s),i),n))},KO=GO("input"),YO=GO("beforeinput"),XO=Ot(),JO=XO.os,QO=JO.isMacOS()||JO.isiOS(),eE=XO.browser.isFirefox(),tE=(e,t)=>{var r=e.dom,n=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)){var o=(e=>{for(;e;){if(qn(e)||to(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null})(t.firstChild);o&&/^(UL|OL|DL)$/.test(o.nodeName)&&t.insertBefore(r.doc.createTextNode(yo),t.firstChild)}var a=r.createRng();if(t.normalize(),t.hasChildNodes()){for(var i,s=new Zn(t,t),l=t;i=s.current();){if(to(i)){a.setStart(i,0),a.setEnd(i,0);break}if(n[i.nodeName.toLowerCase()]){a.setStartBefore(i),a.setEndBefore(i);break}l=i,i=s.next()}i||(a.setStart(l,0),a.setEnd(l,0))}else so(t)?t.nextSibling&&r.isBlock(t.nextSibling)?(a.setStartBefore(t),a.setEndBefore(t)):(a.setStartAfter(t),a.setEndAfter(t)):(a.setStart(t,0),a.setEnd(t,0));e.selection.setRng(a),rh(e,a)}},rE=(e,t)=>{for(var r,n=e.getRoot(),o=t;o!==n&&o&&"false"!==e.getContentEditable(o);){if("true"===e.getContentEditable(o)){r=o;break}o=o.parentNode}return o!==n?r:n},nE=e=>V.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),oE=e=>{e.innerHTML='<br data-mce-bogus="1">'},aE=(e,t)=>{Nl(e).toLowerCase()===t.tagName.toLowerCase()&&((e,t,r)=>{var n=e.dom;V.from(r.style).map(n.parseStyle).each((e=>{var r=o(o({},hn(xr(t))),e);n.setStyles(t,r)}));var a=V.from(r.class).map((e=>e.split(/\s+/))),i=V.from(t.className).map((e=>J(e.split(/\s+/),(e=>""!==e))));Ft(a,i,((e,r)=>{var o=J(r,(t=>!q(e,t))),a=[...e,...o];n.setAttrib(t,"class",a.join(" "))}));var s=["style","class"],l=ke(r,((e,t)=>!q(s,t)));n.setAttribs(t,l)})(e,t,Rl(e))},iE=function(e,t,r,n){var o,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5?arguments[5]:void 0,s=e.dom,l=e.schema,d=Nl(e),c=r?r.nodeName.toUpperCase():"",u=t,m=l.getTextInlineElements(),g=o=i||"TABLE"===c||"HR"===c?s.create(i||d):r.cloneNode(!1);if(a){do{if(m[u.nodeName]){if(Ou(u)||Fu(u))continue;var h=u.cloneNode(!1);s.setAttrib(h,"id",""),o.hasChildNodes()?(h.appendChild(o.firstChild),o.appendChild(h)):(g=h,o.appendChild(h))}}while((u=u.parentNode)&&u!==n)}else s.setAttrib(o,"style",null),s.setAttrib(o,"class",null);return aE(e,o),oE(g),o},sE=(e,t)=>{var r=null==e?void 0:e.parentNode;return S(r)&&r.nodeName===t},lE=e=>S(e)&&/^(OL|UL|LI)$/.test(e.nodeName),dE=e=>{var t,r=e.parentNode;return S(t=r)&&/^(LI|DT|DD)$/.test(t.nodeName)?r:e},cE=(e,t,r)=>{for(var n=e[r?"firstChild":"lastChild"];n&&!qn(n);)n=n[r?"nextSibling":"previousSibling"];return n===t},uE=(e,t)=>t&&"A"===t.nodeName&&e.isEmpty(t),mE=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,gE=(e,t)=>S(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&"false"!==e.getContentEditable(t),hE=(e,t,r)=>to(t)?e?1===r&&t.data.charAt(r-1)===zo?0:r:r===t.data.length-1&&t.data.charAt(r)===zo?t.data.length:r:r,pE={insert:(e,t)=>{var r,n,o,a,i=!1,s=e.dom,l=e.schema.getNonEmptyElements(),d=e.selection.getRng(),c=Nl(e),u=xr(d.startContainer),m=Fr(u,d.startOffset),g=m.exists((e=>Gt(e)&&!on(e))),h=d.collapsed&&g,p=t=>iE(e,r,_,C,Hl(e),t),f=e=>{var t=hE(e,r,n);if(to(r)&&(e?t>0:t<r.data.length))return!1;if(r.parentNode===_&&i&&!e)return!0;if(e&&qn(r)&&r===_.firstChild)return!0;if(mE(r,"TABLE")||mE(r,"HR"))return i&&!e||!i&&e;var o,a=new Zn(r,_);for(to(r)&&(e&&0===t?a.prev():e||t!==r.data.length||a.next());o=a.current();){if(qn(o)){if(!o.getAttribute("data-mce-bogus")){var s=o.nodeName.toLowerCase();if(l[s]&&"br"!==s)return!1}}else if(to(o)&&!ga(o.data))return!1;e?a.prev():a.next()}return!0},b=()=>{var t;return t=/^(H[1-6]|PRE|FIGURE)$/.test(o)&&"HGROUP"!==O?p(c):p(),((e,t)=>{var r=Pl(e);return!k(t)&&(v(r)?q(Ht.explode(r),t.nodeName.toLowerCase()):r)})(e,a)&&gE(s,a)&&s.isEmpty(_,void 0,{includeZwsp:!0})?t=s.split(a,_):s.insertAfter(t,_),tE(e,t),t};Rg(s,d).each((e=>{d.setStart(e.startContainer,e.startOffset),d.setEnd(e.endContainer,e.endOffset)})),r=d.startContainer,n=d.startOffset;var y=!(!t||!t.shiftKey),x=!(!t||!t.ctrlKey);qn(r)&&r.hasChildNodes()&&!h&&(i=n>r.childNodes.length-1,r=r.childNodes[Math.min(n,r.childNodes.length-1)]||r,n=i&&to(r)?r.data.length:0);var C=rE(s,r);if(C&&!((e,t)=>{var r=e.dom.getParent(t,"ol,ul,dl");return null!==r&&"false"===e.dom.getContentEditableParent(r)})(e,r)){y||(r=((e,t,r,n,o)=>{var a,i,s=e.dom,l=null!==(a=rE(s,n))&&void 0!==a?a:s.getRoot(),d=s.getParent(n,s.isBlock);if(!d||!gE(s,d)){if(!(d=d||l).hasChildNodes()){var c=s.create(t);return aE(e,c),d.appendChild(c),r.setStart(c,0),r.setEnd(c,0),c}for(var u,m=n;m&&m.parentNode!==d;)m=m.parentNode;for(;m&&!s.isBlock(m);)u=m,m=m.previousSibling;var g=null===(i=null==u?void 0:u.parentElement)||void 0===i?void 0:i.nodeName;if(u&&g&&e.schema.isValidChild(g,t.toLowerCase())){var h=u.parentNode,p=s.create(t);for(aE(e,p),h.insertBefore(p,u),m=u;m&&!s.isBlock(m);){var v=m.nextSibling;p.appendChild(m),m=v}r.setStart(n,o),r.setEnd(n,o)}}return n})(e,c,d,r,n));var _=s.getParent(r,s.isBlock)||s.getRoot();a=S(null==_?void 0:_.parentNode)?s.getParent(_.parentNode,s.isBlock):null,o=_?_.nodeName.toUpperCase():"";var O=a?a.nodeName.toUpperCase():"";if("LI"!==O||x||(_=a,a=a.parentNode,o=O),qn(a)&&((e,t,r)=>!t&&r.nodeName.toLowerCase()===Nl(e)&&e.dom.isEmpty(r)&&((t,r,n)=>{for(var o=r;o&&o!==t&&w(o.nextSibling);){var a=o.parentElement;if(!a||(i=a,!Ee(e.schema.getTextBlockElements(),i.nodeName.toLowerCase())))return vo(a);o=a}var i;return!1})(e.getBody(),r))(e,y,_))return((e,t,r)=>{var n,o,a,i=t(Nl(e)),s=((e,t)=>e.dom.getParent(t,vo))(e,r);s&&(e.dom.insertAfter(i,s),tE(e,i),(null!==(a=null===(o=null===(n=r.parentElement)||void 0===n?void 0:n.childNodes)||void 0===o?void 0:o.length)&&void 0!==a?a:0)>1&&e.dom.remove(r))})(e,p,_);if(/^(LI|DT|DD)$/.test(o)&&qn(a)&&s.isEmpty(_))((e,t,r,n,o)=>{var a=e.dom,i=e.selection.getRng(),s=r.parentNode;if(r!==e.getBody()&&s){var l;lE(l=r)&&lE(l.parentNode)&&(o="LI");var d=t(o);if(cE(r,n,!0)&&cE(r,n,!1))if(sE(r,"LI")){var c=dE(r);a.insertAfter(d,c),(e=>{var t;return(null===(t=e.parentNode)||void 0===t?void 0:t.firstChild)===e})(r)?a.remove(c):a.remove(r)}else a.replace(d,r);else if(cE(r,n,!0))sE(r,"LI")?(a.insertAfter(d,dE(r)),d.appendChild(a.doc.createTextNode(" ")),d.appendChild(r)):s.insertBefore(d,r),a.remove(n);else if(cE(r,n,!1))a.insertAfter(d,dE(r)),a.remove(n);else{r=dE(r);var u=i.cloneRange();u.setStartAfter(n),u.setEndAfter(r);var m=u.extractContents();"LI"===o&&((e,t)=>e.firstChild&&"LI"===e.firstChild.nodeName)(m)?(d=m.firstChild,a.insertAfter(m,r)):(a.insertAfter(m,r),a.insertAfter(d,r)),a.remove(n)}tE(e,d)}})(e,p,a,_,c);else if(h||_!==e.getBody()&&gE(s,_)){var E,T=_.parentNode;if(h)E=p(c),m.fold((()=>{yn(u,xr(E))}),(e=>{vn(e,xr(E))})),e.selection.setCursorLocation(E,0);else if(Wo(_))E=Qo(_),s.isEmpty(_)&&oE(_),aE(e,E),tE(e,E);else if(f(!1))E=b();else if(f(!0)&&T){E=T.insertBefore(p(),_);var A=xr(d.startContainer).dom.hasChildNodes()&&d.collapsed;tE(e,mE(_,"HR")||A?E:_)}else{var M=(e=>{var t=e.cloneRange();return t.setStart(e.startContainer,hE(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,hE(!1,e.endContainer,e.endOffset)),t})(d).cloneRange();M.setEndAfter(_);var N=M.extractContents();(e=>{K(Fn(xr(e),Yt),(e=>{var t=e.dom;t.nodeValue=Zo(t.data)}))})(N),(e=>{var t=e;do{to(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild}while(t)})(N),E=N.firstChild,s.insertAfter(N,_),((e,t,r)=>{var n,o=[];if(r){for(var a=r;a=a.firstChild;){if(e.isBlock(a))return;qn(a)&&!t[a.nodeName.toLowerCase()]&&o.push(a)}for(var i=o.length;i--;)(!(a=o[i]).hasChildNodes()||a.firstChild===a.lastChild&&""===(null===(n=a.firstChild)||void 0===n?void 0:n.nodeValue)||uE(e,a))&&e.remove(a)}})(s,l,E),((e,t)=>{t.normalize();var r=t.lastChild;(!r||qn(r)&&/^(left|right)$/gi.test(e.getStyle(r,"float",!0)))&&e.add(t,"br")})(s,_),s.isEmpty(_)&&oE(_),E.normalize(),s.isEmpty(E)?(s.remove(E),b()):(aE(e,E),tE(e,E))}s.setAttrib(E,"id",""),e.dispatch("NewBlock",{newBlock:E})}}},fakeEventName:"insertParagraph"},vE=(e,t,r)=>{var n=e.dom.createRng();r?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),e.selection.setRng(n),rh(e,n)},fE=(e,t)=>{var r=yr("br");vn(xr(t),r),e.undoManager.add()},bE=(e,t)=>{yE(e.getBody(),t)||fn(xr(t),yr("br"));var r=yr("br");fn(xr(t),r),vE(e,r.dom,!1),e.undoManager.add()},yE=(e,t)=>{return r=Is.after(t),!!so(r.getNode())||xu(e,Is.after(t)).map((e=>so(e.getNode()))).getOr(!1);var r},wE=e=>e&&"A"===e.nodeName&&"href"in e,xE=e=>e.fold(F,wE,wE,F),CE=(e,t)=>{t.fold(T,B(fE,e),B(bE,e),T)},kE={insert:(e,t)=>{var r=(e=>{var t=B(iv,e),r=Is.fromRangeStart(e.selection.getRng());return GC(t,e.getBody(),r).filter(xE)})(e);r.isSome()?r.each(B(CE,e)):((e,t)=>{var r,n=e.selection,o=e.dom,a=n.getRng(),i=!1;Rg(o,a).each((e=>{a.setStart(e.startContainer,e.startOffset),a.setEnd(e.endContainer,e.endOffset)}));var s=a.startOffset,l=a.startContainer;if(qn(l)&&l.hasChildNodes()){var d=s>l.childNodes.length-1;l=l.childNodes[Math.min(s,l.childNodes.length-1)]||l,s=d&&to(l)?l.data.length:0}var c=o.getParent(l,o.isBlock),u=c&&c.parentNode?o.getParent(c.parentNode,o.isBlock):null,m=u?u.nodeName.toUpperCase():"",g=!(!t||!t.ctrlKey);"LI"!==m||g||(c=u),to(l)&&s>=l.data.length&&(((e,t,r)=>{for(var n,o=new Zn(t,r),a=e.getNonEmptyElements();n=o.next();)if(a[n.nodeName.toLowerCase()]||to(n)&&n.length>0)return!0;return!1})(e.schema,l,c||o.getRoot())||(r=o.create("br"),a.insertNode(r),a.setStartAfter(r),a.setEndAfter(r),i=!0)),r=o.create("br"),zs(o,a,r),vE(e,r,i),e.undoManager.add()})(e,t)},fakeEventName:"insertLineBreak"},SE=(e,t)=>nE(e).filter((e=>t.length>0&&Sr(xr(e),t))).isSome(),_E=dl([{br:[]},{block:[]},{none:[]}]),OE=(e,t)=>(e=>SE(e,Ll(e)))(e),EE=e=>(t,r)=>(e=>nE(e).filter((e=>No(xr(e)))).isSome())(t)===e,TE=(e,t)=>(r,n)=>{var o=(e=>nE(e).fold(N(""),(e=>e.nodeName.toUpperCase())))(r)===e.toUpperCase();return o===t},AE=e=>{var t=rE(e.dom,e.selection.getStart());return k(t)},ME=e=>TE("pre",e),NE=e=>(t,r)=>Ml(t)===e,RE=(e,t)=>(e=>SE(e,Bl(e)))(e),DE=(e,t)=>t,BE=e=>{var t=Nl(e),r=rE(e.dom,e.selection.getStart());return S(r)&&e.schema.isValidChild(r.nodeName,t)},LE=e=>{var t=e.selection.getRng(),r=xr(t.startContainer),n=Fr(r,t.startOffset).map((e=>Gt(e)&&!on(e)));return t.collapsed&&n.getOr(!0)},HE=(e,t)=>(r,n)=>ee(e,((e,t)=>e&&t(r,n)),!0)?V.some(t):V.none(),PE=(e,t,r)=>{t.selection.isCollapsed()||(e=>{e.execCommand("delete")})(t),S(r)&&YO(t,e.fakeEventName).isDefaultPrevented()||(e.insert(t,r),S(r)&&KO(t,e.fakeEventName))},IE=(e,t)=>{var r=()=>PE(kE,e,t),n=()=>PE(pE,e,t),o=((e,t)=>IC([HE([OE],_E.none()),HE([ME(!0),AE],_E.none()),HE([TE("summary",!0)],_E.br()),HE([ME(!0),NE(!1),DE],_E.br()),HE([ME(!0),NE(!1)],_E.block()),HE([ME(!0),NE(!0),DE],_E.block()),HE([ME(!0),NE(!0)],_E.br()),HE([EE(!0),DE],_E.br()),HE([EE(!0)],_E.block()),HE([RE],_E.br()),HE([DE],_E.br()),HE([BE],_E.block()),HE([LE],_E.block())],[e,!(!t||!t.shiftKey)]).getOr(_E.none()))(e,t);switch(Dl(e)){case"linebreak":o.fold(r,r,T);break;case"block":o.fold(n,n,T);break;case"invert":o.fold(n,r,T);break;default:o.fold(r,n,T)}},FE=Ot(),zE=FE.os.isiOS()&&FE.browser.isSafari(),VE=(e,t)=>{var r;t.isDefaultPrevented()||(t.preventDefault(),(r=e.undoManager).typing&&(r.typing=!1,r.add()),e.undoManager.transact((()=>{IE(e,t)})))},ZE=Ot(),jE=e=>e.stopImmediatePropagation(),UE=e=>e.keyCode===ng.PAGE_UP||e.keyCode===ng.PAGE_DOWN,WE=(e,t,r)=>{r&&!e.get()?t.on("NodeChange",jE,!0):!r&&e.get()&&t.off("NodeChange",jE),e.set(r)},qE=(e,t)=>{var r=t.container(),n=t.offset();return to(r)?(r.insertData(n,e),V.some(Is(r,n+e.length))):Qc(t).map((r=>{var n=wr(e);return t.isAtEnd()?fn(r,n):vn(r,n),Is(n.dom,e.length)}))},$E=B(qE,yo),GE=B(qE," "),KE=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},YE=e=>{var t=Is.fromRangeStart(e.selection.getRng()),r=xr(e.getBody());if(e.selection.isCollapsed()){var n=B(iv,e),o=Is.fromRangeStart(e.selection.getRng());return GC(n,e.getBody(),o).bind((e=>t=>t.fold((t=>Cu(e.dom,Is.before(t))),(e=>ku(e)),(e=>Su(e)),(t=>xu(e.dom,Is.after(t)))))(r)).map((n=>()=>((e,t)=>r=>Ip(e,r)?$E(t):GE(t))(r,t)(n).each(KE(e))))}return V.none()},XE=e=>{var t,r;return zt(Dt.browser.isFirefox()&&e.selection.isEditable()&&(t=e.dom,r=e.selection.getRng().startContainer,t.isEditable(t.getParent(r,"summary"))),(()=>{var t=xr(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete"),((e,t)=>Ip(e,t)?$E(t):GE(t))(t,Is.fromRangeStart(e.selection.getRng())).each(KE(e))}))},JE=e=>cc(e)?[{keyCode:ng.TAB,action:ZS(p_,e,!0)},{keyCode:ng.TAB,shiftKey:!0,action:ZS(p_,e,!1)}]:[],QE=e=>{if(e.addShortcut("Meta+P","","mcePrint"),PO(e),Iw(e))return Pi(null);var t=Uk(e);return(e=>{e.on("keyup compositionstart",B(MS,e))})(e),((e,t)=>{e.on("keydown",(r=>{r.isDefaultPrevented()||((e,t,r)=>{var n=Dt.os.isMacOS()||Dt.os.isiOS();jS([{keyCode:ng.RIGHT,action:ZS(DS,e,!0)},{keyCode:ng.LEFT,action:ZS(DS,e,!1)},{keyCode:ng.UP,action:ZS(BS,e,!1)},{keyCode:ng.DOWN,action:ZS(BS,e,!0)},...n?[{keyCode:ng.UP,action:ZS(HS,e,!1),metaKey:!0,shiftKey:!0},{keyCode:ng.DOWN,action:ZS(HS,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:ng.RIGHT,action:ZS(c_,e,!0)},{keyCode:ng.LEFT,action:ZS(c_,e,!1)},{keyCode:ng.UP,action:ZS(u_,e,!1)},{keyCode:ng.DOWN,action:ZS(u_,e,!0)},{keyCode:ng.UP,action:ZS(u_,e,!1)},{keyCode:ng.UP,action:ZS(FS,e,!1)},{keyCode:ng.DOWN,action:ZS(FS,e,!0)},{keyCode:ng.RIGHT,action:ZS(WS,e,!0)},{keyCode:ng.LEFT,action:ZS(WS,e,!1)},{keyCode:ng.UP,action:ZS(qS,e,!1)},{keyCode:ng.DOWN,action:ZS(qS,e,!0)},{keyCode:ng.RIGHT,action:ZS(Zk,e,t,!0)},{keyCode:ng.LEFT,action:ZS(Zk,e,t,!1)},{keyCode:ng.RIGHT,ctrlKey:!n,altKey:n,action:ZS(Wk,e,t)},{keyCode:ng.LEFT,ctrlKey:!n,altKey:n,action:ZS(qk,e,t)},{keyCode:ng.UP,action:ZS(IS,e,!1)},{keyCode:ng.DOWN,action:ZS(IS,e,!0)}],r).each((e=>{r.preventDefault()}))})(e,t,r)}))})(e,t),((e,t)=>{var r=!1;e.on("keydown",(n=>{r=n.keyCode===ng.BACKSPACE,n.isDefaultPrevented()||((e,t,r)=>{var n=r.keyCode===ng.BACKSPACE?"deleteContentBackward":"deleteContentForward",o=e.selection.isCollapsed(),a=o?"character":"selection",i=e=>o?e?"word":"line":"selection";US([{keyCode:ng.BACKSPACE,action:ZS(fS,e)},{keyCode:ng.BACKSPACE,action:ZS(OC,e,!1)},{keyCode:ng.DELETE,action:ZS(OC,e,!0)},{keyCode:ng.BACKSPACE,action:ZS(bC,e,!1)},{keyCode:ng.DELETE,action:ZS(bC,e,!0)},{keyCode:ng.BACKSPACE,action:ZS(Yk,e,t,!1)},{keyCode:ng.DELETE,action:ZS(Yk,e,t,!0)},{keyCode:ng.BACKSPACE,action:ZS(Uv,e,!1)},{keyCode:ng.DELETE,action:ZS(Uv,e,!0)},{keyCode:ng.BACKSPACE,action:ZS($O,e,!1,a)},{keyCode:ng.DELETE,action:ZS($O,e,!0,a)},...QO?[{keyCode:ng.BACKSPACE,altKey:!0,action:ZS($O,e,!1,i(!0))},{keyCode:ng.DELETE,altKey:!0,action:ZS($O,e,!0,i(!0))},{keyCode:ng.BACKSPACE,metaKey:!0,action:ZS($O,e,!1,i(!1))}]:[{keyCode:ng.BACKSPACE,ctrlKey:!0,action:ZS($O,e,!1,i(!0))},{keyCode:ng.DELETE,ctrlKey:!0,action:ZS($O,e,!0,i(!0))}],{keyCode:ng.BACKSPACE,action:ZS(EC,e,!1)},{keyCode:ng.DELETE,action:ZS(EC,e,!0)},{keyCode:ng.BACKSPACE,action:ZS(dS,e,!1)},{keyCode:ng.DELETE,action:ZS(dS,e,!0)},{keyCode:ng.BACKSPACE,action:ZS(uC,e,!1)},{keyCode:ng.DELETE,action:ZS(uC,e,!0)},{keyCode:ng.BACKSPACE,action:ZS(lC,e,!1)},{keyCode:ng.DELETE,action:ZS(lC,e,!0)},{keyCode:ng.BACKSPACE,action:ZS(aS,e,!1)},{keyCode:ng.DELETE,action:ZS(aS,e,!0)}],r).filter((t=>e.selection.isEditable())).each((t=>{r.preventDefault(),YO(e,n).isDefaultPrevented()||(t(),KO(e,n))}))})(e,t,n)})),e.on("keyup",(t=>{t.isDefaultPrevented()||((e,t,r)=>{jS([{keyCode:ng.BACKSPACE,action:ZS(_C,e)},{keyCode:ng.DELETE,action:ZS(_C,e)},...QO?[{keyCode:ng.BACKSPACE,altKey:!0,action:ZS(sS,e)},{keyCode:ng.DELETE,altKey:!0,action:ZS(sS,e)},...r?[{keyCode:eE?224:91,action:ZS(sS,e)}]:[]]:[{keyCode:ng.BACKSPACE,ctrlKey:!0,action:ZS(sS,e)},{keyCode:ng.DELETE,ctrlKey:!0,action:ZS(sS,e)}]],t)})(e,t,r),r=!1}))})(e,t),(e=>{var t=V.none();e.on("keydown",(r=>{r.keyCode===ng.ENTER&&(zE&&(e=>{if(!e.collapsed)return!1;var t=e.startContainer;if(to(t)){var r=t.data.charAt(e.startOffset-1);return/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/.test(r)}return!1})(e.selection.getRng())?(e=>{t=V.some(e.selection.getBookmark()),e.undoManager.add()})(e):VE(e,r))})),e.on("keyup",(r=>{r.keyCode===ng.ENTER&&t.each((()=>((e,r)=>{e.undoManager.undo(),t.fold(T,(t=>e.selection.moveToBookmark(t))),VE(e,r),t=V.none()})(e,r)))}))})(e),(e=>{e.on("keydown",(t=>{t.isDefaultPrevented()||((e,t)=>{US([{keyCode:ng.SPACEBAR,action:ZS(YE,e)},{keyCode:ng.SPACEBAR,action:ZS(XE,e)}],t).each((r=>{t.preventDefault(),YO(e,"insertText",{data:" "}).isDefaultPrevented()||(r(),KO(e,"insertText",{data:" "}))}))})(e,t)}))})(e),(e=>{e.on("input",(t=>{t.isComposing||(e=>{var t=xr(e.getBody());e.selection.isCollapsed()&&qp(t,Is.fromRangeStart(e.selection.getRng())).each((t=>{e.selection.setRng(t.toRange())}))})(e)}))})(e),(e=>{e.on("keydown",(t=>{t.isDefaultPrevented()||((e,t)=>{jS([...JE(e)],t).each((e=>{t.preventDefault()}))})(e,t)}))})(e),((e,t)=>{e.on("keydown",(r=>{r.isDefaultPrevented()||((e,t,r)=>{var n=Dt.os.isMacOS()||Dt.os.isiOS();jS([{keyCode:ng.END,action:ZS(LS,e,!0)},{keyCode:ng.HOME,action:ZS(LS,e,!1)},...n?[]:[{keyCode:ng.HOME,action:ZS(HS,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:ng.END,action:ZS(HS,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:ng.END,action:ZS($S,e,!0)},{keyCode:ng.HOME,action:ZS($S,e,!1)},{keyCode:ng.END,action:ZS($k,e,!0,t)},{keyCode:ng.HOME,action:ZS($k,e,!1,t)}],r).each((e=>{r.preventDefault()}))})(e,t,r)}))})(e,t),((e,t)=>{if(!ZE.os.isMacOS()){var r=Pi(!1);e.on("keydown",(t=>{UE(t)&&WE(r,e,!0)})),e.on("keyup",(n=>{n.isDefaultPrevented()||((e,t,r)=>{jS([{keyCode:ng.PAGE_UP,action:ZS($k,e,!1,t)},{keyCode:ng.PAGE_DOWN,action:ZS($k,e,!0,t)}],r)})(e,t,n),UE(n)&&r.get()&&(WE(r,e,!1),e.nodeChanged())}))}})(e,t),t};class eT{constructor(e){var t;this.lastPath=[],this.editor=e;var r=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",(r=>{var n=e.selection.getRng(),o={startContainer:n.startContainer,startOffset:n.startOffset,endContainer:n.endContainer,endOffset:n.endOffset};"nodechange"!==r.type&&_g(o,t)||e.dispatch("SelectionChange"),t=o})),e.on("contextmenu",(()=>{e.dispatch("SelectionChange")})),e.on("SelectionChange",(()=>{var t=e.selection.getStart(!0);t&&om(e)&&!r.isSameElementPath(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})})),e.on("mouseup",(t=>{!t.isDefaultPrevented()&&om(e)&&("IMG"===e.selection.getNode().nodeName?ph.setEditorTimeout(e,(()=>{e.nodeChanged()})):e.nodeChanged())}))}nodeChanged(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this.editor.selection;if(this.editor.initialized&&r&&!_d(this.editor)&&!this.editor.mode.isReadOnly()){var n=this.editor.getBody();(e=r.getStart(!0)||n).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(e,n)||(e=n);var a=[];this.editor.dom.getParent(e,(e=>e===n||(a.push(e),!1))),this.editor.dispatch("NodeChange",o(o({},t),{},{element:e,parents:a}))}}isSameElementPath(e){var t,r=this.editor,n=se(r.dom.getParents(e,z,r.getBody()));if(n.length===this.lastPath.length){for(t=n.length;t>=0&&n[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=n,!0}return this.lastPath=n,!1}}var tT,rT=os("image"),nT=os("event"),oT=e=>t=>{t[nT]=e},aT=oT(0),iT=oT(2),sT=oT(1),lT=(0,e=>{var t=e;return V.from(t[nT]).exists((e=>0===e))}),dT=os("mode"),cT=e=>t=>{t[dT]=e},uT=(e,t)=>cT(t)(e),mT=cT(0),gT=cT(2),hT=cT(1),pT=e=>t=>{var r=t;return V.from(r[dT]).exists((t=>t===e))},vT=pT(0),fT=pT(1),bT=["none","copy","link","move"],yT=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],wT=()=>{var e=new window.DataTransfer,t="move",r="all",n={get dropEffect(){return t},set dropEffect(e){q(bT,e)&&(t=e)},get effectAllowed(){return r},set effectAllowed(e){lT(n)&&q(yT,e)&&(r=e)},get items(){return((e,t)=>o(o({},t),{},{get length(){return t.length},add:(r,n)=>{if(vT(e)){if(!v(r))return t.add(r);if(!C(n))return t.add(r,n)}return null},remove:r=>{vT(e)&&t.remove(r)},clear:()=>{vT(e)&&t.clear()}}))(n,e.items)},get files(){return fT(n)?Object.freeze({length:0,item:e=>null}):e.files},get types(){return e.types},setDragImage:(t,r,o)=>{var a;vT(n)&&(a={image:t,x:r,y:o},n[rT]=a,e.setDragImage(t,r,o))},getData:t=>fT(n)?"":e.getData(t),setData:(t,r)=>{vT(n)&&e.setData(t,r)},clearData:t=>{vT(n)&&e.clearData(t)}};return mT(n),n},xT=(e,t)=>e.setData("text/html",t),CT="x-tinymce/html",kT=N(CT),ST="\x3c!-- "+CT+" --\x3e",_T=e=>ST+e,OT=e=>-1!==e.indexOf(ST),ET="%MCEPASTEBIN%",TT=e=>e.dom.get("mcepastebin"),AT=e=>S(e)&&"mcepastebin"===e.id,MT=e=>e===ET,NT=(e,t)=>(Ht.each(t,(t=>{e=p(t,RegExp)?e.replace(t,""):e.replace(t[0],t[1])})),e),RT=e=>NT(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,t,r)=>t||r?yo:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),DT=(e,t)=>({content:e,cancelled:t}),BT=(e,t)=>(e.insertContent(t,{merge:Kd(e),paste:!0}),!0),LT=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),HT=(e,t,r)=>!(e.selection.isCollapsed()||!LT(t))&&((e,t,r)=>(e.undoManager.extra((()=>{r(e,t)}),(()=>{e.execCommand("mceInsertLink",!1,t)})),!0))(e,t,r),PT=(e,t,r)=>!!((e,t)=>LT(t)&&$(dc(e),(e=>$e(t.toLowerCase(),".".concat(e.toLowerCase())))))(e,t)&&((e,t,r)=>(e.undoManager.extra((()=>{r(e,t)}),(()=>{e.insertContent('<img src="'+t+'">')})),!0))(e,t,r),IT=(e=>{var t=0;return()=>"mceclip"+t++})(),FT=e=>{var t=wT();return xT(t,e),gT(t),t},zT=(e,t,r,n,o)=>{var a=((e,t,r)=>((e,t,r)=>{var n=((e,t,r)=>e.dispatch("PastePreProcess",{content:t,internal:r}))(e,t,r),o=((e,t)=>{var r=ow({sanitize:sc(e)},e.schema);r.addNodeFilter("meta",(e=>{Ht.each(e,(e=>{e.remove()}))}));var n=r.parse(t,{forced_root_block:!1,isRootContent:!0});return Yh({validate:!0},e.schema).serialize(n)})(e,n.content);return e.hasEventListeners("PastePostProcess")&&!n.isDefaultPrevented()?((e,t,r)=>{var n=e.dom.create("div",{style:"display:none"},t),o=((e,t,r)=>e.dispatch("PastePostProcess",{node:t,internal:r}))(e,n,r);return DT(o.node.innerHTML,o.isDefaultPrevented())})(e,o,r):DT(o,n.isDefaultPrevented())})(e,t,r))(e,t,r);if(!a.cancelled){var i=a.content,s=()=>((e,t,r)=>{r||!Yd(e)?BT(e,t):((e,t)=>{Ht.each([HT,PT,BT],(r=>!r(e,t,BT)))})(e,t)})(e,i,n);o?YO(e,"insertFromPaste",{dataTransfer:FT(i)}).isDefaultPrevented()||(s(),KO(e,"insertFromPaste")):s()}},VT=(e,t,r,n)=>{var o=r||OT(t);zT(e,(e=>e.replace(ST,""))(t),o,!1,n)},ZT=(e,t,r)=>{var n=e.dom.encode(t).replace(/\r\n/g,"\n"),o=((e,t,r)=>{var n=e.split(/\n\n/),o=((e,t)=>{var r="<"+e,n=Se(t,((e,t)=>t+'="'+ni.encodeAllRaw(e)+'"'));return n.length&&(r+=" "+n.join(" ")),r+">"})(t,r),a="</"+t+">",i=G(n,(e=>e.split(/\n/).join("<br />")));return 1===i.length?i[0]:G(i,(e=>o+e+a)).join("")})(va(n,Jd(e)),Nl(e),Rl(e));zT(e,o,!1,!0,r)},jT=e=>{var t={};if(e&&e.types)for(var r=0;r<e.types.length;r++){var n=e.types[r];try{t[n]=e.getData(n)}catch(e){t[n]=""}}return t},UT=(e,t)=>t in e&&e[t].length>0,WT=e=>UT(e,"text/html")||UT(e,"text/plain"),qT=(e,t,r)=>{var n,o="paste"===t.type?t.clipboardData:t.dataTransfer;if(jd(e)&&o){var a=((e,t)=>{var r=t.items?ae(he(t.items),(e=>"file"===e.kind?[e.getAsFile()]:[])):[],n=t.files?he(t.files):[];return J(r.length>0?r:n,(e=>{var t=dc(e);return e=>qe(e.type,"image/")&&$(t,(t=>{return r=t.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"},(Ht.hasOwn(n,r)?"image/"+n[r]:"image/"+r)===e.type;var r,n}))})(e))})(e,o);if(a.length>0)return t.preventDefault(),(n=a,Promise.all(G(n,(e=>Lb(e).then((t=>({file:e,uri:t}))))))).then((t=>{r&&e.selection.setRng(r),K(t,(t=>{((e,t)=>{Db(t.uri).each((r=>{var{data:n,type:o,base64Encoded:a}=r,i=a?n:btoa(n),s=t.file,l=e.editorUpload.blobCache,d=l.getByData(i,o),c=null!=d?d:((e,t,r,n)=>{var o=IT(),a=Fl(e)&&S(r.name),i=a?((e,t)=>{var r=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return S(r)?e.dom.encode(r[1]):void 0})(e,r.name):o,s=a?r.name:void 0,l=t.create(o,r,n,i,s);return t.add(l),l})(e,l,s,i);VT(e,'<img src="'.concat(c.blobUri(),'">'),!1,!0)}))})(e,t)}))})),!0}return!1},$T=(e,t,r,n,o)=>{var a=RT(r),i=UT(t,kT())||OT(r),s=!i&&(e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e))(a),l=LT(a);(MT(a)||!a.length||s&&!l)&&(n=!0),(n||l)&&(a=UT(t,"text/plain")&&s?t["text/plain"]:(e=>{var t=hi(),r=ow({},t),n="",o=t.getVoidElements(),a=Ht.makeMap("script noscript style textarea video audio iframe object"," "),i=t.getBlockElements(),s=e=>{var r=e.name,l=e;if("br"!==r){if("wbr"!==r)if(o[r]&&(n+=" "),a[r])n+=" ";else{if(3===e.type&&(n+=e.value),!(e.name in t.getVoidElements())){var d=e.firstChild;if(d)do{s(d)}while(d=d.next)}i[r]&&l.next&&(n+="\n","p"===r&&(n+="\n"))}}else n+="\n"};return e=NT(e,[/<!\[[^\]]+\]>/g]),s(r.parse(e)),n})(a)),MT(a)||(n?ZT(e,a,o):VT(e,a,i,o))},GT=(e,t,r)=>{((e,t,r)=>{var n;e.on("keydown",(e=>{(e=>ng.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode)(e)&&!e.isDefaultPrevented()&&(n=e.shiftKey&&86===e.keyCode)})),e.on("paste",(o=>{if(!o.isDefaultPrevented()&&!(e=>{var t,r;return Dt.os.isAndroid()&&0===(null===(r=null===(t=e.clipboardData)||void 0===t?void 0:t.items)||void 0===r?void 0:r.length)})(o)){var a="text"===r.get()||n;n=!1;var i=jT(o.clipboardData);!WT(i)&&qT(e,o,t.getLastRng()||e.selection.getRng())||(UT(i,"text/html")?(o.preventDefault(),$T(e,i,i["text/html"],a,!0)):UT(i,"text/plain")&&UT(i,"text/uri-list")?(o.preventDefault(),$T(e,i,i["text/plain"],a,!0)):(t.create(),ph.setEditorTimeout(e,(()=>{var r=t.getHtml();t.remove(),$T(e,i,r,a,!1)}),0)))}}))})(e,t,r),(e=>{var t=e=>qe(e,"webkit-fake-url"),r=e=>qe(e,"data:");e.parser.addNodeFilter("img",((n,o,a)=>{if(!jd(e)&&(e=>{var t;return!0===(null===(t=e.data)||void 0===t?void 0:t.paste)})(a))for(var i of n){var s=i.attr("src");v(s)&&!i.attr("data-mce-object")&&s!==Dt.transparentSrc&&(t(s)||!Qd(e)&&r(s))&&i.remove()}}))})(e)},KT=(e,t,r,n)=>{((e,t,r)=>{if(!e)return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",r),e.setData(kT(),t),!0}catch(e){return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),n()):r(t.html,n)},YT=e=>(t,r)=>{var{dom:n,selection:o}=e,a=n.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=n.create("div",{contenteditable:"true"},t);n.setStyles(a,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),a.appendChild(i),n.add(e.getBody(),a);var s=o.getRng();i.focus();var l=n.createRng();l.selectNodeContents(i),o.setRng(l),ph.setEditorTimeout(e,(()=>{o.setRng(s),n.remove(a),r()}),0)},XT=e=>({html:_T(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),JT=e=>!e.selection.isCollapsed()||(e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()))(e),QT=(e,t)=>{var r,n;return Lg.getCaretRangeFromPoint(null!==(r=t.clientX)&&void 0!==r?r:0,null!==(n=t.clientY)&&void 0!==n?n:0,e.getDoc())},eA=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},tA=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,rA=e=>Ht.trim(e).replace(tA,Ku).toLowerCase(),nA=(e,t,r)=>{var n=$d(e);if(r||"all"===n||!Gd(e))return t;var o=n?n.split(/[, ]/):[];if(o&&"none"!==n){var a=e.dom,i=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,((e,t,r,n)=>{for(var s=a.parseStyle(a.decode(r)),l={},d=0;d<o.length;d++){var c=s[o[d]],u=c,m=a.getStyle(i,o[d],!0);/color/.test(o[d])&&(u=rA(u),m=rA(m)),m!==u&&(l[o[d]]=c)}var g=a.serializeStyle(l,"span");return g?t+' style="'+g+'"'+n:t+n}))}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,((e,t,r,n)=>t+' style="'+r+'"'+n)),t},oA=e=>{var t=Pi(!1),r=Pi(Xd(e)?"text":"html"),n=(e=>{var t=Pi(null);return{create:()=>((e,t)=>{var{dom:r,selection:n}=e,o=e.getBody();t.set(n.getRng());var a=r.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},ET);Dt.browser.isFirefox()&&r.setStyle(a,"left","rtl"===r.getStyle(o,"direction",!0)?65535:-65535),r.bind(a,"beforedeactivate focusin focusout",(e=>{e.stopPropagation()})),a.focus(),n.select(a,!0)})(e,t),remove:()=>((e,t)=>{var r=e.dom;if(TT(e)){for(var n,o=t.get();n=TT(e);)r.remove(n),r.unbind(n);o&&e.selection.setRng(o)}t.set(null)})(e,t),getEl:()=>TT(e),getHtml:()=>(e=>{var t=e.dom,r=(e,r)=>{e.appendChild(r),t.remove(r,!0)},[n,...o]=J(e.getBody().childNodes,AT);K(o,(e=>{r(n,e)}));for(var a=t.select("div[id=mcepastebin]",n),i=a.length-1;i>=0;i--){var s=t.create("div");n.insertBefore(s,a[i]),r(s,a[i])}return n?n.innerHTML:""})(e),getLastRng:t.get}})(e);(e=>{(Dt.browser.isChromium()||Dt.browser.isSafari())&&((e,t)=>{e.on("PastePreProcess",(r=>{r.content=t(e,r.content,r.internal)}))})(e,nA)})(e),((e,t)=>{e.addCommand("mceTogglePlainTextPaste",(()=>{((e,t)=>{"text"===t.get()?(t.set("html"),rg(e,!1)):(t.set("text"),rg(e,!0)),e.focus()})(e,t)})),e.addCommand("mceInsertClipboardContent",((t,r)=>{r.html&&VT(e,r.html,r.internal,!1),r.text&&ZT(e,r.text,!1)}))})(e,r),(e=>{var t=t=>r=>{t(e,r)},r=Ud(e);_(r)&&e.on("PastePreProcess",t(r));var n=Wd(e);_(n)&&e.on("PastePostProcess",t(n))})(e),e.on("PreInit",(()=>{(e=>{e.on("cut",(e=>t=>{!t.isDefaultPrevented()&&JT(e)&&KT(t,XT(e),YT(e),(()=>{if(Dt.browser.isChromium()||Dt.browser.isFirefox()){var t=e.selection.getRng();ph.setEditorTimeout(e,(()=>{e.selection.setRng(t),e.execCommand("Delete")}),0)}else e.execCommand("Delete")}))})(e)),e.on("copy",(e=>t=>{!t.isDefaultPrevented()&&JT(e)&&KT(t,XT(e),YT(e),T)})(e))})(e),((e,t)=>{Zd(e)&&e.on("dragend dragover draggesture dragdrop drop drag",(e=>{e.preventDefault(),e.stopPropagation()})),jd(e)||e.on("drop",(e=>{var t=e.dataTransfer;t&&(e=>$(e.files,(e=>/^image\//.test(e.type))))(t)&&e.preventDefault()})),e.on("drop",(r=>{if(!r.isDefaultPrevented()){var n=QT(e,r);if(!k(n)){var o=jT(r.dataTransfer),a=UT(o,kT());if(WT(o)&&!(e=>{var t=e["text/plain"];return!!t&&0===t.indexOf("file://")})(o)||!qT(e,r,n)){var i=o[kT()],s=i||o["text/html"]||o["text/plain"],l=((e,t,r,n)=>{var o=e.getParent(r,(e=>Da(t,e)));if(!w(e.getParent(r,"summary")))return!0;if(o&&Ee(n,"text/html")){var a=(new DOMParser).parseFromString(n["text/html"],"text/html").body;return!w(a.querySelector(o.nodeName.toLowerCase()))}return!1})(e.dom,e.schema,n.startContainer,o),d=t.get();d&&!l||s&&(r.preventDefault(),ph.setEditorTimeout(e,(()=>{e.undoManager.transact((()=>{(i||d&&l)&&e.execCommand("Delete"),eA(e,n);var t=RT(s);o["text/html"]?VT(e,t,a,!0):ZT(e,t,!0)}))})))}}}})),e.on("dragstart",(e=>{t.set(!0)})),e.on("dragover dragend",(r=>{jd(e)&&!t.get()&&(r.preventDefault(),eA(e,QT(e,r))),"dragend"===r.type&&t.set(!1)})),(e=>{e.on("input",(t=>{if("deleteByDrag"===t.inputType){var r=J(e.dom.select("details"),(e=>w(e.querySelector("summary"))));K(r,(t=>{so(t.firstChild)&&t.firstChild.remove();var r=e.dom.create("summary");r.appendChild(Po().dom),t.prepend(r)}))}}))})(e)})(e,t),GT(e,n,r)}))},aA=so,iA=to,sA=e=>uo(e.dom),lA=e=>t=>Or(xr(e),t),dA=(e,t)=>en(xr(e),sA,lA(t)),cA=(e,t,r)=>{for(var n=new Zn(e,t),o=r?n.next.bind(n):n.prev.bind(n),a=e,i=r?e:o();i&&!aA(i);i=o())da(i)&&(a=i);return a},uA=e=>{var t=((e,t)=>{var r=Is.fromRangeStart(e).getNode(),n=((e,t)=>en(xr(e),(e=>(e=>co(e.dom))(e)||Oo(e)),lA(t)).getOr(xr(t)).dom)(r,t),o=cA(r,n,!1),a=cA(r,n,!0),i=document.createRange();return dA(o,n).fold((()=>{iA(o)?i.setStart(o,0):i.setStartBefore(o)}),(e=>i.setStartBefore(e.dom))),dA(a,n).fold((()=>{iA(a)?i.setEnd(a,a.data.length):i.setEndAfter(a)}),(e=>i.setEndAfter(e.dom))),i})(e.selection.getRng(),e.getBody());e.selection.setRng(af(t))};!function(e){e.Before="before",e.After="after"}(tT||(tT={}));var mA=(e,t)=>Math.abs(e.left-t),gA=(e,t)=>Math.abs(e.right-t),hA=(e,t)=>(e=>ee(e,((e,t)=>e.fold((()=>V.some(t)),(e=>{var r=Math.min(t.left,e.left),n=Math.min(t.top,e.top),o=Math.max(t.right,e.right),a=Math.max(t.bottom,e.bottom);return V.some({top:n,right:o,bottom:a,left:r,width:o-r,height:a-n})}))),V.none()))(J(e,(e=>{return(r=t)>=(n=e).top&&r<=n.bottom;var r,n}))).fold((()=>[[],e]),(t=>{var{pass:r,fail:n}=X(e,(e=>{return o=((e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)))(r=e,n=t)/Math.min(r.height,n.height),((e,t)=>e.top<t.bottom&&e.bottom>t.top)(r,n)&&o>.5;var r,n,o}));return[r,n]})),pA=(e,t,r)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),vA=(e,t,r)=>{var n=e=>da(e.node)?V.some(e):qn(e.node)?vA(he(e.node.childNodes),t,r):V.none(),o=(e,o)=>{var a=ce(e,((e,n)=>o(e,t,r)-o(n,t,r)));return((e,o)=>{if(e.length>=2){var a=n(e[0]).getOr(e[0]),i=n(e[1]).getOr(e[1]);if(Math.abs(o(a,t,r)-o(i,t,r))<2){if(to(a.node))return V.some(a);if(to(i.node))return V.some(i)}}return V.none()})(a,o).orThunk((()=>pe(a,n)))},[a,i]=hA(Sk(e),r),{pass:s,fail:l}=X(i,(e=>e.top<r));return o(a,pA).orThunk((()=>o(l,vs))).orThunk((()=>o(s,vs)))},fA=(e,t,r)=>((e,t,r)=>{var n=xr(e),o=Ar(n),a=Cr(o,t,r).filter((e=>Er(n,e))).getOr(n);return((e,t,r,n)=>{var o=(t,a)=>{var i=J(t.dom.childNodes,L((e=>qn(e)&&e.classList.contains("mce-drag-container"))));return a.fold((()=>vA(i,r,n)),(e=>{var t=J(i,(t=>t!==e.dom));return vA(t,r,n)})).orThunk((()=>(Or(t,e)?V.none():Rr(t)).bind((e=>o(e,V.some(t))))))};return o(t,V.none())})(n,a,t,r)})(e,t,r).filter((e=>Tc(e.node))).map((e=>((e,t)=>({node:e.node,position:mA(e,t)<gA(e,t)?tT.Before:tT.After}))(e,t))),bA=e=>{var t,r,n=e.getBoundingClientRect(),o=e.ownerDocument,a=o.documentElement,i=o.defaultView;return{top:n.top+(null!==(t=null==i?void 0:i.scrollY)&&void 0!==t?t:0)-a.clientTop,left:n.left+(null!==(r=null==i?void 0:i.scrollX)&&void 0!==r?r:0)-a.clientLeft}},yA=e=>({target:e,srcElement:e}),wA=(e,t,r,n)=>{var a=((e,t)=>{var r=(e=>{var t,r=wT(),n=(t=e,V.from(t[dT]));return gT(e),aT(r),r.dropEffect=e.dropEffect,r.effectAllowed=e.effectAllowed,(e=>{var t=e;return V.from(t[rT])})(e).each((e=>r.setDragImage(e.image,e.x,e.y))),K(e.types,(t=>{"Files"!==t&&r.setData(t,e.getData(t))})),K(e.files,(e=>r.items.add(e))),(e=>{var t=e;return V.from(t[nT])})(e).each((e=>{((e,t)=>{oT(t)(e)})(r,e)})),n.each((t=>{uT(e,t),uT(r,t)})),r})(e);return"dragstart"===t?(aT(r),mT(r)):"drop"===t?(iT(r),gT(r)):(sT(r),hT(r)),r})(r,e);return C(n)?((e,t,r)=>{var n=H("Function not supported on simulated event.");return o({bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:n,initEvent:n,preventDefault:T,stopImmediatePropagation:T,stopPropagation:T,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:n,initMouseEvent:n,getModifierState:n,dataTransfer:r},yA(t))})(e,t,a):((e,t,r,n)=>o(o({},t),{},{dataTransfer:n,type:e},yA(r)))(e,n,t,a)},xA=uo,CA=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{for(var r=0;r<t.length;r++)if(t[r](e))return!0;return!1}}(xA,co),kA=(e,t,r,n)=>{var o=e.dom,a=t.cloneNode(!0);o.setStyles(a,{width:r,height:n}),o.setAttrib(a,"data-mce-selected",null);var i=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:r,height:n}),o.setStyles(a,{margin:0,boxSizing:"border-box"}),i.appendChild(a),i},SA=(e,t)=>r=>()=>{var n="left"===e?r.scrollX:r.scrollY;r.scroll({[e]:n+t,behavior:"smooth"})},_A=SA("left",-32),OA=SA("left",32),EA=SA("top",-32),TA=SA("top",32),AA=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},MA=(e,t,r,n,o)=>{"dragstart"===t&&xT(n,e.dom.getOuterHTML(r));var a=wA(t,r,n,o);return e.dispatch(t,a)},NA=(e,t)=>{var r=Ui(((e,r)=>((e,t,r)=>{e._selectionOverrides.hideFakeCaret(),fA(e.getBody(),t,r).fold((()=>e.selection.placeCaretAt(t,r)),(n=>{var o=e._selectionOverrides.showCaret(1,n.node,n.position===tT.Before,!1);o?e.selection.setRng(o):e.selection.placeCaretAt(t,r)}))})(t,e,r)),0);t.on("remove",r.cancel);var n=e;return o=>e.on((e=>{var a,i,s=Math.max(Math.abs(o.screenX-e.screenX),Math.abs(o.screenY-e.screenY));if(!e.dragging&&s>10){var l=MA(t,"dragstart",e.element,e.dataTransfer,o);if(S(l.dataTransfer)&&(e.dataTransfer=l.dataTransfer),l.isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){var d=o.currentTarget===t.getDoc().documentElement,c=((e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}))(e,((e,t)=>{return r=(e=>e.inline?bA(e.getBody()):{left:0,top:0})(e),n=(e=>{var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}})(e),o=((e,t)=>{if(t.target.ownerDocument!==e.getDoc()){var r=bA(e.getContentAreaContainer()),n=(e=>{var t=e.getBody(),r=e.getDoc().documentElement,n={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||r.scrollLeft,top:t.scrollTop||r.scrollTop};return e.inline?n:o})(e);return{left:t.pageX-r.left+n.left,top:t.pageY-r.top+n.top}}return{left:t.pageX,top:t.pageY}})(e,t),{pageX:o.left-r.left+n.left,pageY:o.top-r.top+n.top};var r,n,o})(t,o));a=e.ghost,i=t.getBody(),a.parentNode!==i&&i.appendChild(a),((e,t,r,n,o,a,i,s,l,d,c,u)=>{var m=0,g=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+r>o&&(m=t.pageX+r-o),t.pageY+n>a&&(g=t.pageY+n-a),e.style.width=r-m+"px",e.style.height=n-g+"px";var h=l.clientHeight,p=l.clientWidth,v=i+l.getBoundingClientRect().top,f=s+l.getBoundingClientRect().left;c.on((e=>{e.intervalId.clear(),e.dragging&&u&&(i+8>=h?e.intervalId.set(TA(d)):i-8<=0?e.intervalId.set(EA(d)):s+8>=p?e.intervalId.set(OA(d)):s-8<=0?e.intervalId.set(_A(d)):v+16>=window.innerHeight?e.intervalId.set(TA(window)):v-16<=0?e.intervalId.set(EA(window)):f+16>=window.innerWidth?e.intervalId.set(OA(window)):f-16<=0&&e.intervalId.set(_A(window)))}))})(e.ghost,c,e.width,e.height,e.maxX,e.maxY,o.clientY,o.clientX,t.getContentAreaContainer(),t.getWin(),n,d),r.throttle(o.clientX,o.clientY)}}))},RA=(e,t,r)=>{e.on((e=>{e.intervalId.clear(),e.dragging&&r.fold((()=>MA(t,"dragend",e.element,e.dataTransfer)),(r=>MA(t,"dragend",e.element,e.dataTransfer,r)))})),DA(e)},DA=e=>{e.on((e=>{e.intervalId.clear(),AA(e.ghost)})),e.clear()},BA=e=>{var t=ji(),r=Bi.DOM,n=document,o=((e,t)=>r=>{if((e=>0===e.button)(r)){var n=re(t.dom.getParents(r.target),CA).getOr(null);if(S(n)&&((e,t,r)=>xA(r)&&r!==t&&e.isEditable(r.parentElement))(t.dom,t.getBody(),n)){var o=t.dom.getPos(n),a=t.getBody(),i=t.getDoc().documentElement;e.set({element:n,dataTransfer:wT(),dragging:!1,screenX:r.screenX,screenY:r.screenY,maxX:(t.inline?a.scrollWidth:i.offsetWidth)-2,maxY:(t.inline?a.scrollHeight:i.offsetHeight)-2,relX:r.pageX-o.x,relY:r.pageY-o.y,width:n.offsetWidth,height:n.offsetHeight,ghost:kA(t,n,n.offsetWidth,n.offsetHeight),intervalId:(s=Pi(V.none()),l=()=>s.get().each((e=>clearInterval(e))),{clear:()=>{l(),s.set(V.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:e=>{l(),s.set(V.some(setInterval(e,100)))}})})}}var s,l})(t,e),a=NA(t,e),i=((e,t)=>r=>{e.on((e=>{var n;if(e.intervalId.clear(),e.dragging){if(((e,t,r)=>!k(t)&&t!==r&&!e.dom.isChildOf(t,r)&&e.dom.isEditable(t))(t,(e=>{var t=e.getSel();if(S(t)){var r=t.getRangeAt(0).startContainer;return to(r)?r.parentNode:r}return null})(t.selection),e.element)){var o=null!==(n=t.getDoc().elementFromPoint(r.clientX,r.clientY))&&void 0!==n?n:t.getBody();MA(t,"drop",o,e.dataTransfer,r).isDefaultPrevented()||t.undoManager.transact((()=>{((e,t)=>{var r=e.getParent(t.parentNode,e.isBlock);AA(t),r&&r!==e.getRoot()&&e.isEmpty(r)&&Io(xr(r))})(t.dom,e.element),(e=>{var t=e.getData("text/html");return""===t?V.none():V.some(t)})(e.dataTransfer).each((e=>t.insertContent(e))),t._selectionOverrides.hideFakeCaret()}))}MA(t,"dragend",t.getBody(),e.dataTransfer,r)}})),DA(e)})(t,e),s=((e,t)=>r=>RA(e,t,V.some(r)))(t,e);e.on("mousedown",o),e.on("mousemove",a),e.on("mouseup",i),r.bind(n,"mousemove",a),r.bind(n,"mouseup",s),e.on("remove",(()=>{r.unbind(n,"mousemove",a),r.unbind(n,"mouseup",s)})),e.on("keydown",(r=>{r.keyCode===ng.ESC&&RA(t,e,V.none())}))},LA=uo,HA=(e,t)=>Wv(e.getBody(),t),PA=e=>{var t,r=e.selection,n=e.dom,o=e.getBody(),a=_c(e,o,n.isBlock,(()=>Sh(e))),i="sel-"+n.uniqueId(),s="data-mce-selected",l=e=>e!==o&&(LA(e)||ho(e))&&n.isChildOf(e,o)&&n.isEditable(e.parentNode),d=function(t,n,o){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return e.dispatch("ShowCaret",{target:n,direction:t,before:o}).isDefaultPrevented()?null:(i&&r.scrollIntoView(n,-1===t),a.show(o,n))},c=e=>$o(e)||Xo(e)||Jo(e),u=e=>c(e.startContainer)||c(e.endContainer),m=(a,c)=>{if(!a)return null;if(a.collapsed){if(!u(a)){var m=c?1:-1,g=Jc(m,o,a),p=g.getNode(!c);if(S(p)){if(Tc(p))return d(m,p,!!c&&!g.isAtEnd(),!1);if(qo(p)&&uo(p.nextSibling)){var v=n.createRng();return v.setStart(p,0),v.setEnd(p,0),v}}var f=g.getNode(c);if(S(f)){if(Tc(f))return d(m,f,!c&&!g.isAtEnd(),!1);if(qo(f)&&uo(f.previousSibling)){var b=n.createRng();return b.setStart(f,1),b.setEnd(f,1),b}}}return null}var y=a.startContainer,w=a.startOffset,x=a.endOffset;if(to(y)&&0===w&&LA(y.parentNode)&&(y=y.parentNode,w=n.nodeIndex(y),y=y.parentNode),!qn(y))return null;if(x===w+1&&y===a.endContainer){var C=y.childNodes[w];if(l(C))return(o=>{var a=o.cloneNode(!0),l=e.dispatch("ObjectSelected",{target:o,targetClone:a});if(l.isDefaultPrevented())return null;var d=((t,o)=>{var a=xr(e.getBody()),s=e.getDoc(),l=rn(a,"#"+i).getOrThunk((()=>{var e=br('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',s);return tr(e,"id",i),yn(a,e),e})),d=n.createRng();Cn(l),xn(l,[wr(yo,s),xr(o),wr(yo,s)]),d.setStart(l.dom.firstChild,1),d.setEnd(l.dom.lastChild,0),cn(l,{top:n.getPos(t,e.getBody()).y+"px"}),nh(l);var c=r.getSel();return c&&(c.removeAllRanges(),c.addRange(d)),d})(o,l.targetClone),c=xr(o);return K(zn(xr(e.getBody()),"*[".concat(s,"]")),(e=>{Or(c,e)||ir(e,s)})),n.getAttrib(o,s)||o.setAttribute(s,"1"),t=o,h(),d})(C)}return null},g=()=>{t&&t.removeAttribute(s),rn(xr(e.getBody()),"#"+i).each(kn),t=null},h=()=>{a.hide()};return Iw(e)||(e.on("click",(t=>{n.isEditable(t.target)||(t.preventDefault(),e.focus())})),e.on("blur NewBlock",g),e.on("ResizeWindow FullscreenStateChanged",a.reposition),e.on("tap",(t=>{var r=t.target,n=HA(e,r);LA(n)?(t.preventDefault(),gC(e,n).each(m)):l(r)&&gC(e,r).each(m)}),!0),e.on("mousedown",(t=>{var a=t.target;if((a===o||"HTML"===a.nodeName||n.isChildOf(a,o))&&((e,t,r)=>{var n=xr(e.getBody()),o=e.inline?n:xr(Ar(n).dom.documentElement),a=((e,t,r,n)=>{var o=(e=>e.dom.getBoundingClientRect())(t);return{x:r-(e?o.left+t.dom.clientLeft+fx(t):0),y:n-(e?o.top+t.dom.clientTop+vx(t):0)}})(e.inline,o,t,r);return((e,t,r)=>{var n=hx(e),o=px(e);return t>=0&&r>=0&&t<=n&&r<=o})(o,a.x,a.y)})(e,t.clientX,t.clientY)){g(),h();var i=HA(e,a);LA(i)?(t.preventDefault(),gC(e,i).each(m)):fA(o,t.clientX,t.clientY).each((n=>{var o;t.preventDefault(),(o=d(1,n.node,n.position===tT.Before,!1))&&r.setRng(o),qn(i)?i.focus():e.getBody().focus()}))}})),e.on("keypress",(e=>{ng.modifierPressed(e)||LA(r.getNode())&&e.preventDefault()})),e.on("GetSelectionRange",(e=>{var r=e.range;if(t){if(!t.parentNode)return void(t=null);(r=r.cloneRange()).selectNode(t),e.range=r}})),e.on("SetSelectionRange",(t=>{t.range=(t=>{var r=e.schema.getVoidElements(),o=n.createRng(),a=t.startContainer,i=t.startOffset,s=t.endContainer,l=t.endOffset;return Ee(r,a.nodeName.toLowerCase())?0===i?o.setStartBefore(a):o.setStartAfter(a):o.setStart(a,i),Ee(r,s.nodeName.toLowerCase())?0===l?o.setEndBefore(s):o.setEndAfter(s):o.setEnd(s,l),o})(t.range);var r=m(t.range,t.forward);r&&(t.range=r)})),e.on("AfterSetSelectionRange",(e=>{var t,r=e.range,o=r.startContainer.parentElement;u(r)||qn(t=o)&&"mcepastebin"===t.id||h(),(e=>S(e)&&n.hasClass(e,"mce-offscreen-selection"))(o)||g()})),(e=>{BA(e),Nd(e)&&(e=>{var t=t=>{if(!t.isDefaultPrevented()){var r=t.dataTransfer;r&&(q(r.types,"Files")||r.files.length>0)&&(t.preventDefault(),"drop"===t.type&&kx(e,"Dropped file type is not supported"))}},r=r=>{bh(e,r.target)&&t(r)},n=()=>{var n=Bi.DOM,o=e.dom,a=document,i=e.inline?e.getBody():e.getDoc(),s=["drop","dragover"];K(s,(e=>{n.bind(a,e,r),o.bind(i,e,t)})),e.on("remove",(()=>{K(s,(e=>{n.unbind(a,e,r),o.unbind(i,e,t)}))}))};e.on("init",(()=>{ph.setEditorTimeout(e,n,0)}))})(e)})(e),(e=>{var t=Ui((()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){var t=e.selection.getRng();if(t.collapsed){var r=hC(e,t,!1);e.selection.setRng(r)}}}),0);e.on("focus",(()=>{t.throttle()})),e.on("blur",(()=>{t.cancel()}))})(e),(e=>{e.on("init",(()=>{e.on("focusin",(t=>{var r=t.target;if(ho(r)){var n=Wv(e.getBody(),r),o=uo(n)?n:r;e.selection.getNode()!==o&&gC(e,o).each((t=>e.selection.setRng(t)))}}))}))})(e)),{showCaret:d,showBlockCaretContainer:e=>{e.hasAttribute("data-mce-caret")&&(Qo(e),r.scrollIntoView(e))},hideFakeCaret:h,destroy:()=>{a.destroy(),t=null}}},IA=(e,t)=>{for(var r=t,n=e.previousSibling;to(n);n=n.previousSibling)r+=n.data.length;return r},FA=(e,t,r,n,o)=>{if(to(r)&&(n<0||n>r.data.length))return[];for(var a=o&&to(r)?[IA(r,n)]:[n],i=r;i!==t&&i.parentNode;)a.push(e.nodeIndex(i,o)),i=i.parentNode;return i===t?a.reverse():[]},zA=function(e,t,r,n,o,a){var i=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return{start:FA(e,t,r,n,i),end:FA(e,t,o,a,i)}},VA=(e,t)=>{var r=t.slice(),n=r.pop();return O(n)?ee(r,((e,t)=>e.bind((e=>V.from(e.childNodes[t])))),V.some(e)).bind((e=>to(e)&&(n<0||n>e.data.length)?V.none():V.some({node:e,offset:n}))):V.none()},ZA=(e,t)=>VA(e,t.start).bind((r=>{var{node:n,offset:o}=r;return VA(e,t.end).map((e=>{var{node:t,offset:r}=e,a=document.createRange();return a.setStart(n,o),a.setEnd(t,r),a}))})),jA=(e,t,r)=>{if(t&&e.isEmpty(t)&&!r(t)){var n=t.parentNode;e.remove(t,to(t.firstChild)&&ga(t.firstChild.data)),jA(e,n,r)}},UA=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=t.startContainer.parentNode,a=t.endContainer.parentNode;t.deleteContents(),n&&!r(t.startContainer)&&(to(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),to(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),jA(e,o,r),o!==a&&jA(e,a,r))},WA=(e,t)=>V.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),qA=(e,t,r)=>{var n=e.dynamicPatternsLookup({text:r,block:t});return o(o({},e),{},{blockPatterns:hl(n).concat(e.blockPatterns),inlinePatterns:pl(n).concat(e.inlinePatterns)})},$A=(e,t,r,n)=>{var o=e.createRng();return o.setStart(t,0),o.setEnd(r,n),o.toString()},GA=(e,t,r)=>{((e,t,r)=>{if(to(e)&&0>=e.length)return V.some(v_(e,0));var n=ds(f_);return V.from(n.forwards(e,0,b_(e),r)).map((e=>v_(e.container,0)))})(t,0,t).each((n=>{var o=n.container;x_(o,r.start.length,t).each((r=>{var n=e.createRng();n.setStart(o,0),n.setEnd(r.container,r.offset),UA(e,n,(e=>e===t))}));var a=xr(o),i=Co(a);/^\s[^\s]/.test(i)&&((e,t)=>{xo.set(e,t)})(a,i.slice(1))}))},KA=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),YA=(e,t)=>{var r=e.createRng();return r.setStartAfter(t.start),r.setEndBefore(t.end),r},XA=(e,t,r)=>{var n=ZA(e.getRoot(),r).getOrDie("Unable to resolve path range"),o=n.startContainer,a=n.endContainer,i=0===n.endOffset?a:a.splitText(n.endOffset),s=0===n.startOffset?o:o.splitText(n.startOffset),l=s.parentNode;return{prefix:t,end:i.parentNode.insertBefore(KA(e,t+"-end"),i),start:l.insertBefore(KA(e,t+"-start"),s)}},JA=(e,t,r)=>{jA(e,e.get(t.prefix+"-end"),r),jA(e,e.get(t.prefix+"-start"),r)},QA=e=>0===e.start.length,eM=(e,t,r,n)=>{var o,a=t.start;return C_(e,n.container,n.offset,(o=a,(e,t)=>{var r=e.data.substring(0,t),n=r.lastIndexOf(o.charAt(o.length-1)),a=r.lastIndexOf(o);return-1!==a?a+o.length:-1!==n?n+1:-1}),r).bind((n=>{var o,i,s=null!==(i=null===(o=r.textContent)||void 0===o?void 0:o.indexOf(a))&&void 0!==i?i:-1;if(-1!==s&&n.offset>=s+a.length){var l=e.createRng();return l.setStart(n.container,n.offset-a.length),l.setEnd(n.container,n.offset),V.some(l)}var d=n.offset-a.length;return w_(n.container,d,r).map((t=>{var r=e.createRng();return r.setStart(t.container,t.offset),r.setEnd(n.container,n.offset),r})).filter((e=>e.toString()===a)).orThunk((()=>eM(e,t,r,v_(n.container,0))))}))},tM=(e,t,r,n)=>{var o=e.dom,a=o.getRoot(),i=r.pattern,s=r.position.container,l=r.position.offset;return w_(s,l-r.pattern.end.length,t).bind((d=>{var c=zA(o,a,d.container,d.offset,s,l,n);if(QA(i))return V.some({matches:[{pattern:i,startRng:c,endRng:c}],position:d});var u=rM(e,r.remainingPatterns,d.container,d.offset,t,n),m=u.getOr({matches:[],position:d}),g=m.position,h=function(e,t,r,n,o){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(0===t.start.length&&!a){var i=e.createRng();return i.setStart(r,n),i.setEnd(r,n),V.some(i)}return y_(r,n,o).bind((r=>eM(e,t,o,r).bind((e=>{var t;if(a){if(e.endContainer===r.container&&e.endOffset===r.offset)return V.none();if(0===r.offset&&(null===(t=e.endContainer.textContent)||void 0===t?void 0:t.length)===e.endOffset)return V.none()}return V.some(e)}))))}(o,i,g.container,g.offset,t,u.isNone());return h.map((e=>{var t=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return zA(e,t,r.startContainer,r.startOffset,r.endContainer,r.endOffset,n)}(o,a,e,n);return{matches:m.matches.concat([{pattern:i,startRng:t,endRng:c}]),position:v_(e.startContainer,e.startOffset)}}))}))},rM=(e,t,r,n,o,a)=>{var i=e.dom;return y_(r,n,i.getRoot()).bind((s=>{for(var l=$A(i,o,r,n),d=0;d<t.length;d++){var c=t[d];if($e(l,c.end)){var u=t.slice();u.splice(d,1);var m=tM(e,o,{pattern:c,remainingPatterns:u,position:s},a);if(m.isNone()&&n>0)return rM(e,t,r,n-1,o,a);if(m.isSome())return m}}return V.none()}))},nM=(e,t,r)=>{e.selection.setRng(r),"inline-format"===t.type?K(t.format,(t=>{e.formatter.apply(t)})):e.execCommand(t.cmd,!1,t.value)},oM=(e,t,r,n,o,a)=>{var i,s,l,d;return s=rM(e,o.inlinePatterns,r,n,t,a).fold((()=>[]),(e=>e.matches)),l=rM(e,(i=o.inlinePatterns,ce(i,((e,t)=>t.end.length-e.end.length))),r,n,t,a).fold((()=>[]),(e=>e.matches)),d=ie(s,(e=>$(l,(t=>e.pattern.start===t.pattern.start&&e.pattern.end===t.pattern.end)))),s.length===l.length?d?s:l:s.length>l.length?s:l},aM=(e,t)=>{if(0!==t.length){var r=e.dom,n=e.selection.getBookmark(),a=((e,t)=>{var r=os("mce_textpattern"),n=Q(t,((t,n)=>{var a=XA(e,r+"_end".concat(t.length),n.endRng);return t.concat([o(o({},n),{},{endMarker:a})])}),[]);return Q(n,((t,a)=>{var i=n.length-t.length-1,s=QA(a.pattern)?a.endMarker:XA(e,r+"_start".concat(i),a.startRng);return t.concat([o(o({},a),{},{startMarker:s})])}),[])})(r,t);K(a,(t=>{var n=r.getParent(t.startMarker.start,r.isBlock),o=e=>e===n;QA(t.pattern)?((e,t,r,n)=>{var o=YA(e.dom,r);UA(e.dom,o,n),nM(e,t,o)})(e,t.pattern,t.endMarker,o):((e,t,r,n,o)=>{var a=e.dom,i=YA(a,n),s=YA(a,r);UA(a,s,o),UA(a,i,o);var l={prefix:r.prefix,start:r.end,end:n.start},d=YA(a,l);nM(e,t,d)})(e,t.pattern,t.startMarker,t.endMarker,o),JA(r,t.endMarker,o),JA(r,t.startMarker,o)})),e.selection.moveToBookmark(n)}},iM=(e,t)=>{var r=e.selection.getRng();return WA(e,r).map((n=>{var o,a=Math.max(0,r.startOffset),i=qA(t,n,null!==(o=n.textContent)&&void 0!==o?o:""),s=oM(e,n,r.startContainer,a,i,!0),l=((e,t,r,n)=>{var o,a=e.dom,i=Nl(e);if(!a.is(t,i))return[];var s=null!==(o=t.textContent)&&void 0!==o?o:"";return((e,t)=>{var r=(e=>ce(e,((e,t)=>t.start.length-e.start.length)))(e),n=t.replace(yo," ");return re(r,(e=>0===t.indexOf(e.start)||0===n.indexOf(e.start)))})(r.blockPatterns,s).map((e=>Ht.trim(s).length===e.start.length?[]:[{pattern:e,range:zA(a,a.getRoot(),t,0,t,0,true)}])).getOr([])})(e,n,i);return(l.length>0||s.length>0)&&(e.undoManager.add(),e.undoManager.extra((()=>{e.execCommand("mceInsertNewLine")}),(()=>{e.insertContent(bo),aM(e,s),((e,t)=>{if(0!==t.length){var r=e.selection.getBookmark();K(t,(t=>((e,t)=>{var r=e.dom,n=t.pattern,o=ZA(r.getRoot(),t.range).getOrDie("Unable to resolve path range");return WA(e,o).each((t=>{"block-format"===n.type?((e,t)=>{var r=t.get(e);return y(r)&&me(r).exists((e=>Ee(e,"block")))})(n.format,e.formatter)&&e.undoManager.transact((()=>{GA(e.dom,t,n),e.formatter.apply(n.format)})):"block-command"===n.type&&e.undoManager.transact((()=>{GA(e.dom,t,n),e.execCommand(n.cmd,!1,n.value)}))})),!0})(e,t))),e.selection.moveToBookmark(r)}})(e,l);var t=e.selection.getRng(),r=y_(t.startContainer,t.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),r.each((t=>{var r=t.container;r.data.charAt(t.offset-1)===bo&&(r.deleteData(t.offset-1,1),jA(e.dom,r.parentNode,(t=>t===e.dom.getRoot())))}))})),!0)})).getOr(!1)},sM=(e,t,r)=>{for(var n=0;n<e.length;n++)if(r(e[n],t))return!0;return!1},lM=Bi.DOM,dM=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,cM=e=>ke(e,(e=>!1===C(e))),uM=e=>{var t=e.options.get,r=e.editorUpload.blobCache;return cM({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:dM(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:r,document:e.getDoc()})},mM=e=>{var t=e.options.get;return cM({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},gM=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,hM=e=>{var t=gM(e),r=td(e),n=e.contentCSS,o=()=>{t.unloadAll(n),e.inline||e.ui.styleSheetLoader.unloadAll(r)},a=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){var i="";Ht.each(e.contentStyles,(e=>{i+=e+"\r\n"})),e.dom.addStyle(i)}var s=Promise.all(((e,t,r)=>{var n=[gM(e).loadAll(t)];return e.inline?n:n.concat([e.ui.styleSheetLoader.loadAll(r)])})(e,n,r)).then(a).catch(a),l=ed(e);return l&&((e,t)=>{var r=xr(e.getBody()),n=$r(qr(r)),o=yr("style");tr(o,"type","text/css"),yn(o,wr(t)),yn(n,o),e.on("remove",(()=>{kn(o)}))})(e,l),s},pM=e=>{!0!==e.removed&&((e=>{Iw(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})})(e),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,(e=>{e.dispatch("Init")})(e),e.focus(!0),(e=>{var t=e.dom.getRoot();e.inline||om(e)&&e.selection.getStart(!0)!==t||ku(t).each((t=>{var r=t.getNode(),n=Jn(r)?ku(r).getOr(t):t;e.selection.setRng(n.toRange())}))})(e),e.nodeChanged({initial:!0});var t=Pd(e);_(t)&&t.call(e,e),(e=>{var t=Fd(e);t&&ph.setEditorTimeout(e,(()=>{var r;(r=!0===t?e:e.editorManager.get(t))&&!r.destroyed&&(r.focus(),r.selection.scrollIntoView())}),100)})(e)})(e))},vM=e=>{var t=e.getElement(),r=e.getDoc();e.inline&&(lM.addClass(t,"mce-content-body"),e.contentDocument=r=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);var n=e.getBody();n.disabled=!0,e.readonly=Od(e),e._editableRoot=Ed(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&"static"===lM.getStyle(n,"position",!0)&&(n.style.position="relative"),n.contentEditable="true"),n.disabled=!1,e.editorUpload=Bx(e),e.schema=hi(mM(e)),e.dom=Bi(r,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:$l(e),referrerPolicy:Gl(e),onSetAttrib:t=>{e.dispatch("SetAttrib",t)}}),e.parser=(e=>{var t=ow(uM(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",((t,r)=>{for(var n=e.dom,o="data-mce-"+r,a=t.length;a--;){var i=t[a],s=i.attr(r);if(s&&!i.attr(o)){if(0===s.indexOf("data:")||0===s.indexOf("blob:"))continue;"style"===r?((s=n.serializeStyle(n.parseStyle(s),i.name)).length||(s=null),i.attr(o,s),i.attr(r,s)):"tabindex"===r?(i.attr(o,s),i.attr(r,null)):i.attr(o,e.convertURL(s,r,i.name))}}})),t.addNodeFilter("script",(e=>{for(var t=e.length;t--;){var r=e[t],n=r.attr("type")||"no/type";0!==n.indexOf("mce-")&&r.attr("type","mce-"+n)}})),ac(e)&&t.addNodeFilter("#cdata",(t=>{for(var r,n=t.length;n--;){var o=t[n];o.type=8,o.name="#comment",o.value="[CDATA["+e.dom.encode(null!==(r=o.value)&&void 0!==r?r:"")+"]]"}})),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",(t=>{for(var r=t.length,n=e.schema.getNonEmptyElements();r--;){var o=t[r];o.isEmpty(n)&&0===o.getAll("br").length&&o.append(new zh("br",1))}})),t})(e),e.serializer=Kw((e=>{var t=e.options.get;return o(o(o({},uM(e)),mM(e)),cM({remove_trailing_brs:t("remove_trailing_brs"),pad_empty_with_br:t("pad_empty_with_br"),url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")}))})(e),e),e.selection=qw(e.dom,e.getWin(),e.serializer,e),e.annotator=Gm(e),e.formatter=Wx(e),e.undoManager=$x(e),e._nodeChangeDispatcher=new eT(e),e._selectionOverrides=PA(e),(e=>{var t=ji(),r=Pi(!1),n=Wi((t=>{e.dispatch("longpress",o(o({},t),{},{type:"longpress"})),r.set(!0)}),400);e.on("touchstart",(e=>{wS(e).each((o=>{n.cancel();var a={x:o.clientX,y:o.clientY,target:e.target};n.throttle(e),r.set(!1),t.set(a)}))}),!0),e.on("touchmove",(o=>{n.cancel(),wS(o).each((n=>{t.on((o=>{((e,t)=>{var r=Math.abs(e.clientX-t.x),n=Math.abs(e.clientY-t.y);return r>5||n>5})(n,o)&&(t.clear(),r.set(!1),e.dispatch("longpresscancel"))}))}))}),!0),e.on("touchend touchcancel",(a=>{n.cancel(),"touchcancel"!==a.type&&t.get().filter((e=>e.target.isEqualNode(a.target))).each((()=>{r.get()?a.preventDefault():e.dispatch("tap",o(o({},a),{},{type:"tap"}))}))}),!0)})(e),(e=>{(e=>{e.on("click",(t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()}))})(e),(e=>{e.parser.addNodeFilter("details",(t=>{var r=uc(e);K(t,(e=>{"expanded"===r?e.attr("open","open"):"collapsed"===r&&e.attr("open",null)}))})),e.serializer.addNodeFilter("details",(t=>{var r=mc(e);K(t,(e=>{"expanded"===r?e.attr("open","open"):"collapsed"===r&&e.attr("open",null)}))}))})(e)})(e),(e=>{var t="contenteditable",r=" "+Ht.trim(nc(e))+" ",n=" "+Ht.trim(rc(e))+" ",o=ES(r),a=ES(n),i=oc(e);i.length>0&&e.on("BeforeSetContent",(t=>{((e,t,r)=>{var n=t.length,o=r.content;if("raw"!==r.format){for(;n--;)o=o.replace(t[n],TS(e,o,rc(e)));r.content=o}})(e,i,t)})),e.parser.addAttributeFilter("class",(e=>{for(var r=e.length;r--;){var n=e[r];o(n)?n.attr(t,"true"):a(n)&&n.attr(t,"false")}})),e.serializer.addAttributeFilter(t,(e=>{for(var r=e.length;r--;){var n=e[r];(o(n)||a(n))&&(i.length>0&&n.attr("data-mce-content")?(n.name="#text",n.type=3,n.raw=!0,n.value=n.attr("data-mce-content")):n.attr(t,null))}}))})(e),Iw(e)||((e=>{e.on("mousedown",(t=>{t.detail>=3&&(t.preventDefault(),uA(e))}))})(e),(e=>{(e=>{var t=[",",".",";",":","!","?"],r=[32],n=()=>{return t=ec(e),r=tc(e),{inlinePatterns:pl(t),blockPatterns:hl(t),dynamicPatternsLookup:r};var t,r},o=()=>(e=>e.options.isSet("text_patterns_lookup"))(e);e.on("keydown",(t=>{if(13===t.keyCode&&!ng.modifierPressed(t)&&e.selection.isCollapsed()){var r=n();(r.inlinePatterns.length>0||r.blockPatterns.length>0||o())&&iM(e,r)&&t.preventDefault()}}),!0);var a=()=>{if(e.selection.isCollapsed()){var t=n();(t.inlinePatterns.length>0||o())&&((e,t)=>{var r=e.selection.getRng();WA(e,r).map((n=>{var o=Math.max(0,r.startOffset-1),a=$A(e.dom,n,r.startContainer,o),i=qA(t,n,a),s=oM(e,n,r.startContainer,o,i,!1);s.length>0&&e.undoManager.transact((()=>{aM(e,s)}))}))})(e,t)}};e.on("keyup",(e=>{sM(r,e,((e,t)=>e===t.keyCode&&!ng.modifierPressed(t)))&&a()})),e.on("keypress",(r=>{sM(t,r,((e,t)=>e.charCodeAt(0)===t.charCode))&&ph.setEditorTimeout(e,a)}))})(e)})(e));var a=QE(e);yS(e,a),(e=>{e.on("NodeChange",B(_S,e))})(e),(e=>{var t,r=e.dom,n=Nl(e),o=null!==(t=id(e))&&void 0!==t?t:"",a=(t,i)=>{if(!(e=>{if(Yx(e)){var t=e.keyCode;return!Xx(e)&&(ng.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||q(Gx,t))}return!1})(t)){var s=e.getBody(),l=!(e=>Yx(e)&&!(Xx(e)||"keyup"===e.type&&229===e.keyCode))(t)&&((e,t,r)=>{if(xa(xr(t),!1)){var n=t.firstElementChild;return!n||!e.getStyle(t.firstElementChild,"padding-left")&&!e.getStyle(t.firstElementChild,"padding-right")&&r===n.nodeName.toLowerCase()}return!1})(r,s,n);(""!==r.getAttrib(s,Kx)!==l||i)&&(r.setAttrib(s,Kx,l?o:null),r.setAttrib(s,"aria-placeholder",l?o:null),((e,t)=>{e.dispatch("PlaceholderToggle",{state:t})})(e,l),e.on(l?"keydown":"keyup",a),e.off(l?"keyup":"keydown",a))}};Je(o)&&e.on("init",(t=>{a(t,!0),e.on("change SetContent ExecCommand",a),e.on("paste",(t=>ph.setEditorTimeout(e,(()=>a(t)))))}))})(e),oA(e);var i=(e=>{var t=e;return(e=>Oe(e.plugins,"rtc").bind((e=>V.from(e.setup))))(e).fold((()=>(t.rtcInstance=Pw(e),V.none())),(e=>(t.rtcInstance=(()=>{var e=N(null),t=N("");return{init:{bindEvents:T},undoManager:{beforeChange:T,add:e,undo:e,redo:e,clear:T,reset:T,hasUndo:F,hasRedo:F,transact:e,ignore:T,extra:T},formatter:{match:F,matchAll:N([]),matchNode:N(void 0),canApply:F,closest:t,apply:T,remove:T,toggle:T,formatChanged:N({unbind:T})},editor:{getContent:t,setContent:N({content:"",html:""}),insertContent:N(""),addVisual:T},selection:{getContent:t},autocompleter:{addDecoration:T,removeDecoration:T},raw:{getModel:N(V.none())}}})(),V.some((()=>e().then((e=>(t.rtcInstance=(e=>{var t=e=>f(e)?e:{},{init:r,undoManager:n,formatter:o,editor:a,selection:i,autocompleter:s,raw:l}=e;return{init:{bindEvents:r.bindEvents},undoManager:{beforeChange:n.beforeChange,add:n.add,undo:n.undo,redo:n.redo,clear:n.clear,reset:n.reset,hasUndo:n.hasUndo,hasRedo:n.hasRedo,transact:(e,t,r)=>n.transact(r),ignore:(e,t)=>n.ignore(t),extra:(e,t,r,o)=>n.extra(r,o)},formatter:{match:(e,r,n,a)=>o.match(e,t(r),a),matchAll:o.matchAll,matchNode:o.matchNode,canApply:e=>o.canApply(e),closest:e=>o.closest(e),apply:(e,r,n)=>o.apply(e,t(r)),remove:(e,r,n,a)=>o.remove(e,t(r)),toggle:(e,r,n)=>o.toggle(e,t(r)),formatChanged:(e,t,r,n,a)=>o.formatChanged(t,r,n,a)},editor:{getContent:e=>a.getContent(e),setContent:(e,t)=>({content:a.setContent(e,t),html:""}),insertContent:(e,t)=>(a.insertContent(e),""),addVisual:a.addVisual},selection:{getContent:(e,t)=>i.getContent(t)},autocompleter:{addDecoration:s.addDecoration,removeDecoration:s.removeDecoration},raw:{getModel:()=>V.some(l.getRawModel())}}})(e),e.rtc.isRemote))))))))})(e);(e=>{var t=e.getDoc(),r=e.getBody();(e=>{e.dispatch("PreInit")})(e),zd(e)||(t.body.spellcheck=!1,lM.setAttrib(r,"spellcheck","false")),e.quirks=(e=>{var t,r,n,o=Ht.each,a=ng.BACKSPACE,i=ng.DELETE,s=e.dom,l=e.selection,d=e.parser,c=Dt.browser,u=c.isFirefox(),m=c.isChromium()||c.isSafari(),g=Dt.deviceType.isiPhone()||Dt.deviceType.isiPad(),h=Dt.os.isMacOS()||Dt.os.isiOS(),p=(t,r)=>{try{e.getDoc().execCommand(t,!1,String(r))}catch(e){}},f=e=>e.isDefaultPrevented(),b=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},y=()=>{e.inline||s.bind(e.getDoc(),"mousedown mouseup",(t=>{var r;if(t.target===e.getDoc().documentElement)if(r=l.getRng(),e.getBody().focus(),"mousedown"===t.type){if($o(r.startContainer))return;l.placeCaretAt(t.clientX,t.clientY)}else l.setRng(r)}))},w=()=>{Range.prototype.getClientRects||e.on("mousedown",(t=>{if(!f(t)&&"HTML"===t.target.nodeName){var r=e.getBody();r.blur(),ph.setEditorTimeout(e,(()=>{r.focus()}))}}))},x=()=>{var t=Bd(e);e.on("click",(r=>{var n=r.target;/^(IMG|HR)$/.test(n.nodeName)&&s.isEditable(n.parentNode)&&(r.preventDefault(),e.selection.select(n),e.nodeChanged()),"A"===n.nodeName&&s.hasClass(n,t)&&0===n.childNodes.length&&s.isEditable(n.parentNode)&&(r.preventDefault(),l.select(n))}))},C=()=>{e.on("keydown",(e=>{if(!f(e)&&e.keyCode===a&&l.isCollapsed()&&0===l.getRng().startOffset){var t=l.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}return!0}))},k=()=>{Od(e)||e.on("BeforeExecCommand mousedown",(()=>{p("StyleWithCSS",!1),p("enableInlineTableEditing",!1),od(e)||p("enableObjectResizing",!1)}))},S=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},_=()=>{e.inline||e.on("keydown",(()=>{document.activeElement===document.body&&e.getWin().focus()}))},O=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",(t=>{var r;"HTML"===t.target.nodeName&&(r=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(r),e.selection.normalize(),e.nodeChanged())})))},E=()=>{h&&e.on("keydown",(t=>{!ng.metaKeyPressed(t)||t.shiftKey||37!==t.keyCode&&39!==t.keyCode||(t.preventDefault(),e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))}))},A=()=>{e.on("click",(e=>{var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)})),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},M=()=>{e.on("init",(()=>{e.dom.bind(e.getBody(),"submit",(e=>{e.preventDefault()}))}))},N=T;return Iw(e)?(m&&(y(),x(),M(),b(),g&&(_(),O(),A())),u&&(w(),k(),S(),E())):(e.on("keydown",(t=>{if(!f(t)&&t.keyCode===ng.BACKSPACE){var r=l.getRng(),n=r.startContainer,o=r.startOffset,a=s.getRoot(),i=n;if(r.collapsed&&0===o){for(;i.parentNode&&i.parentNode.firstChild===i&&i.parentNode!==a;)i=i.parentNode;"BLOCKQUOTE"===i.nodeName&&(e.formatter.toggle("blockquote",void 0,i),(r=s.createRng()).setStart(n,0),r.setEnd(n,0),l.setRng(r))}}})),n=e=>{var t=s.create("body"),r=e.cloneContents();return t.appendChild(r),l.serializer.serialize(t,{format:"html"})},e.on("keydown",(t=>{var r,o=t.keyCode;if(!f(t)&&(o===i||o===a)&&e.selection.isEditable()){var l=e.selection.isCollapsed(),d=e.getBody();if(l&&(!s.isEmpty(d)||(r=xr(d),$(zn(r,'[contenteditable="true"]'),(e=>Rr(e).exists((e=>!on(e))))))))return;if(!l&&!(t=>{var r=n(t),o=s.createRng();return o.selectNode(e.getBody()),r===n(o)})(e.selection.getRng()))return;t.preventDefault(),e.setContent(""),d.firstChild&&s.isBlock(d.firstChild)?e.selection.setCursorLocation(d.firstChild,0):e.selection.setCursorLocation(d,0),e.nodeChanged()}})),Dt.windowsPhone||e.on("keyup focusin mouseup",(t=>{ng.modifierPressed(t)||(e=>{var t=e.getBody(),r=e.selection.getRng();return r.startContainer===r.endContainer&&r.startContainer===t&&0===r.startOffset&&r.endOffset===t.childNodes.length})(e)||l.normalize()}),!0),m&&(y(),x(),e.on("init",(()=>{p("DefaultParagraphSeparator",Nl(e))})),M(),C(),d.addNodeFilter("br",(e=>{for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()})),g?(_(),O(),A()):b()),u&&(e.on("keydown",(t=>{if(!f(t)&&t.keyCode===a){if(!e.getBody().getElementsByTagName("hr").length)return;if(l.isCollapsed()&&0===l.getRng().startOffset){var r=l.getNode(),n=r.previousSibling;if("HR"===r.nodeName)return s.remove(r),void t.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(s.remove(n),t.preventDefault())}}})),w(),t=()=>{var t=s.getAttribs(l.getStart().cloneNode(!1));return()=>{var r=l.getStart();r!==e.getBody()&&(s.setAttrib(r,"style",null),o(t,(e=>{r.setAttributeNode(e.cloneNode(!0))})))}},r=()=>!l.isCollapsed()&&s.getParent(l.getStart(),s.isBlock)!==s.getParent(l.getEnd(),s.isBlock),e.on("keypress",(n=>{var o;return!(!(f(n)||8!==n.keyCode&&46!==n.keyCode)&&r()&&(o=t(),e.getDoc().execCommand("delete",!1),o(),n.preventDefault(),1))})),s.bind(e.getDoc(),"cut",(n=>{if(!f(n)&&r()){var o=t();ph.setEditorTimeout(e,(()=>{o()}))}})),k(),e.on("SetContent ExecCommand",(e=>{"setcontent"!==e.type&&"mceInsertLink"!==e.command||o(s.select("a:not([data-mce-block])"),(e=>{var t,r=e.parentNode,n=s.getRoot();if((null==r?void 0:r.lastChild)===e){for(;r&&!s.isBlock(r);){if((null===(t=r.parentNode)||void 0===t?void 0:t.lastChild)!==r||r===n)return;r=r.parentNode}s.add(r,"br",{"data-mce-bogus":1})}}))})),S(),E(),C(),e.on("drop",(t=>{var r,n=null===(r=t.dataTransfer)||void 0===r?void 0:r.getData("text/html");v(n)&&/^<img[^>]*>$/.test(n)&&e.dispatch("dragend",new window.DragEvent("dragend",t))})))),{refreshContentEditable:N,isHidden:()=>{if(!u||e.removed)return!1;var t=e.selection.getSel();return!t||!t.rangeCount||0===t.rangeCount}}})(e),(e=>{e.dispatch("PostRender")})(e);var n=rd(e);void 0!==n&&(r.dir=n);var o=Vd(e);o&&e.on("BeforeSetContent",(e=>{Ht.each(o,(t=>{e.content=e.content.replace(t,(e=>"\x3c!--mce:protected "+escape(e)+"--\x3e"))}))})),e.on("SetContent",(()=>{e.addVisual(e.getBody())})),e.on("compositionstart compositionend",(t=>{e.composing="compositionstart"===t.type}))})(e),i.fold((()=>{var t=(e=>{var t=!1,r=setTimeout((()=>{t||e.setProgressState(!0)}),500);return()=>{clearTimeout(r),t=!0,e.setProgressState(!1)}})(e);hM(e).then((()=>{pM(e),t()}))}),(t=>{e.setProgressState(!0),hM(e).then((()=>{t().then((t=>{e.setProgressState(!1),pM(e),Vw(e)}),(t=>{e.notificationManager.open({type:"error",text:String(t)}),pM(e),Vw(e)}))}))}))},fM=z,bM=Bi.DOM,yM=Bi.DOM,wM=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),xM=e=>{var t=e.getElement();return e.inline?wM(null):(e=>{var t=yM.create("div");return yM.insertAfter(t,e),wM(t,t)})(t)},CM=function(){var e,t=(e=function*(e){e.dispatch("ScriptsLoaded"),(e=>{var t=Ht.trim(Vl(e)),r=e.ui.registry.getAll().icons,n=o(o({},cx.get("default").icons),cx.get(t).icons);be(n,((t,n)=>{Ee(r,n)||e.ui.registry.addIcon(n,t)}))})(e),(e=>{var t=dd(e);if(v(t)){var r=wx.get(t);e.theme=r(e,wx.urls[t])||{},_(e.theme.init)&&e.theme.init(e,wx.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}})(e),(e=>{var t=ud(e),r=ux.get(t);e.model=r(e,ux.urls[t])})(e),(e=>{var t=[];K(Ad(e),(r=>{((e,t,r)=>{var n=yx.get(r),o=yx.urls[r]||e.documentBaseUrl.replace(/\/$/,"");if(r=Ht.trim(r),n&&-1===Ht.inArray(t,r)){if(e.plugins[r])return;try{var a=n(e,o)||{};e.plugins[r]=a,_(a.init)&&(a.init(e,o),t.push(r))}catch(t){((e,t,r)=>{var n=Vi.translate(["Failed to initialize plugin: {0}",t]);Xm(e,"PluginLoadError",{message:n}),Ox(n,r),kx(e,n)})(e,r,t)}}})(e,t,(e=>e.replace(/^\-/,""))(r))}))})(e);var t=yield(e=>{var t=e.getElement();return e.orgDisplay=t.style.display,v(dd(e))?(e=>{var t=e.theme.renderUI;return t?t():xM(e)})(e):_(dd(e))?(e=>{var t=e.getElement(),r=dd(e)(e,t);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:t.offsetHeight,r})(e):xM(e)})(e);((e,t)=>{var r={show:V.from(t.show).getOr(T),hide:V.from(t.hide).getOr(T),isEnabled:V.from(t.isEnabled).getOr(z),setEnabled:r=>{e.mode.isReadOnly()||V.from(t.setEnabled).each((e=>e(r)))}};e.ui=o(o({},e.ui),r)})(e,V.from(t.api).getOr({})),e.editorContainer=t.editorContainer,(e=>{e.contentCSS=e.contentCSS.concat((e=>Ex(e,Ql(e)))(e),(e=>Ex(e,td(e)))(e))})(e),e.inline?vM(e):((e,t)=>{((e,t)=>{var r=e.translate("Rich Text Area"),n=or(xr(e.getElement()),"tabindex").bind(et),o=((e,t,r,n)=>{var o=yr("iframe");return n.each((e=>tr(o,"tabindex",e))),rr(o,r),rr(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),gr(o,"tox-edit-area__iframe"),o})(e.id,r,Sl(e),n).dom;o.onload=()=>{o.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=o,e.iframeHTML=(e=>{var t=_l(e)+"<html><head>";Ol(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var r=El(e),n=Tl(e),o=e.translate(Ld(e));return Al(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+Al(e)+'" />'),t+"</head>"+'<body id="'.concat(r,'" class="mce-content-body ').concat(n,'" data-id="').concat(e.id,'" aria-label="').concat(o,'">')+"<br></body></html>"})(e),bM.add(t.iframeContainer,o)})(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=bM.isHidden(t.editorContainer)),e.getElement().style.display="none",bM.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,(e=>{var t,r=e.iframeElement,n=()=>{e.contentDocument=r.contentDocument,vM(e)};if(lc(e)||Dt.browser.isFirefox()){var o=e.getDoc();o.open(),o.write(e.iframeHTML),o.close(),n()}else{var a=(t=xr(r),Tn(t,"load",fM,(()=>{a.unbind(),n()})));r.srcdoc=e.iframeHTML}})(e)})(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(e){r(i,o,a,s,l,"next",e)}function l(e){r(i,o,a,s,l,"throw",e)}s(void 0)}))});return function(e){return t.apply(this,arguments)}}(),kM=Bi.DOM,SM=e=>"-"===e.charAt(0),_M=(e,t,r)=>V.from(t).filter((e=>Je(e)&&!cx.has(e))).map((t=>({url:"".concat(e.editorManager.baseURL,"/icons/").concat(t,"/icons").concat(r,".js"),name:V.some(t)}))),OM=(e,t)=>{var r=Hi.ScriptLoader,n=()=>{!e.removed&&(e=>{var t=dd(e);return!v(t)||S(wx.get(t))})(e)&&(e=>{var t=ud(e);return S(ux.get(t))})(e)&&CM(e)};((e,t)=>{var r=dd(e);if(v(r)&&!SM(r)&&!Ee(wx.urls,r)){var n=cd(e),o=n?e.documentBaseURI.toAbsolute(n):"themes/".concat(r,"/theme").concat(t,".js");wx.load(r,o).catch((()=>{((e,t,r)=>{Sx(e,"ThemeLoadError",_x("theme",t,r))})(e,o,r)}))}})(e,t),((e,t)=>{var r=ud(e);if("plugin"!==r&&!Ee(ux.urls,r)){var n=md(e),o=v(n)?e.documentBaseURI.toAbsolute(n):"models/".concat(r,"/model").concat(t,".js");ux.load(r,o).catch((()=>{((e,t,r)=>{Sx(e,"ModelLoadError",_x("model",t,r))})(e,o,r)}))}})(e,t),((e,t)=>{var r=Kl(t),n=Yl(t);if(!Vi.hasCode(r)&&"en"!==r){var o=Je(n)?n:"".concat(t.editorManager.baseURL,"/langs/").concat(r,".js");e.add(o).catch((()=>{((e,t,r)=>{Sx(e,"LanguageLoadError",_x("language",t,r))})(t,o,r)}))}})(r,e),((e,t,r)=>{var n=_M(t,"default",r),o=(e=>V.from(Zl(e)).filter(Je).map((e=>({url:e,name:V.none()}))))(t).orThunk((()=>_M(t,Vl(t),"")));K((e=>{for(var t=[],r=e=>{t.push(e)},n=0;n<e.length;n++)e[n].each(r);return t})([n,o]),(r=>{e.add(r.url).catch((()=>{((e,t,r)=>{Sx(e,"IconsLoadError",_x("icons",t,r))})(t,r.url,r.name.getOrUndefined())}))}))})(r,e,t),((e,t)=>{var r=(t,r)=>{yx.load(t,r).catch((()=>{((e,t,r)=>{Sx(e,"PluginLoadError",_x("plugin",t,r))})(e,r,t)}))};be(Md(e),((t,n)=>{r(n,t),e.options.set("plugins",Ad(e).concat(n))})),K(Ad(e),(e=>{!(e=Ht.trim(e))||yx.urls[e]||SM(e)||r(e,"plugins/".concat(e,"/plugin").concat(t,".js"))}))})(e,t),r.loadQueue().then(n,n)},EM=Ot().deviceType,TM=EM.isPhone(),AM=EM.isTablet(),MM=e=>{if(k(e))return[];var t=y(e)?e:e.split(/[ ,]/),r=G(t,Ke);return J(r,Je)},NM=(e,t)=>Ee(e.sections(),t),RM=(e,t)=>o(o({},{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Oe(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1}),t?{menubar:!1}:{}),DM=(e,t)=>{var r,n=null!==(r=t.external_plugins)&&void 0!==r?r:{};return e&&e.external_plugins?Ht.extend({},e.external_plugins,n):n},BM=(e,t,r,n,o)=>{var a,i=e?{mobile:RM(null!==(a=o.mobile)&&void 0!==a?a:{},t)}:{},s=((e,t)=>{var r,n,o,a,i=(r=(t,r)=>q(e,r),o={},Ce(t,r,xe(n={}),xe(o)),{t:n,f:o});return a=i.f,{sections:N(i.t),options:N(a)}})(["mobile"],F_(i,o)),l=Ht.extend(r,n,s.options(),((e,t)=>e&&NM(t,"mobile"))(e,s)?function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.sections(),o=Oe(n,t).getOr({});return Ht.extend({},r,o)}(s,"mobile"):{},{external_plugins:DM(n,s.options())});return((e,t,r,n)=>{var o=MM(r.forced_plugins),a=MM(n.plugins),i=((e,t)=>NM(e,t)?e.sections()[t]:{})(t,"mobile"),s=((e,t,r,n)=>e&&NM(t,"mobile")?n:r)(e,t,a,i.plugins?MM(i.plugins):a),l=((e,t)=>[...MM(e),...MM(t)])(o,s);return Ht.extend(n,{forced_plugins:o,plugins:l})})(e,s,n,l)},LM=e=>{(e=>{var t=t=>()=>{K("left,center,right,justify".split(","),(r=>{t!==r&&e.formatter.remove("align"+r)})),"none"!==t&&((t,r)=>{e.formatter.toggle(t,void 0),e.nodeChanged()})("align"+t)};e.editorCommands.addCommands({JustifyLeft:t("left"),JustifyCenter:t("center"),JustifyRight:t("right"),JustifyFull:t("justify"),JustifyNone:t("none")})})(e),(e=>{var t=t=>()=>{var r=e.selection,n=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return $(n,(r=>S(e.formatter.matchNode(r,t))))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")})(e)},HM=(e,t)=>{var r=e.selection,n=e.dom;return/^ | $/.test(t)?((e,t,r)=>{var n=xr(e.getRoot());return r=Fp(n,Is.fromRangeStart(t))?r.replace(/^ /,"&nbsp;"):r.replace(/^&nbsp;/," "),zp(n,Is.fromRangeEnd(t))?r.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):r.replace(/&nbsp;(<br( \/)?>)?$/," ")})(n,r.getRng(),t):t},PM=(e,t)=>{if(e.selection.isEditable()){var{content:r,details:n}=(e=>{if("string"!=typeof e){var t=Ht.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}})(t);lw(e,o(o({},n),{},{content:HM(e,r),format:"html",set:!1,selection:!0})).each((t=>{var r=((e,t,r)=>Fw(e).editor.insertContent(t,r))(e,t.content,n);dw(e,r,t),e.addVisual()}))}},IM={"font-size":"size","font-family":"face"},FM=Qt("font"),zM=e=>(t,r)=>V.from(r).map(xr).filter(Kt).bind((r=>((e,t,r)=>yf(xr(r),(t=>(t=>gn(t,e).orThunk((()=>FM(t)?Oe(IM,e).bind((e=>or(t,e))):V.none())))(t)),(e=>Or(xr(t),e))))(e,t,r.dom).or(((e,t)=>V.from(Bi.DOM.getStyle(t,e,!0)))(e,r.dom)))).getOr(""),VM=zM("font-size"),ZM=A((e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")),zM("font-family")),jM=e=>ku(e.getBody()).bind((e=>{var t=e.container();return V.from(to(t)?t.parentNode:t)})),UM=(e,t)=>((e,t)=>(e=>V.from(e.selection.getRng()).bind((t=>{var r=e.getBody();return t.startContainer===r&&0===t.startOffset?V.none():V.from(e.selection.getStart(!0))})))(e).orThunk(B(jM,e)).map(xr).filter(Kt).bind(t))(e,M(V.some,t)),WM=(e,t)=>{if(/^[0-9.]+$/.test(t)){var r=parseInt(t,10);if(r>=1&&r<=7){var n=(e=>Ht.explode(e.options.get("font_size_style_values")))(e),o=(e=>Ht.explode(e.options.get("font_size_classes")))(e);return o.length>0?o[r-1]||t:n[r-1]||t}return t}return t},qM=e=>{var t=e.split(/\s*,\s*/);return G(t,(e=>-1===e.indexOf(" ")||qe(e,'"')||qe(e,"'")?e:"'".concat(e,"'"))).join(",")},$M=(e,t)=>{var r=e.dom,n=e.selection.getRng(),o=t?e.selection.getStart():e.selection.getEnd(),a=t?n.startContainer:n.endContainer,i=rE(r,a);if(i&&i.isContentEditable){var s=t?vn:fn,l=Nl(e);((e,t,r,n)=>{var o=e.dom,a=e=>o.isBlock(e)&&e.parentElement===r,i=a(t)?t:o.getParent(n,a,r);return V.from(i).map(xr)})(e,o,i,a).each((t=>{var r=iE(e,a,t.dom,i,!1,l);s(t,xr(r)),e.selection.setCursorLocation(r,0),e.dispatch("NewBlock",{newBlock:r}),KO(e,"insertParagraph")}))}},GM=e=>{LM(e),(e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{var r,n=e.getDoc();try{n.execCommand(t)}catch(e){r=!0}if("paste"!==t||n.queryCommandEnabled(t)||(r=!0),r||!n.queryCommandSupported(t)){var o=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Dt.os.isMacOS()||Dt.os.isiOS())&&(o=o.replace(/Ctrl\+/g,"+")),e.notificationManager.open({text:o,type:"error"})}}})})(e),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(e),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,r,n)=>{var o=0;e.dom.getParent(e.selection.getNode(),(t=>!qn(t)||o++!==n||(e.selection.select(t),!1)),e.getBody())},mceSelectNode:(t,r,n)=>{e.selection.select(n)},selectAll:()=>{var t=e.dom.getParent(e.selection.getStart(),co);if(t){var r=e.dom.createRng();r.selectNodeContents(t),e.selection.setRng(r)}}})})(e),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{var t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,r,n)=>{PM(e,e.dom.createHTML("img",{src:n}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,r,n)=>{PM(e,e.dom.encode(n))},insertHTML:(t,r,n)=>{PM(e,n)},mceInsertContent:(t,r,n)=>{PM(e,n)},mceSetContent:(t,r,n)=>{e.setContent(n)},mceReplaceContent:(t,r,n)=>{e.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(qd(e))}})})(e),(e=>{var t=(t,r,n)=>{var o=v(n)?{href:n}:n,a=e.dom.getParent(e.selection.getNode(),"a");f(o)&&v(o.href)&&(o.href=o.href.replace(/ /g,"%20"),a&&o.href||e.formatter.remove("link"),o.href&&e.formatter.apply("link",o,a))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){var t=e.dom.getParent(e.selection.getStart(),"a");return void(t&&e.dom.remove(t,!0))}e.formatter.remove("link")}},mceInsertLink:t,createLink:t})})(e),(e=>{e.editorCommands.addCommands({Indent:()=>{(e=>{pS(e,"indent")})(e)},Outdent:()=>{vS(e)}}),e.editorCommands.addCommands({Outdent:()=>mS(e)},"state")})(e),(e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{(e=>{$M(e,!0)})(e)},InsertNewBlockAfter:()=>{(e=>{$M(e,!1)})(e)}})})(e),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{PE(pE,e)},mceInsertNewLine:(t,r,n)=>{IE(e,n)},InsertLineBreak:(t,r,n)=>{PE(kE,e)}})})(e),(e=>{(e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{e.getDoc().execCommand(t);var r=e.dom.getParent(e.selection.getNode(),"ol,ul");if(r){var n=r.parentNode;if(n&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)){var o=e.selection.getBookmark();e.dom.split(n,r),e.selection.moveToBookmark(o)}}}})})(e),(e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{var r=e.dom.getParent(e.selection.getNode(),"ul,ol");return r&&("insertunorderedlist"===t&&"UL"===r.tagName||"insertorderedlist"===t&&"OL"===r.tagName)}},"state")})(e)})(e),(e=>{(e=>{var t=(t,r)=>{e.formatter.toggle(t,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>{t(e)},"ForeColor,HiliteColor":(e,r,n)=>{t(e,{value:n})},BackColor:(e,r,n)=>{t("hilitecolor",{value:n})},FontName:(t,r,n)=>{((e,t)=>{var r=WM(e,t);e.formatter.toggle("fontname",{value:qM(r)}),e.nodeChanged()})(e,n)},FontSize:(t,r,n)=>{((e,t)=>{e.formatter.toggle("fontsize",{value:WM(e,t)}),e.nodeChanged()})(e,n)},LineHeight:(t,r,n)=>{((e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()})(e,n)},Lang:(e,r,n)=>{var o;t(e,{value:n.code,customValue:null!==(o=n.customCode)&&void 0!==o?o:null})},RemoveFormat:t=>{e.formatter.remove(t)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(e,r,n)=>{t(v(n)?n:"p")},mceToggleFormat:(e,r,n)=>{t(n)}})})(e),(e=>{var t=t=>e.formatter.match(t);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>t(e),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",(()=>(e=>UM(e,(t=>ZM(e.getBody(),t.dom))).getOr(""))(e))),e.editorCommands.addQueryValueHandler("FontSize",(()=>(e=>UM(e,(t=>VM(e.getBody(),t.dom))).getOr(""))(e))),e.editorCommands.addQueryValueHandler("LineHeight",(()=>(e=>UM(e,(t=>{var r=xr(e.getBody()),n=yf(t,(e=>gn(e,"line-height")),B(Or,r));return n.getOrThunk((()=>{var e=parseFloat(un(t,"line-height")),r=parseFloat(un(t,"font-size"));return String(e/r)}))})).getOr(""))(e)))})(e)})(e),(e=>{e.editorCommands.addCommands({mceRemoveNode:(t,r,n)=>{var o=null!=n?n:e.selection.getNode();if(o!==e.getBody()){var a=e.selection.getBookmark();e.dom.remove(o,!0),e.selection.moveToBookmark(a)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,r,n)=>{((e,t)=>{e.removed||(t?_h(e):(e=>{var t=e.selection,r=e.getBody(),n=t.getRng();e.quirks.refreshContentEditable(),S(e.bookmark)&&!Sh(e)&&gh(e).each((t=>{e.selection.setRng(t),n=t}));var o=((e,t)=>e.dom.getParent(t,(t=>"true"===e.dom.getContentEditable(t))))(e,t.getNode());if(o&&e.dom.isChildOf(o,r))return kh(o),Ch(e,n),void _h(e);e.inline||(Dt.browser.isOpera()||kh(r),e.getWin().focus()),(Dt.browser.isFirefox()||e.inline)&&(kh(r),Ch(e,n)),_h(e)})(e))})(e,!0===n)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(e)},KM=["toggleview"],YM=e=>q(KM,e.toLowerCase());class XM{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=this.editor,a=e.toLowerCase(),i=null==n?void 0:n.skip_focus;if(o.removed)return!1;if("mcefocus"!==a&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?(e=>{gh(e).each((t=>e.selection.setRng(t)))})(o):o.focus()),o.dispatch("BeforeExecCommand",{command:e,ui:t,value:r}).isDefaultPrevented())return!1;var s=this.commands.exec[a];return!!_(s)&&(s(a,t,r),o.dispatch("ExecCommand",{command:e,ui:t,value:r}),!0)}queryCommandState(e){if(!YM(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;var t=e.toLowerCase(),r=this.commands.state[t];return!!_(r)&&r(t)}queryCommandValue(e){if(!YM(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";var t=e.toLowerCase(),r=this.commands.value[t];return _(r)?r(t):""}addCommands(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"exec",r=this.commands;be(e,((e,n)=>{K(n.toLowerCase().split(","),(n=>{r[t][n]=e}))}))}addCommand(e,t,r){var n=e.toLowerCase();this.commands.exec[n]=(e,n,o)=>t.call(null!=r?r:this.editor,n,o)}queryCommandSupported(e){var t=e.toLowerCase();return!!this.commands.exec[t]}addQueryStateHandler(e,t,r){this.commands.state[e.toLowerCase()]=()=>t.call(null!=r?r:this.editor)}addQueryValueHandler(e,t,r){this.commands.value[e.toLowerCase()]=()=>t.call(null!=r?r:this.editor)}}var JM="data-mce-contenteditable",QM=(e,t,r)=>{try{e.getDoc().execCommand(t,!1,String(r))}catch(e){}},eN=(e,t)=>{e.dom.contentEditable=t?"true":"false"},tN=(e,t)=>{var r=xr(e.getBody());((e,t,r)=>{vr(e,t)&&!r?pr(e,t):r&&gr(e,t)})(r,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),(e=>{V.from(e.selection.getNode()).each((e=>{e.removeAttribute("data-mce-selected")}))})(e),e.readonly=!0,eN(r,!1),K(zn(r,'*[contenteditable="true"]'),(e=>{tr(e,JM,"true"),eN(e,!1)}))):(e.readonly=!1,e.hasEditableRoot()&&eN(r,!0),K(zn(r,"*[".concat(JM,'="true"]')),(e=>{ir(e,JM),eN(e,!0)})),QM(e,"StyleWithCSS",!1),QM(e,"enableInlineTableEditing",!1),QM(e,"enableObjectResizing",!1),(e=>Sh(e)||(e=>{var t=qr(xr(e.getElement()));return ah(t).filter((t=>!fh(t.dom)&&bh(e,t.dom))).isSome()})(e))(e)&&e.focus(),(e=>{e.selection.setRng(e.selection.getRng())})(e),e.nodeChanged())},rN=e=>e.readonly,nN=e=>{e.parser.addAttributeFilter("contenteditable",(t=>{rN(e)&&K(t,(e=>{e.attr(JM,e.attr("contenteditable")),e.attr("contenteditable","false")}))})),e.serializer.addAttributeFilter(JM,(t=>{rN(e)&&K(t,(e=>{e.attr("contenteditable",e.attr(JM))}))})),e.serializer.addTempAttr(JM)},oN=["copy"],aN=Ht.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class iN{static isNative(e){return!!aN[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||F}fire(e,t){return this.dispatch(e,t)}dispatch(e,t){var r=e.toLowerCase(),n=bi(r,null!=t?t:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(n);var o=this.bindings[r];if(o)for(var a=0,i=o.length;a<i;a++){var s=o[a];if(!s.removed){if(s.once&&this.off(r,s.func),n.isImmediatePropagationStopped())return n;if(!1===s.func.call(this.scope,n))return n.preventDefault(),n}}return n}on(e,t,r,n){if(!1===t&&(t=F),t){var o={func:t,removed:!1};n&&Ht.extend(o,n);for(var a=e.toLowerCase().split(" "),i=a.length;i--;){var s=a[i],l=this.bindings[s];l||(l=[],this.toggleEvent(s,!0)),l=r?[o,...l]:[...l,o],this.bindings[s]=l}}return this}off(e,t){if(e)for(var r=e.toLowerCase().split(" "),n=r.length;n--;){var o=r[n],a=this.bindings[o];if(!o)return be(this.bindings,((e,t)=>{this.toggleEvent(t,!1),delete this.bindings[t]})),this;if(a){if(t){var i=X(a,(e=>e.func===t));a=i.fail,this.bindings[o]=a,K(i.pass,(e=>{e.removed=!0}))}else a.length=0;a.length||(this.toggleEvent(e,!1),delete this.bindings[o])}}else be(this.bindings,((e,t)=>{this.toggleEvent(t,!1)})),this.bindings={};return this}once(e,t,r){return this.on(e,t,r,{once:!0})}has(e){e=e.toLowerCase();var t=this.bindings[e];return!(!t||0===t.length)}}var sN,lN=e=>(e._eventDispatcher||(e._eventDispatcher=new iN({scope:e,toggleEvent:(t,r)=>{iN.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,r)}})),e._eventDispatcher),dN={fire(e,t,r){return this.dispatch(e,t,r)},dispatch(e,t,r){var n=this;if(n.removed&&"remove"!==e&&"detach"!==e)return bi(e.toLowerCase(),null!=t?t:{},n);var o=lN(n).dispatch(e,t);if(!1!==r&&n.parent)for(var a=n.parent();a&&!o.isPropagationStopped();)a.dispatch(e,o,!1),a=a.parent?a.parent():void 0;return o},on(e,t,r){return lN(this).on(e,t,r)},off(e,t){return lN(this).off(e,t)},once(e,t){return lN(this).once(e,t)},hasEventListeners(e){return lN(this).has(e)}},cN=Bi.DOM,uN=(e,t)=>{if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;var r=sd(e);return r?(e.eventRoot||(e.eventRoot=cN.select(r)[0]),e.eventRoot):e.getBody()},mN=(e,t,r)=>{(e=>!e.hidden&&!rN(e))(e)?e.dispatch(t,r):rN(e)&&((e,t)=>{if((e=>"click"===e.type)(t)&&!ng.metaKeyPressed(t)){var r=xr(t.target);((e,t)=>nn(t,"a",(t=>Or(t,xr(e.getBody())))).bind((e=>or(e,"href"))))(e,r).each((r=>{if(t.preventDefault(),/^#/.test(r)){var n=e.dom.select("".concat(r,',[name="').concat(Ue(r,"#"),'"]'));n.length&&e.selection.scrollIntoView(n[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")}))}else(e=>q(oN,e.type))(t)&&e.dispatch(t.type,t)})(e,r)},gN=(e,t)=>{if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed){var r=uN(e,t);if(sd(e)){if(sN||(sN={},e.editorManager.on("removeEditor",(()=>{e.editorManager.activeEditor||sN&&(be(sN,((t,r)=>{e.dom.unbind(uN(e,r))})),sN=null)}))),sN[t])return;var n=r=>{for(var n=r.target,o=e.editorManager.get(),a=o.length;a--;){var i=o[a].getBody();(i===n||cN.isChildOf(n,i))&&mN(o[a],t,r)}};sN[t]=n,cN.bind(r,t,n)}else{var o=r=>{mN(e,t,r)};cN.bind(r,t,o),e.delegates[t]=o}}},hN=o(o({},dN),{},{bindPendingEventDelegates(){var e=this;Ht.each(e._pendingNativeEvents,(t=>{gN(e,t)}))},toggleNativeEvent(e,t){var r=this;"focus"!==e&&"blur"!==e&&(r.removed||(t?r.initialized?gN(r,e):r._pendingNativeEvents?r._pendingNativeEvents.push(e):r._pendingNativeEvents=[e]:r.initialized&&r.delegates&&(r.dom.unbind(uN(r,e),e,r.delegates[e]),delete r.delegates[e])))},unbindAllNativeEvents(){var e=this,t=e.getBody(),r=e.dom;e.delegates&&(be(e.delegates,((t,r)=>{e.dom.unbind(uN(e,r),r,t)})),delete e.delegates),!e.inline&&t&&r&&(t.onload=null,r.unbind(e.getWin()),r.unbind(e.getDoc())),r&&(r.unbind(t),r.unbind(e.getContainer()))}}),pN=e=>v(e)?{value:e.split(/[ ,]/),valid:!0}:E(e,v)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},vN=(e,t)=>e+(Qe(t.message)?"":". ".concat(t.message)),fN=e=>e.valid,bN=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=t(e);return x(n)?n?{value:e,valid:!0}:{valid:!1,message:r}:n},yN=["design","readonly"],wN=(e,t,r,n)=>{var o=r[t.get()],a=r[n];try{a.activate()}catch(e){return void console.error("problem while activating editor mode ".concat(n,":"),e)}o.deactivate(),o.editorReadOnly!==a.editorReadOnly&&tN(e,a.editorReadOnly),t.set(n),((e,t)=>{e.dispatch("SwitchMode",{mode:t})})(e,n)},xN=Ht.each,CN=Ht.explode,kN={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},SN=Ht.makeMap("alt,ctrl,shift,meta,access"),_N=e=>{var t={},r=Dt.os.isMacOS()||Dt.os.isiOS();xN(CN(e.toLowerCase(),"+"),(e=>{(e=>e in SN)(e)?t[e]=!0:/^[0-9]{2,}$/.test(e)?t.keyCode=parseInt(e,10):(t.charCode=e.charCodeAt(0),t.keyCode=kN[e]||e.toUpperCase().charCodeAt(0))}));var n,o=[t.keyCode];for(n in SN)t[n]?o.push(n):t[n]=!1;return t.id=o.join(","),t.access&&(t.alt=!0,r?t.ctrl=!0:t.shift=!0),t.meta&&(r?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class ON{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;var t=this;e.on("keyup keypress keydown",(e=>{!t.hasModifier(e)&&!t.isFunctionKey(e)||e.isDefaultPrevented()||(xN(t.shortcuts,(r=>{t.matchShortcut(e,r)&&(t.pendingPatterns=r.subpatterns.slice(0),"keydown"===e.type&&t.executeShortcutAction(r))})),t.matchShortcut(e,t.pendingPatterns[0])&&(1===t.pendingPatterns.length&&"keydown"===e.type&&t.executeShortcutAction(t.pendingPatterns[0]),t.pendingPatterns.shift()))}))}add(e,t,r,n){var o=this,a=o.normalizeCommandFunc(r);return xN(CN(Ht.trim(e)),(e=>{var r=o.createShortcut(e,t,a,n);o.shortcuts[r.id]=r})),!0}remove(e){var t=this.createShortcut(e);return!!this.shortcuts[t.id]&&(delete this.shortcuts[t.id],!0)}normalizeCommandFunc(e){var t=this,r=e;return"string"==typeof r?()=>{t.editor.execCommand(r,!1,null)}:Ht.isArray(r)?()=>{t.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(e,t,r,n){var o=Ht.map(CN(e,">"),_N);return o[o.length-1]=Ht.extend(o[o.length-1],{func:r,scope:n||this.editor}),Ht.extend(o[0],{desc:this.editor.translate(t),subpatterns:o.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}var EN=Bi.DOM,TN=Ht.extend,AN=Ht.each;class MN{constructor(e,t,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,TN(this,hN);var n=this;this.id=e,this.hidden=!1;var a,i,s=((e,t)=>BM(TM||AM,TM,t,e,t))(r.defaultOptions,t);this.options=((e,t)=>{var r={},n={},a=(e,t,r)=>{var o=bN(t,r);return fN(o)?(n[e]=o.value,!0):(console.warn(vN("Invalid value passed for the ".concat(e," option"),o)),!1)},i=e=>Ee(r,e);return{register:(e,i)=>{var s=(e=>v(e.processor))(i)?(e=>{var t=(()=>{switch(e){case"array":return y;case"boolean":return x;case"function":return _;case"number":return O;case"object":return f;case"string":return v;case"string[]":return pN;case"object[]":return e=>E(e,f);case"regexp":return e=>p(e,RegExp);default:return z}})();return r=>bN(r,t,"The value must be a ".concat(e,"."))})(i.processor):i.processor,l=((e,t,r)=>{if(!C(t)){var n=bN(t,r);if(fN(n))return n.value;console.error(vN('Invalid default value passed for the "'.concat(e,'" option'),n))}})(e,i.default,s);r[e]=o(o({},i),{},{default:l,processor:s}),Oe(n,e).orThunk((()=>Oe(t,e))).each((t=>a(e,t,s)))},isRegistered:i,get:e=>Oe(n,e).orThunk((()=>Oe(r,e).map((e=>e.default)))).getOrUndefined(),set:(e,t)=>{if(i(e)){var n=r[e];return n.immutable?(console.error('"'.concat(e,'" is an immutable option and cannot be updated')),!1):a(e,t,n.processor)}return console.warn('"'.concat(e,'" is not a registered option. Ensure the option has been registered before setting a value.')),!1},unset:e=>{var t=i(e);return t&&delete n[e],t},isSet:e=>Ee(n,e)}})(0,s),(i=(a=n).options.register)("id",{processor:"string",default:a.id}),i("selector",{processor:"string"}),i("target",{processor:"object"}),i("suffix",{processor:"string"}),i("cache_suffix",{processor:"string"}),i("base_url",{processor:"string"}),i("referrer_policy",{processor:"string",default:""}),i("language_load",{processor:"boolean",default:!0}),i("inline",{processor:"boolean",default:!1}),i("iframe_attrs",{processor:"object",default:{}}),i("doctype",{processor:"string",default:"<!DOCTYPE html>"}),i("document_base_url",{processor:"string",default:a.documentBaseUrl}),i("body_id",{processor:kl(a,"tinymce"),default:"tinymce"}),i("body_class",{processor:kl(a),default:""}),i("content_security_policy",{processor:"string",default:""}),i("br_in_pre",{processor:"boolean",default:!0}),i("forced_root_block",{processor:e=>{var t=v(e)&&Je(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),i("forced_root_block_attrs",{processor:"object",default:{}}),i("newline_behavior",{processor:e=>{var t=q(["block","linebreak","invert","default"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),i("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),i("no_newline_selector",{processor:"string",default:""}),i("keep_styles",{processor:"boolean",default:!0}),i("end_container_on_empty_block",{processor:e=>x(e)||v(e)?{valid:!0,value:e}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),i("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),i("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),i("font_size_classes",{processor:"string",default:""}),i("automatic_uploads",{processor:"boolean",default:!0}),i("images_reuse_filename",{processor:"boolean",default:!1}),i("images_replace_blob_uris",{processor:"boolean",default:!0}),i("icons",{processor:"string",default:""}),i("icons_url",{processor:"string",default:""}),i("images_upload_url",{processor:"string",default:""}),i("images_upload_base_path",{processor:"string",default:""}),i("images_upload_credentials",{processor:"boolean",default:!1}),i("images_upload_handler",{processor:"function"}),i("language",{processor:"string",default:"en"}),i("language_url",{processor:"string",default:""}),i("entity_encoding",{processor:"string",default:"named"}),i("indent",{processor:"boolean",default:!0}),i("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),i("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),i("indent_use_margin",{processor:"boolean",default:!1}),i("indentation",{processor:"string",default:"40px"}),i("content_css",{processor:e=>{var t=!1===e||v(e)||E(e,v);return t?v(e)?{value:G(e.split(","),Ke),valid:t}:y(e)?{value:e,valid:t}:!1===e?{value:[],valid:t}:{value:e,valid:t}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:yd(a)?[]:["default"]}),i("content_style",{processor:"string"}),i("content_css_cors",{processor:"boolean",default:!1}),i("font_css",{processor:e=>{var t=v(e)||E(e,v);return t?{value:y(e)?e:G(e.split(","),Ke),valid:t}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),i("inline_boundaries",{processor:"boolean",default:!0}),i("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),i("object_resizing",{processor:e=>{var t=x(e)||v(e);return t?!1===e||fl.isiPhone()||fl.isiPad()?{value:"",valid:t}:{value:!0===e?"table,img,figure.image,div,video,iframe":e,valid:t}:{valid:!1,message:"Must be boolean or a string"}},default:!bl}),i("resize_img_proportional",{processor:"boolean",default:!0}),i("event_root",{processor:"object"}),i("service_message",{processor:"string"}),i("theme",{processor:e=>!1===e||v(e)||_(e),default:"silver"}),i("theme_url",{processor:"string"}),i("formats",{processor:"object"}),i("format_empty_lines",{processor:"boolean",default:!1}),i("format_noneditable_selector",{processor:"string",default:""}),i("preview_styles",{processor:e=>{var t=!1===e||v(e);return t?{value:!1===e?"":e,valid:t}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),i("custom_ui_selector",{processor:"string",default:""}),i("hidden_input",{processor:"boolean",default:!0}),i("submit_patch",{processor:"boolean",default:!0}),i("encoding",{processor:"string"}),i("add_form_submit_trigger",{processor:"boolean",default:!0}),i("add_unload_trigger",{processor:"boolean",default:!0}),i("custom_undo_redo_levels",{processor:"number",default:0}),i("disable_nodechange",{processor:"boolean",default:!1}),i("readonly",{processor:"boolean",default:!1}),i("editable_root",{processor:"boolean",default:!0}),i("plugins",{processor:"string[]",default:[]}),i("external_plugins",{processor:"object"}),i("forced_plugins",{processor:"string[]"}),i("model",{processor:"string",default:a.hasPlugin("rtc")?"plugin":"dom"}),i("model_url",{processor:"string"}),i("block_unsupported_drop",{processor:"boolean",default:!0}),i("visual",{processor:"boolean",default:!0}),i("visual_table_class",{processor:"string",default:"mce-item-table"}),i("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),i("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),i("setup",{processor:"function"}),i("init_instance_callback",{processor:"function"}),i("url_converter",{processor:"function",default:a.convertURL}),i("url_converter_scope",{processor:"object",default:a}),i("urlconverter_callback",{processor:"function"}),i("allow_conditional_comments",{processor:"boolean",default:!1}),i("allow_html_data_urls",{processor:"boolean",default:!1}),i("allow_svg_data_urls",{processor:"boolean"}),i("allow_html_in_named_anchor",{processor:"boolean",default:!1}),i("allow_script_urls",{processor:"boolean",default:!1}),i("allow_unsafe_link_target",{processor:"boolean",default:!1}),i("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),i("fix_list_elements",{processor:"boolean",default:!1}),i("preserve_cdata",{processor:"boolean",default:!1}),i("remove_trailing_brs",{processor:"boolean",default:!0}),i("pad_empty_with_br",{processor:"boolean",default:!1}),i("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),i("element_format",{processor:"string",default:"html"}),i("entities",{processor:"string"}),i("schema",{processor:"string",default:"html5"}),i("convert_urls",{processor:"boolean",default:!0}),i("relative_urls",{processor:"boolean",default:!0}),i("remove_script_host",{processor:"boolean",default:!0}),i("custom_elements",{processor:"string"}),i("extended_valid_elements",{processor:"string"}),i("invalid_elements",{processor:"string"}),i("invalid_styles",{processor:Cl}),i("valid_children",{processor:"string"}),i("valid_classes",{processor:Cl}),i("valid_elements",{processor:"string"}),i("valid_styles",{processor:Cl}),i("verify_html",{processor:"boolean",default:!0}),i("auto_focus",{processor:e=>v(e)||!0===e}),i("browser_spellcheck",{processor:"boolean",default:!1}),i("protect",{processor:"array"}),i("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),i("deprecation_warnings",{processor:"boolean",default:!0}),i("a11y_advanced_options",{processor:"boolean",default:!1}),i("api_key",{processor:"string"}),i("paste_block_drop",{processor:"boolean",default:!1}),i("paste_data_images",{processor:"boolean",default:!0}),i("paste_preprocess",{processor:"function"}),i("paste_postprocess",{processor:"function"}),i("paste_webkit_styles",{processor:"string",default:"none"}),i("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),i("paste_merge_formats",{processor:"boolean",default:!0}),i("smart_paste",{processor:"boolean",default:!0}),i("paste_as_text",{processor:"boolean",default:!1}),i("paste_tab_spaces",{processor:"number",default:4}),i("text_patterns",{processor:e=>E(e,f)||!1===e?{value:vl(!1===e?[]:e),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),i("text_patterns_lookup",{processor:e=>{return _(e)?{value:(t=e,e=>{var r=t(e);return vl(r)}),valid:!0}:{valid:!1,message:"Must be a single function"};var t},default:e=>[]}),i("noneditable_class",{processor:"string",default:"mceNonEditable"}),i("editable_class",{processor:"string",default:"mceEditable"}),i("noneditable_regexp",{processor:e=>E(e,wl)?{value:e,valid:!0}:wl(e)?{value:[e],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),i("table_tab_navigation",{processor:"boolean",default:!0}),i("highlight_on_focus",{processor:"boolean",default:!1}),i("xss_sanitization",{processor:"boolean",default:!0}),i("details_initial_state",{processor:e=>{var t=q(["inherited","collapsed","expanded"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),i("details_serialized_state",{processor:e=>{var t=q(["inherited","collapsed","expanded"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),i("init_content_sync",{processor:"boolean",default:!1}),i("newdocument_content",{processor:"string",default:""}),a.on("ScriptsLoaded",(()=>{i("directionality",{processor:"string",default:Vi.isRtl()?"rtl":void 0}),i("placeholder",{processor:"string",default:yl.getAttrib(a.getElement(),"placeholder")})}));var l=this.options.get;l("deprecation_warnings")&&((e,t)=>{((e,t)=>{var r=rx(e),n=ax(t),o=n.length>0,a=r.length>0,i="mobile"===t.theme;if(o||a||i){var s="\n- ",l=i?"\n\nThemes:".concat(s,"mobile"):"",d=o?"\n\nPlugins:".concat(s).concat(n.join(s)):"",c=a?"\n\nOptions:".concat(s).concat(r.join(s)):"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+l+d+c)}})(e,t),((e,t)=>{var r=nx(e),n=ix(t),o=n.length>0,a=r.length>0;if(o||a){var i="\n- ",s=o?"\n\nPlugins:".concat(i).concat(n.map(sx).join(i)):"",l=a?"\n\nOptions:".concat(i).concat(r.join(i)):"";console.warn("The following deprecated features are currently enabled but will be removed soon."+s+l)}})(e,t)})(t,s);var d=l("suffix");d&&(r.suffix=d),this.suffix=r.suffix;var c=l("base_url");c&&r._setBaseUrl(c),this.baseUri=r.baseURI;var u=Gl(n);u&&(Hi.ScriptLoader._setReferrerPolicy(u),Bi.DOM.styleSheetLoader._setReferrerPolicy(u));var m=Td(n);S(m)&&Bi.DOM.styleSheetLoader._setContentCssCors(m),Zi.languageLoad=l("language_load"),Zi.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Wy(Ol(n),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=yd(n),this.hasVisual=Rd(n),this.shortcuts=new ON(this),this.editorCommands=new XM(this),GM(this);var g,h,b,w,k,A,M,N,R,D,B=l("cache_suffix");B&&(Dt.cacheSuffix=B.replace(/^[\?\&]+/,"")),this.ui={registry:(h={},b={},w={},k={},A={},M={},N={},R=(e,t)=>(r,n)=>{e[r.toLowerCase()]=o(o({},n),{},{type:t})},D={addButton:R(g={},"button"),addGroupToolbarButton:R(g,"grouptoolbarbutton"),addToggleButton:R(g,"togglebutton"),addMenuButton:R(g,"menubutton"),addSplitButton:R(g,"splitbutton"),addMenuItem:R(h,"menuitem"),addNestedMenuItem:R(h,"nestedmenuitem"),addToggleMenuItem:R(h,"togglemenuitem"),addAutocompleter:R(b,"autocompleter"),addContextMenu:R(k,"contextmenu"),addContextToolbar:R(A,"contexttoolbar"),addContextForm:R(A,"contextform"),addSidebar:R(M,"sidebar"),addView:R(N,"views"),addIcon:(e,t)=>w[e.toLowerCase()]=t,getAll:()=>({buttons:g,menuItems:h,icons:w,popups:b,contextMenus:k,contextToolbars:A,sidebars:M,views:N})},{addAutocompleter:D.addAutocompleter,addButton:D.addButton,addContextForm:D.addContextForm,addContextMenu:D.addContextMenu,addContextToolbar:D.addContextToolbar,addIcon:D.addIcon,addMenuButton:D.addMenuButton,addMenuItem:D.addMenuItem,addNestedMenuItem:D.addNestedMenuItem,addSidebar:D.addSidebar,addSplitButton:D.addSplitButton,addToggleButton:D.addToggleButton,addGroupToolbarButton:D.addGroupToolbarButton,addToggleMenuItem:D.addToggleMenuItem,addView:D.addView,getAll:D.getAll}),styleSheetLoader:void 0,show:T,hide:T,setEnabled:T,isEnabled:z},this.mode=(e=>{var t=Pi("design"),r=Pi({design:{activate:T,deactivate:T,editorReadOnly:!1},readonly:{activate:T,deactivate:T,editorReadOnly:!0}});return(e=>{e.serializer?nN(e):e.on("PreInit",(()=>{nN(e)}))})(e),(e=>{e.on("ShowCaret",(t=>{rN(e)&&t.preventDefault()})),e.on("ObjectSelected",(t=>{rN(e)&&t.preventDefault()}))})(e),{isReadOnly:()=>rN(e),set:n=>((e,t,r,n)=>{if(n!==r.get()){if(!Ee(t,n))throw new Error("Editor mode '".concat(n,"' is invalid"));e.initialized?wN(e,r,t,n):e.on("init",(()=>wN(e,r,t,n)))}})(e,r.get(),t,n),get:()=>t.get(),register:(e,t)=>{r.set(((e,t,r)=>{if(q(yN,t))throw new Error("Cannot override default mode ".concat(t));return o(o({},e),{},{[t]:o(o({},r),{},{deactivate:()=>{try{r.deactivate()}catch(e){console.error("problem while deactivating editor mode ".concat(t,":"),e)}}})})})(r.get(),e,t))}}})(n),r.dispatch("SetupEditor",{editor:this});var L=Hd(n);_(L)&&L.call(n,n)}render(){(e=>{var t=e.id;Vi.setCode(Kl(e));var r=()=>{kM.unbind(window,"ready",r),e.render()};if(Si.Event.domLoaded){if(e.getElement()){var n=xr(e.getElement()),o=sr(n);e.on("remove",(()=>{Y(n.dom.attributes,(e=>ir(n,e.name))),rr(n,o)})),e.ui.styleSheetLoader=((e,t)=>za.forElement(e,{contentCssCors:Td(t),referrerPolicy:Gl(t)}))(n,e),yd(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");var a=e.getElement().form||kM.getParent(t,"form");a&&(e.formElement=a,wd(e)&&!eo(e.getElement())&&(kM.insertAfter(kM.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=t=>{e.dispatch(t.type,t)},kM.bind(a,"submit reset",e.formEventDelegate),e.on("reset",(()=>{e.resetContent()})),!xd(e)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),a._mceOldSubmit(a)))),e.windowManager=xx(e),e.notificationManager=bx(e),(e=>"xml"===e.options.get("encoding"))(e)&&e.on("GetContent",(e=>{e.save&&(e.content=kM.encode(e.content))})),Cd(e)&&e.on("submit",(()=>{e.initialized&&e.save()})),kd(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),OM(e,e.suffix)}}else kM.bind(window,"ready",r)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return Sh(this)}translate(e){return Vi.translate(e)}getParam(e,t,r){var n=this.options;return n.isRegistered(e)||(S(r)?n.register(e,{processor:r,default:t}):n.register(e,{processor:z,default:t})),n.isSet(e)||C(t)?n.get(e):t}hasPlugin(e,t){return!(!q(Ad(this),e)||t&&void 0===yx.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,t,r){this.editorCommands.addCommand(e,t,r)}addQueryStateHandler(e,t,r){this.editorCommands.addQueryStateHandler(e,t,r)}addQueryValueHandler(e,t,r){this.editorCommands.addQueryValueHandler(e,t,r)}addShortcut(e,t,r,n){this.shortcuts.add(e,t,r,n)}execCommand(e,t,r,n){return this.editorCommands.execCommand(e,t,r,n)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(EN.show(e.getContainer()),EN.hide(e.id)),e.load(),e.dispatch("show"))}hide(){var e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(EN.hide(e.getContainer()),EN.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,t){this.dispatch("ProgressState",{state:e,time:t})}load(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,r=t.getElement();if(t.removed)return"";if(r){var n=o(o({},e),{},{load:!0}),a=eo(r)?r.value:r.innerHTML,i=t.setContent(a,n);return n.no_events||t.dispatch("LoadContent",o(o({},n),{},{element:r})),i}return""}save(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,r=t.getElement();if(!r||!t.initialized||t.removed)return"";var n=o(o({},e),{},{save:!0,element:r}),a=t.getContent(n),i=o(o({},n),{},{content:a});if(i.no_events||t.dispatch("SaveContent",i),"raw"===i.format&&t.dispatch("RawSaveContent",i),a=i.content,eo(r))r.value=a;else{!e.is_removing&&t.inline||(r.innerHTML=a);var s=EN.getParent(t.id,"form");s&&AN(s.elements,(e=>e.name!==t.id||(e.value=a,!1)))}return i.element=n.element=r=null,!1!==i.set_dirty&&t.setDirty(!1),a}setContent(e,t){return Yw(this,e,t)}getContent(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=((e,t)=>o(o({},e),{},{format:t,get:!0,getInner:!0}))(t,t.format?t.format:"html");return iw(e,r).fold(R,(t=>{var r=((e,t)=>Fw(e).editor.getContent(t))(e,t);return sw(e,r,t)}))}(this,e)}insertContent(e,t){t&&(e=TN({content:e},t)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?Yw(this,this.startContent,{format:"raw"}):Yw(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.dispatch("dirty")}getContainer(){var e=this;return e.container||(e.container=e.editorContainer||EN.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=EN.get(this.id)),this.targetElm}getWin(){var e=this;if(!e.contentWindow){var t=e.iframeElement;t&&(e.contentWindow=t.contentWindow)}return e.contentWindow}getDoc(){var e=this;if(!e.contentDocument){var t=e.getWin();t&&(e.contentDocument=t.document)}return e.contentDocument}getBody(){var e,t,r=this.getDoc();return null!==(t=null!==(e=this.bodyElement)&&void 0!==e?e:null==r?void 0:r.body)&&void 0!==t?t:null}convertURL(e,t,r){var n=this,o=n.options.get,a=Id(n);return _(a)?a.call(n,e,r,!0,t):!o("convert_urls")||"link"===r||f(r)&&"LINK"===r.nodeName||0===e.indexOf("file:")||0===e.length?e:o("relative_urls")?n.documentBaseURI.toRelative(e):e=n.documentBaseURI.toAbsolute(e,o("remove_script_host"))}addVisual(e){((e,t)=>{((e,t)=>{zw(e).editor.addVisual(t)})(e,t)})(this,e)}setEditableRoot(e){((e,t)=>{e._editableRoot!==t&&(e._editableRoot=t,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),((e,t)=>{e.dispatch("EditableRootStateChange",{state:t})})(e,t))})(this,e)}hasEditableRoot(){return this._editableRoot}remove(){(e=>{if(!e.removed){var{_selectionOverrides:t,editorUpload:r}=e,n=e.getBody(),o=e.getElement();n&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&S(null==o?void 0:o.nextSibling)&&lx.remove(o.nextSibling),(e=>{e.dispatch("remove")})(e),e.editorManager.remove(e),!e.inline&&n&&(e=>{lx.setStyle(e.id,"display",e.orgDisplay)})(e),(e=>{e.dispatch("detach")})(e),lx.remove(e.getContainer()),dx(t),dx(r),e.destroy()}})(this)}destroy(e){((e,t)=>{var{selection:r,dom:n}=e;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),dx(r),dx(n)),(e=>{var t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),lx.unbind(t,"submit reset",e.formEventDelegate))})(e),(e=>{var t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;var r=e.selection;if(r){var n=r.dom;t.selection=r.win=r.dom=n.doc=null}})(e),e.destroyed=!0):e.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}var NN,RN=Bi.DOM,DN=Ht.each,BN=!1,LN=[],HN=e=>{var t=e.type;DN(zN.get(),(r=>{switch(t){case"scroll":r.dispatch("ScrollWindow",e);break;case"resize":r.dispatch("ResizeWindow",e)}}))},PN=e=>{if(e!==BN){var t=Bi.DOM;e?(t.bind(window,"resize",HN),t.bind(window,"scroll",HN)):(t.unbind(window,"resize",HN),t.unbind(window,"scroll",HN)),BN=e}},IN=e=>{var t=LN;return LN=J(LN,(t=>e!==t)),zN.activeEditor===e&&(zN.activeEditor=LN.length>0?LN[0]:null),zN.focusedEditor===e&&(zN.focusedEditor=null),t.length!==LN.length},FN="CSS1Compat"!==document.compatMode,zN=o(o({},dN),{},{baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"7.0",releaseDate:"2023-08-30",i18n:Vi,activeEditor:null,focusedEditor:null,setup(){var e=this,t="",r="",n=Wy.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/"));var o,a=window.tinymce||window.tinyMCEPreInit;if(a)t=a.base||a.baseURL,r=a.suffix;else{for(var i=document.getElementsByTagName("script"),s=0;s<i.length;s++){var l=i[s].src||"";if(""!==l){var d=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==d.indexOf(".min")&&(r=".min"),t=l.substring(0,l.lastIndexOf("/"));break}}}if(!t&&document.currentScript){var c=document.currentScript.src;-1!==c.indexOf(".min")&&(r=".min"),t=c.substring(0,c.lastIndexOf("/"))}}e.baseURL=new Wy(n).toAbsolute(t),e.documentBaseURL=n,e.baseURI=new Wy(e.baseURL),e.suffix=r,(o=e).on("AddEditor",B(wh,o)),o.on("RemoveEditor",B(xh,o))},overrideDefaults(e){var t=e.base_url;t&&this._setBaseUrl(t);var r=e.suffix;r&&(this.suffix=r),this.defaultOptions=e;var n=e.plugin_base_urls;void 0!==n&&be(n,((e,t)=>{Zi.PluginManager.urls[t]=e}))},init(e){var t,r=this,n=Ht.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),o=e=>{t=e},a=()=>{var t,i,s=0,l=[];RN.unbind(window,"ready",a),(i=e.onpageload)&&i.apply(r,[]),t=((e,t)=>{for(var r=[],n=_(t)?e=>$(r,(r=>t(r,e))):e=>q(r,e),o=0,a=e.length;o<a;o++){var i=e[o];n(i)||r.push(i)}return r})((e=>Dt.browser.isIE()||Dt.browser.isEdge()?(Ox("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):FN?(Ox("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):v(e.selector)?RN.select(e.selector):S(e.target)?[e.target]:[])(e)),Ht.each(t,(e=>{var t;(t=r.get(e.id))&&t.initialized&&!(t.getContainer()||t.getBody()).parentNode&&(IN(t),t.unbindAllNativeEvents(),t.destroy(!0),t.removed=!0)})),0===(t=Ht.grep(t,(e=>!r.get(e.id)))).length?o([]):DN(t,(a=>{((e,t)=>e.inline&&t.tagName.toLowerCase()in n)(e,a)?Ox("Could not initialize inline editor on invalid inline target element",a):((e,n,a)=>{var i=new MN(e,n,r);l.push(i),i.on("init",(()=>{++s===t.length&&o(l)})),i.targetElm=i.targetElm||a,i.render()})((e=>{var t=e.id;return t||(t=Oe(e,"name").filter((e=>!RN.get(e))).getOrThunk(RN.uniqueId),e.setAttribute("id",t)),t})(a),e,a)}))};return RN.bind(window,"ready",a),new Promise((e=>{t?e(t):o=t=>{e(t)}}))},get(e){return 0===arguments.length?LN.slice(0):v(e)?re(LN,(t=>t.id===e)).getOr(null):O(e)&&LN[e]?LN[e]:null},add(e){var t=this,r=t.get(e.id);return r===e||(null===r&&LN.push(e),PN(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),NN||(NN=e=>{var r=t.dispatch("BeforeUnload");if(r.returnValue)return e.preventDefault(),e.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",NN))),e},createEditor(e,t){return this.add(new MN(e,t,this))},remove(e){var t,r=this;if(e){if(!v(e))return t=e,w(r.get(t.id))?null:(IN(t)&&r.dispatch("RemoveEditor",{editor:t}),0===LN.length&&window.removeEventListener("beforeunload",NN),t.remove(),PN(LN.length>0),t);DN(RN.select(e),(e=>{(t=r.get(e.id))&&r.remove(t)}))}else for(var n=LN.length-1;n>=0;n--)r.remove(LN[n])},execCommand(e,t,r){var n,o=this,a=f(r)?null!==(n=r.id)&&void 0!==n?n:r.index:r;switch(e){case"mceAddEditor":if(!o.get(a)){var i=r.options;new MN(a,i,o).render()}return!0;case"mceRemoveEditor":var s=o.get(a);return s&&s.remove(),!0;case"mceToggleEditor":var l=o.get(a);return l?(l.isHidden()?l.show():l.hide(),!0):(o.execCommand("mceAddEditor",!1,r),!0)}return!!o.activeEditor&&o.activeEditor.execCommand(e,t,r)},triggerSave:()=>{DN(LN,(e=>{e.save()}))},addI18n:(e,t)=>{Vi.add(e,t)},translate:e=>Vi.translate(e),setActive(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Wy(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Wy(this.baseURL)}});zN.setup();var VN,ZN,jN,UN,WN={FakeClipboardItem:e=>({items:e,types:ve(e),getType:t=>Oe(e,t).getOrUndefined()}),write:e=>{VN.set(e)},read:()=>VN.get().getOrUndefined(),clear:(VN=ji()).clear},qN=Math.min,$N=Math.max,GN=Math.round,KN=(e,t,r)=>{var n=t.x,o=t.y,a=e.w,i=e.h,s=t.w,l=t.h,d=(r||"").split("");return"b"===d[0]&&(o+=l),"r"===d[1]&&(n+=s),"c"===d[0]&&(o+=GN(l/2)),"c"===d[1]&&(n+=GN(s/2)),"b"===d[3]&&(o-=i),"r"===d[4]&&(n-=a),"c"===d[3]&&(o-=GN(i/2)),"c"===d[4]&&(n-=GN(a/2)),YN(n,o,a,i)},YN=(e,t,r,n)=>({x:e,y:t,w:r,h:n}),XN={inflate:(e,t,r)=>YN(e.x-t,e.y-r,e.w+2*t,e.h+2*r),relativePosition:KN,findBestRelativePosition:(e,t,r,n)=>{for(var o=0;o<n.length;o++){var a=KN(e,t,n[o]);if(a.x>=r.x&&a.x+a.w<=r.w+r.x&&a.y>=r.y&&a.y+a.h<=r.h+r.y)return n[o]}return null},intersect:(e,t)=>{var r=$N(e.x,t.x),n=$N(e.y,t.y),o=qN(e.x+e.w,t.x+t.w),a=qN(e.y+e.h,t.y+t.h);return o-r<0||a-n<0?null:YN(r,n,o-r,a-n)},clamp:(e,t,r)=>{var n=e.x,o=e.y,a=e.x+e.w,i=e.y+e.h,s=t.x+t.w,l=t.y+t.h,d=$N(0,t.x-n),c=$N(0,t.y-o),u=$N(0,a-s),m=$N(0,i-l);return n+=d,o+=c,r&&(a+=d,i+=c,n-=u,o-=m),YN(n,o,(a-=u)-n,(i-=m)-o)},create:YN,fromClientRect:e=>YN(e.left,e.top,e.width,e.height)},JN=(ZN={},jN={},{load:(e,t)=>{var r='Script at URL "'.concat(t,'" failed to load'),n='Script at URL "'.concat(t,"\" did not call `tinymce.Resource.add('").concat(e,"', data)` within 1 second");if(void 0!==ZN[e])return ZN[e];var o=new Promise(((o,a)=>{var i=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,n=!1,o=null,a=e=>function(){if(!n){n=!0,null!==o&&(clearTimeout(o),o=null);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];e.apply(null,r)}},i=a(e),s=a(t);return{start:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];n||null!==o||(o=setTimeout((()=>s.apply(null,t)),r))},resolve:i,reject:s}}(o,a);jN[e]=i.resolve,Hi.ScriptLoader.loadScript(t).then((()=>i.start(n)),(()=>i.reject(r)))}));return ZN[e]=o,o},add:(e,t)=>{void 0!==jN[e]&&(jN[e](t),delete jN[e]),ZN[e]=Promise.resolve(t)},unload:e=>{delete ZN[e]}});try{var QN="__storage_test__";(UN=window.localStorage).setItem(QN,QN),UN.removeItem(QN)}catch(e){UN=(()=>{var e={},t=[],r={getItem:t=>e[t]||null,setItem:(r,n)=>{t.push(r),e[r]=String(n)},key:e=>t[e],removeItem:r=>{t=t.filter((e=>e===r)),delete e[r]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(r,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),r})()}var eR={geom:{Rect:XN},util:{Delay:ph,Tools:Ht,VK:ng,URI:Wy,EventDispatcher:iN,Observable:dN,I18n:Vi,LocalStorage:UN,ImageUploader:e=>{var t=Ax(),r=Dx(e,t);return{upload:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return r.upload(t,n?Rx(e):void 0)}}}},dom:{EventUtils:Si,TreeWalker:Zn,TextSeeker:ds,DOMUtils:Bi,ScriptLoader:Hi,RangeUtils:Lg,Serializer:Kw,StyleSheetLoader:Fa,ControlSelection:lg,BookmarkManager:Km,Selection:qw,Event:Si.Event},html:{Styles:pi,Entities:ni,Node:zh,Schema:hi,DomParser:ow,Writer:Kh,Serializer:Yh},Env:Dt,AddOnManager:Zi,Annotator:Gm,Formatter:Wx,UndoManager:$x,EditorCommands:XM,WindowManager:xx,NotificationManager:bx,EditorObservable:hN,Shortcuts:ON,Editor:MN,FocusManager:hh,EditorManager:zN,DOM:Bi.DOM,ScriptLoader:Hi.ScriptLoader,PluginManager:yx,ThemeManager:wx,ModelManager:ux,IconManager:cx,Resource:JN,FakeClipboard:WN,trim:Ht.trim,isArray:Ht.isArray,is:Ht.is,toArray:Ht.toArray,makeMap:Ht.makeMap,each:Ht.each,map:Ht.map,grep:Ht.grep,inArray:Ht.inArray,extend:Ht.extend,walk:Ht.walk,resolve:Ht.resolve,explode:Ht.explode,_addCacheSuffix:Ht._addCacheSuffix},tR=Ht.extend(zN,eR);(e=>{window.tinymce=e,window.tinyMCE=e})(tR),(t=>{try{e.exports=t}catch(e){}})(tR)}()}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}var n={};(()=>{"use strict";var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.RichTextTinyMCE6=void 0;var t=function(){function e(){this._tinymce=r(344),r(156),r(200),r(152),r(239),r(414),r(234),r(230),r(10),r(939)}return e.prototype.uniqueId=function(){return"_"+Math.random().toString(36).substr(2,9)},e.prototype.loadTinyMCE=function(){var e=this;this._tinymce.init({selector:"#text_editor"+this._domId,width:400,height:240,content_style:"body { font-size: 14px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, -apple-system, BlinkMacSystemFont, Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; }",readonly:this._context.mode.isControlDisabled,mobile:{plugins:["lists"]},toolbar:"formatting color alignment font | insert | options ",toolbar_groups:{formatting:{icon:"bold",tooltip:"Formatting",items:"bold italic underline | superscript subscript | bullist numlist"},color:{icon:"color-picker",tooltip:"Color",items:"backcolor forecolor"},alignment:{icon:"align-left",tooltip:"Alignment",items:"alignleft aligncenter alignright alignjustify indent outdent"},font:{icon:"format",tooltip:"Font",items:"styles fontfamily fontsize removeformat"},insert:{icon:"plus",tooltip:"Insert",items:"link quickimage codesample"},options:{icon:"more-drawer",tooltip:"Other Options",items:"quicklink code"}},menubar:!1,resize:!1,plugins:["quickbars","link","code","lists","codesample","image"],quickbars_selection_toolbar:!1,quickbars_insert_toolbar:!1,link_context_toolbar:!0,list_indent_on_tab:!0,statusbar:!1,placeholder:"Enter text here...",setup:function(t){t.on("change",(function(r){e._textValue=t.getContent(),e._notifyOutputChanged()})),t.on("focus",(function(t){console.log("focus event triggered"),e._tinymce.get("text_editor"+e._domId).getContainer().getElementsByClassName("tox-editor-header")[0].style.display="block"})),t.on("blur",(function(t){console.log("blur event triggered"),e._tinymce.get("text_editor"+e._domId).getContainer().getElementsByClassName("tox-editor-header")[0].style.display="none"})),t.on("PreInit",(function(t){console.log("init event triggered"),e._tinymce.get("text_editor"+e._domId).getContainer().getElementsByClassName("tox-editor-header")[0].style.display="none"}))}})},e.prototype.init=function(e,t,r,n){this._context=e,this._notifyOutputChanged=t,this._textValue=this._context.parameters.Text.raw||"",this._container=n,this._domId=this.uniqueId(),this._textEditor=document.createElement("div"),this._textEditor.setAttribute("id","text_editor"+this._domId),this._textEditor.innerHTML=this._textValue,this._container.appendChild(this._textEditor),n=this._container,this._context.mode.trackContainerResize(!0),this.loadTinyMCE()},e.prototype.setText=function(e){if(this._textValue!==e){this._textValue=e,this._textEditor.innerHTML=e;var t=this._tinymce.get("text_editor"+this._domId);null==t||t.selection,null==t||t.load()}},e.prototype.updateView=function(e){var t;this._context=e;var r=null!==(t=this._context.parameters.Text.raw)&&void 0!==t?t:"";this._context.updatedProperties.indexOf("Text")>-1&&this.setText(r);var n=this._tinymce.get("text_editor"+this._domId);n&&(n.editorContainer.style.height=this._context.mode.allocatedHeight+"px",n.editorContainer.style.width=this._context.mode.allocatedWidth+"px")},e.prototype.getOutputs=function(){return{Text:this._textValue}},e.prototype.destroy=function(){var e=this._tinymce.get("text_editor"+this._domId);null==e||e.destroy()},e}();e.RichTextTinyMCE6=t})(),pcf_tools_652ac3f36e1e4bca82eb3c1dc44e6fad=n})();
if (window.ComponentFramework && window.ComponentFramework.registerControl) {
	ComponentFramework.registerControl('rysock.RichTextTinyMCE6', pcf_tools_652ac3f36e1e4bca82eb3c1dc44e6fad.RichTextTinyMCE6);
} else {
	var rysock = rysock || {};
	rysock.RichTextTinyMCE6 = pcf_tools_652ac3f36e1e4bca82eb3c1dc44e6fad.RichTextTinyMCE6;
	pcf_tools_652ac3f36e1e4bca82eb3c1dc44e6fad = undefined;
}